var Eee=Object.defineProperty;var Tee=(k,F,$)=>F in k?Eee(k,F,{enumerable:!0,configurable:!0,writable:!0,value:$}):k[F]=$;var Ze=(k,F,$)=>(Tee(k,typeof F!="symbol"?F+"":F,$),$);import{d as e6,c as v2,I as XQ,b as nu,n as zs,J as kee,K as uJ,L as pJ,G as y2,D as _ee,C as t6,M as kH,N as XX,o as Do,a as Lo,k as Nt,q as qh,t as g2,F as jM,l as GM,y as $s,g as JQ,w as qM,z as CH,e as Bw,f as Nc,r as QQ,h as _H,p as bJ,j as vJ,_ as yJ,O as _Q,H as t3,P as Aee,Q as Oee,R as Dee,S as AQ,A as Ree,B as Mee}from"./index-C3usxq6_.js";import{e as Gh}from"./events-DVSK9dFx.js";import{a as VM}from"./artists-D03lRXEJ.js";import{A as Nee}from"./ArtistFormFields-DIpck_Ir.js";import{E as Bee}from"./EventDisplay-C9PsDbV3.js";import{c as OQ}from"./checklist-be4Ln-Mi.js";var Pee=Object.defineProperty,AH=Object.getOwnPropertySymbols,eee=Object.prototype.hasOwnProperty,tee=Object.prototype.propertyIsEnumerable,DQ=(k,F,$)=>F in k?Pee(k,F,{enumerable:!0,configurable:!0,writable:!0,value:$}):k[F]=$,n3=(k,F)=>{for(var $ in F||(F={}))eee.call(F,$)&&DQ(k,$,F[$]);if(AH)for(var $ of AH(F))tee.call(F,$)&&DQ(k,$,F[$]);return k},nee=(k,F)=>{var $={};for(var Q in k)eee.call(k,Q)&&F.indexOf(Q)<0&&($[Q]=k[Q]);if(k!=null&&AH)for(var Q of AH(k))F.indexOf(Q)<0&&tee.call(k,Q)&&($[Q]=k[Q]);return $};const oee="[vue-draggable-plus]: ";function $ee(k){console.warn(oee+k)}function Iee(k){console.error(oee+k)}function RQ(k,F,$){return $>=0&&$<k.length&&k.splice($,0,k.splice(F,1)[0]),k}function Lee(k){return k.replace(/-(\w)/g,(F,$)=>$?$.toUpperCase():"")}function Fee(k){return Object.keys(k).reduce((F,$)=>(typeof k[$]<"u"&&(F[Lee($)]=k[$]),F),{})}function MQ(k,F){return Array.isArray(k)&&k.splice(F,1),k}function NQ(k,F,$){return Array.isArray(k)&&k.splice(F,0,$),k}function Hee(k){return typeof k>"u"}function zee(k){return typeof k=="string"}function BQ(k,F,$){const Q=k.children[$];k.insertBefore(F,Q)}function JX(k){k.parentNode&&k.parentNode.removeChild(k)}function Vee(k,F=document){var $;let Q=null;return typeof(F==null?void 0:F.querySelector)=="function"?Q=($=F==null?void 0:F.querySelector)==null?void 0:$.call(F,k):Q=document.querySelector(k),Q||$ee(`Element not found: ${k}`),Q}function Uee(k,F,$=null){return function(...Q){return k.apply($,Q),F.apply($,Q)}}function Zee(k,F){const $=n3({},k);return Object.keys(F).forEach(Q=>{$[Q]?$[Q]=Uee(k[Q],F[Q]):$[Q]=F[Q]}),$}function Wee(k){return k instanceof HTMLElement}function PQ(k,F){Object.keys(k).forEach($=>{F($,k[$])})}function jee(k){return k.charCodeAt(0)===111&&k.charCodeAt(1)===110&&(k.charCodeAt(2)>122||k.charCodeAt(2)<97)}const Gee=Object.assign;/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function $Q(k,F){var $=Object.keys(k);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(k);F&&(Q=Q.filter(function(ue){return Object.getOwnPropertyDescriptor(k,ue).enumerable})),$.push.apply($,Q)}return $}function Xh(k){for(var F=1;F<arguments.length;F++){var $=arguments[F]!=null?arguments[F]:{};F%2?$Q(Object($),!0).forEach(function(Q){qee(k,Q,$[Q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(k,Object.getOwnPropertyDescriptors($)):$Q(Object($)).forEach(function(Q){Object.defineProperty(k,Q,Object.getOwnPropertyDescriptor($,Q))})}return k}function SH(k){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?SH=function(F){return typeof F}:SH=function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},SH(k)}function qee(k,F,$){return F in k?Object.defineProperty(k,F,{value:$,enumerable:!0,configurable:!0,writable:!0}):k[F]=$,k}function r0(){return r0=Object.assign||function(k){for(var F=1;F<arguments.length;F++){var $=arguments[F];for(var Q in $)Object.prototype.hasOwnProperty.call($,Q)&&(k[Q]=$[Q])}return k},r0.apply(this,arguments)}function Kee(k,F){if(k==null)return{};var $={},Q=Object.keys(k),ue,ye;for(ye=0;ye<Q.length;ye++)ue=Q[ye],!(F.indexOf(ue)>=0)&&($[ue]=k[ue]);return $}function Yee(k,F){if(k==null)return{};var $=Kee(k,F),Q,ue;if(Object.getOwnPropertySymbols){var ye=Object.getOwnPropertySymbols(k);for(ue=0;ue<ye.length;ue++)Q=ye[ue],!(F.indexOf(Q)>=0)&&Object.prototype.propertyIsEnumerable.call(k,Q)&&($[Q]=k[Q])}return $}var Xee="1.15.2";function s0(k){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(k)}var a0=s0(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),n6=s0(/Edge/i),IQ=s0(/firefox/i),KM=s0(/safari/i)&&!s0(/chrome/i)&&!s0(/android/i),see=s0(/iP(ad|od|hone)/i),ree=s0(/chrome/i)&&s0(/android/i),aee={capture:!1,passive:!1};function Ps(k,F,$){k.addEventListener(F,$,!a0&&aee)}function ys(k,F,$){k.removeEventListener(F,$,!a0&&aee)}function OH(k,F){if(F){if(F[0]===">"&&(F=F.substring(1)),k)try{if(k.matches)return k.matches(F);if(k.msMatchesSelector)return k.msMatchesSelector(F);if(k.webkitMatchesSelector)return k.webkitMatchesSelector(F)}catch{return!1}return!1}}function Jee(k){return k.host&&k!==document&&k.host.nodeType?k.host:k.parentNode}function ug(k,F,$,Q){if(k){$=$||document;do{if(F!=null&&(F[0]===">"?k.parentNode===$&&OH(k,F):OH(k,F))||Q&&k===$)return k;if(k===$)break}while(k=Jee(k))}return null}var LQ=/\s+/g;function Gd(k,F,$){if(k&&F)if(k.classList)k.classList[$?"add":"remove"](F);else{var Q=(" "+k.className+" ").replace(LQ," ").replace(" "+F+" "," ");k.className=(Q+($?" "+F:"")).replace(LQ," ")}}function io(k,F,$){var Q=k&&k.style;if(Q){if($===void 0)return document.defaultView&&document.defaultView.getComputedStyle?$=document.defaultView.getComputedStyle(k,""):k.currentStyle&&($=k.currentStyle),F===void 0?$:$[F];!(F in Q)&&F.indexOf("webkit")===-1&&(F="-webkit-"+F),Q[F]=$+(typeof $=="string"?"":"px")}}function s3(k,F){var $="";if(typeof k=="string")$=k;else do{var Q=io(k,"transform");Q&&Q!=="none"&&($=Q+" "+$)}while(!F&&(k=k.parentNode));var ue=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return ue&&new ue($)}function cee(k,F,$){if(k){var Q=k.getElementsByTagName(F),ue=0,ye=Q.length;if($)for(;ue<ye;ue++)$(Q[ue],ue);return Q}return[]}function Yh(){var k=document.scrollingElement;return k||document.documentElement}function ac(k,F,$,Q,ue){if(!(!k.getBoundingClientRect&&k!==window)){var ye,re,be,we,nt,xt,_t;if(k!==window&&k.parentNode&&k!==Yh()?(ye=k.getBoundingClientRect(),re=ye.top,be=ye.left,we=ye.bottom,nt=ye.right,xt=ye.height,_t=ye.width):(re=0,be=0,we=window.innerHeight,nt=window.innerWidth,xt=window.innerHeight,_t=window.innerWidth),(F||$)&&k!==window&&(ue=ue||k.parentNode,!a0))do if(ue&&ue.getBoundingClientRect&&(io(ue,"transform")!=="none"||$&&io(ue,"position")!=="static")){var rn=ue.getBoundingClientRect();re-=rn.top+parseInt(io(ue,"border-top-width")),be-=rn.left+parseInt(io(ue,"border-left-width")),we=re+ye.height,nt=be+ye.width;break}while(ue=ue.parentNode);if(Q&&k!==window){var zt=s3(ue||k),In=zt&&zt.a,jt=zt&&zt.d;zt&&(re/=jt,be/=In,_t/=In,xt/=jt,we=re+xt,nt=be+_t)}return{top:re,left:be,bottom:we,right:nt,width:_t,height:xt}}}function FQ(k,F,$){for(var Q=b2(k,!0),ue=ac(k)[F];Q;){var ye=ac(Q)[$],re=void 0;if(re=ue>=ye,!re)return Q;if(Q===Yh())break;Q=b2(Q,!1)}return!1}function r3(k,F,$,Q){for(var ue=0,ye=0,re=k.children;ye<re.length;){if(re[ye].style.display!=="none"&&re[ye]!==lo.ghost&&(Q||re[ye]!==lo.dragged)&&ug(re[ye],$.draggable,k,!1)){if(ue===F)return re[ye];ue++}ye++}return null}function CJ(k,F){for(var $=k.lastElementChild;$&&($===lo.ghost||io($,"display")==="none"||F&&!OH($,F));)$=$.previousElementSibling;return $||null}function ef(k,F){var $=0;if(!k||!k.parentNode)return-1;for(;k=k.previousElementSibling;)k.nodeName.toUpperCase()!=="TEMPLATE"&&k!==lo.clone&&(!F||OH(k,F))&&$++;return $}function HQ(k){var F=0,$=0,Q=Yh();if(k)do{var ue=s3(k),ye=ue.a,re=ue.d;F+=k.scrollLeft*ye,$+=k.scrollTop*re}while(k!==Q&&(k=k.parentNode));return[F,$]}function Qee(k,F){for(var $ in k)if(k.hasOwnProperty($)){for(var Q in F)if(F.hasOwnProperty(Q)&&F[Q]===k[$][Q])return Number($)}return-1}function b2(k,F){if(!k||!k.getBoundingClientRect)return Yh();var $=k,Q=!1;do if($.clientWidth<$.scrollWidth||$.clientHeight<$.scrollHeight){var ue=io($);if($.clientWidth<$.scrollWidth&&(ue.overflowX=="auto"||ue.overflowX=="scroll")||$.clientHeight<$.scrollHeight&&(ue.overflowY=="auto"||ue.overflowY=="scroll")){if(!$.getBoundingClientRect||$===document.body)return Yh();if(Q||F)return $;Q=!0}}while($=$.parentNode);return Yh()}function ete(k,F){if(k&&F)for(var $ in F)F.hasOwnProperty($)&&(k[$]=F[$]);return k}function QX(k,F){return Math.round(k.top)===Math.round(F.top)&&Math.round(k.left)===Math.round(F.left)&&Math.round(k.height)===Math.round(F.height)&&Math.round(k.width)===Math.round(F.width)}var YM;function iee(k,F){return function(){if(!YM){var $=arguments,Q=this;$.length===1?k.call(Q,$[0]):k.apply(Q,$),YM=setTimeout(function(){YM=void 0},F)}}}function tte(){clearTimeout(YM),YM=void 0}function lee(k,F,$){k.scrollLeft+=F,k.scrollTop+=$}function uee(k){var F=window.Polymer,$=window.jQuery||window.Zepto;return F&&F.dom?F.dom(k).cloneNode(!0):$?$(k).clone(!0)[0]:k.cloneNode(!0)}function dee(k,F,$){var Q={};return Array.from(k.children).forEach(function(ue){var ye,re,be,we;if(!(!ug(ue,F.draggable,k,!1)||ue.animated||ue===$)){var nt=ac(ue);Q.left=Math.min((ye=Q.left)!==null&&ye!==void 0?ye:1/0,nt.left),Q.top=Math.min((re=Q.top)!==null&&re!==void 0?re:1/0,nt.top),Q.right=Math.max((be=Q.right)!==null&&be!==void 0?be:-1/0,nt.right),Q.bottom=Math.max((we=Q.bottom)!==null&&we!==void 0?we:-1/0,nt.bottom)}}),Q.width=Q.right-Q.left,Q.height=Q.bottom-Q.top,Q.x=Q.left,Q.y=Q.top,Q}var Kd="Sortable"+new Date().getTime();function nte(){var k=[],F;return{captureAnimationState:function(){if(k=[],!!this.options.animation){var $=[].slice.call(this.el.children);$.forEach(function(Q){if(!(io(Q,"display")==="none"||Q===lo.ghost)){k.push({target:Q,rect:ac(Q)});var ue=Xh({},k[k.length-1].rect);if(Q.thisAnimationDuration){var ye=s3(Q,!0);ye&&(ue.top-=ye.f,ue.left-=ye.e)}Q.fromRect=ue}})}},addAnimationState:function($){k.push($)},removeAnimationState:function($){k.splice(Qee(k,{target:$}),1)},animateAll:function($){var Q=this;if(!this.options.animation){clearTimeout(F),typeof $=="function"&&$();return}var ue=!1,ye=0;k.forEach(function(re){var be=0,we=re.target,nt=we.fromRect,xt=ac(we),_t=we.prevFromRect,rn=we.prevToRect,zt=re.rect,In=s3(we,!0);In&&(xt.top-=In.f,xt.left-=In.e),we.toRect=xt,we.thisAnimationDuration&&QX(_t,xt)&&!QX(nt,xt)&&(zt.top-xt.top)/(zt.left-xt.left)===(nt.top-xt.top)/(nt.left-xt.left)&&(be=ste(zt,_t,rn,Q.options)),QX(xt,nt)||(we.prevFromRect=nt,we.prevToRect=xt,be||(be=Q.options.animation),Q.animate(we,zt,xt,be)),be&&(ue=!0,ye=Math.max(ye,be),clearTimeout(we.animationResetTimer),we.animationResetTimer=setTimeout(function(){we.animationTime=0,we.prevFromRect=null,we.fromRect=null,we.prevToRect=null,we.thisAnimationDuration=null},be),we.thisAnimationDuration=be)}),clearTimeout(F),ue?F=setTimeout(function(){typeof $=="function"&&$()},ye):typeof $=="function"&&$(),k=[]},animate:function($,Q,ue,ye){if(ye){io($,"transition",""),io($,"transform","");var re=s3(this.el),be=re&&re.a,we=re&&re.d,nt=(Q.left-ue.left)/(be||1),xt=(Q.top-ue.top)/(we||1);$.animatingX=!!nt,$.animatingY=!!xt,io($,"transform","translate3d("+nt+"px,"+xt+"px,0)"),this.forRepaintDummy=ote($),io($,"transition","transform "+ye+"ms"+(this.options.easing?" "+this.options.easing:"")),io($,"transform","translate3d(0,0,0)"),typeof $.animated=="number"&&clearTimeout($.animated),$.animated=setTimeout(function(){io($,"transition",""),io($,"transform",""),$.animated=!1,$.animatingX=!1,$.animatingY=!1},ye)}}}}function ote(k){return k.offsetWidth}function ste(k,F,$,Q){return Math.sqrt(Math.pow(F.top-k.top,2)+Math.pow(F.left-k.left,2))/Math.sqrt(Math.pow(F.top-$.top,2)+Math.pow(F.left-$.left,2))*Q.animation}var Jk=[],eJ={initializeByDefault:!0},o6={mount:function(k){for(var F in eJ)eJ.hasOwnProperty(F)&&!(F in k)&&(k[F]=eJ[F]);Jk.forEach(function($){if($.pluginName===k.pluginName)throw"Sortable: Cannot mount plugin ".concat(k.pluginName," more than once")}),Jk.push(k)},pluginEvent:function(k,F,$){var Q=this;this.eventCanceled=!1,$.cancel=function(){Q.eventCanceled=!0};var ue=k+"Global";Jk.forEach(function(ye){F[ye.pluginName]&&(F[ye.pluginName][ue]&&F[ye.pluginName][ue](Xh({sortable:F},$)),F.options[ye.pluginName]&&F[ye.pluginName][k]&&F[ye.pluginName][k](Xh({sortable:F},$)))})},initializePlugins:function(k,F,$,Q){Jk.forEach(function(re){var be=re.pluginName;if(!(!k.options[be]&&!re.initializeByDefault)){var we=new re(k,F,k.options);we.sortable=k,we.options=k.options,k[be]=we,r0($,we.defaults)}});for(var ue in k.options)if(k.options.hasOwnProperty(ue)){var ye=this.modifyOption(k,ue,k.options[ue]);typeof ye<"u"&&(k.options[ue]=ye)}},getEventProperties:function(k,F){var $={};return Jk.forEach(function(Q){typeof Q.eventProperties=="function"&&r0($,Q.eventProperties.call(F[Q.pluginName],k))}),$},modifyOption:function(k,F,$){var Q;return Jk.forEach(function(ue){k[ue.pluginName]&&ue.optionListeners&&typeof ue.optionListeners[F]=="function"&&(Q=ue.optionListeners[F].call(k[ue.pluginName],$))}),Q}};function rte(k){var F=k.sortable,$=k.rootEl,Q=k.name,ue=k.targetEl,ye=k.cloneEl,re=k.toEl,be=k.fromEl,we=k.oldIndex,nt=k.newIndex,xt=k.oldDraggableIndex,_t=k.newDraggableIndex,rn=k.originalEvent,zt=k.putSortable,In=k.extraEventProperties;if(F=F||$&&$[Kd],!!F){var jt,et=F.options,dn="on"+Q.charAt(0).toUpperCase()+Q.substr(1);window.CustomEvent&&!a0&&!n6?jt=new CustomEvent(Q,{bubbles:!0,cancelable:!0}):(jt=document.createEvent("Event"),jt.initEvent(Q,!0,!0)),jt.to=re||$,jt.from=be||$,jt.item=ue||$,jt.clone=ye,jt.oldIndex=we,jt.newIndex=nt,jt.oldDraggableIndex=xt,jt.newDraggableIndex=_t,jt.originalEvent=rn,jt.pullMode=zt?zt.lastPutMode:void 0;var Yn=Xh(Xh({},In),o6.getEventProperties(Q,F));for(var U in Yn)jt[U]=Yn[U];$&&$.dispatchEvent(jt),et[dn]&&et[dn].call(F,jt)}}var ate=["evt"],Gu=function(k,F){var $=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Q=$.evt,ue=Yee($,ate);o6.pluginEvent.bind(lo)(k,F,Xh({dragEl:Jt,parentEl:xa,ghostEl:Eo,rootEl:Kr,nextEl:Nw,lastDownEl:wH,cloneEl:da,cloneHidden:p2,dragStarted:UM,putSortable:Ti,activeSortable:lo.active,originalEvent:Q,oldIndex:o3,oldDraggableIndex:XM,newIndex:qd,newDraggableIndex:h2,hideGhostForTarget:hee,unhideGhostForTarget:pee,cloneNowHidden:function(){p2=!0},cloneNowShown:function(){p2=!1},dispatchSortableEvent:function(ye){tu({sortable:F,name:ye,originalEvent:Q})}},ue))};function tu(k){rte(Xh({putSortable:Ti,cloneEl:da,targetEl:Jt,rootEl:Kr,oldIndex:o3,oldDraggableIndex:XM,newIndex:qd,newDraggableIndex:h2},k))}var Jt,xa,Eo,Kr,Nw,wH,da,p2,o3,qd,XM,h2,pH,Ti,e3=!1,DH=!1,RH=[],Dw,lg,tJ,nJ,zQ,VQ,UM,Qk,JM,QM=!1,bH=!1,xH,ll,oJ=[],dJ=!1,MH=[],BH=typeof document<"u",vH=see,UQ=n6||a0?"cssFloat":"float",cte=BH&&!ree&&!see&&"draggable"in document.createElement("div"),mee=function(){if(BH){if(a0)return!1;var k=document.createElement("x");return k.style.cssText="pointer-events:auto",k.style.pointerEvents==="auto"}}(),fee=function(k,F){var $=io(k),Q=parseInt($.width)-parseInt($.paddingLeft)-parseInt($.paddingRight)-parseInt($.borderLeftWidth)-parseInt($.borderRightWidth),ue=r3(k,0,F),ye=r3(k,1,F),re=ue&&io(ue),be=ye&&io(ye),we=re&&parseInt(re.marginLeft)+parseInt(re.marginRight)+ac(ue).width,nt=be&&parseInt(be.marginLeft)+parseInt(be.marginRight)+ac(ye).width;if($.display==="flex")return $.flexDirection==="column"||$.flexDirection==="column-reverse"?"vertical":"horizontal";if($.display==="grid")return $.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(ue&&re.float&&re.float!=="none"){var xt=re.float==="left"?"left":"right";return ye&&(be.clear==="both"||be.clear===xt)?"vertical":"horizontal"}return ue&&(re.display==="block"||re.display==="flex"||re.display==="table"||re.display==="grid"||we>=Q&&$[UQ]==="none"||ye&&$[UQ]==="none"&&we+nt>Q)?"vertical":"horizontal"},ite=function(k,F,$){var Q=$?k.left:k.top,ue=$?k.right:k.bottom,ye=$?k.width:k.height,re=$?F.left:F.top,be=$?F.right:F.bottom,we=$?F.width:F.height;return Q===re||ue===be||Q+ye/2===re+we/2},lte=function(k,F){var $;return RH.some(function(Q){var ue=Q[Kd].options.emptyInsertThreshold;if(!(!ue||CJ(Q))){var ye=ac(Q),re=k>=ye.left-ue&&k<=ye.right+ue,be=F>=ye.top-ue&&F<=ye.bottom+ue;if(re&&be)return $=Q}}),$},gee=function(k){function F(ue,ye){return function(re,be,we,nt){var xt=re.options.group.name&&be.options.group.name&&re.options.group.name===be.options.group.name;if(ue==null&&(ye||xt))return!0;if(ue==null||ue===!1)return!1;if(ye&&ue==="clone")return ue;if(typeof ue=="function")return F(ue(re,be,we,nt),ye)(re,be,we,nt);var _t=(ye?re:be).options.group.name;return ue===!0||typeof ue=="string"&&ue===_t||ue.join&&ue.indexOf(_t)>-1}}var $={},Q=k.group;(!Q||SH(Q)!="object")&&(Q={name:Q}),$.name=Q.name,$.checkPull=F(Q.pull,!0),$.checkPut=F(Q.put),$.revertClone=Q.revertClone,k.group=$},hee=function(){!mee&&Eo&&io(Eo,"display","none")},pee=function(){!mee&&Eo&&io(Eo,"display","")};BH&&!ree&&document.addEventListener("click",function(k){if(DH)return k.preventDefault(),k.stopPropagation&&k.stopPropagation(),k.stopImmediatePropagation&&k.stopImmediatePropagation(),DH=!1,!1},!0);var Rw=function(k){if(Jt){k=k.touches?k.touches[0]:k;var F=lte(k.clientX,k.clientY);if(F){var $={};for(var Q in k)k.hasOwnProperty(Q)&&($[Q]=k[Q]);$.target=$.rootEl=F,$.preventDefault=void 0,$.stopPropagation=void 0,F[Kd]._onDragOver($)}}},ute=function(k){Jt&&Jt.parentNode[Kd]._isOutsideThisEl(k.target)};function lo(k,F){if(!(k&&k.nodeType&&k.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(k));this.el=k,this.options=F=r0({},F),k[Kd]=this;var $={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(k.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return fee(k,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(ye,re){ye.setData("Text",re.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:lo.supportPointer!==!1&&"PointerEvent"in window&&!KM,emptyInsertThreshold:5};o6.initializePlugins(this,k,$);for(var Q in $)!(Q in F)&&(F[Q]=$[Q]);gee(F);for(var ue in this)ue.charAt(0)==="_"&&typeof this[ue]=="function"&&(this[ue]=this[ue].bind(this));this.nativeDraggable=F.forceFallback?!1:cte,this.nativeDraggable&&(this.options.touchStartThreshold=1),F.supportPointer?Ps(k,"pointerdown",this._onTapStart):(Ps(k,"mousedown",this._onTapStart),Ps(k,"touchstart",this._onTapStart)),this.nativeDraggable&&(Ps(k,"dragover",this),Ps(k,"dragenter",this)),RH.push(this.el),F.store&&F.store.get&&this.sort(F.store.get(this)||[]),r0(this,nte())}lo.prototype={constructor:lo,_isOutsideThisEl:function(k){!this.el.contains(k)&&k!==this.el&&(Qk=null)},_getDirection:function(k,F){return typeof this.options.direction=="function"?this.options.direction.call(this,k,F,Jt):this.options.direction},_onTapStart:function(k){if(k.cancelable){var F=this,$=this.el,Q=this.options,ue=Q.preventOnFilter,ye=k.type,re=k.touches&&k.touches[0]||k.pointerType&&k.pointerType==="touch"&&k,be=(re||k).target,we=k.target.shadowRoot&&(k.path&&k.path[0]||k.composedPath&&k.composedPath()[0])||be,nt=Q.filter;if(vte($),!Jt&&!(/mousedown|pointerdown/.test(ye)&&k.button!==0||Q.disabled)&&!we.isContentEditable&&!(!this.nativeDraggable&&KM&&be&&be.tagName.toUpperCase()==="SELECT")&&(be=ug(be,Q.draggable,$,!1),!(be&&be.animated)&&wH!==be)){if(o3=ef(be),XM=ef(be,Q.draggable),typeof nt=="function"){if(nt.call(this,k,be,this)){tu({sortable:F,rootEl:we,name:"filter",targetEl:be,toEl:$,fromEl:$}),Gu("filter",F,{evt:k}),ue&&k.cancelable&&k.preventDefault();return}}else if(nt&&(nt=nt.split(",").some(function(xt){if(xt=ug(we,xt.trim(),$,!1),xt)return tu({sortable:F,rootEl:xt,name:"filter",targetEl:be,fromEl:$,toEl:$}),Gu("filter",F,{evt:k}),!0}),nt)){ue&&k.cancelable&&k.preventDefault();return}Q.handle&&!ug(we,Q.handle,$,!1)||this._prepareDragStart(k,re,be)}}},_prepareDragStart:function(k,F,$){var Q=this,ue=Q.el,ye=Q.options,re=ue.ownerDocument,be;if($&&!Jt&&$.parentNode===ue){var we=ac($);if(Kr=ue,Jt=$,xa=Jt.parentNode,Nw=Jt.nextSibling,wH=$,pH=ye.group,lo.dragged=Jt,Dw={target:Jt,clientX:(F||k).clientX,clientY:(F||k).clientY},zQ=Dw.clientX-we.left,VQ=Dw.clientY-we.top,this._lastX=(F||k).clientX,this._lastY=(F||k).clientY,Jt.style["will-change"]="all",be=function(){if(Gu("delayEnded",Q,{evt:k}),lo.eventCanceled){Q._onDrop();return}Q._disableDelayedDragEvents(),!IQ&&Q.nativeDraggable&&(Jt.draggable=!0),Q._triggerDragStart(k,F),tu({sortable:Q,name:"choose",originalEvent:k}),Gd(Jt,ye.chosenClass,!0)},ye.ignore.split(",").forEach(function(nt){cee(Jt,nt.trim(),sJ)}),Ps(re,"dragover",Rw),Ps(re,"mousemove",Rw),Ps(re,"touchmove",Rw),Ps(re,"mouseup",Q._onDrop),Ps(re,"touchend",Q._onDrop),Ps(re,"touchcancel",Q._onDrop),IQ&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Jt.draggable=!0),Gu("delayStart",this,{evt:k}),ye.delay&&(!ye.delayOnTouchOnly||F)&&(!this.nativeDraggable||!(n6||a0))){if(lo.eventCanceled){this._onDrop();return}Ps(re,"mouseup",Q._disableDelayedDrag),Ps(re,"touchend",Q._disableDelayedDrag),Ps(re,"touchcancel",Q._disableDelayedDrag),Ps(re,"mousemove",Q._delayedDragTouchMoveHandler),Ps(re,"touchmove",Q._delayedDragTouchMoveHandler),ye.supportPointer&&Ps(re,"pointermove",Q._delayedDragTouchMoveHandler),Q._dragStartTimer=setTimeout(be,ye.delay)}else be()}},_delayedDragTouchMoveHandler:function(k){var F=k.touches?k.touches[0]:k;Math.max(Math.abs(F.clientX-this._lastX),Math.abs(F.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Jt&&sJ(Jt),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var k=this.el.ownerDocument;ys(k,"mouseup",this._disableDelayedDrag),ys(k,"touchend",this._disableDelayedDrag),ys(k,"touchcancel",this._disableDelayedDrag),ys(k,"mousemove",this._delayedDragTouchMoveHandler),ys(k,"touchmove",this._delayedDragTouchMoveHandler),ys(k,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(k,F){F=F||k.pointerType=="touch"&&k,!this.nativeDraggable||F?this.options.supportPointer?Ps(document,"pointermove",this._onTouchMove):F?Ps(document,"touchmove",this._onTouchMove):Ps(document,"mousemove",this._onTouchMove):(Ps(Jt,"dragend",this),Ps(Kr,"dragstart",this._onDragStart));try{document.selection?EH(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(k,F){if(e3=!1,Kr&&Jt){Gu("dragStarted",this,{evt:F}),this.nativeDraggable&&Ps(document,"dragover",ute);var $=this.options;!k&&Gd(Jt,$.dragClass,!1),Gd(Jt,$.ghostClass,!0),lo.active=this,k&&this._appendGhost(),tu({sortable:this,name:"start",originalEvent:F})}else this._nulling()},_emulateDragOver:function(){if(lg){this._lastX=lg.clientX,this._lastY=lg.clientY,hee();for(var k=document.elementFromPoint(lg.clientX,lg.clientY),F=k;k&&k.shadowRoot&&(k=k.shadowRoot.elementFromPoint(lg.clientX,lg.clientY),k!==F);)F=k;if(Jt.parentNode[Kd]._isOutsideThisEl(k),F)do{if(F[Kd]){var $=void 0;if($=F[Kd]._onDragOver({clientX:lg.clientX,clientY:lg.clientY,target:k,rootEl:F}),$&&!this.options.dragoverBubble)break}k=F}while(F=F.parentNode);pee()}},_onTouchMove:function(k){if(Dw){var F=this.options,$=F.fallbackTolerance,Q=F.fallbackOffset,ue=k.touches?k.touches[0]:k,ye=Eo&&s3(Eo,!0),re=Eo&&ye&&ye.a,be=Eo&&ye&&ye.d,we=vH&&ll&&HQ(ll),nt=(ue.clientX-Dw.clientX+Q.x)/(re||1)+(we?we[0]-oJ[0]:0)/(re||1),xt=(ue.clientY-Dw.clientY+Q.y)/(be||1)+(we?we[1]-oJ[1]:0)/(be||1);if(!lo.active&&!e3){if($&&Math.max(Math.abs(ue.clientX-this._lastX),Math.abs(ue.clientY-this._lastY))<$)return;this._onDragStart(k,!0)}if(Eo){ye?(ye.e+=nt-(tJ||0),ye.f+=xt-(nJ||0)):ye={a:1,b:0,c:0,d:1,e:nt,f:xt};var _t="matrix(".concat(ye.a,",").concat(ye.b,",").concat(ye.c,",").concat(ye.d,",").concat(ye.e,",").concat(ye.f,")");io(Eo,"webkitTransform",_t),io(Eo,"mozTransform",_t),io(Eo,"msTransform",_t),io(Eo,"transform",_t),tJ=nt,nJ=xt,lg=ue}k.cancelable&&k.preventDefault()}},_appendGhost:function(){if(!Eo){var k=this.options.fallbackOnBody?document.body:Kr,F=ac(Jt,!0,vH,!0,k),$=this.options;if(vH){for(ll=k;io(ll,"position")==="static"&&io(ll,"transform")==="none"&&ll!==document;)ll=ll.parentNode;ll!==document.body&&ll!==document.documentElement?(ll===document&&(ll=Yh()),F.top+=ll.scrollTop,F.left+=ll.scrollLeft):ll=Yh(),oJ=HQ(ll)}Eo=Jt.cloneNode(!0),Gd(Eo,$.ghostClass,!1),Gd(Eo,$.fallbackClass,!0),Gd(Eo,$.dragClass,!0),io(Eo,"transition",""),io(Eo,"transform",""),io(Eo,"box-sizing","border-box"),io(Eo,"margin",0),io(Eo,"top",F.top),io(Eo,"left",F.left),io(Eo,"width",F.width),io(Eo,"height",F.height),io(Eo,"opacity","0.8"),io(Eo,"position",vH?"absolute":"fixed"),io(Eo,"zIndex","100000"),io(Eo,"pointerEvents","none"),lo.ghost=Eo,k.appendChild(Eo),io(Eo,"transform-origin",zQ/parseInt(Eo.style.width)*100+"% "+VQ/parseInt(Eo.style.height)*100+"%")}},_onDragStart:function(k,F){var $=this,Q=k.dataTransfer,ue=$.options;if(Gu("dragStart",this,{evt:k}),lo.eventCanceled){this._onDrop();return}Gu("setupClone",this),lo.eventCanceled||(da=uee(Jt),da.removeAttribute("id"),da.draggable=!1,da.style["will-change"]="",this._hideClone(),Gd(da,this.options.chosenClass,!1),lo.clone=da),$.cloneId=EH(function(){Gu("clone",$),!lo.eventCanceled&&($.options.removeCloneOnHide||Kr.insertBefore(da,Jt),$._hideClone(),tu({sortable:$,name:"clone"}))}),!F&&Gd(Jt,ue.dragClass,!0),F?(DH=!0,$._loopId=setInterval($._emulateDragOver,50)):(ys(document,"mouseup",$._onDrop),ys(document,"touchend",$._onDrop),ys(document,"touchcancel",$._onDrop),Q&&(Q.effectAllowed="move",ue.setData&&ue.setData.call($,Q,Jt)),Ps(document,"drop",$),io(Jt,"transform","translateZ(0)")),e3=!0,$._dragStartId=EH($._dragStarted.bind($,F,k)),Ps(document,"selectstart",$),UM=!0,KM&&io(document.body,"user-select","none")},_onDragOver:function(k){var F=this.el,$=k.target,Q,ue,ye,re=this.options,be=re.group,we=lo.active,nt=pH===be,xt=re.sort,_t=Ti||we,rn,zt=this,In=!1;if(dJ)return;function jt(bo,qe){Gu(bo,zt,Xh({evt:k,isOwner:nt,axis:rn?"vertical":"horizontal",revert:ye,dragRect:Q,targetRect:ue,canSort:xt,fromSortable:_t,target:$,completed:dn,onMove:function(Fo,an){return yH(Kr,F,Jt,Q,Fo,ac(Fo),k,an)},changed:Yn},qe))}function et(){jt("dragOverAnimationCapture"),zt.captureAnimationState(),zt!==_t&&_t.captureAnimationState()}function dn(bo){return jt("dragOverCompleted",{insertion:bo}),bo&&(nt?we._hideClone():we._showClone(zt),zt!==_t&&(Gd(Jt,Ti?Ti.options.ghostClass:we.options.ghostClass,!1),Gd(Jt,re.ghostClass,!0)),Ti!==zt&&zt!==lo.active?Ti=zt:zt===lo.active&&Ti&&(Ti=null),_t===zt&&(zt._ignoreWhileAnimating=$),zt.animateAll(function(){jt("dragOverAnimationComplete"),zt._ignoreWhileAnimating=null}),zt!==_t&&(_t.animateAll(),_t._ignoreWhileAnimating=null)),($===Jt&&!Jt.animated||$===F&&!$.animated)&&(Qk=null),!re.dragoverBubble&&!k.rootEl&&$!==document&&(Jt.parentNode[Kd]._isOutsideThisEl(k.target),!bo&&Rw(k)),!re.dragoverBubble&&k.stopPropagation&&k.stopPropagation(),In=!0}function Yn(){qd=ef(Jt),h2=ef(Jt,re.draggable),tu({sortable:zt,name:"change",toEl:F,newIndex:qd,newDraggableIndex:h2,originalEvent:k})}if(k.preventDefault!==void 0&&k.cancelable&&k.preventDefault(),$=ug($,re.draggable,F,!0),jt("dragOver"),lo.eventCanceled)return In;if(Jt.contains(k.target)||$.animated&&$.animatingX&&$.animatingY||zt._ignoreWhileAnimating===$)return dn(!1);if(DH=!1,we&&!re.disabled&&(nt?xt||(ye=xa!==Kr):Ti===this||(this.lastPutMode=pH.checkPull(this,we,Jt,k))&&be.checkPut(this,we,Jt,k))){if(rn=this._getDirection(k,$)==="vertical",Q=ac(Jt),jt("dragOverValid"),lo.eventCanceled)return In;if(ye)return xa=Kr,et(),this._hideClone(),jt("revert"),lo.eventCanceled||(Nw?Kr.insertBefore(Jt,Nw):Kr.appendChild(Jt)),dn(!0);var U=CJ(F,re.draggable);if(!U||gte(k,rn,this)&&!U.animated){if(U===Jt)return dn(!1);if(U&&F===k.target&&($=U),$&&(ue=ac($)),yH(Kr,F,Jt,Q,$,ue,k,!!$)!==!1)return et(),U&&U.nextSibling?F.insertBefore(Jt,U.nextSibling):F.appendChild(Jt),xa=F,Yn(),dn(!0)}else if(U&&fte(k,rn,this)){var At=r3(F,0,re,!0);if(At===Jt)return dn(!1);if($=At,ue=ac($),yH(Kr,F,Jt,Q,$,ue,k,!1)!==!1)return et(),F.insertBefore(Jt,At),xa=F,Yn(),dn(!0)}else if($.parentNode===F){ue=ac($);var wn=0,Yt,ie=Jt.parentNode!==F,Et=!ite(Jt.animated&&Jt.toRect||Q,$.animated&&$.toRect||ue,rn),Je=rn?"top":"left",Le=FQ($,"top","top")||FQ(Jt,"top","top"),de=Le?Le.scrollTop:void 0;Qk!==$&&(Yt=ue[Je],QM=!1,bH=!Et&&re.invertSwap||ie),wn=hte(k,$,ue,rn,Et?1:re.swapThreshold,re.invertedSwapThreshold==null?re.swapThreshold:re.invertedSwapThreshold,bH,Qk===$);var X;if(wn!==0){var Fn=ef(Jt);do Fn-=wn,X=xa.children[Fn];while(X&&(io(X,"display")==="none"||X===Eo))}if(wn===0||X===$)return dn(!1);Qk=$,JM=wn;var Cn=$.nextElementSibling,yt=!1;yt=wn===1;var T=yH(Kr,F,Jt,Q,$,ue,k,yt);if(T!==!1)return(T===1||T===-1)&&(yt=T===1),dJ=!0,setTimeout(mte,30),et(),yt&&!Cn?F.appendChild(Jt):$.parentNode.insertBefore(Jt,yt?Cn:$),Le&&lee(Le,0,de-Le.scrollTop),xa=Jt.parentNode,Yt!==void 0&&!bH&&(xH=Math.abs(Yt-ac($)[Je])),Yn(),dn(!0)}if(F.contains(Jt))return dn(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){ys(document,"mousemove",this._onTouchMove),ys(document,"touchmove",this._onTouchMove),ys(document,"pointermove",this._onTouchMove),ys(document,"dragover",Rw),ys(document,"mousemove",Rw),ys(document,"touchmove",Rw)},_offUpEvents:function(){var k=this.el.ownerDocument;ys(k,"mouseup",this._onDrop),ys(k,"touchend",this._onDrop),ys(k,"pointerup",this._onDrop),ys(k,"touchcancel",this._onDrop),ys(document,"selectstart",this)},_onDrop:function(k){var F=this.el,$=this.options;if(qd=ef(Jt),h2=ef(Jt,$.draggable),Gu("drop",this,{evt:k}),xa=Jt&&Jt.parentNode,qd=ef(Jt),h2=ef(Jt,$.draggable),lo.eventCanceled){this._nulling();return}e3=!1,bH=!1,QM=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),mJ(this.cloneId),mJ(this._dragStartId),this.nativeDraggable&&(ys(document,"drop",this),ys(F,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),KM&&io(document.body,"user-select",""),io(Jt,"transform",""),k&&(UM&&(k.cancelable&&k.preventDefault(),!$.dropBubble&&k.stopPropagation()),Eo&&Eo.parentNode&&Eo.parentNode.removeChild(Eo),(Kr===xa||Ti&&Ti.lastPutMode!=="clone")&&da&&da.parentNode&&da.parentNode.removeChild(da),Jt&&(this.nativeDraggable&&ys(Jt,"dragend",this),sJ(Jt),Jt.style["will-change"]="",UM&&!e3&&Gd(Jt,Ti?Ti.options.ghostClass:this.options.ghostClass,!1),Gd(Jt,this.options.chosenClass,!1),tu({sortable:this,name:"unchoose",toEl:xa,newIndex:null,newDraggableIndex:null,originalEvent:k}),Kr!==xa?(qd>=0&&(tu({rootEl:xa,name:"add",toEl:xa,fromEl:Kr,originalEvent:k}),tu({sortable:this,name:"remove",toEl:xa,originalEvent:k}),tu({rootEl:xa,name:"sort",toEl:xa,fromEl:Kr,originalEvent:k}),tu({sortable:this,name:"sort",toEl:xa,originalEvent:k})),Ti&&Ti.save()):qd!==o3&&qd>=0&&(tu({sortable:this,name:"update",toEl:xa,originalEvent:k}),tu({sortable:this,name:"sort",toEl:xa,originalEvent:k})),lo.active&&((qd==null||qd===-1)&&(qd=o3,h2=XM),tu({sortable:this,name:"end",toEl:xa,originalEvent:k}),this.save()))),this._nulling()},_nulling:function(){Gu("nulling",this),Kr=Jt=xa=Eo=Nw=da=wH=p2=Dw=lg=UM=qd=h2=o3=XM=Qk=JM=Ti=pH=lo.dragged=lo.ghost=lo.clone=lo.active=null,MH.forEach(function(k){k.checked=!0}),MH.length=tJ=nJ=0},handleEvent:function(k){switch(k.type){case"drop":case"dragend":this._onDrop(k);break;case"dragenter":case"dragover":Jt&&(this._onDragOver(k),dte(k));break;case"selectstart":k.preventDefault();break}},toArray:function(){for(var k=[],F,$=this.el.children,Q=0,ue=$.length,ye=this.options;Q<ue;Q++)F=$[Q],ug(F,ye.draggable,this.el,!1)&&k.push(F.getAttribute(ye.dataIdAttr)||bte(F));return k},sort:function(k,F){var $={},Q=this.el;this.toArray().forEach(function(ue,ye){var re=Q.children[ye];ug(re,this.options.draggable,Q,!1)&&($[ue]=re)},this),F&&this.captureAnimationState(),k.forEach(function(ue){$[ue]&&(Q.removeChild($[ue]),Q.appendChild($[ue]))}),F&&this.animateAll()},save:function(){var k=this.options.store;k&&k.set&&k.set(this)},closest:function(k,F){return ug(k,F||this.options.draggable,this.el,!1)},option:function(k,F){var $=this.options;if(F===void 0)return $[k];var Q=o6.modifyOption(this,k,F);typeof Q<"u"?$[k]=Q:$[k]=F,k==="group"&&gee($)},destroy:function(){Gu("destroy",this);var k=this.el;k[Kd]=null,ys(k,"mousedown",this._onTapStart),ys(k,"touchstart",this._onTapStart),ys(k,"pointerdown",this._onTapStart),this.nativeDraggable&&(ys(k,"dragover",this),ys(k,"dragenter",this)),Array.prototype.forEach.call(k.querySelectorAll("[draggable]"),function(F){F.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),RH.splice(RH.indexOf(this.el),1),this.el=k=null},_hideClone:function(){if(!p2){if(Gu("hideClone",this),lo.eventCanceled)return;io(da,"display","none"),this.options.removeCloneOnHide&&da.parentNode&&da.parentNode.removeChild(da),p2=!0}},_showClone:function(k){if(k.lastPutMode!=="clone"){this._hideClone();return}if(p2){if(Gu("showClone",this),lo.eventCanceled)return;Jt.parentNode==Kr&&!this.options.group.revertClone?Kr.insertBefore(da,Jt):Nw?Kr.insertBefore(da,Nw):Kr.appendChild(da),this.options.group.revertClone&&this.animate(Jt,da),io(da,"display",""),p2=!1}}};function dte(k){k.dataTransfer&&(k.dataTransfer.dropEffect="move"),k.cancelable&&k.preventDefault()}function yH(k,F,$,Q,ue,ye,re,be){var we,nt=k[Kd],xt=nt.options.onMove,_t;return window.CustomEvent&&!a0&&!n6?we=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(we=document.createEvent("Event"),we.initEvent("move",!0,!0)),we.to=F,we.from=k,we.dragged=$,we.draggedRect=Q,we.related=ue||F,we.relatedRect=ye||ac(F),we.willInsertAfter=be,we.originalEvent=re,k.dispatchEvent(we),xt&&(_t=xt.call(nt,we,re)),_t}function sJ(k){k.draggable=!1}function mte(){dJ=!1}function fte(k,F,$){var Q=ac(r3($.el,0,$.options,!0)),ue=dee($.el,$.options,Eo),ye=10;return F?k.clientX<ue.left-ye||k.clientY<Q.top&&k.clientX<Q.right:k.clientY<ue.top-ye||k.clientY<Q.bottom&&k.clientX<Q.left}function gte(k,F,$){var Q=ac(CJ($.el,$.options.draggable)),ue=dee($.el,$.options,Eo),ye=10;return F?k.clientX>ue.right+ye||k.clientY>Q.bottom&&k.clientX>Q.left:k.clientY>ue.bottom+ye||k.clientX>Q.right&&k.clientY>Q.top}function hte(k,F,$,Q,ue,ye,re,be){var we=Q?k.clientY:k.clientX,nt=Q?$.height:$.width,xt=Q?$.top:$.left,_t=Q?$.bottom:$.right,rn=!1;if(!re){if(be&&xH<nt*ue){if(!QM&&(JM===1?we>xt+nt*ye/2:we<_t-nt*ye/2)&&(QM=!0),QM)rn=!0;else if(JM===1?we<xt+xH:we>_t-xH)return-JM}else if(we>xt+nt*(1-ue)/2&&we<_t-nt*(1-ue)/2)return pte(F)}return rn=rn||re,rn&&(we<xt+nt*ye/2||we>_t-nt*ye/2)?we>xt+nt/2?1:-1:0}function pte(k){return ef(Jt)<ef(k)?1:-1}function bte(k){for(var F=k.tagName+k.className+k.src+k.href+k.textContent,$=F.length,Q=0;$--;)Q+=F.charCodeAt($);return Q.toString(36)}function vte(k){MH.length=0;for(var F=k.getElementsByTagName("input"),$=F.length;$--;){var Q=F[$];Q.checked&&MH.push(Q)}}function EH(k){return setTimeout(k,0)}function mJ(k){return clearTimeout(k)}BH&&Ps(document,"touchmove",function(k){(lo.active||e3)&&k.cancelable&&k.preventDefault()});lo.utils={on:Ps,off:ys,css:io,find:cee,is:function(k,F){return!!ug(k,F,k,!1)},extend:ete,throttle:iee,closest:ug,toggleClass:Gd,clone:uee,index:ef,nextTick:EH,cancelNextTick:mJ,detectDirection:fee,getChild:r3};lo.get=function(k){return k[Kd]};lo.mount=function(){for(var k=arguments.length,F=new Array(k),$=0;$<k;$++)F[$]=arguments[$];F[0].constructor===Array&&(F=F[0]),F.forEach(function(Q){if(!Q.prototype||!Q.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(Q));Q.utils&&(lo.utils=Xh(Xh({},lo.utils),Q.utils)),o6.mount(Q)})};lo.create=function(k,F){return new lo(k,F)};lo.version=Xee;var rc=[],ZM,fJ,gJ=!1,rJ,aJ,NH,WM;function yte(){function k(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var F in this)F.charAt(0)==="_"&&typeof this[F]=="function"&&(this[F]=this[F].bind(this))}return k.prototype={dragStarted:function(F){var $=F.originalEvent;this.sortable.nativeDraggable?Ps(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Ps(document,"pointermove",this._handleFallbackAutoScroll):$.touches?Ps(document,"touchmove",this._handleFallbackAutoScroll):Ps(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(F){var $=F.originalEvent;!this.options.dragOverBubble&&!$.rootEl&&this._handleAutoScroll($)},drop:function(){this.sortable.nativeDraggable?ys(document,"dragover",this._handleAutoScroll):(ys(document,"pointermove",this._handleFallbackAutoScroll),ys(document,"touchmove",this._handleFallbackAutoScroll),ys(document,"mousemove",this._handleFallbackAutoScroll)),ZQ(),TH(),tte()},nulling:function(){NH=fJ=ZM=gJ=WM=rJ=aJ=null,rc.length=0},_handleFallbackAutoScroll:function(F){this._handleAutoScroll(F,!0)},_handleAutoScroll:function(F,$){var Q=this,ue=(F.touches?F.touches[0]:F).clientX,ye=(F.touches?F.touches[0]:F).clientY,re=document.elementFromPoint(ue,ye);if(NH=F,$||this.options.forceAutoScrollFallback||n6||a0||KM){cJ(F,this.options,re,$);var be=b2(re,!0);gJ&&(!WM||ue!==rJ||ye!==aJ)&&(WM&&ZQ(),WM=setInterval(function(){var we=b2(document.elementFromPoint(ue,ye),!0);we!==be&&(be=we,TH()),cJ(F,Q.options,we,$)},10),rJ=ue,aJ=ye)}else{if(!this.options.bubbleScroll||b2(re,!0)===Yh()){TH();return}cJ(F,this.options,b2(re,!1),!1)}}},r0(k,{pluginName:"scroll",initializeByDefault:!0})}function TH(){rc.forEach(function(k){clearInterval(k.pid)}),rc=[]}function ZQ(){clearInterval(WM)}var cJ=iee(function(k,F,$,Q){if(F.scroll){var ue=(k.touches?k.touches[0]:k).clientX,ye=(k.touches?k.touches[0]:k).clientY,re=F.scrollSensitivity,be=F.scrollSpeed,we=Yh(),nt=!1,xt;fJ!==$&&(fJ=$,TH(),ZM=F.scroll,xt=F.scrollFn,ZM===!0&&(ZM=b2($,!0)));var _t=0,rn=ZM;do{var zt=rn,In=ac(zt),jt=In.top,et=In.bottom,dn=In.left,Yn=In.right,U=In.width,At=In.height,wn=void 0,Yt=void 0,ie=zt.scrollWidth,Et=zt.scrollHeight,Je=io(zt),Le=zt.scrollLeft,de=zt.scrollTop;zt===we?(wn=U<ie&&(Je.overflowX==="auto"||Je.overflowX==="scroll"||Je.overflowX==="visible"),Yt=At<Et&&(Je.overflowY==="auto"||Je.overflowY==="scroll"||Je.overflowY==="visible")):(wn=U<ie&&(Je.overflowX==="auto"||Je.overflowX==="scroll"),Yt=At<Et&&(Je.overflowY==="auto"||Je.overflowY==="scroll"));var X=wn&&(Math.abs(Yn-ue)<=re&&Le+U<ie)-(Math.abs(dn-ue)<=re&&!!Le),Fn=Yt&&(Math.abs(et-ye)<=re&&de+At<Et)-(Math.abs(jt-ye)<=re&&!!de);if(!rc[_t])for(var Cn=0;Cn<=_t;Cn++)rc[Cn]||(rc[Cn]={});(rc[_t].vx!=X||rc[_t].vy!=Fn||rc[_t].el!==zt)&&(rc[_t].el=zt,rc[_t].vx=X,rc[_t].vy=Fn,clearInterval(rc[_t].pid),(X!=0||Fn!=0)&&(nt=!0,rc[_t].pid=setInterval((function(){Q&&this.layer===0&&lo.active._onTouchMove(NH);var yt=rc[this.layer].vy?rc[this.layer].vy*be:0,T=rc[this.layer].vx?rc[this.layer].vx*be:0;typeof xt=="function"&&xt.call(lo.dragged.parentNode[Kd],T,yt,k,NH,rc[this.layer].el)!=="continue"||lee(rc[this.layer].el,T,yt)}).bind({layer:_t}),24))),_t++}while(F.bubbleScroll&&rn!==we&&(rn=b2(rn,!1)));gJ=nt}},30),bee=function(k){var F=k.originalEvent,$=k.putSortable,Q=k.dragEl,ue=k.activeSortable,ye=k.dispatchSortableEvent,re=k.hideGhostForTarget,be=k.unhideGhostForTarget;if(F){var we=$||ue;re();var nt=F.changedTouches&&F.changedTouches.length?F.changedTouches[0]:F,xt=document.elementFromPoint(nt.clientX,nt.clientY);be(),we&&!we.el.contains(xt)&&(ye("spill"),this.onSpill({dragEl:Q,putSortable:$}))}};function SJ(){}SJ.prototype={startIndex:null,dragStart:function(k){var F=k.oldDraggableIndex;this.startIndex=F},onSpill:function(k){var F=k.dragEl,$=k.putSortable;this.sortable.captureAnimationState(),$&&$.captureAnimationState();var Q=r3(this.sortable.el,this.startIndex,this.options);Q?this.sortable.el.insertBefore(F,Q):this.sortable.el.appendChild(F),this.sortable.animateAll(),$&&$.animateAll()},drop:bee};r0(SJ,{pluginName:"revertOnSpill"});function wJ(){}wJ.prototype={onSpill:function(k){var F=k.dragEl,$=k.putSortable,Q=$||this.sortable;Q.captureAnimationState(),F.parentNode&&F.parentNode.removeChild(F),Q.animateAll()},drop:bee};r0(wJ,{pluginName:"removeOnSpill"});lo.mount(new yte);lo.mount(wJ,SJ);function Cte(k){return k==null?k:JSON.parse(JSON.stringify(k))}function Ste(k){pJ()&&_ee(k)}function wte(k){pJ()?t6(k):kH(k)}let vee=null,yee=null;function WQ(k=null,F=null){vee=k,yee=F}function xte(){return{data:vee,clonedData:yee}}const jQ=Symbol("cloneElement");function Ete(...k){var F,$;const Q=(F=pJ())==null?void 0:F.proxy;let ue=null;const ye=k[0];let[,re,be]=k;Array.isArray(nu(re))||(be=re,re=null);let we=null;const{immediate:nt=!0,clone:xt=Cte,customUpdate:_t}=($=nu(be))!=null?$:{};function rn(Et){var Je;const{from:Le,oldIndex:de,item:X}=Et;ue=Array.from(Le.childNodes);const Fn=nu((Je=nu(re))==null?void 0:Je[de]),Cn=xt(Fn);WQ(Fn,Cn),X[jQ]=Cn}function zt(Et){const Je=Et.item[jQ];if(!Hee(Je)){if(JX(Et.item),XX(re)){const Le=[...nu(re)];re.value=NQ(Le,Et.newDraggableIndex,Je);return}NQ(nu(re),Et.newDraggableIndex,Je)}}function In(Et){const{from:Je,item:Le,oldIndex:de,oldDraggableIndex:X,pullMode:Fn,clone:Cn}=Et;if(BQ(Je,Le,de),Fn==="clone"){JX(Cn);return}if(XX(re)){const yt=[...nu(re)];re.value=MQ(yt,X);return}MQ(nu(re),X)}function jt(Et){if(_t){_t(Et);return}const{from:Je,item:Le,oldIndex:de,oldDraggableIndex:X,newDraggableIndex:Fn}=Et;if(JX(Le),BQ(Je,Le,de),XX(re)){const Cn=[...nu(re)];re.value=RQ(Cn,X,Fn);return}RQ(nu(re),X,Fn)}function et(Et){const{newIndex:Je,oldIndex:Le,from:de,to:X}=Et;let Fn=null;const Cn=Je===Le&&de===X;try{if(Cn){let yt=null;ue==null||ue.some((T,bo)=>{if(yt&&(ue==null?void 0:ue.length)!==X.childNodes.length)return de.insertBefore(yt,T.nextSibling),!0;const qe=X.childNodes[bo];yt=X==null?void 0:X.replaceChild(T,qe)})}}catch(yt){Fn=yt}finally{ue=null}kH(()=>{if(WQ(),Fn)throw Fn})}const dn={onUpdate:jt,onStart:rn,onAdd:zt,onRemove:In,onEnd:et};function Yn(Et){const Je=nu(ye);return Et||(Et=zee(Je)?Vee(Je,Q==null?void 0:Q.$el):Je),Et&&!Wee(Et)&&(Et=Et.$el),Et||Iee("Root element not found"),Et}function U(){var Et;const Je=(Et=nu(be))!=null?Et:{},Le=nee(Je,["immediate","clone"]);return PQ(Le,(de,X)=>{jee(de)&&(Le[de]=(Fn,...Cn)=>{const yt=xte();return Gee(Fn,yt),X(Fn,...Cn)})}),Zee(re===null?{}:dn,Le)}const At=Et=>{Et=Yn(Et),we&&wn.destroy(),we=new lo(Et,U())};y2(()=>be,()=>{we&&PQ(U(),(Et,Je)=>{we==null||we.option(Et,Je)})},{deep:!0});const wn={option:(Et,Je)=>we==null?void 0:we.option(Et,Je),destroy:()=>{we==null||we.destroy(),we=null},save:()=>we==null?void 0:we.save(),toArray:()=>we==null?void 0:we.toArray(),closest:(...Et)=>we==null?void 0:we.closest(...Et)},Yt=()=>wn==null?void 0:wn.option("disabled",!0),ie=()=>wn==null?void 0:wn.option("disabled",!1);return wte(()=>{nt&&At()}),Ste(wn.destroy),n3({start:At,pause:Yt,resume:ie},wn)}const hJ=["update","start","add","remove","choose","unchoose","end","sort","filter","clone","move","change"],Tte=["clone","animation","ghostClass","group","sort","disabled","store","handle","draggable","swapThreshold","invertSwap","invertedSwapThreshold","removeCloneOnHide","direction","chosenClass","dragClass","ignore","filter","preventOnFilter","easing","setData","dropBubble","dragoverBubble","dataIdAttr","delay","delayOnTouchOnly","touchStartThreshold","forceFallback","fallbackClass","fallbackOnBody","fallbackTolerance","fallbackOffset","supportPointer","emptyInsertThreshold","scroll","forceAutoScrollFallback","scrollSensitivity","scrollSpeed","bubbleScroll","modelValue","tag","target","customUpdate",...hJ.map(k=>`on${k.replace(/^\S/,F=>F.toUpperCase())}`)],kte=e6({name:"VueDraggable",model:{prop:"modelValue",event:"update:modelValue"},props:Tte,emits:["update:modelValue",...hJ],setup(k,{slots:F,emit:$,expose:Q,attrs:ue}){const ye=hJ.reduce((xt,_t)=>{const rn=`on${_t.replace(/^\S/,zt=>zt.toUpperCase())}`;return xt[rn]=(...zt)=>$(_t,...zt),xt},{}),re=v2(()=>{const xt=XQ(k),_t=nee(xt,["modelValue"]),rn=Object.entries(_t).reduce((zt,[In,jt])=>{const et=nu(jt);return et!==void 0&&(zt[In]=et),zt},{});return n3(n3({},ye),Fee(n3(n3({},ue),rn)))}),be=v2({get:()=>k.modelValue,set:xt=>$("update:modelValue",xt)}),we=zs(),nt=kee(Ete(k.target||we,be,re));return Q(nt),()=>{var xt;return uJ(k.tag||"div",{ref:we},(xt=F==null?void 0:F.default)==null?void 0:xt.call(F,nt))}}}),C2=k=>(bJ("data-v-16c8af81"),k=k(),vJ(),k),_te={class:"artist-selector"},Ate={class:"search-section"},Ote={class:"available-section"},Dte=C2(()=>Nt("h3",null,"Available Artists",-1)),Rte={key:0,class:"artist-list"},Mte=["onClick"],Nte={key:1,class:"empty-state"},Bte={key:2,class:"empty-state"},Pte=C2(()=>Nt("p",null,"All artists selected",-1)),$te=[Pte],Ite={class:"selected-section"},Lte={key:0,class:"empty-state"},Fte=C2(()=>Nt("p",null,"No artists selected yet",-1)),Hte=[Fte],zte=C2(()=>Nt("div",{class:"drag-handle"},"⋮⋮",-1)),Vte={class:"artist-name"},Ute={class:"artist-actions"},Zte=["onClick"],Wte=C2(()=>Nt("div",{class:"modal-backdrop"},null,-1)),jte=C2(()=>Nt("h2",null,"Quick Add Artist",-1)),Gte={class:"form-group"},qte=C2(()=>Nt("label",{for:"quick-add-image"},"Artist Image",-1)),Kte={key:0,class:"image-preview"},Yte=["src"],Xte=C2(()=>Nt("div",{class:"field-hint"},"Bild: wird resized",-1)),Jte={key:0,class:"error"},Qte={class:"form-actions"},ene=["disabled"],tne=e6({__name:"ArtistSelector",props:{modelValue:{default:()=>[]},artistOrder:{default:""}},emits:["update:modelValue","update:artistOrder"],setup(k,{emit:F}){const $=k,Q=F,ue=zs([]),ye=zs(""),re=zs([]),be=zs(!1),we=zs(!1),nt=zs(""),xt=zs({name:"",description:"",link:"",youtube:"",soundcloud:"",bandcamp:""}),_t=zs(null),rn=zs(null);v2(()=>re.value.map(Je=>ue.value.find(Le=>Le.id===Je)).filter(Je=>Je!==void 0));const zt=v2(()=>{const Je=ye.value.toLowerCase();return ue.value.filter(Le=>!re.value.includes(Le.id)).filter(Le=>Le.name.toLowerCase().includes(Je)).sort((Le,de)=>Le.name.localeCompare(de.name))}),In=v2(()=>re.value.join(","));async function jt(){try{const Je=await VM.getAll();if(ue.value=Je.results||[],$.artistOrder){const Le=$.artistOrder.split(",").map(de=>parseInt(de.trim())).filter(de=>!isNaN(de));re.value=Le.filter(de=>ue.value.some(X=>X.id===de))}else $.modelValue&&$.modelValue.length>0&&(re.value=[...$.modelValue])}catch(Je){console.error("Failed to load artists:",Je),nt.value="Failed to load artists"}}function et(Je){return ue.value.find(Le=>Le.id===Je)}function dn(Je){re.value.includes(Je)||(re.value.push(Je),At())}function Yn(Je){re.value=re.value.filter(Le=>Le!==Je),At()}function U(){At()}function At(){Q("update:modelValue",[...re.value]),Q("update:artistOrder",In.value)}function wn(){xt.value={name:"",description:"",link:"",youtube:"",soundcloud:"",bandcamp:""},_t.value=null,rn.value=null,nt.value="",be.value=!0}function Yt(){be.value=!1,nt.value=""}function ie(Je){if(Je.target.files&&Je.target.files[0]){_t.value=Je.target.files[0];const Le=new FileReader;Le.onload=de=>{var X;rn.value=(X=de.target)==null?void 0:X.result},Le.readAsDataURL(_t.value)}}async function Et(){if(!xt.value.name.trim()){nt.value="Artist name is required";return}we.value=!0,nt.value="";try{const Je=await VM.create({name:xt.value.name.trim(),description:xt.value.description.trim(),link:xt.value.link.trim(),youtube:xt.value.youtube.trim(),soundcloud:xt.value.soundcloud.trim(),bandcamp:xt.value.bandcamp.trim()});if(_t.value&&Je.id){await VM.uploadImage(Je.id,_t.value);const Le=await VM.getById(Je.id);ue.value.push(Le)}else ue.value.push(Je);Je.id&&dn(Je.id),Yt()}catch(Je){nt.value=Je.message||"Failed to create artist"}finally{we.value=!1}}return y2(()=>$.modelValue,Je=>{Je&&!$.artistOrder&&(re.value=[...Je])},{deep:!0}),y2(()=>$.artistOrder,Je=>{if(Je&&ue.value.length>0){const Le=Je.split(",").map(de=>parseInt(de.trim())).filter(de=>!isNaN(de));re.value=Le.filter(de=>ue.value.some(X=>X.id===de))}}),t6(()=>{jt()}),(Je,Le)=>{const de=QQ("router-link");return Do(),Lo("div",_te,[Nt("div",Ate,[qh(Nt("input",{class:"search-input","onUpdate:modelValue":Le[0]||(Le[0]=X=>ye.value=X),type:"text",placeholder:"Search artists..."},null,512),[[g2,ye.value]]),Nt("button",{class:"btn-quick-add",type:"button",onClick:wn},"Quick Add Artist")]),Nt("div",Ote,[Dte,zt.value.length>0?(Do(),Lo("div",Rte,[(Do(!0),Lo(jM,null,GM(zt.value,X=>(Do(),Lo("div",{class:"artist-item",key:X.id,onClick:Fn=>X.id&&dn(X.id)},$s(X.name),9,Mte))),128))])):ye.value?(Do(),Lo("div",Nte,[Nt("p",null,'No artists found matching "'+$s(ye.value)+'"',1)])):(Do(),Lo("div",Bte,$te))]),Nt("div",Ite,[Nt("h3",null,"Selected Artists "+$s(re.value.length>0?"(drag to reorder)":""),1),re.value.length===0?(Do(),Lo("div",Lte,Hte)):(Do(),JQ(nu(kte),{key:1,modelValue:re.value,"onUpdate:modelValue":Le[1]||(Le[1]=X=>re.value=X),onEnd:U,animation:150,handle:".drag-handle"},{default:qM(()=>[(Do(!0),Lo(jM,null,GM(re.value,X=>{var Fn;return Do(),Lo("div",{class:"selected-item",key:X},[zte,Nt("div",Vte,$s((Fn=et(X))==null?void 0:Fn.name),1),Nt("div",Ute,[Bw(de,{class:"btn-edit",to:`/admin/artists/${X}`},{default:qM(()=>[_H("Edit")]),_:2},1032,["to"]),Nt("button",{class:"btn-remove",type:"button",onClick:Cn=>Yn(X)},"Remove",8,Zte)])])}),128))]),_:1},8,["modelValue"]))]),be.value?(Do(),Lo("div",{key:0,class:"modal",onClick:CH(Yt,["self"])},[Wte,Nt("div",{class:"modal-content",onClick:Le[3]||(Le[3]=CH(()=>{},["stop"]))},[jte,Nt("form",{onSubmit:CH(Et,["prevent"])},[Bw(Nee,{modelValue:xt.value,"onUpdate:modelValue":Le[2]||(Le[2]=X=>xt.value=X),compact:!0,"id-prefix":"quick-add"},{"image-field":qM(()=>[Nt("div",Gte,[qte,rn.value?(Do(),Lo("div",Kte,[Nt("img",{src:rn.value,alt:"Artist image preview"},null,8,Yte)])):Nc("",!0),Nt("input",{id:"quick-add-image",type:"file",accept:"image/*",onChange:ie},null,32),Xte])]),_:1},8,["modelValue"]),nt.value?(Do(),Lo("div",Jte,$s(nt.value),1)):Nc("",!0),Nt("div",Qte,[Nt("button",{class:"btn-primary",type:"submit",disabled:we.value},$s(we.value?"Creating...":"Create & Add"),9,ene),Nt("button",{class:"btn-secondary",type:"button",onClick:Yt},"Cancel")])],32)])])):Nc("",!0)])}}}),nne=yJ(tne,[["__scopeId","data-v-16c8af81"]]),one=k=>(bJ("data-v-4161eb72"),k=k(),vJ(),k),sne={class:"event-checklist-tab"},rne={class:"checklist-header"},ane=one(()=>Nt("h3",null,"Event Checklist",-1)),cne={class:"checklist-stats"},ine={class:"stat-row"},lne={class:"progress-bar"},une={class:"stat-badges"},dne=["title"],mne={key:1,class:"stat-badge badge-progress"},fne=["title"],gne=["title"],hne={key:0,class:"loading"},pne={key:1,class:"error"},bne={key:2,class:"checklist-content"},vne={class:"phase-header"},yne={class:"phase-title"},Cne={class:"phase-count"},Sne={key:0,class:"checklist-items"},wne={class:"item-main"},xne={class:"item-name"},Ene={key:0,class:"item-meta"},Tne={key:0,class:"item-modified"},kne={key:1,class:"item-editor"},_ne={class:"item-status-buttons"},Ane=["onClick","title"],One={key:1,class:"empty"},Dne={key:0,class:"empty"},Rne=e6({__name:"EventChecklistTab",props:{eventId:{}},setup(k){const F=k,$=zs([]),Q=zs(!1),ue=zs(""),ye=zs(!1),re=zs(!1),be=zs(!1),we={before:"BEFORE - Vor der Veranstaltung",during:"DURING - Während der Veranstaltung",after:"AFTER - Nach der Veranstaltung"},nt=[{value:"initial",label:"Nicht gestartet",shortLabel:"Offen",color:"#ffffff"},{value:"inProgress",label:"In Bearbeitung",shortLabel:"In Arbeit",color:"#fed7aa"},{value:"blocked",label:"Blockiert",shortLabel:"Blockiert",color:"#fecaca"},{value:"done",label:"Fertig",shortLabel:"Fertig",color:"#bbf7d0"},{value:"unnecessary",label:"Unnötig",shortLabel:"Unnötig",color:"#e5e7eb"}],xt=v2(()=>{const et={before:[],during:[],after:[]};return $.value.forEach(dn=>{dn.status==="done"&&!ye.value||dn.status==="blocked"&&!re.value||dn.status==="unnecessary"&&!be.value||et[dn.phase].push(dn)}),et}),_t=v2(()=>{const et=$.value.length,dn=$.value.filter(wn=>wn.status==="done").length,Yn=$.value.filter(wn=>wn.status==="inProgress").length,U=$.value.filter(wn=>wn.status==="blocked").length,At=$.value.filter(wn=>wn.status==="unnecessary").length;return{total:et,done:dn,inProgress:Yn,blocked:U,unnecessary:At,percentage:et>0?Math.round(dn/et*100):0}});async function rn(){Q.value=!0,ue.value="";try{const et=await OQ.getByEventId(F.eventId);$.value=et.results||[]}catch(et){ue.value=et.message||"Failed to load checklist items"}finally{Q.value=!1}}async function zt(et,dn){const Yn=et.status;et.status=dn;try{const U=await OQ.updateStatus(et.id,dn);et.modified=U.modified,et.edited_by=U.edited_by,et.edited_by_username=U.edited_by_username}catch(U){et.status=Yn,alert("Failed to update status: "+U.message)}}function In(et){var dn;return((dn=nt.find(Yn=>Yn.value===et))==null?void 0:dn.color)||"#ffffff"}function jt(et){const dn=new Date(et),U=new Date().getTime()-dn.getTime(),At=Math.floor(U/6e4),wn=dn.toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"});if(At<1)return`gerade eben (${wn})`;if(At<60)return`vor ${At} Min (${wn})`;const Yt=Math.floor(At/60);if(Yt<24)return`vor ${Yt} Std (${wn})`;const ie=Math.floor(Yt/24);return ie<7?`vor ${ie} Tag${ie>1?"en":""} (${wn})`:dn.toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"})+` (${wn})`}return t6(()=>{rn()}),(et,dn)=>(Do(),Lo("div",sne,[Nt("div",rne,[ane,Nt("div",cne,[Nt("div",ine,[Nt("strong",null,$s(_t.value.done)+" / "+$s(_t.value.total),1),_H("abgeschlossen ("+$s(_t.value.percentage)+"%)",1)]),Nt("div",lne,[Nt("div",{class:"progress-fill",style:_Q({width:_t.value.percentage+"%"})},null,4)]),Nt("div",une,[_t.value.done>0?(Do(),Lo("button",{key:0,class:t3(["stat-badge badge-done",{active:ye.value}]),onClick:dn[0]||(dn[0]=Yn=>ye.value=!ye.value),title:ye.value?"Fertige ausblenden":"Fertige einblenden"},$s(_t.value.done)+" Fertig "+$s(ye.value?"✓":"+"),11,dne)):Nc("",!0),_t.value.inProgress>0?(Do(),Lo("div",mne,$s(_t.value.inProgress)+" In Bearbeitung",1)):Nc("",!0),_t.value.blocked>0?(Do(),Lo("button",{key:2,class:t3(["stat-badge badge-blocked",{active:re.value}]),onClick:dn[1]||(dn[1]=Yn=>re.value=!re.value),title:re.value?"Blockierte ausblenden":"Blockierte einblenden"},$s(_t.value.blocked)+" Blockiert "+$s(re.value?"✓":"+"),11,fne)):Nc("",!0),_t.value.unnecessary>0?(Do(),Lo("button",{key:3,class:t3(["stat-badge badge-unnecessary",{active:be.value}]),onClick:dn[2]||(dn[2]=Yn=>be.value=!be.value),title:be.value?"Unnötige ausblenden":"Unnötige einblenden"},$s(_t.value.unnecessary)+" Unnötig "+$s(be.value?"✓":"+"),11,gne)):Nc("",!0)])])]),Q.value?(Do(),Lo("div",hne,"Lade Checkliste...")):ue.value?(Do(),Lo("div",pne,$s(ue.value),1)):(Do(),Lo("div",bne,[(Do(!0),Lo(jM,null,GM(xt.value,(Yn,U)=>(Do(),Lo("div",{class:"phase-section",key:U},[Nt("div",vne,[Nt("h4",yne,$s(we[U]),1),Nt("div",Cne,$s(Yn.length)+" Items",1)]),Yn.length?(Do(),Lo("div",Sne,[(Do(!0),Lo(jM,null,GM(Yn,At=>(Do(),Lo("div",{class:"checklist-item",key:At.id,style:_Q({backgroundColor:In(At.status)})},[Nt("div",wne,[Nt("div",xne,$s(At.name),1)]),At.modified||At.edited_by_username?(Do(),Lo("div",Ene,[At.modified?(Do(),Lo("span",Tne,$s(jt(At.modified)),1)):Nc("",!0),At.edited_by_username?(Do(),Lo("span",kne,$s(At.edited_by_username),1)):Nc("",!0)])):Nc("",!0),Nt("div",_ne,[(Do(),Lo(jM,null,GM(nt,wn=>Nt("button",{class:t3(["status-btn",{active:At.status===wn.value,["status-"+wn.value]:!0}]),key:wn.value,onClick:Yt=>zt(At,wn.value),title:wn.label},$s(wn.shortLabel),11,Ane)),64))])],4))),128))])):(Do(),Lo("div",One,"Keine Items für diese Phase"))]))),128)),$.value.length?Nc("",!0):(Do(),Lo("div",Dne,"Keine Checklisten-Items vorhanden. Diese werden automatisch beim Erstellen eines Events angelegt."))]))]))}}),Mne=yJ(Rne,[["__scopeId","data-v-4161eb72"]]);var Nne={exports:{}};(function(k){(function(){var F=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var t=typeof e;return t==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":t==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":t},$=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},Q=function(e,t){var o=Array.prototype.slice.call(e);return o.sort(t)},ue=function(e,t){return ye(function(o,r){return e.eq(t(o),t(r))})},ye=function(e){return{eq:e}},re=ye(function(e,t){return e===t}),be=re,we=function(e){return ye(function(t,o){if(t.length!==o.length)return!1;for(var r=t.length,c=0;c<r;c++)if(!e.eq(t[c],o[c]))return!1;return!0})},nt=function(e,t){return ue(we(e),function(o){return Q(o,t)})},xt=function(e){return ye(function(t,o){var r=Object.keys(t),c=Object.keys(o);if(!nt(be).eq(r,c))return!1;for(var u=r.length,f=0;f<u;f++){var b=r[f];if(!e.eq(t[b],o[b]))return!1}return!0})},_t=ye(function(e,t){if(e===t)return!0;var o=F(e),r=F(t);return o!==r?!1:$(o)?e===t:o==="array"?we(_t).eq(e,t):o==="object"?xt(_t).eq(e,t):!1});const rn=Object.getPrototypeOf,zt=(e,t,o)=>{var r;return o(e,t.prototype)?!0:((r=e.constructor)==null?void 0:r.name)===t.name},In=e=>{const t=typeof e;return e===null?"null":t==="object"&&Array.isArray(e)?"array":t==="object"&&zt(e,String,(o,r)=>r.isPrototypeOf(o))?"string":t},jt=e=>t=>In(t)===e,et=e=>t=>typeof t===e,dn=e=>t=>e===t,Yn=(e,t)=>At(e)&&zt(e,t,(o,r)=>rn(o)===r),U=jt("string"),At=jt("object"),wn=e=>Yn(e,Object),Yt=jt("array"),ie=dn(null),Et=et("boolean"),Je=dn(void 0),Le=e=>e==null,de=e=>!Le(e),X=et("function"),Fn=et("number"),Cn=(e,t)=>{if(Yt(e)){for(let o=0,r=e.length;o<r;++o)if(!t(e[o]))return!1;return!0}return!1},yt=()=>{},T=(e,t)=>(...o)=>e(t.apply(null,o)),bo=(e,t)=>o=>e(t(o)),qe=e=>()=>e,Fo=e=>e,an=(e,t)=>e===t;function ze(e,...t){return(...o)=>{const r=t.concat(o);return e.apply(null,r)}}const vo=e=>t=>!e(t),Qs=e=>()=>{throw new Error(e)},Xo=e=>e(),er=e=>{e()},$e=qe(!1),gt=qe(!0),Xl=class Xl{constructor(t,o){Ze(this,"tag");Ze(this,"value");this.tag=t,this.value=o}static some(t){return new Xl(!0,t)}static none(){return Xl.singletonNone}fold(t,o){return this.tag?o(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?Xl.some(t(this.value)):Xl.none()}bind(t){return this.tag?t(this.value):Xl.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:Xl.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw new Error(t??"Called getOrDie on None")}static from(t){return de(t)?Xl.some(t):Xl.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}};Ze(Xl,"singletonNone",new Xl(!1));let B=Xl;const Qc=Array.prototype.slice,Co=Array.prototype.indexOf,gs=Array.prototype.push,Po=(e,t)=>Co.call(e,t),Yr=(e,t)=>{const o=Po(e,t);return o===-1?B.none():B.some(o)},Ce=(e,t)=>Po(e,t)>-1,Ge=(e,t)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(t(c,o))return!0}return!1},Ue=(e,t)=>{const o=e.length,r=new Array(o);for(let c=0;c<o;c++){const u=e[c];r[c]=t(u,c)}return r},ne=(e,t)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];t(c,o)}},Vn=(e,t)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];t(r,o)}},De=(e,t)=>{const o=[],r=[];for(let c=0,u=e.length;c<u;c++){const f=e[c];(t(f,c)?o:r).push(f)}return{pass:o,fail:r}},ge=(e,t)=>{const o=[];for(let r=0,c=e.length;r<c;r++){const u=e[r];t(u,r)&&o.push(u)}return o},Qt=(e,t)=>{if(e.length===0)return[];{let o=t(e[0]);const r=[];let c=[];for(let u=0,f=e.length;u<f;u++){const b=e[u],v=t(b);v!==o&&(r.push(c),c=[]),o=v,c.push(b)}return c.length!==0&&r.push(c),r}},xn=(e,t,o)=>(Vn(e,(r,c)=>{o=t(o,r,c)}),o),kn=(e,t,o)=>(ne(e,(r,c)=>{o=t(o,r,c)}),o),pr=(e,t,o)=>{for(let r=0,c=e.length;r<c;r++){const u=e[r];if(t(u,r))return B.some(u);if(o(u,r))break}return B.none()},To=(e,t)=>pr(e,t,$e),qu=(e,t)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(t(c,o))return B.some(o)}return B.none()},S2=(e,t)=>{for(let o=e.length-1;o>=0;o--)if(t(e[o],o))return B.some(o);return B.none()},ic=e=>{const t=[];for(let o=0,r=e.length;o<r;++o){if(!Yt(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);gs.apply(t,e[o])}return t},mo=(e,t)=>ic(Ue(e,t)),ul=(e,t)=>{for(let o=0,r=e.length;o<r;++o){const c=e[o];if(t(c,o)!==!0)return!1}return!0},Cs=e=>{const t=Qc.call(e,0);return t.reverse(),t},Ds=(e,t)=>ge(e,o=>!Ce(t,o)),tf=(e,t)=>{const o={};for(let r=0,c=e.length;r<c;r++){const u=e[r];o[String(u)]=t(u,r)}return o},ou=(e,t)=>{const o=Qc.call(e,0);return o.sort(t),o},Ea=(e,t)=>t>=0&&t<e.length?B.some(e[t]):B.none(),Vs=e=>Ea(e,0),Tr=e=>Ea(e,e.length-1),Mr=X(Array.from)?Array.from:e=>Qc.call(e),ki=(e,t)=>{for(let o=0;o<e.length;o++){const r=t(e[o],o);if(r.isSome())return r}return B.none()},_i=(e,t)=>{const o=[],r=X(t)?c=>Ge(o,u=>t(u,c)):c=>Ce(o,c);for(let c=0,u=e.length;c<u;c++){const f=e[c];r(f)||o.push(f)}return o},It=Object.keys,So=Object.hasOwnProperty,Bn=(e,t)=>{const o=It(e);for(let r=0,c=o.length;r<c;r++){const u=o[r],f=e[u];t(f,u)}},Yd=(e,t)=>lc(e,(o,r)=>({k:r,v:t(o,r)})),lc=(e,t)=>{const o={};return Bn(e,(r,c)=>{const u=t(r,c);o[u.k]=u.v}),o},Bt=e=>(t,o)=>{e[o]=t},Ku=(e,t,o,r)=>{Bn(e,(c,u)=>{(t(c,u)?o:r)(c,u)})},c0=(e,t)=>{const o={},r={};return Ku(e,t,Bt(o),Bt(r)),{t:o,f:r}},nf=(e,t)=>{const o={};return Ku(e,t,Bt(o),yt),o},dl=(e,t)=>{const o=[];return Bn(e,(r,c)=>{o.push(t(r,c))}),o},ei=e=>dl(e,Fo),Jo=(e,t)=>Sn(e,t)?B.from(e[t]):B.none(),Sn=(e,t)=>So.call(e,t),Ss=(e,t)=>Sn(e,t)&&e[t]!==void 0&&e[t]!==null,i0=(e,t,o=_t)=>xt(o).eq(e,t),ml={generate:e=>{if(!Yt(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const t=[],o={};return ne(e,(r,c)=>{const u=It(r);if(u.length!==1)throw new Error("one and only one name per case");const f=u[0],b=r[f];if(o[f]!==void 0)throw new Error("duplicate key detected:"+f);if(f==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Yt(b))throw new Error("case arguments must be an array");t.push(f),o[f]=(...v)=>{const w=v.length;if(w!==b.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+b.length+" ("+b+"), got "+w);return{fold:(...D)=>{if(D.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+D.length);return D[c].apply(null,v)},match:D=>{const M=It(D);if(t.length!==M.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+`
Actual: `+M.join(","));if(!ul(t,W=>Ce(M,W)))throw new Error("Not all branches were specified when using match. Specified: "+M.join(", ")+`
Required: `+t.join(", "));return D[f].apply(null,v)},log:D=>{console.log(D,{constructors:t,constructor:f,params:v})}}}}),o}},Xt=e=>{let t=e;return{get:()=>t,set:c=>{t=c}}},uc=e=>{const t=u=>u(e),o=qe(e),r=()=>c,c={tag:!0,inner:e,fold:(u,f)=>f(e),isValue:gt,isError:$e,map:u=>ma.value(u(e)),mapError:r,bind:t,exists:t,forall:t,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:u=>{u(e)},toOptional:()=>B.some(e)};return c},Xd=e=>{const t=()=>o,o={tag:!1,inner:e,fold:(r,c)=>r(e),isValue:$e,isError:gt,map:t,mapError:r=>ma.error(r(e)),bind:t,exists:$e,forall:gt,getOr:Fo,or:Fo,getOrThunk:Xo,orThunk:Xo,getOrDie:Qs(String(e)),each:yt,toOptional:B.none};return o},ma={value:uc,error:Xd,fromOption:(e,t)=>e.fold(()=>Xd(t),uc)},x2=typeof window<"u"?window:Function("return this;")(),fa=()=>{const e=window.crypto.getRandomValues(new Uint8Array(16));return e[6]=e[6]&15|64,e[8]=e[8]&63|128,e},Qh=()=>{const e=fa(),t=(o,r)=>{let c="";for(let u=o;u<=r;++u){const f=e[u].toString(16).padStart(2,"0");c+=f}return c};return`${t(0,3)}-${t(4,5)}-${t(6,7)}-${t(8,9)}-${t(10,15)}`},dg=(e,t,o)=>Math.min(Math.max(e,t),o),ep=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let Yu=0;const Xr=e=>{const o=new Date().getTime(),r=Math.floor(ep()*1e9);return Yu++,e+"_"+r+Yu+String(o)},tp=()=>window.isSecureContext?window.crypto.randomUUID():Qh(),E2=(e,t)=>t,Ct=(e,t)=>wn(e)&&wn(t)?mg(e,t):t,Bc=e=>(...t)=>{if(t.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<t.length;r++){const c=t[r];for(const u in c)Sn(c,u)&&(o[u]=e(o[u],c[u]))}return o},mg=Bc(Ct),fg=Bc(E2),$o=(e,t,o=an)=>e.exists(r=>o(r,t)),gg=(e,t,o=an)=>tr(e,t,o).getOr(e.isNone()&&t.isNone()),ti=e=>{const t=[],o=r=>{t.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return t},tr=(e,t,o)=>e.isSome()&&t.isSome()?B.some(o(e.getOrDie(),t.getOrDie())):B.none(),Xu=(e,t,o,r)=>e.isSome()&&t.isSome()&&o.isSome()?B.some(r(e.getOrDie(),t.getOrDie(),o.getOrDie())):B.none(),np=e=>e.bind(Fo),ni=(e,t)=>e?B.some(t):B.none(),Ta=(e,t)=>{let o=t??x2;for(let r=0;r<e.length&&o!==void 0&&o!==null;++r)o=o[e[r]];return o},su=(e,t)=>{const o=e.split(".");return Ta(o,t)};ml.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const dc=e=>{const t=[],o=[];return ne(e,r=>{r.fold(c=>{t.push(c)},c=>{o.push(c)})}),{errors:t,values:o}},Pw=e=>{const t=Xt(B.none()),o=()=>t.get().each(e);return{clear:()=>{o(),t.set(B.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:b=>{o(),t.set(B.some(b))}}},T2=e=>{const t=Xt(B.none()),o=()=>t.get().each(b=>clearInterval(b));return{clear:()=>{o(),t.set(B.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:b=>{o(),t.set(B.some(setInterval(b,e)))}}},oi=()=>{const e=Pw(yt);return{...e,on:o=>e.get().each(o)}},l0=(e,t)=>e.substring(t),ru=(e,t,o)=>t===""||e.length>=t.length&&e.substr(o,o+t.length)===t,u0=(e,t)=>pn(e,t)?l0(e,t.length):e,Us=(e,t,o=0,r)=>{const c=e.indexOf(t,o);return c!==-1?Je(r)?!0:c+t.length<=r:!1},pn=(e,t)=>ru(e,t,0),ga=(e,t)=>ru(e,t,e.length-t.length),ka=e=>t=>t.replace(e,""),ws=ka(/^\s+|\s+$/g),op=ka(/^\s+/g),hg=ka(/\s+$/g),xs=e=>e.length>0,pg=e=>!xs(e),fl=(e,t)=>t<=0?"":new Array(t+1).join(e),k2=(e,t=10)=>{const o=parseInt(e,t);return isNaN(o)?B.none():B.some(o)},pt=(e,t)=>{let o=null;return{cancel:()=>{ie(o)||(clearTimeout(o),o=null)},throttle:(...u)=>{ie(o)&&(o=setTimeout(()=>{o=null,e.apply(null,u)},t))}}},Jd=(e,t)=>{let o=null;const r=()=>{ie(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...u)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,u)},t)}}},mc=e=>{let t=!1,o;return(...r)=>(t||(t=!0,o=e.apply(null,r)),o)},of="\uFEFF",Zs=" ",_2="…",gl=e=>e===of,Ai=e=>e.replace(/\uFEFF/g,""),d0=e=>{const t={};return ne(e,o=>{t[o]={}}),It(t)},m0=e=>e.length!==void 0,Ju=Array.isArray,f0=e=>{if(Ju(e))return e;{const t=[];for(let o=0,r=e.length;o<r;o++)t[o]=e[o];return t}},bg=(e,t,o)=>{if(!e)return!1;if(o=o||e,m0(e)){for(let r=0,c=e.length;r<c;r++)if(t.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if(Sn(e,r)&&t.call(o,e[r],r,e)===!1)return!1;return!0},Qu=(e,t)=>{const o=[];return bg(e,(r,c)=>{o.push(t(r,c,e))}),o},sf=(e,t)=>{const o=[];return bg(e,(r,c)=>{(!t||t(r,c,e))&&o.push(r)}),o},at=(e,t)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===t)return o}return-1},vg=(e,t,o,r)=>{let c=Je(o)?e[0]:o;for(let u=0;u<e.length;u++)c=t.call(r,c,e[u],u);return c},sp=(e,t,o)=>{for(let r=0,c=e.length;r<c;r++)if(t.call(o,e[r],r,e))return r;return-1},hl=e=>e[e.length-1],yg=(e,t,o,r)=>{const c=e.isiOS()&&/ipad/i.test(o)===!0,u=e.isiOS()&&!c,f=e.isiOS()||e.isAndroid(),b=f||r("(pointer:coarse)"),v=c||!u&&f&&r("(min-device-width:768px)"),w=u||f&&!v,_=t.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,D=!w&&!v&&!_;return{isiPad:qe(c),isiPhone:qe(u),isTablet:qe(v),isPhone:qe(w),isTouch:qe(b),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:qe(_),isDesktop:qe(D)}},Cg=(e,t)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(t))return r}},fc=(e,t)=>{const o=Cg(e,t);if(!o)return{major:0,minor:0};const r=c=>Number(t.replace(o,"$"+c));return em(r(1),r(2))},Sg=(e,t)=>{const o=String(t).toLowerCase();return e.length===0?Qd():fc(e,o)},Qd=()=>em(0,0),em=(e,t)=>({major:e,minor:t}),Io={nu:em,detect:Sg,unknown:Qd},wg=(e,t)=>ki(t.brands,o=>{const r=o.brand.toLowerCase();return To(e,c=>{var u;return r===((u=c.brand)==null?void 0:u.toLowerCase())}).map(c=>({current:c.name,version:Io.nu(parseInt(o.version,10),0)}))}),xg=(e,t)=>{const o=String(t).toLowerCase();return To(e,r=>r.search(o))},Eg=(e,t)=>xg(e,t).map(o=>{const r=Io.detect(o.versionRegexes,t);return{current:o.name,version:r}}),g0=(e,t)=>xg(e,t).map(o=>{const r=Io.detect(o.versionRegexes,t);return{current:o.name,version:r}}),ed=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,si=e=>t=>Us(t,e),h0=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>Us(e,"edge/")&&Us(e,"chrome")&&Us(e,"safari")&&Us(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ed],search:e=>Us(e,"chrome")&&!Us(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>Us(e,"msie")||Us(e,"trident")},{name:"Opera",versionRegexes:[ed,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:si("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:si("firefox")},{name:"Safari",versionRegexes:[ed,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(Us(e,"safari")||Us(e,"mobile/"))&&Us(e,"applewebkit")}],au=[{name:"Windows",search:si("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>Us(e,"iphone")||Us(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:si("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:si("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:si("linux"),versionRegexes:[]},{name:"Solaris",search:si("sunos"),versionRegexes:[]},{name:"FreeBSD",search:si("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:si("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],td={browsers:qe(h0),oses:qe(au)},p0="Edge",Tg="Chromium",Hn="IE",I="Opera",J="Firefox",se="Safari",Re=()=>Qe({current:void 0,version:Io.unknown()}),Qe=e=>{const t=e.current,o=e.version,r=c=>()=>t===c;return{current:t,version:o,isEdge:r(p0),isChromium:r(Tg),isIE:r(Hn),isOpera:r(I),isFirefox:r(J),isSafari:r(se)}},Dt={unknown:Re,nu:Qe,edge:qe(p0),chromium:qe(Tg),ie:qe(Hn),opera:qe(I),firefox:qe(J),safari:qe(se)},_n="Windows",uo="iOS",so="Android",Rs="Linux",Es="macOS",nd="Solaris",tm="FreeBSD",Pc="ChromeOS",b0=()=>A2({current:void 0,version:Io.unknown()}),A2=e=>{const t=e.current,o=e.version,r=c=>()=>t===c;return{current:t,version:o,isWindows:r(_n),isiOS:r(uo),isAndroid:r(so),isMacOS:r(Es),isLinux:r(Rs),isSolaris:r(nd),isFreeBSD:r(tm),isChromeOS:r(Pc)}},v0={unknown:b0,nu:A2,windows:qe(_n),ios:qe(uo),android:qe(so),linux:qe(Rs),macos:qe(Es),solaris:qe(nd),freebsd:qe(tm),chromeos:qe(Pc)},O2={detect:(e,t,o)=>{const r=td.browsers(),c=td.oses(),u=t.bind(v=>wg(r,v)).orThunk(()=>Eg(r,e)).fold(Dt.unknown,Dt.nu),f=g0(c,e).fold(v0.unknown,v0.nu),b=yg(f,u,e,o);return{browser:u,os:f,deviceType:b}}},D2=e=>window.matchMedia(e).matches;let R2=mc(()=>O2.detect(window.navigator.userAgent,B.from(window.navigator.userAgentData),D2));const Oi=()=>R2(),M2=(e,t)=>su(e,t),a3=(e,t)=>{const o=M2(e,t);if(o==null)throw new Error(e+" not available on this browser");return o},N2=Object.getPrototypeOf,B2=e=>a3("HTMLElement",e),c3=e=>{const t=su("ownerDocument.defaultView",e);return At(e)&&(B2(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(N2(e).constructor.name))},Iw=window.navigator.userAgent,y0=Oi(),pl=y0.browser,Di=y0.os,nm=y0.deviceType,Lw=Iw.indexOf("Windows Phone")!==-1,Xn={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:pl.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!pl.isIE(),windowsPhone:Lw,browser:{current:pl.current,version:pl.version,isChromium:pl.isChromium,isEdge:pl.isEdge,isFirefox:pl.isFirefox,isIE:pl.isIE,isOpera:pl.isOpera,isSafari:pl.isSafari},os:{current:Di.current,version:Di.version,isAndroid:Di.isAndroid,isChromeOS:Di.isChromeOS,isFreeBSD:Di.isFreeBSD,isiOS:Di.isiOS,isLinux:Di.isLinux,isMacOS:Di.isMacOS,isSolaris:Di.isSolaris,isWindows:Di.isWindows},deviceType:{isDesktop:nm.isDesktop,isiPad:nm.isiPad,isiPhone:nm.isiPhone,isPhone:nm.isPhone,isTablet:nm.isTablet,isTouch:nm.isTouch,isWebView:nm.isWebView}},i3=/^\s*|\s*$/g,P2=e=>Le(e)?"":(""+e).replace(i3,""),Ms=(e,t)=>t?t==="array"&&Ju(e)?!0:typeof e===t:e!==void 0,l3=(e,t,o={})=>{const r=U(e)?e.split(t||","):e||[];let c=r.length;for(;c--;)o[r[c]]={};return o},C0=Sn,u3=(e,...t)=>{for(let o=0;o<t.length;o++){const r=t[o];for(const c in r)if(Sn(r,c)){const u=r[c];u!==void 0&&(e[c]=u)}}return e},$2=function(e,t,o,r){r=r||this,e&&(o&&(e=e[o]),bg(e,(c,u)=>t.call(r,c,u,o)===!1?!1:($2(c,t,o,r),!0)))},Ke={trim:P2,isArray:Ju,is:Ms,toArray:f0,makeMap:l3,each:bg,map:Qu,grep:sf,inArray:at,hasOwn:C0,extend:u3,walk:$2,resolve:(e,t=window)=>{const o=e.split(".");for(let r=0,c=o.length;r<c&&(t=t[o[r]],!!t);r++);return t},explode:(e,t)=>Yt(e)?e:e===""?[]:Qu(e.split(t||","),P2),_addCacheSuffix:e=>{const t=Xn.cacheSuffix;return t&&(e+=(e.indexOf("?")===-1?"?":"&")+t),e}},$c=(e,t)=>{const r=(t||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const c="HTML does not have a single root node";throw console.error(c,e),new Error(c)}return rp(r.childNodes[0])},S0=(e,t)=>{const r=(t||document).createElement(e);return rp(r)},Ri=(e,t)=>{const r=(t||document).createTextNode(e);return rp(r)},rp=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},Y={fromHtml:$c,fromTag:S0,fromText:Ri,fromDom:rp,fromPoint:(e,t,o)=>B.from(e.dom.elementFromPoint(t,o)).map(rp)},gc=(e,t)=>{t.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},om=(e,t)=>{t.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},L2=(e,t,o)=>{const r=e.document.createRange();return gc(r,t),om(r,o),r},_g=(e,t,o,r,c)=>{const u=e.document.createRange();return u.setStart(t.dom,o),u.setEnd(r.dom,c),u},ha=ml.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),hc=(e,t,o)=>t(Y.fromDom(o.startContainer),o.startOffset,Y.fromDom(o.endContainer),o.endOffset),F2=(e,t)=>t.match({domRange:o=>({ltr:qe(o),rtl:B.none}),relative:(o,r)=>({ltr:mc(()=>L2(e,o,r)),rtl:mc(()=>B.some(L2(e,r,o)))}),exact:(o,r,c,u)=>({ltr:mc(()=>_g(e,o,r,c,u)),rtl:mc(()=>B.some(_g(e,c,u,o,r)))})}),H2=(e,t)=>{const o=t.ltr();return o.collapsed?t.rtl().filter(c=>c.collapsed===!1).map(c=>ha.rtl(Y.fromDom(c.endContainer),c.endOffset,Y.fromDom(c.startContainer),c.startOffset)).getOrThunk(()=>hc(e,ha.ltr,o)):hc(e,ha.ltr,o)},ap=(e,t)=>{const o=F2(e,t);return H2(e,o)};ha.ltr,ha.rtl;const Za=8,z2=9,cu=11,cp=1,V2=3,Ic=(e,t)=>{const o=e.dom;if(o.nodeType!==cp)return!1;{const r=o;if(r.matches!==void 0)return r.matches(t);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(t);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(t);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},U2=e=>e.nodeType!==cp&&e.nodeType!==z2&&e.nodeType!==cu||e.childElementCount===0,bl=(e,t)=>{const o=t===void 0?document:t.dom;return U2(o)?[]:Ue(o.querySelectorAll(e),Y.fromDom)},sm=(e,t)=>{const o=t===void 0?document:t.dom;return U2(o)?B.none():B.from(o.querySelector(e)).map(Y.fromDom)},Ln=(e,t)=>e.dom===t.dom,ri=(e,t)=>{const o=e.dom,r=t.dom;return o===r?!1:o.contains(r)},w0=Ic,Fw=(e,t)=>{const o=[],r=u=>(o.push(u),t(u));let c=t(e);do c=c.bind(r);while(c.isSome());return o},An=e=>e.dom.nodeName.toLowerCase(),od=e=>e.dom.nodeType,nr=e=>t=>od(t)===e,vl=e=>od(e)===Za||An(e)==="#comment",yl=e=>Ts(e)&&c3(e.dom),Ts=nr(cp),fo=nr(V2),m3=nr(z2),f3=nr(cu),iu=e=>t=>Ts(t)&&An(t)===e,Mi=e=>Y.fromDom(e.dom.ownerDocument),Cl=e=>m3(e)?e:Mi(e),ir=e=>Y.fromDom(Cl(e).dom.documentElement),sd=e=>Y.fromDom(Cl(e).dom.defaultView),Lc=e=>B.from(e.dom.parentNode).map(Y.fromDom),Ni=e=>B.from(e.dom.parentElement).map(Y.fromDom),ai=(e,t)=>{const o=X(t)?t:$e;let r=e.dom;const c=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const u=r.parentNode,f=Y.fromDom(u);if(c.push(f),o(f)===!0)break;r=u}return c},go=e=>{const t=o=>ge(o,r=>!Ln(e,r));return Lc(e).map(ks).map(t).getOr([])},ci=e=>B.from(e.dom.previousSibling).map(Y.fromDom),lu=e=>B.from(e.dom.nextSibling).map(Y.fromDom),pa=e=>Cs(Fw(e,ci)),kr=e=>Fw(e,lu),ks=e=>Ue(e.dom.childNodes,Y.fromDom),Bi=(e,t)=>{const o=e.dom.childNodes;return B.from(o[t]).map(Y.fromDom)},Nr=e=>Bi(e,0),or=e=>Bi(e,e.dom.childNodes.length-1),rf=e=>e.dom.childNodes.length,Hw=e=>{const t=e.dom.head;if(t==null)throw new Error("Head is not available yet");return Y.fromDom(t)},Z2=e=>f3(e)&&de(e.dom.host),Br=e=>Y.fromDom(e.dom.getRootNode()),W2=e=>Z2(e)?e:Hw(Cl(e)),zw=e=>Z2(e)?e:Y.fromDom(Cl(e).dom.body),af=e=>{const t=Br(e);return Z2(t)?B.some(t):B.none()},qt=e=>Y.fromDom(e.dom.host),j2=e=>{if(de(e.target)){const t=Y.fromDom(e.target);if(Ts(t)&&br(t)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return Vs(o)}}return B.from(e.target)},br=e=>de(e.dom.shadowRoot),Pr=(e,t,o,r,c,u,f)=>({target:e,x:t,y:o,stop:r,prevent:c,kill:u,raw:f}),$r=e=>{const t=Y.fromDom(j2(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),c=T(r,o);return Pr(t,e.clientX,e.clientY,o,r,c,e)},Qo=(e,t)=>o=>{e(o)&&t($r(o))},cf=(e,t,o,r,c)=>{const u=Qo(o,r);return e.dom.addEventListener(t,u,c),{unbind:ze(Pi,e,t,u,c)}},x0=(e,t,o,r)=>cf(e,t,o,r,!1),Pi=(e,t,o,r)=>{e.dom.removeEventListener(t,o,r)},Sl=gt,G2=(e,t,o)=>x0(e,t,Sl,o),E0=()=>Y.fromDom(document),T0=(e,t=!1)=>e.dom.focus({preventScroll:t}),rd=e=>{const t=Br(e).dom;return e.dom===t.activeElement},wl=(e=E0())=>B.from(e.dom.activeElement).map(Y.fromDom),g3=e=>wl(Br(e)).filter(t=>e.dom.contains(t.dom)),Qr=(e,t)=>{Lc(e).each(r=>{r.dom.insertBefore(t.dom,e.dom)})},xl=(e,t)=>{lu(e).fold(()=>{Lc(e).each(c=>{Qn(c,t)})},r=>{Qr(r,t)})},uu=(e,t)=>{Nr(e).fold(()=>{Qn(e,t)},r=>{e.dom.insertBefore(t.dom,r.dom)})},Qn=(e,t)=>{e.dom.appendChild(t.dom)},Fc=(e,t)=>{Qr(e,t),Qn(t,e)},Vw=(e,t)=>{ne(t,o=>{Qr(e,o)})},k0=(e,t)=>{ne(t,(o,r)=>{const c=r===0?e:t[r-1];xl(c,o)})},ii=(e,t)=>{ne(t,o=>{Qn(e,o)})},on=(e,t,o)=>{if(U(o)||Et(o)||Fn(o))e.setAttribute(t,o+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},hs=(e,t,o)=>{on(e.dom,t,o)},Ir=(e,t)=>{const o=e.dom;Bn(t,(r,c)=>{on(o,c,r)})},es=(e,t)=>{const o=e.dom.getAttribute(t);return o===null?void 0:o},$i=(e,t)=>B.from(es(e,t)),is=(e,t)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(t):!1},sr=(e,t)=>{e.dom.removeAttribute(t)},Ag=e=>{const t=e.dom.attributes;return t==null||t.length===0},Nn=e=>kn(e.dom.attributes,(t,o)=>(t[o.name]=o.value,t),{}),Ii=e=>{e.dom.textContent="",ne(ks(e),t=>{Zo(t)})},Zo=e=>{const t=e.dom;t.parentNode!==null&&t.parentNode.removeChild(t)},li=e=>{const t=ks(e);t.length>0&&k0(e,t),Zo(e)},vr=(e,t)=>Y.fromDom(e.dom.cloneNode(t)),ba=e=>vr(e,!1),ip=e=>vr(e,!0),Uw=(e,t)=>{const o=Y.fromTag(t),r=Nn(e);return Ir(o,r),o},lp=(e,t)=>{const o=Uw(e,t);xl(e,o);const r=ks(e);return ii(o,r),Zo(e),o},up=(e,t)=>{const r=(t||document).createElement("div");return r.innerHTML=e,ks(Y.fromDom(r))},lf=e=>Ue(e,Y.fromDom),va=e=>e.dom.innerHTML,ad=(e,t)=>{const r=Mi(e).dom,c=Y.fromDom(r.createDocumentFragment()),u=up(t,r);ii(c,u),Ii(e),Qn(e,c)},h3=e=>{const t=Y.fromTag("div"),o=Y.fromDom(e.dom.cloneNode(!0));return Qn(t,o),va(t)},uf=e=>e.style!==void 0&&X(e.style.getPropertyValue),ko=e=>{const t=fo(e)?e.dom.parentNode:e.dom;if(t==null||t.ownerDocument===null)return!1;const o=t.ownerDocument;return af(Y.fromDom(t)).fold(()=>o.body.contains(t),bo(ko,qt))},_0=(e,t,o)=>{if(!U(o))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);uf(e)&&e.style.setProperty(t,o)},A0=(e,t)=>{uf(e)&&e.style.removeProperty(t)},pc=(e,t,o)=>{const r=e.dom;_0(r,t,o)},ui=(e,t)=>{const o=e.dom;Bn(t,(r,c)=>{_0(o,c,r)})},Ns=(e,t)=>{const o=e.dom,c=window.getComputedStyle(o).getPropertyValue(t);return c===""&&!ko(e)?rm(o,t):c},rm=(e,t)=>uf(e)?e.style.getPropertyValue(t):"",lr=(e,t)=>{const o=e.dom,r=rm(o,t);return B.from(r).filter(c=>c.length>0)},Og=e=>{const t={},o=e.dom;if(uf(o))for(let r=0;r<o.style.length;r++){const c=o.style.item(r);t[c]=o.style[c]}return t},O0=(e,t)=>{const o=e.dom;A0(o,t),$o($i(e,"style").map(ws),"")&&sr(e,"style")},q2=e=>e.dom.offsetWidth,El=((e,t)=>{const o=(b,v)=>{if(!Fn(v)&&!v.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+v);const w=b.dom;uf(w)&&(w.style[e]=v+"px")},r=b=>{const v=t(b);if(v<=0||v===null){const w=Ns(b,e);return parseFloat(w)||0}return v},c=r,u=(b,v)=>kn(v,(w,_)=>{const D=Ns(b,_),M=D===void 0?0:parseInt(D,10);return isNaN(M)?w:w+M},0);return{set:o,get:r,getOuter:c,aggregate:u,max:(b,v,w)=>{const _=u(b,w);return v>_?v-_:0}}})("height",e=>{const t=e.dom;return ko(e)?t.getBoundingClientRect().height:t.offsetHeight}),p3=e=>El.get(e),Zw=(e,t)=>({left:e,top:t,translate:(r,c)=>Zw(e+r,t+c)}),Tl=Zw,Ww=e=>{const t=e.getBoundingClientRect();return Tl(t.left,t.top)},Dg=(e,t)=>e!==void 0?e:t!==void 0?t:0,dp=e=>{const t=e.dom.ownerDocument,o=t.body,r=t.defaultView,c=t.documentElement;if(o===e.dom)return Tl(o.offsetLeft,o.offsetTop);const u=Dg(r==null?void 0:r.pageYOffset,c.scrollTop),f=Dg(r==null?void 0:r.pageXOffset,c.scrollLeft),b=Dg(c.clientTop,o.clientTop),v=Dg(c.clientLeft,o.clientLeft);return mp(e).translate(f-v,u-b)},mp=e=>{const t=e.dom,r=t.ownerDocument.body;return r===t?Tl(r.offsetLeft,r.offsetTop):ko(e)?Ww(t):Tl(0,0)},K2=e=>{const t=e!==void 0?e.dom:document,o=t.body.scrollLeft||t.documentElement.scrollLeft,r=t.body.scrollTop||t.documentElement.scrollTop;return Tl(o,r)},jw=(e,t,o)=>{const c=(o!==void 0?o.dom:document).defaultView;c&&c.scrollTo(e,t)},Li=(e,t)=>{Oi().browser.isSafari()&&X(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},b3=(e,t)=>{const o=u=>{if(!e(u))throw new Error("Can only get "+t+" value of a "+t+" node");return r(u).getOr("")},r=u=>e(u)?B.from(u.dom.nodeValue):B.none();return{get:o,getOption:r,set:(u,f)=>{if(!e(u))throw new Error("Can only set raw "+t+" value of a "+t+" node");u.dom.nodeValue=f}}},am=(e,t)=>{const r=document.createDocumentFragment();return ne(e,c=>{r.appendChild(c.dom)}),Y.fromDom(r)},wo=b3(fo,"text"),ya=e=>wo.get(e),du=e=>wo.getOption(e),Y2=(e,t)=>wo.set(e,t),cm=(e,t)=>{const o=es(e,t);return o===void 0||o===""?[]:o.split(" ")},X2=(e,t,o)=>{const c=cm(e,t).concat([o]);return hs(e,t,c.join(" ")),!0},Gw=(e,t,o)=>{const r=ge(cm(e,t),c=>c!==o);return r.length>0?hs(e,t,r.join(" ")):sr(e,t),!1};var mu=(e,t,o,r,c)=>e(o,r)?B.some(o):X(c)&&c(o)?B.none():t(o,r,c);const fu=(e,t,o)=>{let r=e.dom;const c=X(o)?o:$e;for(;r.parentNode;){r=r.parentNode;const u=Y.fromDom(r);if(t(u))return B.some(u);if(c(u))break}return B.none()},Ro=(e,t,o)=>mu((c,u)=>u(c),fu,e,t,o),qw=(e,t)=>{const o=e.dom;return o.parentNode?us(Y.fromDom(o.parentNode),r=>!Ln(e,r)&&t(r)):B.none()},us=(e,t)=>{const o=c=>t(Y.fromDom(c));return To(e.dom.childNodes,o).map(Y.fromDom)},fp=(e,t)=>{const o=r=>{for(let c=0;c<r.childNodes.length;c++){const u=Y.fromDom(r.childNodes[c]);if(t(u))return B.some(u);const f=o(r.childNodes[c]);if(f.isSome())return f}return B.none()};return o(e.dom)},Ws=(e,t,o)=>fu(e,r=>Ic(r,t),o),gu=(e,t)=>sm(t,e),ea=(e,t,o)=>mu((c,u)=>Ic(c,u),Ws,e,t,o),cd=e=>e.dom.classList!==void 0,D0=e=>cm(e,"class"),Kw=(e,t)=>X2(e,"class",t),J2=(e,t)=>Gw(e,"class",t),v3=(e,t)=>Ce(D0(e),t)?J2(e,t):Kw(e,t),Hc=(e,t)=>{cd(e)?e.dom.classList.add(t):Kw(e,t)},im=e=>{(cd(e)?e.dom.classList:D0(e)).length===0&&sr(e,"class")},yr=(e,t)=>{cd(e)?e.dom.classList.remove(t):J2(e,t),im(e)},Lr=(e,t)=>{const o=cd(e)?e.dom.classList.toggle(t):v3(e,t);return im(e),o},R0=(e,t)=>cd(e)&&e.dom.classList.contains(t),gp=(e,t)=>{ne(t,o=>{Hc(e,o)})},Yw=(e,t)=>{ne(t,o=>{yr(e,o)})},Xw=e=>ea(e,"[contenteditable]"),Fi=(e,t=!1)=>ko(e)?e.dom.isContentEditable:Xw(e).fold(qe(t),o=>r6(o)==="true"),r6=e=>e.dom.contentEditable,df=(e,t)=>{e.dom.contentEditable=t?"true":"false"},id=(e,t,o)=>ge(ai(e,o),t),y3=(e,t)=>ge(ks(e),t),M0=(e,t)=>{let o=[];return ne(ks(e),r=>{t(r)&&(o=o.concat([r])),o=o.concat(M0(r,t))}),o},C3=(e,t,o)=>id(e,r=>Ic(r,t),o),Fr=(e,t)=>bl(t,e),Rg=(e,t,o)=>fu(e,t,o).isSome(),S3=(e,t)=>qw(e,t).isSome(),Mg=(e,t)=>fp(e,t).isSome(),N0=(e,t)=>Rg(e,ze(Ln,t)),Jw=(e,t,o)=>Ws(e,t,o).isSome(),Q2=(e,t,o)=>ea(e,t,o).isSome(),Qw=e=>X(e)?e:$e,ex=(e,t,o)=>{let r=e.dom;const c=Qw(o);for(;r.parentNode;){r=r.parentNode;const u=Y.fromDom(r),f=t(u);if(f.isSome())return f;if(c(u))break}return B.none()},B0=(e,t,o)=>{const r=t(e),c=Qw(o);return r.orThunk(()=>c(e)?B.none():ex(e,t,c))},tx=e=>du(e).filter(t=>t.trim().length!==0||t.indexOf(Zs)>-1).isSome(),Ng=e=>yl(e)&&es(e,"contenteditable")==="false",w3=["img","br"],ey=e=>tx(e)||Ce(w3,An(e))||Ng(e),x3=e=>fp(e,ey),ty={create:(e,t,o,r)=>({start:e,soffset:t,finish:o,foffset:r})},ny=ml.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),T3=(e,t,o,r)=>e.fold(t,o,r),k3=e=>e.fold(Fo,Fo,Fo),_3=ny.before,P0=ny.on,A3=ny.after,Hi={before:_3,on:P0,after:A3,cata:T3,getStart:k3},Bg=ml.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),$0=e=>Bg.exact(e.start,e.soffset,e.finish,e.foffset),hp=e=>e.match({domRange:t=>Y.fromDom(t.startContainer),relative:(t,o)=>Hi.getStart(t),exact:(t,o,r,c)=>t}),O3=Bg.domRange,D3=Bg.relative,nx=Bg.exact,ld=e=>{const t=hp(e);return sd(t)},pp=ty.create,lm={domRange:O3,relative:D3,exact:nx,exactFromRange:$0,getWin:ld,range:pp},R3=(e,t,o)=>{var r;return B.from((r=e.caretPositionFromPoint)==null?void 0:r.call(e,t,o)).bind(c=>{if(c.offsetNode===null)return B.none();const u=e.createRange();return u.setStart(c.offsetNode,c.offset),u.collapse(),B.some(u)})},rr=(e,t,o)=>{var r;return B.from((r=e.caretRangeFromPoint)==null?void 0:r.call(e,t,o))},js=(e,t,o)=>e.caretPositionFromPoint?R3(e,t,o):e.caretRangeFromPoint?rr(e,t,o):B.none(),um=(e,t,o)=>{const r=e.document;return js(r,t,o).map(c=>ty.create(Y.fromDom(c.startContainer),c.startOffset,Y.fromDom(c.endContainer),c.endOffset))},ud=(e,t)=>{const o=An(e);return o==="input"?Hi.after(e):Ce(["br","img"],o)?t===0?Hi.before(e):Hi.after(e):Hi.on(e,t)},oy=(e,t)=>{const o=e.fold(Hi.before,ud,Hi.after),r=t.fold(Hi.before,ud,Hi.after);return lm.relative(o,r)},ta=(e,t,o,r)=>{const c=ud(e,t),u=ud(o,r);return lm.relative(c,u)},sy=e=>e.match({domRange:t=>{const o=Y.fromDom(t.startContainer),r=Y.fromDom(t.endContainer);return ta(o,t.startOffset,r,t.endOffset)},relative:oy,exact:ta}),dm=e=>{const t=lm.getWin(e).dom,o=(c,u,f,b)=>_g(t,c,u,f,b),r=sy(e);return ap(t,r).match({ltr:o,rtl:o})},I0=(e,t,o)=>um(e,t,o),zc=e=>{const t=e===void 0?window:e;return Oi().browser.isFirefox()?B.none():B.from(t.visualViewport)},ry=(e,t,o,r)=>({x:e,y:t,width:o,height:r,right:e+o,bottom:t+r}),bc=e=>{const t=e===void 0?window:e,o=t.document,r=K2(Y.fromDom(o));return zc(t).fold(()=>{const c=t.document.documentElement,u=c.clientWidth,f=c.clientHeight;return ry(r.left,r.top,u,f)},c=>ry(Math.max(c.pageLeft,r.left),Math.max(c.pageTop,r.top),c.width,c.height))};class _s{constructor(t,o){Ze(this,"rootNode");Ze(this,"node");this.node=t,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(t){return this.node=this.findSibling(this.node,"firstChild","nextSibling",t),this.node}prev(t){return this.node=this.findSibling(this.node,"lastChild","previousSibling",t),this.node}prev2(t){return this.node=this.findPreviousNode(this.node,t),this.node}findSibling(t,o,r,c){if(t){if(!c&&t[o])return t[o];if(t!==this.rootNode){let u=t[r];if(u)return u;for(let f=t.parentNode;f&&f!==this.rootNode;f=f.parentNode)if(u=f[r],u)return u}}}findPreviousNode(t,o){if(t){const r=t.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let u=r.lastChild;u;u=u.lastChild)if(!u.lastChild)return u}return r}const c=t.parentNode;if(c&&c!==this.rootNode)return c}}}const L0=/^[ \t\r\n]*$/,Pg=e=>L0.test(e),ox=e=>{for(const t of e)if(!gl(t))return!1;return!0},ay=e=>" \f	\v".indexOf(e)!==-1,sx=e=>e===`
`||e==="\r",rx=(e,t)=>t<e.length&&t>=0?sx(e[t]):!1,F0=(e,t=4,o=!0,r=!0)=>{const c=fl(" ",t),u=e.replace(/\t/g,c);return kn(u,(b,v)=>ay(v)||v===Zs?b.pcIsSpace||b.str===""&&o||b.str.length===u.length-1&&r||rx(u,b.str.length+1)?{pcIsSpace:!1,str:b.str+Zs}:{pcIsSpace:!0,str:b.str+" "}:{pcIsSpace:sx(v),str:b.str+v},{pcIsSpace:!1,str:""}).str},$g=e=>t=>!!t&&t.nodeType===e,H0=e=>!!e&&!Object.getPrototypeOf(e),it=$g(1),Wa=e=>it(e)&&yl(Y.fromDom(e)),M3=e=>it(e)&&e.namespaceURI==="http://www.w3.org/2000/svg",_a=e=>{const t=e.toLowerCase();return o=>de(o)&&o.nodeName.toLowerCase()===t},di=e=>{const t=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const r=o.nodeName.toLowerCase();return Ce(t,r)}return!1}},z0=(e,t)=>{const o=t.toLowerCase().split(" ");return r=>{if(it(r)){const c=r.ownerDocument.defaultView;if(c)for(let u=0;u<o.length;u++){const f=c.getComputedStyle(r,null);if((f?f.getPropertyValue(e):null)===o[u])return!0}}return!1}},N3=e=>t=>it(t)&&t.hasAttribute(e),mm=e=>it(e)&&e.hasAttribute("data-mce-bogus"),B3=e=>it(e)&&e.getAttribute("data-mce-bogus")==="all",ja=e=>it(e)&&e.tagName==="TABLE",ax=e=>t=>!!(Wa(t)&&(t.contentEditable===e||t.getAttribute("data-mce-contenteditable")===e)),mi=di(["textarea","input"]),Ye=$g(3),cy=$g(4),ur=$g(7),Tn=$g(8),dd=$g(9),Ig=$g(11),ds=_a("br"),fi=_a("img"),bp=_a("a"),vc=ax("true"),ts=ax("false"),md=e=>Wa(e)&&e.isContentEditable&&de(e.parentElement)&&!e.parentElement.isContentEditable,Lg=di(["td","th"]),iy=di(["td","th","caption"]),ly=_a("template"),gi=di(["video","audio","object","embed"]),vp=_a("li"),yp=_a("details"),P3=_a("summary"),cx="uc-video",Cp=e=>e.nodeName.toLowerCase()===cx,uy={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},V0=(e,t,o)=>{const r=Y.fromDom(t),c=Y.fromDom(e),u=o.getWhitespaceElements();return Rg(c,b=>Sn(u,An(b)),ze(Ln,r))},$3=e=>it(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),I3=(e,t)=>it(e)&&Sn(t.getNonEmptyElements(),e.nodeName),dy=N3("data-mce-bookmark"),L3=e=>Ni(Y.fromDom(e)).exists(t=>!Fi(t)),Sp=(e,t,o)=>Pg(e.data)&&!V0(e,t,o),a6=(e,t,o,r)=>Ye(e)&&!Sp(e,t,o)&&(!r.includeZwsp||!ox(e.data)),yc=(e,t,o,r)=>X(r.isContent)&&r.isContent(t)||I3(t,e)||dy(t)||$3(t)||a6(t,o,e,r)||ts(t)||vc(t)&&L3(t),Vt=(e,t,o)=>{const r={...uy,...o};if(r.checkRootAsContent&&yc(e,t,t,r))return!1;let c=t.firstChild,u=0;if(!c)return!0;const f=new _s(c,t);do{if(r.skipBogus&&it(c)){const b=c.getAttribute("data-mce-bogus");if(b){c=f.next(b==="all");continue}}if(Tn(c)){c=f.next(!0);continue}if(ds(c)){u++,c=f.next();continue}if(yc(e,c,t,r))return!1;c=f.next()}while(c);return u<=1},As=(e,t,o)=>Vt(e,t.dom,{checkRootAsContent:!0,...o}),Fg=(e,t,o)=>yc(e,t,t,{includeZwsp:uy.includeZwsp,...o}),ix=e=>{const t=e.toLowerCase();return t==="svg"?"svg":t==="math"?"math":"html"},mf=e=>ix(e)!=="html",Hg=e=>mf(e.nodeName),my=e=>ix(e.nodeName),ff=["svg","math"],lx=()=>{const e=oi(),t=()=>e.get().map(my).getOr("html");return{track:c=>(Hg(c)?e.set(c):e.get().exists(u=>!u.contains(c))&&e.clear(),t()),current:t,reset:()=>{e.clear()}}},hu="data-mce-block",ux=e=>ge(It(e),t=>!/[A-Z]/.test(t)),fy=e=>Ue(ux(e),t=>{const o=CSS.escape(t);return`${o}:`+Ue(ff,r=>`not(${r} ${o})`).join(":")}).join(","),ls=(e,t)=>de(t.querySelector(e))?(t.setAttribute(hu,"true"),t.getAttribute("data-mce-selected")==="inline-boundary"&&t.removeAttribute("data-mce-selected"),!0):(t.removeAttribute(hu),!1),hi=(e,t)=>{const o=fy(e.getTransparentElements()),r=fy(e.getBlockElements());return ge(t.querySelectorAll(o),c=>ls(r,c))},Aa=(e,t,o)=>{var c;const r=o?"lastChild":"firstChild";for(let u=t[r];u;u=u[r])if(Vt(e,u,{checkRootAsContent:!0})){(c=u.parentNode)==null||c.removeChild(u);return}},zg=(e,t,o)=>{const r=document.createRange(),c=t.parentNode;if(c){r.setStartBefore(t),r.setEndBefore(o);const u=r.extractContents();Aa(e,u,!0),r.setStartAfter(o),r.setEndAfter(t);const f=r.extractContents();Aa(e,f,!1),Vt(e,u,{checkRootAsContent:!0})||c.insertBefore(u,t),Vt(e,o,{checkRootAsContent:!0})||c.insertBefore(o,t),Vt(e,f,{checkRootAsContent:!0})||c.insertBefore(f,t),c.removeChild(t)}},Oa=(e,t,o)=>{const r=e.getBlockElements(),c=Y.fromDom(t),u=b=>An(b)in r,f=b=>Ln(b,c);ne(lf(o),b=>{fu(b,u,f).each(v=>{const w=y3(b,_=>u(_)&&!e.isValidChild(An(v),An(_)));if(w.length>0){const _=Ni(v);ne(w,D=>{fu(D,u,f).each(M=>{zg(e,M.dom,D.dom)})}),_.each(D=>hi(e,D.dom))}})})},gf=(e,t,o)=>{ne([...o,...ps(e,t)?[t]:[]],r=>ne(Fr(Y.fromDom(r),r.nodeName.toLowerCase()),c=>{zi(e,c.dom)&&li(c)}))},Cr=(e,t)=>{const o=hi(e,t);Oa(e,t,o),gf(e,t,o)},Da=(e,t)=>{if(wp(e,t)){const o=fy(e.getBlockElements());ls(o,t)}},U0=(e,t,o)=>{const r=u=>Ln(u,Y.fromDom(t)),c=ai(Y.fromDom(o),r);Ea(c,c.length-2).filter(Ts).fold(()=>Cr(e,t),u=>Cr(e,u.dom))},He=e=>e.hasAttribute(hu),Ga=(e,t)=>Sn(e.getTransparentElements(),t),wp=(e,t)=>it(t)&&Ga(e,t.nodeName),ps=(e,t)=>wp(e,t)&&He(t),zi=(e,t)=>wp(e,t)&&!He(t),Cc=(e,t)=>t.type===1&&Ga(e,t.name)&&U(t.attr(hu)),F3=Oi().browser,pu=e=>To(e,Ts),dx=e=>F3.isFirefox()&&An(e)==="table"?pu(ks(e)).filter(t=>An(t)==="caption").bind(t=>pu(kr(t)).map(o=>{const r=o.dom.offsetTop,c=t.dom.offsetTop,u=t.dom.offsetHeight;return r<=c?-u:0})).getOr(0):0,qa=(e,t)=>e.children&&Ce(e.children,t),ho=(e,t,o)=>{let r=0,c=0;const u=e.ownerDocument;if(o=o||e,t){if(o===e&&t.getBoundingClientRect&&Ns(Y.fromDom(e),"position")==="static"){const b=t.getBoundingClientRect();return r=b.left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,c=b.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop,{x:r,y:c}}let f=t;for(;f&&f!==o&&f.nodeType&&!qa(f,o);){const b=f;r+=b.offsetLeft||0,c+=b.offsetTop||0,f=b.offsetParent}for(f=t.parentNode;f&&f!==o&&f.nodeType&&!qa(f,o);)r-=f.scrollLeft||0,c-=f.scrollTop||0,f=f.parentNode;c+=dx(Y.fromDom(t))}return{x:r,y:c}},kl=(e,t)=>{const o=t.crossOrigin;return t.contentCssCors?"anonymous":X(o)?o(e):void 0},Vg=(e,t={})=>{let o=0;const r={},c=Y.fromDom(e),u=Cl(c),f=ce=>{t.referrerPolicy=ce},b=ce=>{t.contentCssCors=ce},v=ce=>{t.crossOrigin=ce},w=ce=>{Qn(W2(c),ce)},_=ce=>{const me=W2(c);gu(me,"#"+ce).each(Zo)},D=ce=>Jo(r,ce).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),M=ce=>new Promise((me,_e)=>{let Ie;const ut=Ke._addCacheSuffix(ce),$t=D(ut);r[ut]=$t,$t.count++;const Ae=(tn,Wn)=>{ne(tn,er),$t.status=Wn,$t.passed=[],$t.failed=[],Ie&&(Ie.onload=null,Ie.onerror=null,Ie=null)},ve=()=>Ae($t.passed,2),Oe=()=>Ae($t.failed,3);if(me&&$t.passed.push(me),_e&&$t.failed.push(_e),$t.status===1)return;if($t.status===2){ve();return}if($t.status===3){Oe();return}$t.status=1;const dt=Y.fromTag("link",u.dom);Ir(dt,{rel:"stylesheet",type:"text/css",id:$t.id});const en=kl(ce,t);en!==void 0&&hs(dt,"crossOrigin",en),t.referrerPolicy&&hs(dt,"referrerpolicy",t.referrerPolicy),Ie=dt.dom,Ie.onload=ve,Ie.onerror=Oe,w(dt),hs(dt,"href",ut)}),L=(ce,me)=>{const _e=D(ce);r[ce]=_e,_e.count++;const Ie=Y.fromTag("style",u.dom);Ir(Ie,{rel:"stylesheet",type:"text/css",id:_e.id,"data-mce-key":ce}),Ie.dom.innerHTML=me,w(Ie)},W=ce=>Promise.allSettled(Ue(ce,_e=>M(_e).then(qe(_e)))).then(_e=>{const Ie=De(_e,ut=>ut.status==="fulfilled");return Ie.fail.length>0?Promise.reject(Ue(Ie.fail,ut=>ut.reason)):Ue(Ie.pass,ut=>ut.value)}),V=ce=>{const me=Ke._addCacheSuffix(ce);Jo(r,me).each(_e=>{--_e.count===0&&(delete r[me],_(_e.id))})};return{load:M,loadRawCss:L,loadAll:W,unload:V,unloadRawCss:ce=>{Jo(r,ce).each(me=>{--me.count===0&&(delete r[ce],_(me.id))})},unloadAll:ce=>{ne(ce,me=>{V(me)})},_setReferrerPolicy:f,_setContentCssCors:b,_setCrossOrigin:v}},gy=(()=>{const e=new WeakMap;return{forElement:(o,r)=>{const u=Br(o).dom;return B.from(e.get(u)).getOrThunk(()=>{const f=Vg(u,r);return e.set(u,f),f})}}})(),hy=e=>e.nodeName.toLowerCase()==="span",Vi=(e,t)=>de(e)&&(Fg(t,e)||t.isInline(e.nodeName.toLowerCase())),Z0=(e,t,o)=>{const r=new _s(e,t).prev(!1),c=new _s(e,t).next(!1),u=Je(r)||Vi(r,o),f=Je(c)||Vi(c,o);return u&&f},Ka=e=>hy(e)&&e.getAttribute("data-mce-type")==="bookmark",H3=(e,t,o)=>Ye(e)&&e.data.length>0&&Z0(e,t,o),pe=e=>it(e)?e.childNodes.length>0:!1,Vc=e=>Ig(e)||dd(e),xp=(e,t,o,r)=>{var f;const c=r||t;if(it(t)&&Ka(t))return t;const u=t.childNodes;for(let b=u.length-1;b>=0;b--)xp(e,u[b],o,c);if(it(t)){const b=t.childNodes;b.length===1&&Ka(b[0])&&((f=t.parentNode)==null||f.insertBefore(b[0],t))}return!Vc(t)&&!Fg(o,t)&&!pe(t)&&!H3(t,c,o)&&e.remove(t),t},ms=Ke.makeMap,Ra=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,dr=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ho=/[<>&\"\']/g,mx=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,fm={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},gm={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Ug={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Ep=e=>{const t=Y.fromTag("div").dom;return t.innerHTML=e,t.textContent||t.innerText||e},py=(e,t)=>{const o={};if(e){const r=e.split(",");t=t||10;for(let c=0;c<r.length;c+=2){const u=String.fromCharCode(parseInt(r[c],t));if(!gm[u]){const f="&"+r[c+1]+";";o[u]=f,o[f]=u}}return o}else return},by=py("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),hm=(e,t)=>e.replace(t?Ra:dr,o=>gm[o]||o),Zg=e=>(""+e).replace(Ho,t=>gm[t]||t),fx=(e,t)=>e.replace(t?Ra:dr,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":gm[o]||"&#"+o.charCodeAt(0)+";"),vy=(e,t,o)=>{const r=o||by;return e.replace(t?Ra:dr,c=>gm[c]||r[c]||c)},Sc={encodeRaw:hm,encodeAllRaw:Zg,encodeNumeric:fx,encodeNamed:vy,getEncodeFunc:(e,t)=>{const o=py(t)||by,r=(f,b)=>f.replace(b?Ra:dr,v=>gm[v]!==void 0?gm[v]:o[v]!==void 0?o[v]:v.length>1?"&#"+((v.charCodeAt(0)-55296)*1024+(v.charCodeAt(1)-56320)+65536)+";":"&#"+v.charCodeAt(0)+";"),c=(f,b)=>vy(f,b,o),u=ms(e.replace(/\+/g,","));return u.named&&u.numeric?r:u.named?t?c:vy:u.numeric?fx:hm},decode:e=>e.replace(mx,(t,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):fm[o]||String.fromCharCode(o)):Ug[t]||by[t]||Ep(t))},Bs=(e,t)=>(e=Ke.trim(e),e?e.split(t||" "):[]),pm=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),Tp=e=>At(e)&&e.source&&Object.prototype.toString.call(e)==="[object RegExp]",Ya=e=>{const t=o=>Yt(o)?Ue(o,t):Tp(o)?new RegExp(o.source,o.flags):At(o)?Yd(o,t):o;return t(e)},Wg=e=>{const t=/^(~)?(.+)$/;return mo(Bs(e,","),o=>{const r=t.exec(o);if(r){const u=r[1]==="~"?"span":"div",f=r[2];return[{cloneName:u,name:f}]}else return[]})},ar=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...e!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...e!=="html5-strict"?["xml:lang"]:[]]),W0=e=>{let t,o;t="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",o="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(t+=" article aside details dialog figure main header footer hgroup section nav "+"a ins del canvas map",o+=" audio canvas command data datalist mark meter output picture progress template time wbr video ruby bdi keygen svg"),e!=="html5-strict"&&(o=[o,"acronym applet basefont big font strike tt"].join(" "),t=[t,"center dir isindex noframes"].join(" "));const r=[t,o].join(" ");return{blockContent:t,phrasingContent:o,flowContent:r}},Uc=e=>{const{blockContent:t,phrasingContent:o,flowContent:r}=W0(e),c=u=>Object.freeze(u.split(" "));return Object.freeze({blockContent:c(t),phrasingContent:c(o),flowContent:c(r)})},Ui={html4:mc(()=>Uc("html4")),html5:mc(()=>Uc("html5")),"html5-strict":mc(()=>Uc("html5-strict"))},yy=(e,t)=>{const{blockContent:o,phrasingContent:r,flowContent:c}=Ui[e]();return t==="blocks"?B.some(o):t==="phrasing"?B.some(r):t==="flow"?B.some(c):B.none()},Sr=e=>{const t=ar(e),{phrasingContent:o,flowContent:r}=W0(e),c={},u=(v,w,_)=>{c[v]={attributes:tf(w,qe({})),attributesOrder:w,children:tf(_,qe({}))}},f=(v,w="",_="")=>{const D=Bs(_),M=Bs(v);let L=M.length;const W=[...t,...Bs(w)];for(;L--;)u(M[L],W.slice(),D)},b=(v,w)=>{const _=Bs(v),D=Bs(w);let M=_.length;for(;M--;){const L=c[_[M]];for(let W=0,V=D.length;W<V;W++)L.attributes[D[W]]={},L.attributesOrder.push(D[W])}};return e!=="html5-strict"&&(ne(Bs("acronym applet basefont big font strike tt"),_=>{f(_,"",o)}),ne(Bs("center dir isindex noframes"),_=>{f(_,"",r)})),f("html","manifest","head body"),f("head","","base command link meta noscript script style title"),f("title hr noscript br"),f("base","href target"),f("link","href rel media hreflang type sizes hreflang"),f("meta","name http-equiv content charset property"),f("style","media type scoped"),f("script","src async defer type charset"),f("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),f("dd div","",r),f("address dt caption","",e==="html4"?o:r),f("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),f("blockquote","cite",r),f("ol","reversed start type","li"),f("ul","","li"),f("li","value",r),f("dl","","dt dd"),f("a","href target rel media hreflang type",e==="html4"?o:r),f("q","cite",o),f("ins del","cite datetime",r),f("img","src sizes srcset alt usemap ismap width height"),f("iframe","src name width height",r),f("embed","src type width height"),f("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),f("param","name value"),f("map","name",[r,"area"].join(" ")),f("area","alt coords shape href target rel media hreflang type"),f("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),f("colgroup","span","col"),f("col","span"),f("tbody thead tfoot","","tr"),f("tr","","td th"),f("td","colspan rowspan headers",r),f("th","colspan rowspan headers scope abbr",r),f("form","accept-charset action autocomplete enctype method name novalidate target",r),f("fieldset","disabled form name",[r,"legend"].join(" ")),f("label","form for",o),f("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),f("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?r:o),f("select","disabled form multiple name required size","option optgroup"),f("optgroup","disabled label","option"),f("option","disabled label selected value"),f("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),f("menu","type label",[r,"li"].join(" ")),f("noscript","",r),e!=="html4"&&(f("wbr"),f("ruby","",[o,"rt rp"].join(" ")),f("figcaption","",r),f("mark rt rp bdi","",o),f("summary","",[o,"h1 h2 h3 h4 h5 h6"].join(" ")),f("canvas","width height",r),f("data","value",o),f("video","src crossorigin poster preload autoplay mediagroup loop controlslist disablepictureinpicture disableremoteplayback playsinline muted controls width height buffered",[r,"track source"].join(" ")),f("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),f("picture","","img source"),f("source","src srcset type media sizes"),f("track","kind src srclang label default"),f("datalist","",[o,"option"].join(" ")),f("article section nav aside main header footer","",r),f("hgroup","","h1 h2 h3 h4 h5 h6"),f("figure","",[r,"figcaption"].join(" ")),f("time","datetime",o),f("dialog","open",r),f("command","type label icon disabled checked radiogroup command"),f("output","for form name",o),f("progress","value max",o),f("meter","value min max low high optimum",o),f("details","open",[r,"summary"].join(" ")),f("keygen","autofocus challenge disabled form keytype name"),u("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),e!=="html5-strict"&&(b("script","language xml:space"),b("style","xml:space"),b("object","declare classid code codebase codetype archive standby align border hspace vspace"),b("embed","align name hspace vspace"),b("param","valuetype type"),b("a","charset name rev shape coords"),b("br","clear"),b("applet","codebase archive code object alt name width height align hspace vspace"),b("img","name longdesc align border hspace vspace"),b("iframe","longdesc frameborder marginwidth marginheight scrolling align"),b("font basefont","size color face"),b("input","usemap align"),b("select"),b("textarea"),b("h1 h2 h3 h4 h5 h6 div p legend caption","align"),b("ul","type compact"),b("li","type"),b("ol dl menu dir","compact"),b("pre","width xml:space"),b("hr","align noshade size width"),b("isindex","prompt"),b("table","summary width frame rules cellspacing cellpadding align bgcolor"),b("col","width align char charoff valign"),b("colgroup","width align char charoff valign"),b("thead","align char charoff valign"),b("tr","align char charoff valign bgcolor"),b("th","axis align char charoff valign nowrap bgcolor width height"),b("form","accept"),b("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),b("tfoot","align char charoff valign"),b("tbody","align char charoff valign"),b("area","nohref"),b("body","background bgcolor text link vlink alink")),e!=="html4"&&(b("input button select textarea","autofocus"),b("input textarea","placeholder"),b("a","download"),b("link script img","crossorigin"),b("img","loading"),b("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),e!=="html4"&&ne([c.video,c.audio],v=>{delete v.children.audio,delete v.children.video}),ne(Bs("a form meter progress dfn"),v=>{c[v]&&delete c[v].children[v]}),delete c.caption.children.table,delete c.script,c},jg=e=>e==="-"?"remove":"add",_l=e=>{const t=/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/;return B.from(t.exec(e)).map(o=>({preset:o[1]==="@",name:o[2]}))},hf=e=>{const t=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return mo(Bs(e,","),o=>{const r=t.exec(o);if(r){const c=r[1],u=c?jg(c):"replace",f=r[2],b=mo(Bs(r[3],"|"),v=>_l(v).toArray());return[{operation:u,name:f,validChildren:b}]}else return[]})},pf=(e,t)=>{const o=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,r=/[*?+]/,{attributes:c,attributesOrder:u}=t;return ne(Bs(e,"|"),f=>{const b=o.exec(f);if(b){const v={},w=b[1],_=b[2].replace(/[\\:]:/g,":"),D=b[3],M=b[4];if(w==="!"&&(t.attributesRequired=t.attributesRequired||[],t.attributesRequired.push(_),v.required=!0),w==="-"){delete c[_],u.splice(Ke.inArray(u,_),1);return}if(D&&(D==="="?(t.attributesDefault=t.attributesDefault||[],t.attributesDefault.push({name:_,value:M}),v.defaultValue=M):D==="~"?(t.attributesForced=t.attributesForced||[],t.attributesForced.push({name:_,value:M}),v.forcedValue=M):D==="<"&&(v.validValues=Ke.makeMap(M,"?"))),r.test(_)){const L=v;t.attributePatterns=t.attributePatterns||[],L.pattern=pm(_),t.attributePatterns.push(L)}else c[_]||u.push(_),c[_]=v}})},V3=(e,t)=>{Bn(e.attributes,(o,r)=>{t.attributes[r]=o}),t.attributesOrder.push(...e.attributesOrder)},j0=(e,t)=>{const o=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return mo(Bs(t,","),r=>{const c=o.exec(r);if(c){const u=c[1],f=c[2],b=c[3],v=c[4],w=c[5],_={attributes:{},attributesOrder:[]};if(e.each(D=>V3(D,_)),u==="#"?_.paddEmpty=!0:u==="-"&&(_.removeEmpty=!0),v==="!"&&(_.removeEmptyAttrs=!0),w&&pf(w,_),b&&(_.outputName=f),f==="@")if(e.isNone())e=B.some(_);else return[];return[b?{name:f,element:_,aliasName:b}:{name:f,element:_}]}else return[]})},fd={},kp=Ke.makeMap,zo=Ke.each,gx=Ke.extend,gd=Ke.explode,Gg=(e,t={})=>{const o=kp(e," ",kp(e.toUpperCase()," "));return gx(o,t)},G0=e=>Gg("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),hd=(e,t)=>{if(e){const o={};return U(e)&&(e={"*":e}),zo(e,(r,c)=>{o[c]=o[c.toUpperCase()]=t==="map"?kp(r,/[, ]/):gd(r,/[, ]/)}),o}else return},Hr=(e={})=>{const t={},o={};let r=[];const c={},u={},f={},b=(nn,Gn,Xs)=>{const os=e[nn];if(os)return kp(os,/[, ]/,kp(os.toUpperCase(),/[, ]/));{let Bo=fd[nn];return Bo||(Bo=Gg(Gn,Xs),fd[nn]=Bo),Bo}},v=e.schema??"html5",w=Sr(v);e.verify_html===!1&&(e.valid_elements="*[*]");const _=hd(e.valid_styles),D=hd(e.invalid_styles,"map"),M=hd(e.valid_classes,"map"),L=b("whitespace_elements","pre script noscript style textarea video audio iframe object code"),W=b("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),V=b("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),q=b("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),ae="td th iframe video audio object script code",ce=b("non_empty_elements",ae+" pre svg textarea summary",V),me=b("move_caret_before_on_enter_elements",ae+" table",V),_e="h1 h2 h3 h4 h5 h6",Ie=b("text_block_elements",_e+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),ut=b("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing colgroup col",Ie),$t=b("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),Ae=b("transparent_elements","a ins del canvas map"),ve=b("wrap_block_elements","pre "+_e);zo("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),nn=>{u[nn]=new RegExp("</"+nn+"[^>]*>","gi")});const Oe=nn=>{const Gn=B.from(t["@"]),Xs=/[*?+]/;ne(j0(Gn,nn??""),({name:os,element:Bo,aliasName:Hs})=>{if(Hs&&(t[Hs]=Bo),Xs.test(os)){const Ei=Bo;Ei.pattern=pm(os),r.push(Ei)}else t[os]=Bo})},dt=nn=>{r=[],ne(It(t),Gn=>{delete t[Gn]}),Oe(nn)},en=(nn,Gn)=>{delete fd.text_block_elements,delete fd.block_elements;const Xs=Gn.extends?!sc(Gn.extends):!1,os=Gn.extends;if(o[nn]=os?o[os]:{},c[nn]=os??nn,ce[nn.toUpperCase()]={},ce[nn]={},Xs||(ut[nn.toUpperCase()]={},ut[nn]={}),os&&!t[nn]&&t[os]){const Bo=Ya(t[os]);delete Bo.removeEmptyAttrs,delete Bo.removeEmpty,t[nn]=Bo}else t[nn]={attributesOrder:[],attributes:{}};if(Yt(Gn.attributes)){const Bo=Ei=>{Hs.attributesOrder.push(Ei),Hs.attributes[Ei]={}},Hs=t[nn]??{};delete Hs.attributesDefault,delete Hs.attributesForced,delete Hs.attributePatterns,delete Hs.attributesRequired,Hs.attributesOrder=[],Hs.attributes={},ne(Gn.attributes,Ei=>{const Rc=ar(v);_l(Ei).each(({preset:eu,name:cg})=>{eu?cg==="global"&&ne(Rc,Bo):Bo(cg)})}),t[nn]=Hs}if(Et(Gn.padEmpty)){const Bo=t[nn]??{};Bo.paddEmpty=Gn.padEmpty,t[nn]=Bo}if(Yt(Gn.children)){const Bo={},Hs=Rc=>{Bo[Rc]={}},Ei=Rc=>{yy(v,Rc).each(eu=>{ne(eu,Hs)})};ne(Gn.children,Rc=>{_l(Rc).each(({preset:eu,name:cg})=>{eu?Ei(cg):Hs(cg)})}),o[nn]=Bo}os&&Bn(o,(Bo,Hs)=>{Bo[os]&&(o[Hs]=Bo=gx({},o[Hs]),Bo[nn]=Bo[os])})},tn=nn=>{ne(Wg(nn??""),({name:Gn,cloneName:Xs})=>{en(Gn,{extends:Xs})})},Wn=(nn,Gn)=>{f[nn]=Gn},xo=nn=>{At(nn)?Bn(nn,(Gn,Xs)=>{const os=Gn.componentUrl;U(os)&&Wn(Xs,os),en(Xs,Gn)}):U(nn)&&tn(nn)},Ko=nn=>{ne(hf(nn??""),({operation:Gn,name:Xs,validChildren:os})=>{const Bo=Gn==="replace"?{"#comment":{}}:o[Xs],Hs=Rc=>{Gn==="remove"?delete Bo[Rc]:Bo[Rc]={}},Ei=Rc=>{yy(v,Rc).each(eu=>{ne(eu,Hs)})};ne(os,({preset:Rc,name:eu})=>{Rc?Ei(eu):Hs(eu)}),o[Xs]=Bo})},cs=nn=>{const Gn=t[nn];if(Gn)return Gn;let Xs=r.length;for(;Xs--;){const os=r[Xs];if(os.pattern.test(nn))return os}},Gr=()=>{e.valid_elements?(dt(e.valid_elements),zo(w,(nn,Gn)=>{o[Gn]=nn.children})):(zo(w,(nn,Gn)=>{t[Gn]={attributes:nn.attributes,attributesOrder:nn.attributesOrder},o[Gn]=nn.children}),zo(Bs("strong/b em/i"),nn=>{const Gn=Bs(nn,"/");t[Gn[1]].outputName=Gn[0]}),zo($t,(nn,Gn)=>{t[Gn]&&(e.padd_empty_block_inline_children&&(t[Gn].paddInEmptyBlock=!0),t[Gn].removeEmpty=!0)}),zo(Bs("ol ul blockquote a table tbody"),nn=>{t[nn]&&(t[nn].removeEmpty=!0)}),zo(Bs("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),nn=>{t[nn]&&(t[nn].paddEmpty=!0)}),zo(Bs("span"),nn=>{t[nn].removeEmptyAttrs=!0})),delete t.svg,xo(e.custom_elements),Ko(e.valid_children),Oe(e.extended_valid_elements),Ko("+ol[ul|ol],+ul[ul|ol]"),zo({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(nn,Gn)=>{t[Gn]&&(t[Gn].parentsRequired=Bs(nn))}),e.invalid_elements&&zo(gd(e.invalid_elements),nn=>{t[nn]&&delete t[nn]}),cs("span")||Oe("span[!data-mce-type|*]")},xi=qe(_),ft=qe(D),Zt=qe(M),co=qe(q),no=qe(ut),ua=qe(Ie),Be=qe($t),st=qe(Object.seal(V)),Tt=qe(W),$n=qe(ce),yn=qe(me),Oo=qe(L),Jl=qe(Ae),Dc=qe(ve),Ql=qe(Object.seal(u)),al=(nn,Gn)=>{const Xs=o[nn.toLowerCase()];return!!(Xs&&Xs[Gn.toLowerCase()])},jh=(nn,Gn)=>{const Xs=cs(nn);if(Xs)if(Gn){if(Xs.attributes[Gn])return!0;const os=Xs.attributePatterns;if(os){let Bo=os.length;for(;Bo--;)if(os[Bo].pattern.test(Gn))return!0}}else return!0;return!1},sc=nn=>Sn(no(),nn),Jc=nn=>!pn(nn,"#")&&jh(nn)&&!sc(nn),ag=nn=>Sn(Dc(),nn)||Jc(nn),d2=qe(c),jk=qe(f);return Gr(),{type:v,children:o,elements:t,getValidStyles:xi,getValidClasses:Zt,getBlockElements:no,getInvalidStyles:ft,getVoidElements:st,getTextBlockElements:ua,getTextInlineElements:Be,getBoolAttrs:co,getElementRule:cs,getSelfClosingElements:Tt,getNonEmptyElements:$n,getMoveCaretBeforeOnEnterElements:yn,getWhitespaceElements:Oo,getTransparentElements:Jl,getSpecialElements:Ql,getComponentUrls:jk,isValidChild:al,isValid:jh,isBlock:sc,isInline:Jc,isWrapper:ag,getCustomElements:d2,addValidElements:Oe,setValidElements:dt,addCustomElements:xo,addValidChildren:Ko}},bf=e=>({value:qg(e)}),qg=e=>u0(e,"#").toUpperCase(),q0=e=>{const t=e.toString(16);return(t.length===1?"0"+t:t).toUpperCase()},K0=e=>{const t=q0(e.red)+q0(e.green)+q0(e.blue);return bf(t)},Y0=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,_p=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,hx=(e,t,o,r)=>({red:e,green:t,blue:o,alpha:r}),Cy=(e,t,o,r)=>{const c=parseInt(e,10),u=parseInt(t,10),f=parseInt(o,10),b=parseFloat(r);return hx(c,u,f,b)},Sy=e=>Y0.test(e)?"rgb":_p.test(e)?"rgba":"other",Kg=e=>{const t=Y0.exec(e);if(t!==null)return B.some(Cy(t[1],t[2],t[3],"1"));const o=_p.exec(e);return o!==null?B.some(Cy(o[1],o[2],o[3],o[4])):B.none()},Al=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,pi=e=>Kg(e).map(K0).map(t=>"#"+t.value).getOr(e),pd=(e={},t)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,c=/\s+$/,u={};let f,b;const v=of;t&&(f=t.getValidStyles(),b=t.getInvalidStyles());const w=(`\\" \\' \\; \\: ; : `+v).split(" ");for(let D=0;D<w.length;D++)u[w[D]]=v+D,u[v+D]=w[D];const _={parse:D=>{const M={};let L=!1;const W=e.url_converter,V=e.url_converter_scope||_,q=(Ae,ve,Oe)=>{const dt=M[Ae+"-top"+ve];if(!dt)return;const en=M[Ae+"-right"+ve];if(!en)return;const tn=M[Ae+"-bottom"+ve];if(!tn)return;const Wn=M[Ae+"-left"+ve];if(!Wn)return;const xo=[dt,en,tn,Wn];let Ko=xo.length-1;for(;Ko--&&xo[Ko]===xo[Ko+1];);Ko>-1&&Oe||(M[Ae+ve]=Ko===-1?xo[0]:xo.join(" "),delete M[Ae+"-top"+ve],delete M[Ae+"-right"+ve],delete M[Ae+"-bottom"+ve],delete M[Ae+"-left"+ve])},ae=Ae=>{const ve=M[Ae];if(!ve)return;const Oe=ve.indexOf(",")>-1?[ve]:ve.split(" ");let dt=Oe.length;for(;dt--;)if(Oe[dt]!==Oe[0])return!1;return M[Ae]=Oe[0],!0},ce=(Ae,ve,Oe,dt)=>{ae(ve)&&ae(Oe)&&ae(dt)&&(M[Ae]=M[ve]+" "+M[Oe]+" "+M[dt],delete M[ve],delete M[Oe],delete M[dt])},me=Ae=>(L=!0,u[Ae]),_e=(Ae,ve)=>(L&&(Ae=Ae.replace(/\uFEFF[0-9]/g,Oe=>u[Oe])),ve||(Ae=Ae.replace(/\\([\'\";:])/g,"$1")),Ae),Ie=Ae=>String.fromCharCode(parseInt(Ae.slice(1),16)),ut=Ae=>Ae.replace(/\\[0-9a-f]+/gi,Ie),$t=(Ae,ve,Oe,dt,en,tn)=>{if(en=en||tn,en)return en=_e(en),"'"+en.replace(/\'/g,"\\'")+"'";if(ve=_e(ve||Oe||dt||""),!e.allow_script_urls){const Wn=ve.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Wn)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(Wn))return""}return W&&(ve=W.call(V,ve,"style")),"url('"+ve.replace(/\'/g,"\\'")+"')"};if(D){D=D.replace(/[\u0000-\u001F]/g,""),D=D.replace(/\\[\"\';:\uFEFF]/g,me).replace(/\"[^\"]+\"|\'[^\']+\'/g,ve=>ve.replace(/[;:]/g,me));let Ae;for(;Ae=r.exec(D);){r.lastIndex=Ae.index+Ae[0].length;let ve=Ae[1].replace(c,"").toLowerCase(),Oe=Ae[2].replace(c,"");if(ve&&Oe){if(ve=ut(ve),Oe=ut(Oe),ve.indexOf(v)!==-1||ve.indexOf('"')!==-1||!e.allow_script_urls&&(ve==="behavior"||/expression\s*\(|\/\*|\*\//.test(Oe)))continue;ve==="font-weight"&&Oe==="700"?Oe="bold":(ve==="color"||ve==="background-color")&&(Oe=Oe.toLowerCase()),Sy(Oe)==="rgb"&&Kg(Oe).each(dt=>{Oe=pi(Al(dt)).toLowerCase()}),Oe=Oe.replace(o,$t),M[ve]=L?_e(Oe,!0):Oe}}q("border","",!0),q("border","-width"),q("border","-color"),q("border","-style"),q("padding",""),q("margin",""),ce("border","border-width","border-style","border-color"),M.border==="medium none"&&delete M.border,M["border-image"]==="none"&&delete M["border-image"]}return M},serialize:(D,M)=>{let L="";const W=(q,ae)=>{const ce=ae[q];if(ce)for(let me=0,_e=ce.length;me<_e;me++){const Ie=ce[me],ut=D[Ie];ut&&(L+=(L.length>0?" ":"")+Ie+": "+ut+";")}},V=(q,ae)=>{if(!b||!ae)return!0;let ce=b["*"];return ce&&ce[q]?!1:(ce=b[ae],!(ce&&ce[q]))};return M&&f?(W("*",f),W(M,f)):Bn(D,(q,ae)=>{q&&V(ae,M)&&(L+=(L.length>0?" ":"")+ae+": "+q+";")}),L}};return _},px={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},X0=e=>e instanceof Event||X(e.initEvent),wy=e=>e.isDefaultPrevented===gt||e.isDefaultPrevented===$e,bx=e=>Le(e.preventDefault)||X0(e),xy=(e,t)=>{const o=t??{};for(const r in e)Sn(px,r)||(o[r]=e[r]);return de(e.composedPath)&&(o.composedPath=()=>e.composedPath()),de(e.getModifierState)&&(o.getModifierState=r=>e.getModifierState(r)),de(e.getTargetRanges)&&(o.getTargetRanges=()=>e.getTargetRanges()),o},J0=(e,t,o,r)=>{const c=xy(t,r);return c.type=e,Le(c.target)&&(c.target=c.srcElement??o),bx(t)&&(c.preventDefault=()=>{c.defaultPrevented=!0,c.isDefaultPrevented=gt,X(t.preventDefault)&&t.preventDefault()},c.stopPropagation=()=>{c.cancelBubble=!0,c.isPropagationStopped=gt,X(t.stopPropagation)&&t.stopPropagation()},c.stopImmediatePropagation=()=>{c.isImmediatePropagationStopped=gt,c.stopPropagation()},wy(c)||(c.isDefaultPrevented=c.defaultPrevented===!0?gt:$e,c.isPropagationStopped=c.cancelBubble===!0?gt:$e,c.isImmediatePropagationStopped=$e)),c},Q0="mce-data-",eb=/^(?:mouse|contextmenu)|click/,Ol=(e,t,o,r)=>{e.addEventListener(t,o,r||!1)},Ap=(e,t,o,r)=>{e.removeEventListener(t,o,r||!1)},Yg=e=>de(e)&&eb.test(e.type),vf=(e,t)=>{const o=J0(e.type,e,document,t);if(Yg(e)&&Je(e.pageX)&&!Je(e.clientX)){const r=o.target.ownerDocument||document,c=r.documentElement,u=r.body,f=o;f.pageX=e.clientX+(c&&c.scrollLeft||u&&u.scrollLeft||0)-(c&&c.clientLeft||u&&u.clientLeft||0),f.pageY=e.clientY+(c&&c.scrollTop||u&&u.scrollTop||0)-(c&&c.clientTop||u&&u.clientTop||0)}return o},vx=(e,t,o)=>{const r=e.document,c={type:"ready"};if(o.domLoaded){t(c);return}const u=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,f=()=>{Ap(e,"DOMContentLoaded",f),Ap(e,"load",f),o.domLoaded||(o.domLoaded=!0,t(c)),e=null};u()?f():Ol(e,"DOMContentLoaded",f),o.domLoaded||Ol(e,"load",f)},Wk=class Wk{constructor(){Ze(this,"domLoaded",!1);Ze(this,"events",{});Ze(this,"expando");Ze(this,"hasFocusIn");Ze(this,"count",1);this.expando=Q0+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(t,o,r,c){const u=this;let f;const b=window,v=M=>{u.executeHandlers(vf(M||b.event),w)};if(!t||Ye(t)||Tn(t))return r;let w;t[u.expando]?w=t[u.expando]:(w=u.count++,t[u.expando]=w,u.events[w]={}),c=c||t;const _=o.split(" ");let D=_.length;for(;D--;){let M=_[D],L=v,W=!1,V=!1;if(M==="DOMContentLoaded"&&(M="ready"),u.domLoaded&&M==="ready"&&t.readyState==="complete"){r.call(c,vf({type:M}));continue}!u.hasFocusIn&&(M==="focusin"||M==="focusout")&&(W=!0,V=M==="focusin"?"focus":"blur",L=q=>{const ae=vf(q||b.event);ae.type=ae.type==="focus"?"focusin":"focusout",u.executeHandlers(ae,w)}),f=u.events[w][M],f?M==="ready"&&u.domLoaded?r(vf({type:M})):f.push({func:r,scope:c}):(u.events[w][M]=f=[{func:r,scope:c}],f.fakeName=V,f.capture=W,f.nativeHandler=L,M==="ready"?vx(t,L,u):Ol(t,V||M,L,W))}return t=f=null,r}unbind(t,o,r){if(!t||Ye(t)||Tn(t))return this;const c=t[this.expando];if(c){let u=this.events[c];if(o){const f=o.split(" ");let b=f.length;for(;b--;){const v=f[b],w=u[v];if(w){if(r){let _=w.length;for(;_--;)if(w[_].func===r){const D=w.nativeHandler,M=w.fakeName,L=w.capture,W=w.slice(0,_).concat(w.slice(_+1));W.nativeHandler=D,W.fakeName=M,W.capture=L,u[v]=W}}(!r||w.length===0)&&(delete u[v],Ap(t,w.fakeName||v,w.nativeHandler,w.capture))}}}else Bn(u,(f,b)=>{Ap(t,f.fakeName||b,f.nativeHandler,f.capture)}),u={};for(const f in u)if(Sn(u,f))return this;delete this.events[c];try{delete t[this.expando]}catch{t[this.expando]=null}}return this}fire(t,o,r){return this.dispatch(t,o,r)}dispatch(t,o,r){if(!t||Ye(t)||Tn(t))return this;const c=vf({type:o,target:t},r);do{const u=t[this.expando];u&&this.executeHandlers(c,u),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow}while(t&&!c.isPropagationStopped());return this}clean(t){if(!t||Ye(t)||Tn(t))return this;if(t[this.expando]&&this.unbind(t),t.getElementsByTagName||(t=t.document),t&&t.getElementsByTagName){this.unbind(t);const o=t.getElementsByTagName("*");let r=o.length;for(;r--;)t=o[r],t[this.expando]&&this.unbind(t)}return this}destroy(){this.events={}}cancel(t){return t&&(t.preventDefault(),t.stopImmediatePropagation()),!1}executeHandlers(t,o){const r=this.events[o],c=r&&r[t.type];if(c)for(let u=0,f=c.length;u<f;u++){const b=c[u];if(b&&b.func.call(b.scope,t)===!1&&t.preventDefault(),t.isImmediatePropagationStopped())return}}};Ze(Wk,"Event",new Wk);let Xg=Wk;const Ma=Ke.each,U3=Ke.grep,Ey="data-mce-style",Ty=Ke.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),tb=(e,t,o)=>{Le(o)||o===""?sr(e,t):hs(e,t,o)},yx=e=>e.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()),yf=(e,t)=>{let o=0;if(e)for(let r=e.nodeType,c=e.previousSibling;c;c=c.previousSibling){const u=c.nodeType;t&&Ye(c)&&(u===r||!c.data.length)||(o++,r=u)}return o},Cx=(e,t)=>{const o=es(t,"style"),r=e.serialize(e.parse(o),An(t));tb(t,Ey,r)},Op=(e,t)=>Fn(e)?Sn(Ty,t)?e+"":e+"px":e,ky=(e,t,o)=>{const r=yx(t);Le(o)||o===""?O0(e,r):pc(e,r,Op(o,r))},Sx=(e,t,o)=>{const r=t.keep_values,c={set:(f,b,v)=>{const w=Y.fromDom(f);X(t.url_converter)&&de(b)&&(b=t.url_converter.call(t.url_converter_scope||o(),String(b),v,f));const _="data-mce-"+v;tb(w,_,b),tb(w,v,b)},get:(f,b)=>{const v=Y.fromDom(f);return es(v,"data-mce-"+b)||es(v,b)}},u={style:{set:(f,b)=>{const v=Y.fromDom(f);r&&tb(v,Ey,b),sr(v,"style"),U(b)&&ui(v,e.parse(b))},get:f=>{const b=Y.fromDom(f),v=es(b,Ey)||es(b,"style");return e.serialize(e.parse(v),An(b))}}};return r&&(u.href=u.src=c),u},Un=(e,t={})=>{const o={},r=window,c={};let u=0;const f=!0,b=!0,v=gy.forElement(Y.fromDom(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy,crossOrigin:he=>{const xe=t.crossOrigin;if(X(xe))return xe(he,"stylesheet")}}),w=[],_=t.schema?t.schema:Hr({}),D=pd({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),M=t.ownEvents?new Xg:Xg.Event,L=_.getBlockElements(),W=he=>U(he)?Sn(L,he):it(he)&&(Sn(L,he.nodeName)||ps(_,he)),V=he=>he&&e&&U(he)?e.getElementById(he):he,q=he=>{const xe=V(he);return de(xe)?Y.fromDom(xe):null},ae=(he,xe,ht="")=>{let rt;const un=q(he);if(de(un)&&Ts(un)){const oo=hH[xe];oo&&oo.get?rt=oo.get(un.dom,xe):rt=es(un,xe)}return de(rt)?rt:ht},ce=he=>{const xe=V(he);return Le(xe)?[]:xe.attributes},me=(he,xe,ht)=>{Zt(he,rt=>{if(it(rt)){const un=Y.fromDom(rt),oo=ht===""?null:ht,Js=es(un,xe),ig=hH[xe];ig&&ig.set?ig.set(un.dom,oo,xe):tb(un,xe,oo),Js!==oo&&t.onSetAttrib&&t.onSetAttrib({attrElm:un.dom,attrName:xe,attrValue:oo})}})},_e=(he,xe)=>he.cloneNode(xe),Ie=()=>t.root_element||e.body,ut=he=>{const xe=bc(he);return{x:xe.x,y:xe.y,w:xe.width,h:xe.height}},$t=(he,xe)=>ho(e.body,V(he),xe),Ae=(he,xe,ht)=>{Zt(he,rt=>{const un=Y.fromDom(rt);ky(un,xe,ht),t.update_styles&&Cx(D,un)})},ve=(he,xe)=>{Zt(he,ht=>{const rt=Y.fromDom(ht);Bn(xe,(un,oo)=>{ky(rt,oo,un)}),t.update_styles&&Cx(D,rt)})},Oe=(he,xe,ht)=>{const rt=V(he);if(!(Le(rt)||!Wa(rt)&&!M3(rt)))return ht?Ns(Y.fromDom(rt),yx(xe)):(xe=xe.replace(/-(\D)/g,(un,oo)=>oo.toUpperCase()),xe==="float"&&(xe="cssFloat"),rt.style?rt.style[xe]:void 0)},dt=he=>{const xe=V(he);if(!xe)return{w:0,h:0};let ht=Oe(xe,"width"),rt=Oe(xe,"height");return(!ht||ht.indexOf("px")===-1)&&(ht="0"),(!rt||rt.indexOf("px")===-1)&&(rt="0"),{w:parseInt(ht,10)||xe.offsetWidth||xe.clientWidth,h:parseInt(rt,10)||xe.offsetHeight||xe.clientHeight}},en=he=>{const xe=V(he),ht=$t(xe),rt=dt(xe);return{x:ht.x,y:ht.y,w:rt.w,h:rt.h}},tn=(he,xe)=>{if(!he)return!1;const ht=Yt(he)?he:[he];return Ge(ht,rt=>Ic(Y.fromDom(rt),xe))},Wn=(he,xe,ht,rt)=>{const un=[];let oo=V(he);rt=rt===void 0;const Js=ht||(Ie().nodeName!=="BODY"?Ie().parentNode:null);if(U(xe))if(xe==="*")xe=it;else{const ig=xe;xe=Qm=>tn(Qm,ig)}for(;oo&&!(oo===Js||Le(oo.nodeType)||dd(oo)||Ig(oo));){if(!xe||xe(oo))if(rt)un.push(oo);else return[oo];oo=oo.parentNode}return rt?un:null},xo=(he,xe,ht)=>{const rt=Wn(he,xe,ht,!1);return rt&&rt.length>0?rt[0]:null},Ko=(he,xe,ht)=>{let rt=xe;if(he){U(xe)&&(rt=un=>tn(un,xe));for(let un=he[ht];un;un=un[ht])if(X(rt)&&rt(un))return un}return null},cs=(he,xe)=>Ko(he,xe,"nextSibling"),Gr=(he,xe)=>Ko(he,xe,"previousSibling"),xi=he=>X(he.querySelectorAll),ft=(he,xe)=>{const ht=V(xe)??t.root_element??e;return xi(ht)?Mr(ht.querySelectorAll(he)):[]},Zt=function(he,xe,ht){const rt=ht??this;if(Yt(he)){const un=[];return Ma(he,(oo,Js)=>{const ig=V(oo);ig&&un.push(xe.call(rt,ig,Js))}),un}else{const un=V(he);return un?xe.call(rt,un):!1}},co=(he,xe)=>{Zt(he,ht=>{Bn(xe,(rt,un)=>{me(ht,un,rt)})})},no=(he,xe)=>{Zt(he,ht=>{const rt=Y.fromDom(ht);ad(rt,xe)})},ua=(he,xe,ht,rt,un)=>Zt(he,oo=>{const Js=U(xe)?e.createElement(xe):xe;return de(ht)&&co(Js,ht),rt&&(!U(rt)&&rt.nodeType?Js.appendChild(rt):U(rt)&&no(Js,rt)),un?Js:oo.appendChild(Js)}),Be=(he,xe,ht)=>ua(e.createElement(he),he,xe,ht,!0),st=Sc.decode,Tt=Sc.encodeAllRaw,$n=(he,xe,ht="")=>{let rt="<"+he;for(const un in xe)Ss(xe,un)&&(rt+=" "+un+'="'+Tt(xe[un])+'"');return pg(ht)&&Sn(_.getVoidElements(),he)?rt+" />":rt+">"+ht+"</"+he+">"},yn=he=>{const xe=e.createElement("div"),ht=e.createDocumentFragment();ht.appendChild(xe),he&&(xe.innerHTML=he);let rt;for(;rt=xe.firstChild;)ht.appendChild(rt);return ht.removeChild(xe),ht},Oo=(he,xe)=>Zt(he,ht=>{const rt=Y.fromDom(ht);return xe&&ne(ks(rt),un=>{fo(un)&&un.dom.length===0?Zo(un):Qr(rt,un)}),Zo(rt),rt.dom}),Jl=he=>Zt(he,xe=>{const ht=xe.attributes;for(let rt=ht.length-1;rt>=0;rt--)xe.removeAttributeNode(ht.item(rt))}),Dc=he=>D.parse(he),Ql=(he,xe)=>D.serialize(he,xe),al=he=>{if(f2!==Un.DOM&&e===document){if(o[he])return;o[he]=!0}let xe=e.getElementById("mceDefaultStyles");if(!xe){xe=e.createElement("style"),xe.id="mceDefaultStyles",xe.type="text/css";const ht=e.head;ht.firstChild?ht.insertBefore(xe,ht.firstChild):ht.appendChild(xe)}xe.styleSheet?xe.styleSheet.cssText+=he:xe.appendChild(e.createTextNode(he))},jh=he=>{he||(he=""),ne(he.split(","),xe=>{c[xe]=!0,v.load(xe).catch(yt)})},sc=(he,xe,ht)=>{Zt(he,rt=>{if(it(rt)){const un=Y.fromDom(rt),oo=xe.split(" ");ne(oo,Js=>{de(ht)?(ht?Hc:yr)(un,Js):Lr(un,Js)})}})},Jc=(he,xe)=>{sc(he,xe,!0)},ag=(he,xe)=>{sc(he,xe,!1)},d2=(he,xe)=>{const ht=q(he),rt=xe.split(" ");return de(ht)&&ul(rt,un=>R0(ht,un))},jk=he=>{Zt(he,xe=>O0(Y.fromDom(xe),"display"))},nn=he=>{Zt(he,xe=>pc(Y.fromDom(xe),"display","none"))},Gn=he=>{const xe=q(he);return de(xe)&&$o(lr(xe,"display"),"none")},Xs=he=>(he||"mce_")+u++,os=he=>{const xe=q(he);return de(xe)?it(xe.dom)?xe.dom.outerHTML:h3(xe):""},Bo=(he,xe)=>{Zt(he,ht=>{it(ht)&&(ht.outerHTML=xe)})},Hs=(he,xe)=>{const ht=V(xe);return Zt(he,rt=>{const un=ht==null?void 0:ht.parentNode,oo=ht==null?void 0:ht.nextSibling;return un&&(oo?un.insertBefore(rt,oo):un.appendChild(rt)),rt})},Ei=(he,xe,ht)=>Zt(xe,rt=>{var oo;const un=Yt(xe)?he.cloneNode(!0):he;return ht&&Ma(U3(rt.childNodes),Js=>{un.appendChild(Js)}),(oo=rt.parentNode)==null||oo.replaceChild(un,rt),rt}),Rc=(he,xe)=>{if(he.nodeName!==xe.toUpperCase()){const ht=Be(xe);return Ma(ce(he),rt=>{me(ht,rt.nodeName,ae(he,rt.nodeName))}),Ei(ht,he,!0),ht}else return he},eu=(he,xe)=>{let ht=he;for(;ht;){let rt=xe;for(;rt&&ht!==rt;)rt=rt.parentNode;if(ht===rt)break;ht=ht.parentNode}return!ht&&he.ownerDocument?he.ownerDocument.documentElement:ht},cg=(he,xe,ht)=>wn(xe)?Vt(_,he,{...ht,isContent:un=>{const oo=un.nodeName.toLowerCase();return!!xe[oo]}}):Vt(_,he,ht),Gk=()=>e.createRange(),qk=(he,xe,ht)=>{let rt=Gk(),un,oo;if(he&&xe&&he.parentNode&&xe.parentNode){const Js=he.parentNode;return rt.setStart(Js,yf(he)),rt.setEnd(xe.parentNode,yf(xe)),un=rt.extractContents(),rt=Gk(),rt.setStart(xe.parentNode,yf(xe)+1),rt.setEnd(Js,yf(he)+1),oo=rt.extractContents(),Js.insertBefore(xp(f2,un,_),he),ht?Js.insertBefore(ht,he):Js.insertBefore(xe,he),Js.insertBefore(xp(f2,oo,_),he),Oo(he),ht||xe}else return},Ow=(he,xe,ht,rt)=>{if(Yt(he)){let un=he.length;const oo=[];for(;un--;)oo[un]=Ow(he[un],xe,ht,rt);return oo}else return t.collect&&(he===e||he===r)&&w.push([he,xe,ht,rt]),M.bind(he,xe,ht,rt||f2)},Jm=(he,xe,ht)=>{if(Yt(he)){let rt=he.length;const un=[];for(;rt--;)un[rt]=Jm(he[rt],xe,ht);return un}else{if(w.length>0&&(he===e||he===r)){let rt=w.length;for(;rt--;){const[un,oo,Js]=w[rt];he===un&&(!xe||xe===oo)&&(!ht||ht===Js)&&M.unbind(un,oo,Js)}}return M.unbind(he,xe,ht)}},m2=(he,xe,ht)=>M.dispatch(he,xe,ht),LM=(he,xe,ht)=>M.dispatch(he,xe,ht),Kk=he=>{if(he&&Wa(he)){const xe=he.getAttribute("data-mce-contenteditable");return xe&&xe!=="inherit"?xe:he.contentEditable!=="inherit"?he.contentEditable:null}else return null},f2={doc:e,settings:t,win:r,files:c,stdMode:f,boxModel:b,styleSheetLoader:v,boundEvents:w,styles:D,schema:_,events:M,isBlock:W,root:null,clone:_e,getRoot:Ie,getViewPort:ut,getRect:en,getSize:dt,getParent:xo,getParents:Wn,get:V,getNext:cs,getPrev:Gr,select:ft,is:tn,add:ua,create:Be,createHTML:$n,createFragment:yn,remove:Oo,setStyle:Ae,getStyle:Oe,setStyles:ve,removeAllAttribs:Jl,setAttrib:me,setAttribs:co,getAttrib:ae,getPos:$t,parseStyle:Dc,serializeStyle:Ql,addStyle:al,loadCSS:jh,addClass:Jc,removeClass:ag,hasClass:d2,toggleClass:sc,show:jk,hide:nn,isHidden:Gn,uniqueId:Xs,setHTML:no,getOuterHTML:os,setOuterHTML:Bo,decode:st,encode:Tt,insertAfter:Hs,replace:Ei,rename:Rc,findCommonAncestor:eu,run:Zt,getAttribs:ce,isEmpty:cg,createRng:Gk,nodeIndex:yf,split:qk,bind:Ow,unbind:Jm,fire:LM,dispatch:m2,getContentEditable:Kk,getContentEditableParent:he=>{const xe=Ie();let ht=null;for(let rt=he;rt&&rt!==xe&&(ht=Kk(rt),ht===null);rt=rt.parentNode);return ht},isEditable:he=>{if(de(he)){const xe=it(he)?he:he.parentElement;return de(xe)&&Wa(xe)&&Fi(Y.fromDom(xe))}else return!1},destroy:()=>{if(w.length>0){let he=w.length;for(;he--;){const[xe,ht,rt]=w[he];M.unbind(xe,ht,rt)}}Bn(c,(he,xe)=>{v.unload(xe),delete c[xe]})},isChildOf:(he,xe)=>he===xe||xe.contains(he),dumpRng:he=>"startContainer: "+he.startContainer.nodeName+", startOffset: "+he.startOffset+", endContainer: "+he.endContainer.nodeName+", endOffset: "+he.endOffset},hH=Sx(D,t,qe(f2));return f2};Un.DOM=Un(document),Un.nodeIndex=yf;const nb=Un.DOM,qn=0,wc=1,bm=2,Dp=3,Rn=class Rn{constructor(t={}){Ze(this,"settings");Ze(this,"states",{});Ze(this,"queue",[]);Ze(this,"scriptLoadedCallbacks",{});Ze(this,"queueLoadedCallbacks",[]);Ze(this,"loading",!1);this.settings=t}_setReferrerPolicy(t){this.settings.referrerPolicy=t}_setCrossOrigin(t){this.settings.crossOrigin=t}loadScript(t){return new Promise((o,r)=>{const c=nb,u=document;let f;const b=()=>{c.remove(_),f&&(f.onerror=f.onload=f=null)},v=()=>{b(),o()},w=()=>{b(),r("Failed to load script: "+t)},_=c.uniqueId();f=u.createElement("script"),f.id=_,f.type="text/javascript",f.src=Ke._addCacheSuffix(t),this.settings.referrerPolicy&&c.setAttrib(f,"referrerpolicy",this.settings.referrerPolicy);const D=this.settings.crossOrigin;if(X(D)){const M=D(t);M!==void 0&&c.setAttrib(f,"crossorigin",M)}f.onload=v,f.onerror=w,(u.head||u.body).appendChild(f)})}isDone(t){return this.states[t]===bm}markDone(t){this.states[t]=bm}add(t){const o=this;return o.queue.push(t),o.states[t]===void 0&&(o.states[t]=qn),new Promise((c,u)=>{o.scriptLoadedCallbacks[t]||(o.scriptLoadedCallbacks[t]=[]),o.scriptLoadedCallbacks[t].push({resolve:c,reject:u})})}load(t){return this.add(t)}remove(t){delete this.states[t],delete this.scriptLoadedCallbacks[t]}loadQueue(){const t=this.queue;return this.queue=[],this.loadScripts(t)}loadScripts(t){const o=this,r=(v,w)=>{Jo(o.scriptLoadedCallbacks,w).each(_=>{ne(_,D=>D[v](w))}),delete o.scriptLoadedCallbacks[w]},c=v=>{const w=ge(v,_=>_.status==="rejected");return w.length>0?Promise.reject(mo(w,({reason:_})=>Yt(_)?_:[_])):Promise.resolve()},u=v=>Promise.allSettled(Ue(v,w=>o.states[w]===bm?(r("resolve",w),Promise.resolve()):o.states[w]===Dp?(r("reject",w),Promise.reject(w)):(o.states[w]=wc,o.loadScript(w).then(()=>{o.states[w]=bm,r("resolve",w);const _=o.queue;return _.length>0?(o.queue=[],u(_).then(c)):Promise.resolve()},()=>(o.states[w]=Dp,r("reject",w),Promise.reject(w)))))),f=v=>(o.loading=!0,u(v).then(w=>{o.loading=!1;const _=o.queueLoadedCallbacks.shift();return B.from(_).each(er),c(w)})),b=d0(t);return o.loading?new Promise((v,w)=>{o.queueLoadedCallbacks.push(()=>{f(b).then(v,w)})}):f(b)}getScriptAttributes(t){const o={};this.settings.referrerPolicy&&(o.referrerpolicy=this.settings.referrerPolicy);const r=this.settings.crossOrigin;if(X(r)){const c=r(t);U(c)&&(o.crossorigin=c)}return o}};Ze(Rn,"ScriptLoader",new Rn);let ro=Rn;const wx=(e,t)=>{const o=e.indexOf(t);return o!==-1&&e.indexOf(t,o+1)>o},xx=e=>At(e)&&Sn(e,"raw"),Z3=e=>Yt(e)&&e.length>1,Cf={},Rp=Xt("en"),Ex=()=>Jo(Cf,Rp.get()),xc={getData:()=>Yd(Cf,e=>({...e})),setCode:e=>{e&&Rp.set(e)},getCode:()=>Rp.get(),add:(e,t)=>{let o=Cf[e];o||(Cf[e]=o={});const r=Ue(It(t),c=>c.toLowerCase());Bn(t,(c,u)=>{const f=u.toLowerCase();f!==u&&wx(r,f)?(Sn(t,f)||(o[f]=c),o[u]=c):o[f]=c})},translate:e=>{const t=Ex().getOr({}),o=b=>X(b)?Object.prototype.toString.call(b):r(b)?"":""+b,r=b=>b===""||b===null||b===void 0,c=b=>{const v=o(b);return Sn(t,v)?o(t[v]):Jo(t,v.toLowerCase()).map(o).getOr(v)},u=b=>b.replace(/{context:\w+}$/,""),f=b=>b.replaceAll("...",_2);if(r(e))return"";if(xx(e))return f(o(e.raw));if(Z3(e)){const b=e.slice(1),v=c(e[0]).replace(/\{([0-9]+)\}/g,(w,_)=>Sn(b,_)?o(b[_]):w);return f(u(v))}return f(u(c(e)))},isRtl:()=>Ex().bind(e=>Jo(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>Sn(Cf,e)},mr=()=>{const e=[],t={},o={},r=[],c=(V,q)=>{const ae=ge(r,ce=>ce.name===V&&ce.state===q);ne(ae,ce=>ce.resolve())},u=V=>Sn(t,V),f=V=>Sn(o,V),b=V=>{if(o[V])return o[V].instance},v=(V,q)=>{const ae=xc.getCode(),ce=","+(q||"")+",";!ae||q&&ce.indexOf(","+ae+",")===-1||ro.ScriptLoader.add(t[V]+"/langs/"+ae+".js")},w=(V,q)=>{mr.languageLoad!==!1&&(u(V)?v(V,q):W(V,"loaded").then(()=>v(V,q)))},_=(V,q)=>(e.push(q),o[V]={instance:q},c(V,"added"),q),D=V=>{delete t[V],delete o[V]},M=(V,q)=>U(q)?U(V)?{prefix:"",resource:q,suffix:""}:{prefix:V.prefix,resource:q,suffix:V.suffix}:q,L=(V,q)=>{if(t[V])return Promise.resolve();let ae=U(q)?q:q.prefix+q.resource+q.suffix;ae.indexOf("/")!==0&&ae.indexOf("://")===-1&&(ae=mr.baseURL+"/"+ae),t[V]=ae.substring(0,ae.lastIndexOf("/"));const ce=()=>(c(V,"loaded"),Promise.resolve());return o[V]?ce():ro.ScriptLoader.add(ae).then(ce)},W=(V,q="added")=>q==="added"&&f(V)||q==="loaded"&&u(V)?Promise.resolve():new Promise(ae=>{r.push({name:V,state:q,resolve:ae})});return{items:e,urls:t,lookup:o,get:b,requireLangPack:w,add:_,remove:D,createUrl:M,load:L,waitFor:W}};mr.languageLoad=!0,mr.baseURL="",mr.PluginManager=mr(),mr.ThemeManager=mr(),mr.ModelManager=mr();const vm=qe("mce-annotation"),Zi=qe("data-mce-annotation"),bu=qe("data-mce-annotation-uid"),Jg=qe("data-mce-annotation-active"),Qg=qe("data-mce-annotation-classes"),ob=qe("data-mce-annotation-attrs"),K3=e=>t=>Ln(t,e),sb=(e,t)=>{const o=e.selection.getRng(),r=Y.fromDom(o.startContainer),c=Y.fromDom(e.getBody()),u=t.fold(()=>"."+vm(),v=>`[${Zi()}="${v}"]`),f=Bi(r,o.startOffset).getOr(r);return ea(f,u,K3(c)).bind(v=>$i(v,`${bu()}`).bind(w=>$i(v,`${Zi()}`).map(_=>{const D=Mp(e,w);return{uid:w,name:_,elements:D}})))},_y=e=>Ts(e)&&R0(e,vm()),Ay=(e,t)=>is(e,"data-mce-bogus")||Jw(e,'[data-mce-bogus="all"]',K3(t)),Mp=(e,t)=>{const o=Y.fromDom(e.getBody()),r=Fr(o,`[${bu()}="${t}"]`);return ge(r,c=>!Ay(c,o))},bd=(e,t)=>{const o=Y.fromDom(e.getBody()),r=Fr(o,`[${Zi()}="${t}"]`),c={};return ne(r,u=>{if(!Ay(u,o)){const f=es(u,bu()),b=Jo(c,f).getOr([]);c[f]=b.concat([u])}}),c},rb=(e,t)=>{const o=Xt({}),r=()=>({listeners:[],previous:oi()}),c=(D,M)=>{u(D,L=>(M(L),L))},u=(D,M)=>{const L=o.get(),W=Jo(L,D).getOrThunk(r),V=M(W);L[D]=V,o.set(L)},f=(D,M,L)=>{c(D,W=>{ne(W.listeners,V=>V(!0,D,{uid:M,nodes:Ue(L,q=>q.dom)}))})},b=D=>{c(D,M=>{ne(M.listeners,L=>L(!1,D))})},v=(D,M)=>{ne(Mp(e,D),L=>{M?hs(L,Jg(),"true"):sr(L,Jg())})},w=Jd(()=>{const D=ou(t.getNames());ne(D,M=>{u(M,L=>{const W=L.previous.get();return sb(e,B.some(M)).fold(()=>{W.each(V=>{b(M),L.previous.clear(),v(V,!1)})},({uid:V,name:q,elements:ae})=>{$o(W,V)||(W.each(ce=>v(ce,!1)),f(q,V,ae),L.previous.set(V),v(V,!0))}),{previous:L.previous,listeners:L.listeners}})})},30);return e.on("remove",()=>{w.cancel()}),e.on("NodeChange",()=>{w.throttle()}),{addListener:(D,M)=>{u(D,L=>({previous:L.previous,listeners:L.listeners.concat([M])}))}}},Np=(e,t)=>{const o=Zi(),r=u=>B.from(u.attr(o)).bind(t.lookup),c=u=>{var _;u.attr(bu(),null),u.attr(Zi(),null),u.attr(Jg(),null);const f=B.from(u.attr(ob())).map(D=>D.split(",")).getOr([]),b=B.from(u.attr(Qg())).map(D=>D.split(",")).getOr([]);ne(f,D=>u.attr(D,null));const v=((_=u.attr("class"))==null?void 0:_.split(" "))??[],w=Ds(v,[vm()].concat(b));u.attr("class",w.length>0?w.join(" "):null),u.attr(Qg(),null),u.attr(ob(),null)};e.serializer.addTempAttr(Jg()),e.serializer.addAttributeFilter(o,u=>{for(const f of u)r(f).each(b=>{b.persistent===!1&&(f.name==="span"?f.unwrap():c(f))})})},ab=()=>{const e={};return{register:(c,u)=>{e[c]={name:c,settings:u}},lookup:c=>Jo(e,c).map(u=>u.settings),getNames:()=>It(e)}},_x=(e,t,o=$e)=>{const r=new _s(e,t),c=u=>{let f;do f=r[u]();while(f&&!Ye(f)&&!o(f));return B.from(f).filter(Ye)};return{current:()=>B.from(r.current()).filter(Ye),next:()=>c("next"),prev:()=>c("prev"),prev2:()=>c("prev2")}},vu=(e,t)=>{const o=t||(f=>e.isBlock(f)||ds(f)||ts(f)),r=(f,b,v,w)=>{if(Ye(f)){const _=w(f,b,f.data);if(_!==-1)return B.some({container:f,offset:_})}return v().bind(_=>r(_.container,_.offset,v,w))};return{backwards:(f,b,v,w)=>{const _=_x(f,w??e.getRoot(),o);return r(f,b,()=>_.prev().map(D=>({container:D,offset:D.length})),v).getOrNull()},forwards:(f,b,v,w)=>{const _=_x(f,w??e.getRoot(),o);return r(f,b,()=>_.next().map(D=>({container:D,offset:0})),v).getOrNull()}}},cb=["td","th"],Ax=["thead","tbody","tfoot"],Y3=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],X3=["li","dd","dt"],Ox=["ul","ol","dl"],Oy=["pre","script","textarea","style"],yu=e=>{let t;return o=>(t=t||tf(e,gt),Sn(t,An(o)))},Dx=e=>An(e)==="table",Wi=e=>Ts(e)&&An(e)==="br",Ca=yu(Y3),bi=yu(Ox),Na=yu(X3),ib=yu(Ax),wf=yu(cb),lb=yu(Oy),Dy=e=>{const t=[];let o=e.dom;for(;o;)t.push(Y.fromDom(o)),o=o.lastChild;return t},J3=e=>{const t=Fr(e,"br"),o=ge(Dy(e).slice(-1),Wi);t.length===o.length&&ne(o,Zo)},ym=()=>{const e=Y.fromTag("br");return hs(e,"data-mce-bogus","1"),e},Cm=e=>{Ii(e),Qn(e,ym())},Ry=(e,t)=>{or(e).each(o=>{ci(o).each(r=>{t.isBlock(An(e))&&Wi(o)&&t.isBlock(An(r))&&Zo(o)})})},fr=of,Bp=gl,Xa=Ai,ub=e=>e.insertContent(fr,{preserve_zwsp:!0}),Mo=it,Dl=Ye,vd=e=>(Dl(e)&&(e=e.parentNode),Mo(e)&&e.hasAttribute("data-mce-caret")),Rl=e=>Dl(e)&&Bp(e.data),Zc=e=>vd(e)||Rl(e),db=e=>e.firstChild!==e.lastChild||!ds(e.firstChild),Rx=(e,t)=>{const r=(e.ownerDocument??document).createTextNode(fr),c=e.parentNode;if(t){const u=e.previousSibling;if(Dl(u)){if(Zc(u))return u;if(Sm(u))return u.splitText(u.data.length-1)}c==null||c.insertBefore(r,e)}else{const u=e.nextSibling;if(Dl(u)){if(Zc(u))return u;if(Ec(u))return u.splitText(1),u}e.nextSibling?c==null||c.insertBefore(r,e.nextSibling):c==null||c.appendChild(r)}return r},yd=e=>{const t=e.container();return Ye(t)?t.data.charAt(e.offset())===fr||e.isAtStart()&&Rl(t.previousSibling):!1},xf=e=>{const t=e.container();return Ye(t)?t.data.charAt(e.offset()-1)===fr||e.isAtEnd()&&Rl(t.nextSibling):!1},My=(e,t,o)=>{const c=(t.ownerDocument??document).createElement(e);c.setAttribute("data-mce-caret",o?"before":"after"),c.setAttribute("data-mce-bogus","all"),c.appendChild(ym().dom);const u=t.parentNode;return o?u==null||u.insertBefore(c,t):t.nextSibling?u==null||u.insertBefore(c,t.nextSibling):u==null||u.appendChild(c),c},Ec=e=>Dl(e)&&e.data[0]===fr,Sm=e=>Dl(e)&&e.data[e.data.length-1]===fr,zr=e=>{var r;const t=e.getElementsByTagName("br"),o=t[t.length-1];mm(o)&&((r=o.parentNode)==null||r.removeChild(o))},ji=e=>e&&e.hasAttribute("data-mce-caret")?(zr(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,mb=e=>vd(e.startContainer),Ef=Math.round,wm=e=>e?{left:Ef(e.left),top:Ef(e.top),bottom:Ef(e.bottom),right:Ef(e.right),width:Ef(e.width),height:Ef(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Pp=(e,t)=>(e=wm(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),Ny=(e,t)=>e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right,fb=(e,t,o)=>e>=0&&e<=Math.min(t.height,o.height)/2,Tf=(e,t)=>{const o=Math.min(t.height/2,e.height/2);return e.bottom-o<t.top?!0:e.top>t.bottom?!1:fb(t.top-e.bottom,e,t)},xm=(e,t)=>e.top>t.bottom?!0:e.bottom<t.top?!1:fb(t.bottom-e.top,e,t),By=(e,t,o)=>t>=e.left&&t<=e.right&&o>=e.top&&o<=e.bottom,$p=e=>kn(e,(t,o)=>t.fold(()=>B.some(o),r=>{const c=Math.min(o.left,r.left),u=Math.min(o.top,r.top),f=Math.max(o.right,r.right),b=Math.max(o.bottom,r.bottom);return B.some({top:u,right:f,bottom:b,left:c,width:f-c,height:b-u})}),B.none()),Py=(e,t,o)=>{const r=Math.max(Math.min(t,e.left+e.width),e.left),c=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((t-r)*(t-r)+(o-c)*(o-c))},Mx=(e,t)=>Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)),gr=e=>{const t=e.startContainer,o=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===o+1?t.childNodes[o]:null},Em=(e,t)=>{if(it(e)&&e.hasChildNodes()){const o=e.childNodes,r=dg(t,0,o.length-1);return o[r]}else return e},Tm=(e,t)=>{if(!(t<0&&it(e)&&e.hasChildNodes()))return Em(e,t)},Nx=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),gb=e=>U(e)&&e.charCodeAt(0)>=768&&Nx.test(e),$y=(...e)=>t=>{for(let o=0;o<e.length;o++)if(e[o](t))return!0;return!1},Ip=(...e)=>t=>{for(let o=0;o<e.length;o++)if(!e[o](t))return!1;return!0},hb=vc,Bx=ts,Q3=ds,Lp=Ye,cr=di(["script","style","textarea"]),Gs=di(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Vr=di(["table"]),_r=Zc,ss=e=>_r(e)?!1:Lp(e)?!cr(e.parentNode):Gs(e)||Q3(e)||Vr(e)||eh(e),qs=e=>it(e)&&e.getAttribute("unselectable")==="true",eh=e=>!qs(e)&&Bx(e),Iy=(e,t)=>{for(let o=e.parentNode;o&&o!==t;o=o.parentNode){if(eh(o))return!1;if(hb(o))return!0}return!0},Ly=e=>eh(e)?!kn(Mr(e.getElementsByTagName("*")),(t,o)=>t||hb(o),!1):!1,Px=e=>Gs(e)||Ly(e),pb=(e,t)=>ss(e)&&Iy(e,t),Fy=it,Hy=ss,bb=z0("display","block table"),zy=z0("float","left right"),th=Ip(Fy,Hy,vo(zy)),$x=vo(z0("white-space","pre pre-line pre-wrap")),Fp=Ye,Ml=ds,vb=Un.nodeIndex,Hp=Tm,nh=e=>e?e.createRange():Un.DOM.createRng(),kf=e=>U(e)&&/[\r\n\t ]/.test(e),zp=e=>!!e.setStart&&!!e.setEnd,yb=e=>{const t=e.startContainer,o=e.startOffset;if(kf(e.toString())&&$x(t.parentNode)&&Ye(t)){const r=t.data;if(kf(r[o-1])||kf(r[o+1]))return!0}return!1},Vp=e=>{const t=e.ownerDocument,o=nh(t),r=t.createTextNode(Zs),c=e.parentNode;c.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1);const u=wm(o.getBoundingClientRect());return c.removeChild(r),u},Cb=e=>{const t=e.startContainer,o=e.endContainer,r=e.startOffset,c=e.endOffset;if(t===o&&Ye(o)&&r===0&&c===1){const u=e.cloneRange();return u.setEndAfter(o),Ba(u)}else return null},_f=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,Ba=e=>{let t;const o=e.getClientRects();return o.length>0?t=wm(o[0]):t=wm(e.getBoundingClientRect()),!zp(e)&&Ml(e)&&_f(t)?Vp(e):_f(t)&&zp(e)?Cb(e)??t:t},oa=(e,t)=>{const o=Pp(e,t);return o.width=1,o.right=o.left+1,o},oh=e=>{const t=[],o=f=>{f.height!==0&&(t.length>0&&Ny(f,t[t.length-1])||t.push(f))},r=(f,b)=>{const v=nh(f.ownerDocument);if(b<f.data.length){if(gb(f.data[b]))return;if(gb(f.data[b-1])&&(v.setStart(f,b),v.setEnd(f,b+1),!yb(v))){o(oa(Ba(v),!1));return}}b>0&&(v.setStart(f,b-1),v.setEnd(f,b),yb(v)||o(oa(Ba(v),!1))),b<f.data.length&&(v.setStart(f,b),v.setEnd(f,b+1),yb(v)||o(oa(Ba(v),!0)))},c=e.container(),u=e.offset();if(Fp(c))return r(c,u),t;if(Fy(c))if(e.isAtEnd()){const f=Hp(c,u);Fp(f)&&r(f,f.data.length),th(f)&&!Ml(f)&&o(oa(Ba(f),!1))}else{const f=Hp(c,u);if(Fp(f)&&r(f,0),th(f)&&e.isAtEnd())return o(oa(Ba(f),!1)),t;const b=Hp(e.container(),e.offset()-1);th(b)&&!Ml(b)&&(bb(b)||bb(f)||!th(f))&&o(oa(Ba(b),!1)),th(f)&&o(oa(Ba(f),!0))}return t},ke=(e,t,o)=>{const r=()=>(Fp(e),t===0),c=()=>Fp(e)?t>=e.data.length:t>=e.childNodes.length,u=()=>{const _=nh(e.ownerDocument);return _.setStart(e,t),_.setEnd(e,t),_},f=()=>(o||(o=oh(ke(e,t))),o),b=()=>f().length>0,v=_=>_&&e===_.container()&&t===_.offset(),w=_=>Hp(e,_?t-1:t);return{container:qe(e),offset:qe(t),toRange:u,getClientRects:f,isVisible:b,isAtStart:r,isAtEnd:c,isEqual:v,getNode:w}};ke.fromRangeStart=e=>ke(e.startContainer,e.startOffset),ke.fromRangeEnd=e=>ke(e.endContainer,e.endOffset),ke.after=e=>ke(e.parentNode,vb(e)+1),ke.before=e=>ke(e.parentNode,vb(e)),ke.isAbove=(e,t)=>tr(Vs(t.getClientRects()),Tr(e.getClientRects()),Tf).getOr(!1),ke.isBelow=(e,t)=>tr(Tr(t.getClientRects()),Vs(e.getClientRects()),xm).getOr(!1),ke.isAtStart=e=>e?e.isAtStart():!1,ke.isAtEnd=e=>e?e.isAtEnd():!1,ke.isTextPosition=e=>e?Ye(e.container()):!1,ke.isElementPosition=e=>!ke.isTextPosition(e);const Up=(e,t)=>{Ye(t)&&t.data.length===0&&e.remove(t)},e_=(e,t,o)=>{t.insertNode(o),Up(e,o.previousSibling),Up(e,o.nextSibling)},Pa=(e,t,o)=>{const r=B.from(o.firstChild),c=B.from(o.lastChild);t.insertNode(o),r.each(u=>Up(e,u.previousSibling)),c.each(u=>Up(e,u.nextSibling))},sh=(e,t,o)=>{Ig(o)?Pa(e,t,o):e_(e,t,o)},Nl=Ye,Vy=mm,Uy=Un.nodeIndex,Af=e=>{const t=e.parentNode;return Vy(t)?Af(t):t},Zp=e=>e?vg(e.childNodes,(t,o)=>(Vy(o)&&o.nodeName!=="BR"?t=t.concat(Zp(o)):t.push(o),t),[]):[],Cd=(e,t)=>{let o=e;for(;(o=o.previousSibling)&&Nl(o);)t+=o.data.length;return t},Sb=e=>t=>e===t,t_=e=>{let t,o;t=Zp(Af(e)),o=sp(t,Sb(e),e),t=t.slice(0,o+1);const r=vg(t,(c,u,f)=>(Nl(u)&&Nl(t[f-1])&&c++,c),0);return t=sf(t,di([e.nodeName])),o=sp(t,Sb(e),e),o-r},sa=e=>(Nl(e)?"text()":e.nodeName.toLowerCase())+"["+t_(e)+"]",Bl=(e,t,o)=>{const r=[];for(let c=t.parentNode;c&&c!==e;c=c.parentNode)r.push(c);return r},Tc=(e,t)=>{let o=[],r=t.container(),c=t.offset(),u;if(Nl(r))u=Cd(r,c);else{const b=r.childNodes;c>=b.length?(u="after",c=b.length-1):u="before",r=b[c]}o.push(sa(r));let f=Bl(e,r);return f=sf(f,vo(mm)),o=o.concat(Qu(f,b=>sa(b))),o.reverse().join("/")+","+u},n_=(e,t,o)=>{let r=Zp(e);return r=sf(r,(c,u)=>!Nl(c)||!Nl(r[u-1])),r=sf(r,di([t])),r[o]},rh=(e,t)=>{let o=e,r=0;for(;Nl(o);){const c=o.data.length;if(t>=r&&t<=r+c){e=o,t=t-r;break}if(!Nl(o.nextSibling)){e=o,t=c;break}r+=c,o=o.nextSibling}return Nl(e)&&t>e.data.length&&(t=e.data.length),ke(e,t)},Ix=(e,t)=>{if(!t)return null;const o=t.split(","),r=o[0].split("/"),c=o.length>1?o[1]:"before",u=vg(r,(f,b)=>{const v=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(b);return v?(v[1]==="text()"&&(v[1]="#text"),n_(f,v[1],parseInt(v[2],10))):null},e);if(!u)return null;if(!Nl(u)&&u.parentNode){let f;return c==="after"?f=Uy(u)+1:f=Uy(u),ke(u.parentNode,f)}return rh(u,parseInt(c,10))},wb=ts,o_=(e,t,o)=>{let r=e(t.data.slice(0,o)).length;for(let c=t.previousSibling;c&&Ye(c);c=c.previousSibling)r+=e(c.data).length;return r},Lx=(e,t,o,r,c)=>{const u=c?r.startContainer:r.endContainer;let f=c?r.startOffset:r.endOffset;const b=[],v=e.getRoot();if(Ye(u))b.push(o?o_(t,u,f):f);else{let w=0;const _=u.childNodes;f>=_.length&&_.length&&(w=1,f=Math.max(0,_.length-1)),b.push(e.nodeIndex(_[f],o)+w)}for(let w=u;w&&w!==v;w=w.parentNode)b.push(e.nodeIndex(w,o));return b},On=(e,t,o,r)=>{const c=t.dom,u=Lx(c,e,o,r,!0),f=t.isForward(),b=mb(r)?{isFakeCaret:!0}:{};if(t.isCollapsed())return{start:u,forward:f,...b};{const v=Lx(c,e,o,r,!1);return{start:u,end:v,forward:f,...b}}},Ht=(e,t,o)=>{let r=0;return Ke.each(e.select(t),c=>{if(c.getAttribute("data-mce-bogus")!=="all"){if(c===o)return!1;r++;return}}),r},ah=(e,t)=>{let o=t?e.startContainer:e.endContainer,r=t?e.startOffset:e.endOffset;if(it(o)&&o.nodeName==="TR"){const c=o.childNodes;o=c[Math.min(t?r:r-1,c.length-1)],o&&(r=t?0:o.childNodes.length,t?e.setStart(o,r):e.setEnd(o,r))}},xb=e=>(ah(e,!0),ah(e,!1),e),Eb=(e,t)=>{if(it(e)&&(e=Em(e,t),wb(e)))return e;if(Zc(e)){Ye(e)&&vd(e)&&(e=e.parentNode);let o=e.previousSibling;if(wb(o)||(o=e.nextSibling,wb(o)))return o}},s_=e=>Eb(e.startContainer,e.startOffset)||Eb(e.endContainer,e.endOffset),Zy=(e,t,o)=>{const r=o.getNode(),c=o.getRng();if(r.nodeName==="IMG"||wb(r)){const f=r.nodeName;return{name:f,index:Ht(o.dom,f,r)}}const u=s_(c);if(u){const f=u.tagName;return{name:f,index:Ht(o.dom,f,u)}}return On(e,o,t,c)},ns=e=>{const t=e.getRng();return{start:Tc(e.dom.getRoot(),ke.fromRangeStart(t)),end:Tc(e.dom.getRoot(),ke.fromRangeEnd(t)),forward:e.isForward()}},Tb=e=>({rng:e.getRng(),forward:e.isForward()}),kb=(e,t,o)=>{const r={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return o?e.create("span",r,"&#xFEFF;"):e.create("span",r)},Wy=(e,t)=>{const o=e.dom;let r=e.getRng();const c=o.uniqueId(),u=e.isCollapsed(),f=e.getNode(),b=f.nodeName,v=e.isForward();if(b==="IMG")return{name:b,index:Ht(o,b,f)};const w=xb(r.cloneRange());if(!u){w.collapse(!1);const D=kb(o,c+"_end",t);sh(o,w,D)}r=xb(r),r.collapse(!0);const _=kb(o,c+"_start",t);return sh(o,r,_),e.moveToBookmark({id:c,keep:!0,forward:v}),{id:c,forward:v}},Me=(e,t,o=!1)=>t===2?Zy(Xa,o,e):t===3?ns(e):t?Tb(e):Wy(e,!1),ch=ze(Zy,Fo,!0),Of=e=>e===1,Cu=e=>e===-1;var Gi;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(Gi||(Gi={}));const Su=(e,t,o)=>e.stype===Gi.Error?t(e.serror):o(e.svalue),ih=e=>{const t=[],o=[];return ne(e,r=>{Su(r,c=>o.push(c),c=>t.push(c))}),{values:t,errors:o}},Df=(e,t)=>e.stype===Gi.Error?{stype:Gi.Error,serror:t(e.serror)}:e,r_=(e,t)=>e.stype===Gi.Value?{stype:Gi.Value,svalue:t(e.svalue)}:e,lh=(e,t)=>e.stype===Gi.Value?t(e.svalue):e,Wo=(e,t)=>e.stype===Gi.Error?t(e.serror):e,qi=e=>({stype:Gi.Value,svalue:e}),jy=e=>({stype:Gi.Error,serror:e}),ra={fromResult:e=>e.fold(jy,qi),toResult:e=>Su(e,ma.error,ma.value),svalue:qi,partition:ih,serror:jy,bind:lh,bindError:Wo,map:r_,mapError:Df,fold:Su},Fx=e=>At(e)&&It(e).length>100?" removed due to size":JSON.stringify(e,null,2),Gy=e=>{const t=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:qe("... (only showing first ten failures)")}]):e;return Ue(t,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},Hx=(e,t)=>ra.serror([{path:e,getErrorInfo:t}]),a_=(e,t,o)=>Hx(e,()=>'Could not find valid *required* value for "'+t+'" in '+Fx(o)),c_=(e,t)=>Hx(e,qe(t)),qy=e=>{const t=(r,c)=>ra.bindError(e(c),u=>c_(r,u)),o=qe("val");return{extract:t,toString:o}},zx=qy(ra.svalue),Xe=qe(zx),Ky=(e,t)=>qy(o=>{const r=typeof o;return e(o)?ra.svalue(o):ra.serror(`Expected type: ${t} but got: ${r}`)}),Ar=Ky(Fn,"number"),Yy=Ky(U,"string"),Xy=Ky(X,"function"),Jy=()=>({tag:"required",process:{}}),i_=e=>({tag:"defaultedThunk",process:e}),cn=e=>i_(qe(e)),Vx=()=>({tag:"option",process:{}}),Ux=(e,t,o,r)=>({tag:"field",key:e,newKey:t,presence:o,prop:r}),l_=(e,t,o)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},u_=(e,t)=>ra.svalue(mg(t,fg.apply(void 0,e))),Zx=e=>T(ra.serror,ic)(e),Wx={consolidateObj:(e,t)=>{const o=ra.partition(e);return o.errors.length>0?Zx(o.errors):u_(o.values,t)},consolidateArr:e=>{const t=ra.partition(e);return t.errors.length>0?Zx(t.errors):ra.svalue(t.values)}},d_=(e,t,o,r)=>Jo(t,o).fold(()=>a_(e,o,t),r),ln=(e,t,o,r)=>{const c=Jo(e,t).getOrThunk(()=>o(e));return r(c)},Qy=(e,t,o)=>o(Jo(e,t)),Sd=(e,t,o,r)=>{const c=Jo(e,t).map(u=>u===!0?o(e):u);return r(c)},vi=(e,t,o,r,c)=>{const u=b=>c.extract(t.concat([r]),b),f=b=>b.fold(()=>ra.svalue(B.none()),v=>{const w=c.extract(t.concat([r]),v);return ra.map(w,B.some)});switch(e.tag){case"required":return d_(t,o,r,u);case"defaultedThunk":return ln(o,r,e.process,u);case"option":return Qy(o,r,f);case"defaultedOptionThunk":return Sd(o,r,e.process,f);case"mergeWithThunk":return ln(o,r,qe({}),b=>{const v=mg(e.process(o),b);return u(v)})}},_b=(e,t,o)=>{const r={},c=[];for(const u of o)l_(u,(f,b,v,w)=>{const _=vi(v,e,t,f,w);ra.fold(_,D=>{c.push(...D)},D=>{r[b]=D})},(f,b)=>{r[f]=b(t)});return c.length>0?ra.serror(c):ra.svalue(r)},$a=e=>({extract:(r,c)=>_b(r,c,e),toString:()=>`obj{
`+Ue(e,c=>l_(c,(u,f,b,v)=>u+" -> "+v.toString(),(u,f)=>"state("+u+")")).join(`
`)+"}"}),uh=e=>({extract:(r,c)=>{const u=Ue(c,(f,b)=>e.extract(r.concat(["["+b+"]"]),f));return Wx.consolidateArr(u)},toString:()=>"array("+e.toString()+")"}),Wp=T(uh,$a),Ab=e=>qy(t=>e(t).fold(ra.serror,ra.svalue)),dh=(e,t,o)=>{const r=t.extract([e],o);return ra.mapError(r,c=>({input:o,errors:c}))},mh=(e,t,o)=>ra.toResult(dh(e,t,o)),wu=e=>`Errors: 
`+Gy(e.errors).join(`
`)+`

Input object: `+Fx(e.input),Ks=Ux,wd=e=>Ks(e,e,Jy(),Xe()),jx=(e,t)=>Ks(e,e,Jy(),t),eC=e=>jx(e,Yy),Gx=e=>jx(e,Xy),m_=(e,t)=>Ks(e,e,Jy(),uh(t)),Zn=e=>Ks(e,e,Vx(),Xe()),Ki=(e,t)=>Ks(e,e,Vx(),t),_m=e=>Ki(e,Yy),i6=e=>Ki(e,Xy),fh=(e,t)=>Ks(e,e,cn(t),Xe()),jn=(e,t,o)=>Ks(e,e,cn(t),o),f_=(e,t)=>jn(e,t,Ar),g_=(e,t,o)=>jn(e,t,uh(o)),l6=e=>e.type==="inline-command"||e.type==="inline-format",u6=e=>e.type==="block-command"||e.type==="block-format",jp=(e,t)=>(e.type==="block-command"||e.type==="block-format")&&e.trigger===t,h_=e=>{const t=r=>ma.error({message:r,pattern:e}),o=(r,c,u)=>{if(e.format!==void 0){let f;if(Yt(e.format)){if(!ul(e.format,U))return t(r+" pattern has non-string items in the `format` array");f=e.format}else if(U(e.format))f=[e.format];else return t(r+" pattern has non-string `format` parameter");return ma.value(c(f))}else return e.cmd!==void 0?U(e.cmd)?ma.value(u(e.cmd,e.value)):t(r+" pattern has non-string `cmd` parameter"):t(r+" pattern is missing both `format` and `cmd` parameters")};if(!At(e))return t("Raw pattern is not an object");if(!U(e.start))return t("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!U(e.end))return t("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return t("Inline pattern has empty `start` and `end` parameters");let r=e.start,c=e.end;return c.length===0&&(c=r,r=""),o("Inline",u=>({type:"inline-format",start:r,end:c,format:u}),(u,f)=>({type:"inline-command",start:r,end:c,cmd:u,value:f}))}else{if(e.replacement!==void 0)return U(e.replacement)?e.start.length===0?t("Replacement pattern has empty `start` parameter"):ma.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):t("Replacement pattern has non-string `replacement` parameter");{const r=e.trigger??"space";return e.start.length===0?t("Block pattern has empty `start` parameter"):o("Block",c=>({type:"block-format",start:e.start,format:c[0],trigger:r}),(c,u)=>({type:"block-command",start:e.start,cmd:c,value:u,trigger:r}))}}},p_=e=>ge(e,u6),Gp=e=>ge(e,l6),b_=(e,t)=>({inlinePatterns:Gp(e),blockPatterns:p_(e),dynamicPatternsLookup:t}),qp=(e,t)=>({...e,blockPatterns:ge(e.blockPatterns,o=>jp(o,t))}),qx=e=>{const t=dc(Ue(e,h_));return ne(t.errors,o=>console.error(o.message,o.pattern)),t.values},v_=e=>t=>{const o=e(t);return qx(o)},Ob=(e,t)=>e.dispatch("PreProcess",t),tC=(e,t)=>e.dispatch("PostProcess",t),nC=e=>{e.dispatch("remove")},Kx=e=>{e.dispatch("detach")},y_=(e,t)=>{e.dispatch("SwitchMode",{mode:t})},Yx=(e,t,o,r,c)=>{e.dispatch("ObjectResizeStart",{target:t,width:o,height:r,origin:c})},oC=(e,t,o,r,c)=>{e.dispatch("ObjectResized",{target:t,width:o,height:r,origin:c})},Xx=e=>{e.dispatch("PreInit")},eo=e=>{e.dispatch("PostRender")},Jx=e=>{e.dispatch("Init")},sC=(e,t)=>{e.dispatch("PlaceholderToggle",{state:t})},Db=(e,t,o)=>{e.dispatch(t,o)},xd=(e,t,o,r)=>{e.dispatch("FormatApply",{format:t,node:o,vars:r})},rC=(e,t,o,r)=>{e.dispatch("FormatRemove",{format:t,node:o,vars:r})},C_=(e,t)=>e.dispatch("BeforeSetContent",t),Qx=(e,t)=>e.dispatch("SetContent",t),gh=(e,t)=>e.dispatch("BeforeGetContent",t),eE=(e,t)=>e.dispatch("GetContent",t),Kp=(e,t)=>{e.dispatch("AutocompleterStart",t)},Yp=(e,t)=>{e.dispatch("AutocompleterUpdate",t)},aC=(e,t)=>{e.dispatch("AutocompleterUpdateActiveRange",t)},Am=e=>{e.dispatch("AutocompleterEnd")},tE=(e,t,o)=>e.dispatch("PastePreProcess",{content:t,internal:o}),nE=(e,t,o)=>e.dispatch("PastePostProcess",{node:t,internal:o}),oE=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),sE=(e,t)=>e.dispatch("EditableRootStateChange",{state:t}),d6=(e,t)=>e.dispatch("DisabledStateChange",{state:t}),rE=e=>e.dispatch("CloseActiveTooltips"),Rb=Oi().deviceType,Mb=Rb.isTouch(),Xp=Un.DOM,Nb=e=>{const t=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return kn(t,(o,r)=>{const c=r.split("="),u=c[0],f=c.length>1?c[1]:u;return o[ws(u)]=ws(f),o},{})},Bb=e=>Yn(e,RegExp),wt=e=>t=>t.options.get(e),Om=e=>U(e)||At(e),xu=(e,t="")=>o=>{const r=U(o);if(r)if(o.indexOf("=")!==-1){const c=Nb(o);return{value:Jo(c,e.id).getOr(t),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},Jp=e=>{const t=e.options.register;t("id",{processor:"string",default:e.id}),t("selector",{processor:"string"}),t("target",{processor:"object"}),t("suffix",{processor:"string"}),t("cache_suffix",{processor:"string"}),t("base_url",{processor:"string"}),t("referrer_policy",{processor:"string",default:""}),t("crossorigin",{processor:"function",default:qe(void 0)}),t("language_load",{processor:"boolean",default:!0}),t("inline",{processor:"boolean",default:!1}),t("iframe_attrs",{processor:"object",default:{}}),t("doctype",{processor:"string",default:"<!DOCTYPE html>"}),t("document_base_url",{processor:"string",default:e.editorManager.documentBaseURL}),t("body_id",{processor:xu(e,"tinymce"),default:"tinymce"}),t("body_class",{processor:xu(e),default:""}),t("content_security_policy",{processor:"string",default:""}),t("br_in_pre",{processor:"boolean",default:!0}),t("forced_root_block",{processor:r=>{const c=U(r)&&xs(r);return c?{value:r,valid:c}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),t("forced_root_block_attrs",{processor:"object",default:{}}),t("newline_behavior",{processor:r=>{const c=Ce(["block","linebreak","invert","default"],r);return c?{value:r,valid:c}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),t("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),t("no_newline_selector",{processor:"string",default:""}),t("keep_styles",{processor:"boolean",default:!0}),t("end_container_on_empty_block",{processor:r=>Et(r)?{valid:!0,value:r}:U(r)?{valid:!0,value:r}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),t("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),t("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),t("font_size_classes",{processor:"string",default:""}),t("automatic_uploads",{processor:"boolean",default:!0}),t("images_reuse_filename",{processor:"boolean",default:!1}),t("images_replace_blob_uris",{processor:"boolean",default:!0}),t("icons",{processor:"string",default:""}),t("icons_url",{processor:"string",default:""}),t("images_upload_url",{processor:"string",default:""}),t("images_upload_base_path",{processor:"string",default:""}),t("images_upload_credentials",{processor:"boolean",default:!1}),t("images_upload_handler",{processor:"function"}),t("language",{processor:"string",default:"en"}),t("language_url",{processor:"string",default:""}),t("entity_encoding",{processor:"string",default:"named"}),t("indent",{processor:"boolean",default:!0}),t("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_use_margin",{processor:"boolean",default:!1}),t("indentation",{processor:"string",default:"40px"}),t("content_css",{processor:r=>{const c=r===!1||U(r)||Cn(r,U);return c?U(r)?{value:Ue(r.split(","),ws),valid:c}:Yt(r)?{value:r,valid:c}:r===!1?{value:[],valid:c}:{value:r,valid:c}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:e1(e)?[]:["default"]}),t("content_style",{processor:"string"}),t("content_css_cors",{processor:"boolean",default:!1}),t("font_css",{processor:r=>{const c=U(r)||Cn(r,U);return c?{value:Yt(r)?r:Ue(r.split(","),ws),valid:c}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),t("extended_mathml_attributes",{processor:"string[]"}),t("extended_mathml_elements",{processor:"string[]"}),t("inline_boundaries",{processor:"boolean",default:!0}),t("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),t("object_resizing",{processor:r=>{const c=Et(r)||U(r);return c?r===!1||Rb.isiPhone()||Rb.isiPad()?{value:"",valid:c}:{value:r===!0?"table,img,figure.image,div,video,iframe":r,valid:c}:{valid:!1,message:"Must be boolean or a string"}},default:!Mb}),t("resize_img_proportional",{processor:"boolean",default:!0}),t("event_root",{processor:"string"}),t("service_message",{processor:"string"}),t("onboarding",{processor:"boolean",default:!0}),t("tiny_cloud_entry_url",{processor:"string"}),t("theme",{processor:r=>r===!1||U(r)||X(r),default:"silver"}),t("theme_url",{processor:"string"}),t("formats",{processor:"object"}),t("format_empty_lines",{processor:"boolean",default:!1}),t("format_noneditable_selector",{processor:"string",default:""}),t("preview_styles",{processor:r=>{const c=r===!1||U(r);return c?{value:r===!1?"":r,valid:c}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),t("custom_ui_selector",{processor:"string",default:""}),t("hidden_input",{processor:"boolean",default:!0}),t("submit_patch",{processor:"boolean",default:!0}),t("encoding",{processor:"string"}),t("add_form_submit_trigger",{processor:"boolean",default:!0}),t("add_unload_trigger",{processor:"boolean",default:!0}),t("custom_undo_redo_levels",{processor:"number",default:0}),t("disable_nodechange",{processor:"boolean",default:!1}),t("disabled",{processor:r=>Et(r)?(e.initialized&&Xi(e)!==r&&Promise.resolve().then(()=>{d6(e,r)}),{valid:!0,value:r}):{valid:!1,message:"The value must be a boolean."},default:!1}),t("readonly",{processor:"boolean",default:!1}),t("editable_root",{processor:"boolean",default:!0}),t("plugins",{processor:"string[]",default:[]}),t("external_plugins",{processor:"object"}),t("forced_plugins",{processor:"string[]"}),t("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),t("model_url",{processor:"string"}),t("block_unsupported_drop",{processor:"boolean",default:!0}),t("visual",{processor:"boolean",default:!0}),t("visual_table_class",{processor:"string",default:"mce-item-table"}),t("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),t("iframe_aria_text",{processor:"string",default:"Rich Text Area".concat(e.hasPlugin("help")?". Press ALT-0 for help.":"")}),t("setup",{processor:"function"}),t("init_instance_callback",{processor:"function"}),t("url_converter",{processor:"function",default:e.convertURL}),t("url_converter_scope",{processor:"object",default:e}),t("urlconverter_callback",{processor:"function"}),t("allow_conditional_comments",{processor:"boolean",default:!1}),t("allow_html_data_urls",{processor:"boolean",default:!1}),t("allow_svg_data_urls",{processor:"boolean"}),t("allow_html_in_named_anchor",{processor:"boolean",default:!1}),t("allow_html_in_comments",{processor:"boolean",default:!1}),t("allow_script_urls",{processor:"boolean",default:!1}),t("allow_unsafe_link_target",{processor:"boolean",default:!1}),t("allow_mathml_annotation_encodings",{processor:r=>{const c=Cn(r,U);return c?{value:r,valid:c}:{valid:!1,message:"Must be an array of strings."}},default:[]}),t("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),t("fix_list_elements",{processor:"boolean",default:!1}),t("preserve_cdata",{processor:"boolean",default:!1}),t("remove_trailing_brs",{processor:"boolean",default:!0}),t("pad_empty_with_br",{processor:"boolean",default:!1}),t("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),t("element_format",{processor:"string",default:"html"}),t("entities",{processor:"string"}),t("schema",{processor:"string",default:"html5"}),t("convert_urls",{processor:"boolean",default:!0}),t("relative_urls",{processor:"boolean",default:!0}),t("remove_script_host",{processor:"boolean",default:!0}),t("custom_elements",{processor:Om}),t("extended_valid_elements",{processor:"string"}),t("invalid_elements",{processor:"string"}),t("invalid_styles",{processor:Om}),t("valid_children",{processor:"string"}),t("valid_classes",{processor:Om}),t("valid_elements",{processor:"string"}),t("valid_styles",{processor:Om}),t("verify_html",{processor:"boolean",default:!0}),t("auto_focus",{processor:r=>U(r)||r===!0}),t("browser_spellcheck",{processor:"boolean",default:!1}),t("protect",{processor:"array"}),t("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),t("deprecation_warnings",{processor:"boolean",default:!0}),t("a11y_advanced_options",{processor:"boolean",default:!1}),t("api_key",{processor:"string"}),t("license_key",{processor:"string"}),t("paste_block_drop",{processor:"boolean",default:!1}),t("paste_data_images",{processor:"boolean",default:!0}),t("paste_preprocess",{processor:"function"}),t("paste_postprocess",{processor:"function"}),t("paste_webkit_styles",{processor:"string",default:"none"}),t("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),t("paste_merge_formats",{processor:"boolean",default:!0}),t("smart_paste",{processor:"boolean",default:!0}),t("paste_as_text",{processor:"boolean",default:!1}),t("paste_tab_spaces",{processor:"number",default:4}),t("text_patterns",{processor:r=>Cn(r,At)||r===!1?{value:qx(r===!1?[]:r),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),t("text_patterns_lookup",{processor:r=>X(r)?{value:v_(r),valid:!0}:{valid:!1,message:"Must be a single function"},default:r=>[]}),t("noneditable_class",{processor:"string",default:"mceNonEditable"}),t("editable_class",{processor:"string",default:"mceEditable"}),t("noneditable_regexp",{processor:r=>Cn(r,Bb)?{value:r,valid:!0}:Bb(r)?{value:[r],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),t("table_tab_navigation",{processor:"boolean",default:!0}),t("highlight_on_focus",{processor:"boolean",default:!0}),t("xss_sanitization",{processor:"boolean",default:!0}),t("details_initial_state",{processor:r=>{const c=Ce(["inherited","collapsed","expanded"],r);return c?{value:r,valid:c}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),t("details_serialized_state",{processor:r=>{const c=Ce(["inherited","collapsed","expanded"],r);return c?{value:r,valid:c}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),t("init_content_sync",{processor:"boolean",default:!1}),t("newdocument_content",{processor:"string",default:""}),t("sandbox_iframes",{processor:"boolean",default:!0}),t("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),t("convert_unsafe_embeds",{processor:"boolean",default:!0}),t("user_id",{processor:"string",default:"Anonymous"}),t("fetch_users",{processor:r=>r===void 0?{valid:!0,value:void 0}:X(r)?{valid:!0,value:r}:{valid:!1,message:"fetch_users must be a function that returns a Promise<ExpectedUser[]>"}});const o=Wp([eC("mimeType"),m_("extensions",Ab(r=>U(r)?ma.value(r):ma.error("Extensions must be an array of strings")))]);t("documents_file_types",{processor:r=>mh("documents_file_types",o,r).fold(c=>({valid:!1,message:"Must be a non-empty array of objects matching the configuration schema: https://www.tiny.cloud/docs/tinymce/latest/uploadcare-documents/#documents-file-types"}),c=>({valid:!0,value:c}))}),e.on("ScriptsLoaded",()=>{t("directionality",{processor:"string",default:xc.isRtl()?"rtl":void 0}),t("placeholder",{processor:"string",default:Xp.getAttrib(e.getElement(),"placeholder")})}),t("lists_indent_on_tab",{processor:"boolean",default:!0}),t("list_max_depth",{processor:r=>{const c=Fn(r);if(c){if(r<0)throw new Error("list_max_depth cannot be set to lower than 0");return{value:r,valid:c}}else return{valid:!1,message:"Must be a number"}}})},aE=wt("iframe_attrs"),cC=wt("doctype"),iC=wt("document_base_url"),cE=wt("body_id"),iE=wt("body_class"),lE=wt("content_security_policy"),Pb=wt("br_in_pre"),Ys=wt("forced_root_block"),Yi=wt("forced_root_block_attrs"),$b=wt("newline_behavior"),uE=wt("br_newline_selector"),dE=wt("no_newline_selector"),mE=wt("keep_styles"),Ib=wt("end_container_on_empty_block"),lC=wt("automatic_uploads"),fE=wt("images_reuse_filename"),gE=wt("images_replace_blob_uris"),Qp=wt("icons"),uC=wt("icons_url"),Lb=wt("images_upload_url"),dC=wt("images_upload_base_path"),S_=wt("images_upload_credentials"),hE=wt("images_upload_handler"),pE=wt("content_css_cors"),Fb=wt("referrer_policy"),Rf=wt("crossorigin"),bE=wt("language"),vE=wt("language_url"),Hb=wt("indent_use_margin"),w_=wt("indentation"),x_=wt("content_css"),Mf=wt("content_style"),mC=wt("font_css"),E_=wt("directionality"),T_=wt("inline_boundaries_selector"),yE=wt("object_resizing"),k_=wt("resize_img_proportional"),fC=wt("placeholder"),zb=wt("event_root"),gC=wt("service_message"),Eu=wt("theme"),CE=wt("theme_url"),Vb=wt("model"),__=wt("model_url"),Dm=wt("inline_boundaries"),A_=wt("formats"),O_=wt("preview_styles"),m6=wt("format_empty_lines"),f6=wt("format_noneditable_selector"),hh=wt("custom_ui_selector"),e1=wt("inline"),hC=wt("hidden_input"),D_=wt("submit_patch"),R_=wt("add_form_submit_trigger"),Ub=wt("add_unload_trigger"),SE=wt("custom_undo_redo_levels"),wE=wt("disable_nodechange"),t1=wt("readonly"),Zb=wt("editable_root"),pC=wt("content_css_cors"),n1=wt("plugins"),bC=wt("external_plugins"),M_=wt("block_unsupported_drop"),o1=wt("visual"),xE=wt("visual_table_class"),Wb=wt("visual_anchor_class"),jb=wt("iframe_aria_text"),Nf=wt("setup"),N_=wt("init_instance_callback"),Tu=wt("urlconverter_callback"),B_=wt("auto_focus"),EE=wt("browser_spellcheck"),P_=wt("protect"),g6=wt("paste_block_drop"),Gb=wt("paste_data_images"),$_=wt("paste_preprocess"),I_=wt("paste_postprocess"),L_=wt("newdocument_content"),vC=wt("paste_webkit_styles"),F_=wt("paste_remove_styles_if_webkit"),TE=wt("paste_merge_formats"),yC=wt("smart_paste"),H_=wt("paste_as_text"),z_=wt("paste_tab_spaces"),CC=wt("allow_html_data_urls"),kE=wt("text_patterns"),Lt=wt("text_patterns_lookup"),s1=wt("noneditable_class"),_E=wt("editable_class"),V_=wt("noneditable_regexp"),SC=wt("preserve_cdata"),r1=wt("highlight_on_focus"),qb=wt("xss_sanitization"),a1=wt("init_content_sync"),ph=e=>e.options.isSet("text_patterns_lookup"),wC=e=>Ke.explode(e.options.get("font_size_style_values")),xC=e=>Ke.explode(e.options.get("font_size_classes")),AE=e=>e.options.get("encoding")==="xml",EC=e=>Ke.explode(e.options.get("images_file_types")),OE=wt("table_tab_navigation"),bh=wt("details_initial_state"),Ed=wt("details_serialized_state"),vh=wt("sandbox_iframes"),Td=e=>e.options.get("sandbox_iframes_exclusions"),kd=wt("convert_unsafe_embeds"),DE=wt("license_key"),c1=wt("api_key"),Xi=wt("disabled"),RE=wt("user_id"),ME=wt("fetch_users"),TC=wt("lists_indent_on_tab"),kC=e=>B.from(e.options.get("list_max_depth")),NE=it,BE=Ye,U_=e=>{const t=e.parentNode;t&&t.removeChild(e)},PE=e=>{const t=Xa(e);return{count:e.length-t.length,text:t}},Bf=e=>{let t;for(;(t=e.data.lastIndexOf(fr))!==-1;)e.deleteData(t,1)},_C=(e,t)=>(Pf(e),t),$E=(e,t)=>{const o=PE(e.data.substr(0,t.offset())),r=PE(e.data.substr(t.offset()));return(o.text+r.text).length>0?(Bf(e),ke(e,t.offset()-o.count)):t},AC=(e,t)=>{const o=t.container(),r=Yr(Mr(o.childNodes),e).map(c=>c<t.offset()?ke(o,t.offset()-1):t).getOr(t);return Pf(e),r},OC=(e,t)=>BE(e)&&t.container()===e?$E(e,t):_C(e,t),DC=(e,t)=>t.container()===e.parentNode?AC(e,t):_C(e,t),Z_=(e,t)=>ke.isTextPosition(t)?OC(e,t):DC(e,t),Pf=e=>{NE(e)&&Zc(e)&&(db(e)?e.removeAttribute("data-mce-caret"):U_(e)),BE(e)&&(Bf(e),e.data.length===0&&U_(e))},$f=ts,Kb=gi,Yb=Lg,IE="*[contentEditable=false],video,audio,embed,object",W_=(e,t,o)=>{const r=Pp(t.getBoundingClientRect(),o);let c,u;if(e.tagName==="BODY"){const b=e.ownerDocument.documentElement;c=e.scrollLeft||b.scrollLeft,u=e.scrollTop||b.scrollTop}else{const b=e.getBoundingClientRect();c=e.scrollLeft-b.left,u=e.scrollTop-b.top}r.left+=c,r.right+=c,r.top+=u,r.bottom+=u,r.width=1;let f=t.offsetWidth-t.clientWidth;return f>0&&(o&&(f*=-1),r.left+=f,r.right+=f),r},LE=e=>{var o,r;const t=Fr(Y.fromDom(e),IE);for(let c=0;c<t.length;c++){const u=t[c].dom;let f=u.previousSibling;if(Sm(f)){const b=f.data;b.length===1?(o=f.parentNode)==null||o.removeChild(f):f.deleteData(b.length-1,1)}f=u.nextSibling,Ec(f)&&(f.data.length===1?(r=f.parentNode)==null||r.removeChild(f):f.deleteData(0,1))}},mn=(e,t,o,r)=>{const c=oi();let u,f;const b=Ys(e),v=e.dom,w=(V,q)=>{let ae;if(_(),Yb(q))return null;if(o(q)){const ce=My(b,q,V),me=W_(t,q,V);v.setStyle(ce,"top",me.top),v.setStyle(ce,"caret-color","transparent"),f=ce;const _e=v.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});v.setStyles(_e,{...me}),v.add(t,_e),c.set({caret:_e,element:q,before:V}),V&&v.addClass(_e,"mce-visual-caret-before"),D(),ae=q.ownerDocument.createRange(),ae.setStart(ce,0),ae.setEnd(ce,0)}else return f=Rx(q,V),ae=q.ownerDocument.createRange(),Wc(f.nextSibling)?(ae.setStart(f,0),ae.setEnd(f,0)):(ae.setStart(f,1),ae.setEnd(f,1)),ae;return ae},_=()=>{LE(t),f&&(Pf(f),f=null),c.on(V=>{v.remove(V.caret),c.clear()}),u&&(clearInterval(u),u=void 0)},D=()=>{u=window.setInterval(()=>{c.on(V=>{r()?v.toggleClass(V.caret,"mce-visual-caret-hidden"):v.addClass(V.caret,"mce-visual-caret-hidden")})},500)},M=()=>{c.on(V=>{const q=W_(t,V.element,V.before);v.setStyles(V.caret,{...q})})},L=()=>clearInterval(u),W=()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}";return{isShowing:c.isSet,show:w,hide:_,getCss:W,reposition:M,destroy:L}},Xb=()=>Xn.browser.isFirefox(),Wc=e=>$f(e)||Kb(e),i1=e=>(Wc(e)||ja(e)&&Xb())&&Ni(Y.fromDom(e)).exists(Fi),j_=vc,Jb=ts,G_=gi,RC=z0("display","block table table-cell table-row table-caption list-item"),MC=Zc,l1=vd,$l=it,yh=Ye,q_=ss,If=(e,t)=>{let o;for(;o=e(t);)if(!l1(o))return o;return null},u1=(e,t,o,r,c)=>{const u=new _s(e,r),f=Jb(e)||l1(e);let b;if(Cu(t)){if(f&&(b=If(u.prev.bind(u),!0),o(b)))return b;for(;b=If(u.prev.bind(u),c);)if(o(b))return b}if(Of(t)){if(f&&(b=If(u.next.bind(u),!0),o(b)))return b;for(;b=If(u.next.bind(u),c);)if(o(b))return b}return null},Qb=(e,t)=>{const o=c=>j_(c.dom),r=c=>c.dom===t;return fu(Y.fromDom(e),o,r).map(c=>c.dom).getOr(t)},hr=e=>it(e)&&Ns(Y.fromDom(e),"position")==="absolute",K_=(e,t)=>e.parentNode!==t,NC=(e,t)=>Jb(e)&&hr(e)&&K_(e,t),Rm=(e,t)=>{for(;e&&e!==t;){if(RC(e)&&!NC(e,t))return e;e=e.parentNode}return null},ku=(e,t,o)=>Rm(e.container(),o)===Rm(t.container(),o),BC=(e,t)=>{if(!t)return B.none();const o=t.container(),r=t.offset();return $l(o)?B.from(o.childNodes[r+e]):B.none()},FE=(e,t)=>{const r=(t.ownerDocument??document).createRange();return e?(r.setStartBefore(t),r.setEndBefore(t)):(r.setStartAfter(t),r.setEndAfter(t)),r},Y_=(e,t,o)=>Rm(t,e)===Rm(o,e),ev=(e,t,o)=>{const r=e?"previousSibling":"nextSibling";let c=o;for(;c&&c!==t;){let u=c[r];if(u&&MC(u)&&(u=u[r]),Jb(u)||G_(u)){if(Y_(t,u,c))return u;break}if(q_(u))break;c=c.parentNode}return null},d1=ze(FE,!0),Mm=ze(FE,!1),tv=(e,t,o)=>{let r;const c=ze(ev,!0,t),u=ze(ev,!1,t),f=o.startContainer,b=o.startOffset;if(vd(f)){const v=yh(f)?f.parentNode:f,w=v.getAttribute("data-mce-caret");if(w==="before"&&(r=v.nextSibling,i1(r)))return d1(r);if(w==="after"&&(r=v.previousSibling,i1(r)))return Mm(r)}if(!o.collapsed)return o;if(Ye(f)){if(MC(f)){if(e===1){if(r=u(f),r)return d1(r);if(r=c(f),r)return Mm(r)}if(e===-1){if(r=c(f),r)return Mm(r);if(r=u(f),r)return d1(r)}return o}if(Sm(f)&&b>=f.data.length-1)return e===1&&(r=u(f),r)?d1(r):o;if(Ec(f)&&b<=1)return e===-1&&(r=c(f),r)?Mm(r):o;if(b===f.data.length)return r=u(f),r?d1(r):o;if(b===0)return r=c(f),r?Mm(r):o}return o},nv=(e,t)=>BC(e?0:-1,t).filter(Jb),Nm=(e,t,o)=>{const r=tv(e,t,o);return e===-1?ke.fromRangeStart(r):ke.fromRangeEnd(r)},m1=e=>B.from(e.getNode()).map(Y.fromDom),PC=e=>B.from(e.getNode(!0)).map(Y.fromDom),ov=(e,t)=>{let o=t;for(;o=e(o);)if(o.isVisible())return o;return o},Il=(e,t)=>{const o=ku(e,t);return!o&&ds(e.getNode())?!0:o},HE=ts,_u=Ye,$C=it,sv=ds,Ch=ss,f1=Px,rv=pb,X_=(e,t)=>{const o=[];let r=e;for(;r&&r!==t;)o.push(r),r=r.parentNode;return o},zE=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,av=(e,t)=>{if(Of(e)){if(Ch(t.previousSibling)&&!_u(t.previousSibling))return ke.before(t);if(_u(t))return ke(t,0)}if(Cu(e)){if(Ch(t.nextSibling)&&!_u(t.nextSibling))return ke.after(t);if(_u(t))return ke(t,t.data.length)}return Cu(e)?sv(t)?ke.before(t):ke.after(t):ke.before(t)},J_=(e,t)=>{const o=t.nextSibling;return o&&Ch(o)?_u(o)?ke(o,0):ke.before(o):IC(1,ke.after(t),e)},IC=(e,t,o)=>{let r,c,u,f;if(!$C(o)||!t)return null;if(t.isEqual(ke.after(o))&&o.lastChild){if(f=ke.after(o.lastChild),Cu(e)&&Ch(o.lastChild)&&$C(o.lastChild))return sv(o.lastChild)?ke.before(o.lastChild):f}else f=t;const b=f.container();let v=f.offset();if(_u(b)){if(Cu(e)&&v>0)return ke(b,--v);if(Of(e)&&v<b.length)return ke(b,++v);r=b}else{if(Cu(e)&&v>0&&(c=zE(b,v-1),Ch(c)))return!f1(c)&&(u=u1(c,e,rv,c),u)?_u(u)?ke(u,u.data.length):ke.after(u):_u(c)?ke(c,c.data.length):ke.before(c);if(Of(e)&&v<b.childNodes.length&&(c=zE(b,v),Ch(c)))return sv(c)?J_(o,c):!f1(c)&&(u=u1(c,e,rv,c),u)?_u(u)?ke(u,0):ke.before(u):_u(c)?ke(c,0):ke.after(c);r=c||f.getNode()}if(r&&(Of(e)&&f.isAtEnd()||Cu(e)&&f.isAtStart())&&(r=u1(r,e,gt,o,!0),rv(r,o)))return av(e,r);c=r&&u1(r,e,rv,o);const w=hl(ge(X_(b,o),HE));return w&&(!c||!w.contains(c))?(Of(e)?f=ke.after(w):f=ke.before(w),f):c?av(e,c):null},Ll=e=>({next:t=>IC(1,t,e),prev:t=>IC(-1,t,e)}),LC=(e,t,o)=>{const r=e?ke.before(o):ke.after(o);return jc(e,t,r)},Q_=e=>ds(e)?ke.before(e):ke.after(e),VE=e=>ke.isTextPosition(e)?e.offset()===0:ss(e.getNode()),UE=e=>{if(ke.isTextPosition(e)){const t=e.container();return e.offset()===t.data.length}else return ss(e.getNode(!0))},ZE=(e,t)=>!ke.isTextPosition(e)&&!ke.isTextPosition(t)&&e.getNode()===t.getNode(!0),eA=e=>!ke.isTextPosition(e)&&ds(e.getNode()),Yo=(e,t,o)=>e?!ZE(t,o)&&!eA(t)&&UE(t)&&VE(o):!ZE(o,t)&&VE(t)&&UE(o),jc=(e,t,o)=>{const r=Ll(t);return B.from(e?r.next(o):r.prev(o))},Sh=(e,t,o)=>jc(e,t,o).bind(r=>ku(o,r,t)&&Yo(e,o,r)?jc(e,t,r):B.some(r)),yi=(e,t,o,r)=>Sh(e,t,o).bind(c=>r(c)?yi(e,t,c,r):B.some(c)),l=(e,t)=>{const o=e?t.firstChild:t.lastChild;return Ye(o)?B.some(ke(o,e?0:o.data.length)):o?ss(o)?B.some(e?ke.before(o):Q_(o)):LC(e,t,o):B.none()},m=ze(jc,!0),p=ze(jc,!1),y=ze(l,!0),E=ze(l,!1),O="_mce_caret",N=e=>it(e)&&e.id===O,H=(e,t)=>{let o=t;for(;o&&o!==e;){if(N(o))return o;o=o.parentNode}return null},j=e=>U(e.start),te=e=>Sn(e,"rng"),fe=e=>Sn(e,"id"),je=e=>Sn(e,"name"),bt=e=>Ke.isArray(e.start),mt=e=>!je(e)&&Et(e.forward)?e.forward:!0,We=(e,t)=>(it(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),ot=(e,t)=>{const o=B.from(Ix(e.getRoot(),t.start)),r=B.from(Ix(e.getRoot(),t.end));return tr(o,r,(c,u)=>{const f=e.createRng();return f.setStart(c.container(),c.offset()),f.setEnd(u.container(),u.offset()),{range:f,forward:mt(t)}})},Ve=(e,t)=>{const r=(e.ownerDocument??document).createTextNode(fr);e.appendChild(r),t.setStart(r,0),t.setEnd(r,0)},Gt=e=>!e.hasChildNodes(),vn=(e,t)=>E(e).fold($e,o=>(t.setStart(o.container(),o.offset()),t.setEnd(o.container(),o.offset()),!0)),kt=(e,t,o)=>Gt(t)&&H(e,t)?(Ve(t,o),!0):!1,ao=(e,t,o,r)=>{const c=o[t?"start":"end"],u=e.getRoot();if(c){let f=u,b=c[0];for(let v=c.length-1;f&&v>=1;v--){const w=f.childNodes;if(kt(u,f,r))return!0;if(c[v]>w.length-1)return kt(u,f,r)?!0:vn(f,r);f=w[c[v]]}Ye(f)&&(b=Math.min(c[0],f.data.length)),it(f)&&(b=Math.min(c[0],f.childNodes.length)),t?r.setStart(f,b):r.setEnd(f,b)}return!0},fn=e=>Ye(e)&&e.data.length>0,po=(e,t,o)=>{const r=e.get(o.id+"_"+t),c=r==null?void 0:r.parentNode,u=o.keep;if(r&&c){let f,b;if(t==="start"?u?r.hasChildNodes()?(f=r.firstChild,b=1):fn(r.nextSibling)?(f=r.nextSibling,b=0):fn(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=c,b=e.nodeIndex(r)+1):(f=c,b=e.nodeIndex(r)):u?r.hasChildNodes()?(f=r.firstChild,b=1):fn(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=c,b=e.nodeIndex(r)):(f=c,b=e.nodeIndex(r)),!u){const v=r.previousSibling,w=r.nextSibling;Ke.each(Ke.grep(r.childNodes),D=>{Ye(D)&&(D.data=D.data.replace(/\uFEFF/g,""))});let _;for(;_=e.get(o.id+"_"+t);)e.remove(_,!0);if(Ye(w)&&Ye(v)&&!Xn.browser.isOpera()){const D=v.data.length;v.appendData(w.data),e.remove(w),f=v,b=D}}return B.some(ke(f,b))}else return B.none()},Is=(e,t)=>{const o=e.createRng();return ao(e,!0,t,o)&&ao(e,!1,t,o)?B.some({range:o,forward:mt(t)}):B.none()},Gc=(e,t)=>{const o=po(e,"start",t),r=po(e,"end",t);return tr(o,r.or(o),(c,u)=>{const f=e.createRng();return f.setStart(We(e,c.container()),c.offset()),f.setEnd(We(e,u.container()),u.offset()),{range:f,forward:mt(t)}})},Lf=(e,t)=>B.from(e.select(t.name)[t.index]).map(o=>{const r=e.createRng();return r.selectNode(o),{range:r,forward:!0}}),Bm=(e,t)=>{const o=e.dom;if(t){if(bt(t))return Is(o,t);if(j(t))return ot(o,t);if(fe(t))return Gc(o,t);if(je(t))return Lf(o,t);if(te(t))return B.some({range:t.rng,forward:mt(t)})}return B.none()},Ff=(e,t,o)=>Me(e,t,o),_o=(e,t)=>{Bm(e,t).each(({range:o,forward:r})=>{e.setRng(o,r)})},vs=e=>it(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",Ia=(e=>t=>e===t)(Zs),Or=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,_d=e=>!Or(e)&&!Ia(e)&&!gl(e),Sa=e=>{const t=[];if(e)for(let o=0;o<e.rangeCount;o++)t.push(e.getRangeAt(o));return t},FC=e=>mo(e,t=>{const o=gr(t);return o?[Y.fromDom(o)]:[]}),cv=e=>Sa(e).length>1,Ad=e=>ge(FC(e),wf),aa=e=>Fr(e,"td[data-mce-selected],th[data-mce-selected]"),WE=(e,t)=>{const o=aa(t);return o.length>0?o:Ad(e)},Rt=e=>WE(Sa(e.selection.getSel()),Y.fromDom(e.getBody())),Qa=(e,t)=>Ws(e,"table",t),tA=e=>{const t=e.startContainer,o=e.startOffset;return Ye(t)?o===0?B.some(Y.fromDom(t)):B.none():B.from(t.childNodes[o]).map(Y.fromDom)},jE=e=>{const t=e.endContainer,o=e.endOffset;return Ye(t)?o===t.data.length?B.some(Y.fromDom(t)):B.none():B.from(t.childNodes[o-1]).map(Y.fromDom)},iv=e=>Nr(e).fold(qe([e]),t=>[e].concat(iv(t))),HC=e=>or(e).fold(qe([e]),t=>An(t)==="br"?ci(t).map(o=>[e].concat(HC(o))).getOr([]):[e].concat(HC(t))),Hf=(e,t)=>tr(tA(t),jE(t),(o,r)=>{const c=To(iv(e),ze(Ln,o)),u=To(HC(e),ze(Ln,r));return c.isSome()&&u.isSome()}).getOr(!1),GE=(e,t,o,r)=>{const c=o,u=new _s(o,c),f=nf(e.schema.getMoveCaretBeforeOnEnterElements(),(v,w)=>!Ce(["td","th","table"],w.toLowerCase()));let b=o;do{if(Ye(b)&&Ke.trim(b.data).length!==0){r?t.setStart(b,0):t.setEnd(b,b.data.length);return}if(f[b.nodeName]){r?t.setStartBefore(b):b.nodeName==="BR"?t.setEndBefore(b):t.setEndAfter(b);return}}while(b=r?u.next():u.prev());c.nodeName==="BODY"&&(r?t.setStart(c,0):t.setEnd(c,c.childNodes.length))},zC=e=>{const t=e.selection.getSel();return de(t)&&t.rangeCount>0},VC=(e,t)=>{const o=Rt(e);o.length>0?ne(o,r=>{const c=r.dom,u=e.dom.createRng();u.setStartBefore(c),u.setEndAfter(c),t(u,!0)}):t(e.selection.getRng(),!1)},qE=(e,t,o)=>{const r=Wy(e,t);o(r),e.moveToBookmark(r)},UC=(e,t)=>e.startContainer===e.endContainer&&e.endOffset-e.startOffset===1&&t(e.startContainer.childNodes[e.startOffset]),$H=e=>UC(e,Wa),IH=e=>UC(e,Ye),LH=e=>UC(e,bp),ZC=e=>Fn(e==null?void 0:e.nodeType),WC=e=>it(e)&&!vs(e)&&!N(e)&&!mm(e),h6=(e,t)=>{if(WC(t)&&!/^(TD|TH)$/.test(t.nodeName)){const o=e.getAttrib(t,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},p6=(e,t,o)=>{const{selection:r,dom:c}=e,u=r.getNode(),f=ts(u);qE(r,!0,()=>{t()}),f&&ts(u)&&c.isChildOf(u,e.getBody())?e.selection.select(u):o(r.getStart())&&b6(c,r)},b6=(e,t)=>{const o=t.getRng(),{startContainer:r,startOffset:c}=o,u=t.getNode();if(!h6(e,u)&&it(r)){const f=r.childNodes,b=e.getRoot();let v;if(c<f.length){const w=f[c];v=new _s(w,e.getParent(w,e.isBlock)??b)}else{const w=f[f.length-1];v=new _s(w,e.getParent(w,e.isBlock)??b),v.next(!0)}for(let w=v.current();w;w=v.next()){if(e.getContentEditable(w)==="false")return;if(Ye(w)&&!nA(w)){o.setStart(w,0),t.setRng(o);return}}}},v6=(e,t,o)=>{if(e){const r=t?"nextSibling":"previousSibling";for(e=e[r];e;e=e[r])if(it(e)||!nA(e))return e}},jC=(e,t)=>!!e.getTextBlockElements()[t.nodeName.toLowerCase()]||ps(e,t),lv=(e,t,o)=>e.schema.isValidChild(t,o),nA=(e,t=!1)=>{if(de(e)&&Ye(e)){const o=t?e.data.replace(/ /g," "):e.data;return Pg(o)}else return!1},FH=e=>de(e)&&Ye(e)&&e.length===0,HH=(e,t)=>{const o="[data-mce-cef-wrappable]",r=f6(e),c=pg(r)?o:`${o},${r}`;return Ic(Y.fromDom(t),c)},y6=(e,t)=>{const o=e.dom;return WC(t)&&o.getContentEditable(t)==="false"&&HH(e,t)&&o.select('[contenteditable="true"]',t).length===0},zf=(e,t)=>X(e)?e(t):(de(t)&&(e=e.replace(/%(\w+)/g,(o,r)=>t[r]||o)),e),GC=(e,t)=>(e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()),KE=(e,t)=>{if(Le(e))return null;{let o=String(e);return(t==="color"||t==="backgroundColor")&&(o=pi(o)),t==="fontWeight"&&e===700&&(o="bold"),t==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},qC=(e,t,o)=>{const r=e.getStyle(t,o);return KE(r,o)},C6=(e,t)=>{let o;return e.getParent(t,r=>it(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},YE=(e,t,o)=>e.getParents(t,o,e.getRoot()),oA=(e,t,o)=>{const r=e.formatter.get(t);return de(r)&&Ge(r,o)},XE=(e,t)=>oA(e,t,r=>{const c=u=>X(u)||u.length>1&&u.charAt(0)==="%";return Ge(["styles","attributes"],u=>Jo(r,u).exists(f=>{const b=Yt(f)?f:ei(f);return Ge(b,c)}))}),S6=(e,t,o)=>{const r=["inline","block","selector","attributes","styles","classes"],c=u=>nf(u,(f,b)=>Ge(r,v=>v===b));return oA(e,t,u=>{const f=c(u);return oA(e,o,b=>{const v=c(b);return i0(f,v)})})},Od=e=>Ss(e,"block"),zH=e=>Od(e)&&e.wrapper===!0,VH=e=>Od(e)&&e.wrapper!==!0,Au=e=>Ss(e,"selector"),ca=e=>Ss(e,"inline"),xJ=e=>Au(e)&&ca(e)&&$o(Jo(e,"mixed"),!0),sA=e=>Au(e)&&e.expand!==!1&&!ca(e),EJ=e=>{const t=[];let o=e;for(;o;){if(Ye(o)&&o.data!==fr||o.childNodes.length>1)return[];it(o)&&t.push(o),o=o.firstChild}return t},w6=e=>EJ(e).length>0,rA=e=>N(e.dom)&&w6(e.dom),KC=vs,x6=YE,rs=nA,aA=jC,JE=e=>ds(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,YC=(e,t)=>{let o=t;for(;o;){if(it(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:t;o=o.parentNode}return t},Pm=(e,t,o,r)=>{const c=t.data;if(e){for(let u=o;u>0;u--)if(r(c.charAt(u-1)))return u}else for(let u=o;u<c.length;u++)if(r(c.charAt(u)))return u;return-1},QE=(e,t,o)=>Pm(e,t,o,r=>Ia(r)||Or(r)),uv=(e,t,o)=>Pm(e,t,o,_d),cA=(e,t,o,r,c,u)=>{let f;const b=e.getParent(o,D=>md(D)||e.isBlock(D)),v=de(b)?b:t,w=(D,M,L)=>{const W=vu(e),V=c?W.backwards:W.forwards;return B.from(V(D,M,(q,ae)=>KC(q.parentNode)?-1:(f=q,L(c,q,ae)),v))};return w(o,r,QE).bind(D=>u?w(D.container,D.offset+(c?-1:0),uv):B.some(D)).orThunk(()=>f?B.some({container:f,offset:c?0:f.length}):B.none())},E6=(e,t,o,r,c)=>{const u=r[c];Ye(r)&&pg(r.data)&&u&&(r=u);const f=x6(e,r);for(let b=0;b<f.length;b++)for(let v=0;v<t.length;v++){const w=t[v];if(!(de(w.collapsed)&&w.collapsed!==o.collapsed)&&Au(w)&&e.is(f[b],w.selector))return f[b]}return r},T6=(e,t,o,r)=>{let c=o;const u=e.getRoot(),f=t[0];if(Od(f)&&(c=f.wrapper?null:e.getParent(o,f.block,u)),!c){const b=e.getParent(o,"LI,TD,TH,SUMMARY")??u;c=e.getParent(Ye(o)?o.parentNode:o,v=>v!==u&&aA(e.schema,v),b)}if(c&&Od(f)&&f.wrapper&&(c=x6(e,c,"ul,ol").reverse()[0]||c),!c)for(c=o;c&&c[r]&&!e.isBlock(c[r])&&(c=c[r],!GC(c,"br")););return c||o},iA=(e,t,o,r)=>{const c=o.parentNode;return de(o[r])?!1:c===t||Le(c)||e.isBlock(c)?!0:iA(e,t,c,r)},e4=(e,t,o,r,c,u)=>{let f=o;const b=c?"previousSibling":"nextSibling",v=e.getRoot();if(Ye(o)&&!rs(o)&&(c?r>0:r<o.data.length))return o;for(;f;){if(md(f))return o;if(!t[0].block_expand&&e.isBlock(f))return u?f:o;for(let w=f[b];w;w=w[b]){const _=Ye(w)&&!iA(e,v,w,b);if(!KC(w)&&!JE(w)&&!rs(w,_))return f}if(f===v||f.parentNode===v){o=f;break}f=f.parentNode}return o},t4=e=>KC(e.parentNode)||KC(e),$m=(e,t,o,r={})=>{const{includeTrailingSpace:c=!1,expandToBlock:u=!0}=r,f=e.getParent(t.commonAncestorContainer,L=>md(L)),b=de(f)?f:e.getRoot();let{startContainer:v,startOffset:w,endContainer:_,endOffset:D}=t;const M=o[0];return it(v)&&v.hasChildNodes()&&(v=Em(v,w),Ye(v)&&(w=0)),it(_)&&_.hasChildNodes()&&(_=Em(_,t.collapsed?D:D-1),Ye(_)&&(D=_.data.length)),v=YC(e,v),_=YC(e,_),t4(v)&&(v=KC(v)?v:v.parentNode,t.collapsed?v=v.previousSibling||v:v=v.nextSibling||v,Ye(v)&&(w=t.collapsed?v.length:0)),t4(_)&&(_=KC(_)?_:_.parentNode,t.collapsed?_=_.nextSibling||_:_=_.previousSibling||_,Ye(_)&&(D=t.collapsed?0:_.length)),t.collapsed&&(cA(e,b,v,w,!0,c).each(({container:V,offset:q})=>{v=V,w=q}),cA(e,b,_,D,!1,c).each(({container:V,offset:q})=>{_=V,D=q})),(ca(M)||M.block_expand)&&((!ca(M)||!Ye(v)||w===0)&&(v=e4(e,o,v,w,!0,u)),(!ca(M)||!Ye(_)||D===_.data.length)&&(_=e4(e,o,_,D,!1,u))),sA(M)&&(v=E6(e,o,t,v,"previousSibling"),_=E6(e,o,t,_,"nextSibling")),(Od(M)||Au(M))&&(v=T6(e,o,v,"previousSibling"),_=T6(e,o,_,"nextSibling"),Od(M)&&(e.isBlock(v)||(v=e4(e,o,v,w,!0,u),Ye(v)&&(w=0)),e.isBlock(_)||(_=e4(e,o,_,D,!1,u),Ye(_)&&(D=_.data.length)))),it(v)&&v.parentNode&&(w=e.nodeIndex(v),v=v.parentNode),it(_)&&_.parentNode&&(D=e.nodeIndex(_)+1,_=_.parentNode),{startContainer:v,startOffset:w,endContainer:_,endOffset:D}},Ou=(e,t,o)=>{const r=t.startOffset,c=Em(t.startContainer,r),u=t.endOffset,f=Em(t.endContainer,u-1),b=V=>{const q=V[0];Ye(q)&&q===c&&r>=q.data.length&&V.splice(0,1);const ae=V[V.length-1];return u===0&&V.length>0&&ae===f&&Ye(ae)&&V.splice(V.length-1,1),V},v=(V,q,ae)=>{const ce=[];for(;V&&V!==ae;V=V[q])ce.push(V);return ce},w=(V,q)=>e.getParent(V,ae=>ae.parentNode===q,q),_=(V,q,ae)=>{const ce=ae?"nextSibling":"previousSibling";for(let me=V,_e=me.parentNode;me&&me!==q;me=_e){_e=me.parentNode;const Ie=v(me===V?me:me[ce],ce);Ie.length&&(ae||Ie.reverse(),o(b(Ie)))}};if(c===f)return o(b([c]));const D=e.findCommonAncestor(c,f)??e.getRoot();if(e.isChildOf(c,f))return _(c,D,!0);if(e.isChildOf(f,c))return _(f,D);const M=w(c,D)||c,L=w(f,D)||f;_(c,M,!0);const W=v(M===c?M:M.nextSibling,"nextSibling",L===f?L.nextSibling:L);W.length&&o(b(W)),_(f,L)},g1=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]","div.mce-footnotes"],k6=e=>fo(e)&&ya(e)===fr,UH=(e,t,o,r)=>Ni(t).fold(()=>"skipping",c=>r==="br"||k6(t)?"valid":_y(t)?"existing":N(t.dom)?"caret":Ge(g1,u=>Ic(t,u))?"valid-block":!lv(e,o,r)||!lv(e,An(c),o)?"invalid-child":"valid"),ZH=(e,t)=>{const o=$m(e.dom,t,[{inline:"span"}]);t.setStart(o.startContainer,o.startOffset),t.setEnd(o.endContainer,o.endOffset),e.selection.setRng(t)},_6=(e,t,o,r,c,u)=>{const{uid:f=t,...b}=o;Hc(e,vm()),hs(e,`${bu()}`,f),hs(e,`${Zi()}`,r);const{attributes:v={},classes:w=[]}=c(f,b);if(Ir(e,v),gp(e,w),u){w.length>0&&hs(e,`${Qg()}`,w.join(","));const _=It(v);_.length>0&&hs(e,`${ob()}`,_.join(","))}},WH=e=>{yr(e,vm()),sr(e,`${bu()}`),sr(e,`${Zi()}`),sr(e,`${Jg()}`);const t=$i(e,`${ob()}`).map(r=>r.split(",")).getOr([]),o=$i(e,`${Qg()}`).map(r=>r.split(",")).getOr([]);ne(t,r=>sr(e,r)),Yw(e,o),sr(e,`${Qg()}`),sr(e,`${ob()}`)},A6=(e,t,o,r,c)=>{const u=Y.fromTag("span",e);return _6(u,t,o,r,c,!1),u},jH=(e,t,o,r,c,u)=>{const f=[],b=A6(e.getDoc(),o,u,r,c),v=oi(),w=()=>{v.clear()},_=()=>v.get().getOrThunk(()=>{const W=ba(b);return f.push(W),v.set(W),W}),D=W=>{ne(W,M)},M=W=>{switch(UH(e,W,"span",An(W))){case"invalid-child":{w();const q=ks(W);D(q),w();break}case"valid-block":{w(),_6(W,o,u,r,c,!0);break}case"valid":{const q=_();Fc(W,q);break}}},L=W=>{const V=Ue(W,Y.fromDom);D(V)};return Ou(e.dom,t,W=>{w(),L(W)}),f},O6=(e,t,o,r)=>{e.undoManager.transact(()=>{const c=e.selection,u=c.getRng(),f=Rt(e).length>0,b=Xr("mce-annotation");if(u.collapsed&&!f&&ZH(e,u),c.getRng().collapsed&&!f){const v=A6(e.getDoc(),b,r,t,o.decorate);ad(v,Zs),c.getRng().insertNode(v.dom),c.select(v.dom)}else qE(c,!1,()=>{VC(e,v=>{jH(e,v,b,t,o.decorate,r)})})})},D6=e=>{const t=ab();Np(e,t);const o=rb(e,t),r=iu("span"),c=u=>{ne(u,f=>{r(f)?li(f):WH(f)})};return{register:(u,f)=>{t.register(u,f)},annotate:(u,f)=>{t.lookup(u).each(b=>{O6(e,u,b,f)})},annotationChanged:(u,f)=>{o.addListener(u,f)},remove:u=>{sb(e,B.some(u)).each(({elements:f})=>{const b=e.selection.getBookmark();c(f),e.selection.moveToBookmark(b)})},removeAll:u=>{const f=e.selection.getBookmark();Bn(bd(e,u),(b,v)=>{c(b)}),e.selection.moveToBookmark(f)},getAll:u=>{const f=bd(e,u);return Yd(f,b=>Ue(b,v=>v.dom))}}},dv=e=>({getBookmark:ze(Ff,e),moveToBookmark:ze(_o,e)});dv.isBookmarkNode=vs;const R6=(e,t,o)=>o.collapsed?!1:Ge(o.getClientRects(),r=>By(r,e,t)),GH=(e,t)=>{const o=fo(t)?ya(t).length:ks(t).length+1;return e>o?o:e<0?0:e},qH=e=>lm.range(e.start,GH(e.soffset,e.start),e.finish,GH(e.foffset,e.finish)),Ur=(e,t)=>!H0(t.dom)&&(ri(e,t)||Ln(e,t)),XC=e=>t=>Ur(e,t.start)&&Ur(e,t.finish),wa=e=>e.inline||Xn.browser.isFirefox(),Du=e=>lm.range(Y.fromDom(e.startContainer),e.startOffset,Y.fromDom(e.endContainer),e.endOffset),KH=e=>{const t=e.getSelection();return(!t||t.rangeCount===0?B.none():B.from(t.getRangeAt(0))).map(Du)},M6=e=>{const t=sd(e);return KH(t.dom).filter(XC(e))},YH=(e,t)=>B.from(t).filter(XC(e)).map(qH),lA=e=>{const t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),B.some(t)}catch{return B.none()}},n4=e=>{const t=wa(e)?M6(Y.fromDom(e.getBody())):B.none();e.bookmark=t.isSome()?t:e.bookmark},o4=e=>(e.bookmark?e.bookmark:B.none()).bind(o=>YH(Y.fromDom(e.getBody()),o)).bind(lA),XH=e=>{o4(e).each(t=>e.selection.setRng(t))},N6={isEditorUIElement:e=>{const t=e.className.toString();return t.indexOf("tox-")!==-1||t.indexOf("mce-")!==-1}},Ji=(e,t)=>(Fn(t)||(t=0),window.setTimeout(e,t)),kc=(e,t)=>(Fn(t)||(t=0),window.setInterval(e,t)),Ru={setEditorTimeout:(e,t,o)=>Ji(()=>{e.removed||t()},o),setEditorInterval:(e,t,o)=>{const r=kc(()=>{e.removed?window.clearInterval(r):t()},o);return r}},Dd=e=>e.type==="nodechange"&&e.selectionChange,uA=(e,t)=>{const o=()=>{t.throttle()};Un.DOM.bind(document,"mouseup",o),e.on("remove",()=>{Un.DOM.unbind(document,"mouseup",o)})},JH=(e,t)=>{e.on("mouseup touchend",o=>{t.throttle()})},QH=(e,t)=>{JH(e,t),e.on("keyup NodeChange AfterSetSelectionRange",o=>{Dd(o)||n4(e)})},B6=e=>{const t=pt(()=>{n4(e)},0);e.on("init",()=>{e.inline&&uA(e,t),QH(e,t)}),e.on("remove",()=>{t.cancel()})};let mv;const s4=Un.DOM,e9=e=>it(e)&&N6.isEditorUIElement(e),JC=e=>{const t=e.classList;return t!==void 0?t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"):!1},r4=(e,t)=>{const o=hh(e);return s4.getParent(t,c=>e9(c)||(o?e.dom.is(c,o):!1))!==null},dA=e=>{try{const t=Br(Y.fromDom(e.getElement()));return wl(t).fold(()=>document.body,o=>o.dom)}catch{return document.body}},t9=(e,t)=>{const o=t.editor;B6(o);const r=(c,u)=>{if(r1(c)&&c.inline!==!0){const f=Y.fromDom(c.getContainer());u(f,"tox-edit-focus")}};o.on("focusin",()=>{const c=e.focusedEditor;JC(dA(o))&&r(o,Hc),c!==o&&(c&&c.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:c}),o.focus(!0))}),o.on("focusout",()=>{Ru.setEditorTimeout(o,()=>{const c=e.focusedEditor;(!JC(dA(o))||c!==o)&&r(o,yr),!r4(o,dA(o))&&c===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),mv||(mv=c=>{const u=e.activeEditor;u&&j2(c).each(f=>{const b=f;b.ownerDocument===document&&b!==document.body&&!r4(u,b)&&e.focusedEditor===u&&(u.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},s4.bind(document,"focusin",mv))},n9=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),!e.activeEditor&&mv&&(s4.unbind(document,"focusin",mv),mv=null)},P6=e=>{e.on("AddEditor",ze(t9,e)),e.on("RemoveEditor",ze(n9,e))},mA=(e,t)=>e.dom.getParent(t,o=>e.dom.getContentEditable(o)==="true"),$6=(e,t)=>e.dom.getParent(t,o=>e.dom.getContentEditable(o)==="false")!==null,fA=e=>e.collapsed?B.from(Em(e.startContainer,e.startOffset)).map(Y.fromDom):B.none(),o9=(e,t)=>fA(t).bind(o=>ib(o)?B.some(o):ri(e,o)?B.none():B.some(e)),s9=(e,t)=>{o9(Y.fromDom(e.getBody()),t).bind(o=>y(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},gA=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},r9=e=>rd(e)||g3(e).isSome(),I6=e=>de(e.iframeElement)&&rd(Y.fromDom(e.iframeElement)),a9=e=>{const t=e.getBody();return t&&r9(Y.fromDom(t))},c9=e=>{const t=Br(Y.fromDom(e.getElement()));return wl(t).filter(o=>!JC(o.dom)&&r4(e,o.dom)).isSome()},fv=e=>e.inline?a9(e):I6(e),L6=e=>fv(e)||c9(e),kJ=e=>{const t=e.selection,o=e.getBody();let r=t.getRng();e.quirks.refreshContentEditable();const c=f=>{o4(f).each(b=>{f.selection.setRng(b),r=b})};!fv(e)&&e.hasEditableRoot()&&c(e);const u=mA(e,t.getNode());if(u&&e.dom.isChildOf(u,o)){$6(e,u)||gA(o),gA(u),e.hasEditableRoot()||c(e),s9(e,r),a4(e);return}e.inline||(Xn.browser.isOpera()||gA(o),e.getWin().focus()),(Xn.browser.isFirefox()||e.inline)&&(gA(o),s9(e,r)),a4(e)},a4=e=>e.editorManager.setActive(e),F6=(e,t)=>{e.removed||(t?a4(e):kJ(e))},vt={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||vt.metaKeyPressed(e),metaKeyPressed:e=>Xn.os.isMacOS()||Xn.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},h1="data-mce-selected",i9=`table,img,figure.image,hr,video,span.mce-preview-object,details,${cx}`,l9=Math.abs,hA=Math.round,H6={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},u9=e=>e.type==="longpress"||e.type.indexOf("touch")===0,d9=(e,t)=>{const o=t.dom,r=t.getDoc(),c=document,u=t.getBody();let f,b,v,w,_,D,M,L,W,V,q,ae,ce,me,_e;const Ie=Be=>de(Be)&&(fi(Be)||o.is(Be,"figure.image")),ut=Be=>gi(Be)||o.hasClass(Be,"mce-preview-object"),$t=(Be,st)=>{if(u9(Be)){const Tt=Be.touches[0];return Ie(Be.target)&&!R6(Tt.clientX,Tt.clientY,st)}else return Ie(Be.target)&&!R6(Be.clientX,Be.clientY,st)},Ae=Be=>{const st=Be.target;$t(Be,t.selection.getRng())&&!Be.isDefaultPrevented()&&t.selection.select(st)},ve=Be=>o.hasClass(Be,"mce-preview-object")&&de(Be.firstElementChild)?[Be,Be.firstElementChild]:o.is(Be,"figure.image")?[Be.querySelector("img")]:[Be],Oe=Be=>{const st=yE(t);return!st||t.mode.isReadOnly()||Be.getAttribute("data-mce-resize")==="false"||Be===t.getBody()?!1:o.hasClass(Be,"mce-preview-object")&&de(Be.firstElementChild)?Ic(Y.fromDom(Be.firstElementChild),st):Ic(Y.fromDom(Be),st)},dt=(Be,st)=>{if(ut(st))return Be.create("img",{src:Xn.transparentSrc});if(ja(st)){const $n=pn(w.name,"n")?Vs:Tr,yn=st.cloneNode(!0);return $n(Be.select("tr",yn)).each(Oo=>{const Jl=Be.select("td,th",Oo);Be.setStyle(Oo,"height",null),ne(Jl,Dc=>Be.setStyle(Dc,"height",null))}),yn}else return st.cloneNode(!0)},en=(Be,st,Tt)=>{Be[st]=Tt;const $n=400;if(Be.width>$n&&!(st==="width"&&Tt<$n))Be[st]=Tt,o.setStyle(Be,st,Tt);else{const yn=st==="height"?$n*(V??1):$n;Be[st]=yn,o.setStyle(Be,st,yn)}},tn=(Be,st,Tt)=>{if(de(Tt)){const $n=ve(Be);ne($n,yn=>{Cp(yn)?en(yn,st,Tt):yn.style[st]||!t.schema.isValid(yn.nodeName.toLowerCase(),st)?o.setStyle(yn,st,Tt):o.setAttrib(yn,st,""+Tt)})}},Wn=(Be,st,Tt)=>{tn(Be,"width",st),tn(Be,"height",Tt)},xo=Be=>{let st,Tt,$n,yn,Oo;st=Be.screenX-D,Tt=Be.screenY-M,ae=st*w[2]+L,ce=Tt*w[3]+W,ae=ae<5?5:ae,ce=ce<5?5:ce,(Ie(f)||ut(f)||Cp(f))&&k_(t)!==!1?$n=!vt.modifierPressed(Be):$n=vt.modifierPressed(Be),$n&&(l9(st)>l9(Tt)?(ce=hA(ae*V),ae=hA(ce/V)):(ae=hA(ce/V),ce=hA(ae*V))),Wn(b,ae,ce),yn=w.startPos.x+st,Oo=w.startPos.y+Tt,yn=yn>0?yn:0,Oo=Oo>0?Oo:0,o.setStyles(v,{left:yn,top:Oo,display:"block"}),v.innerHTML=ae+" &times; "+ce,st=u.scrollWidth-me,Tt=u.scrollHeight-_e,st+Tt!==0&&o.setStyles(v,{left:yn-st,top:Oo-Tt}),q||(Yx(t,f,L,W,"corner-"+w.name),q=!0)},Ko=()=>{const Be=q;q=!1,Be&&(tn(f,"width",ae),tn(f,"height",ce)),o.unbind(r,"mousemove",xo),o.unbind(r,"mouseup",Ko),c!==r&&(o.unbind(c,"mousemove",xo),o.unbind(c,"mouseup",Ko)),o.remove(b),o.remove(v),o.remove(_),cs(f),Be&&(oC(t,f,ae,ce,"corner-"+w.name),o.setAttrib(f,"style",o.getAttrib(f,"style"))),t.nodeChanged()},cs=Be=>{co();const st=o.getPos(Be,u),Tt=st.x,$n=st.y,yn=Be.getBoundingClientRect(),Oo=yn.width||yn.right-yn.left,Jl=yn.height||yn.bottom-yn.top;f!==Be&&(xi(),f=Be,ae=ce=0);const Dc=t.dispatch("ObjectSelected",{target:Be});Oe(Be)&&!Dc.isDefaultPrevented()?Bn(H6,(Ql,al)=>{const jh=Jc=>{const ag=ve(f)[0];D=Jc.screenX,M=Jc.screenY,L=ag.clientWidth,W=ag.clientHeight,V=W/L,w=Ql,w.name=al,w.startPos={x:Oo*Ql[0]+Tt,y:Jl*Ql[1]+$n},me=u.scrollWidth,_e=u.scrollHeight,_=o.add(u,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(_,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),b=dt(o,f),o.addClass(b,"mce-clonedresizable"),o.setAttrib(b,"data-mce-bogus","all"),b.contentEditable="false",o.setStyles(b,{left:Tt,top:$n,margin:0}),Wn(b,Oo,Jl),b.removeAttribute(h1),u.appendChild(b),o.bind(r,"mousemove",xo),o.bind(r,"mouseup",Ko),c!==r&&(o.bind(c,"mousemove",xo),o.bind(c,"mouseup",Ko)),v=o.add(u,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},L+" &times; "+W)};let sc=o.get("mceResizeHandle"+al);sc&&o.remove(sc),sc=o.add(u,"div",{id:"mceResizeHandle"+al,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+al+"-resize; margin:0; padding:0"}),o.bind(sc,"mousedown",Jc=>{Jc.stopImmediatePropagation(),Jc.preventDefault(),jh(Jc)}),Ql.elm=sc,o.setStyles(sc,{left:Oo*Ql[0]+Tt-sc.offsetWidth/2,top:Jl*Ql[1]+$n-sc.offsetHeight/2})}):xi(!1)},Gr=pt(cs,0),xi=(Be=!0)=>{Gr.cancel(),co(),f&&Be&&f.removeAttribute(h1),Bn(H6,(st,Tt)=>{const $n=o.get("mceResizeHandle"+Tt);$n&&(o.unbind($n),o.remove($n))})},ft=(Be,st)=>o.isChildOf(Be,st),Zt=Be=>{if(q||t.removed||t.composing)return;const st=Be.type==="mousedown"?Be.target:e.getNode(),Tt=ea(Y.fromDom(st),i9).map(yn=>yn.dom).filter(yn=>o.isEditable(yn.parentElement)||yn.nodeName==="IMG"&&o.isEditable(yn)).getOrUndefined(),$n=de(Tt)?o.getAttrib(Tt,h1,"1"):"1";if(ne(o.select(`img[${h1}],hr[${h1}]`),yn=>{yn.removeAttribute(h1)}),de(Tt)&&ft(Tt,u)&&L6(t)){no();const yn=e.getStart(!0);if(ft(yn,Tt)&&ft(e.getEnd(!0),Tt)){o.setAttrib(Tt,h1,$n),Gr.throttle(Tt);return}}xi()},co=()=>{Bn(H6,Be=>{Be.elm&&(o.unbind(Be.elm),delete Be.elm)})},no=()=>{try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return t.on("init",()=>{no(),t.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",Zt),t.on("keyup compositionend",Be=>{f&&f.nodeName==="TABLE"&&Zt(Be)}),t.on("hide blur",xi),t.on("contextmenu longpress",Ae,!0)}),t.on("remove",co),{isResizable:Oe,showResizeRect:cs,hideResizeRect:xi,updateResizeRect:Zt,destroy:()=>{Gr.cancel(),f=b=_=null}}},z6=(e,t,o)=>{const r=sd(Y.fromDom(o));return I0(r.dom,e,t).map(c=>{const u=o.createRange();return u.setStart(c.start.dom,c.soffset),u.setEnd(c.finish.dom,c.foffset),u}).getOrUndefined()},Vf=(e,t)=>de(e)&&de(t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,m9=(e,t,o)=>{let r=e;for(;r&&r!==t;){if(o(r))return r;r=r.parentNode}return null},pA=(e,t,o)=>m9(e,t,o)!==null,V6=(e,t,o)=>pA(e,t,r=>r.nodeName===o),U6=(e,t)=>Zc(e)&&!pA(e,t,N),bA=(e,t,o)=>{const r=t.parentNode;if(r){const c=new _s(t,e.getParent(r,e.isBlock)||e.getRoot());let u;for(;u=c[o?"prev":"next"]();)if(ds(u))return!0}return!1},vA=(e,t)=>{var o;return((o=e.previousSibling)==null?void 0:o.nodeName)===t},_J=(e,t)=>{let o=t;for(;o&&o!==e;){if(ts(o))return!0;o=o.parentNode}return!1},yA=(e,t,o,r,c)=>{const u=e.getRoot(),f=e.schema.getNonEmptyElements(),b=c.parentNode;let v,w;if(!b)return B.none();const _=e.getParent(b,e.isBlock)||u;if(r&&ds(c)&&t&&e.isEmpty(_))return B.some(ke(b,e.nodeIndex(c)));const D=new _s(c,_);for(;w=D[r?"prev":"next"]();){if(e.getContentEditableParent(w)==="false"||U6(w,u))return B.none();if(Ye(w)&&w.data.length>0)return V6(w,u,"A")?B.none():B.some(ke(w,r?w.data.length:0));if(e.isBlock(w)||f[w.nodeName.toLowerCase()])return B.none();v=w}return Tn(v)?B.none():o&&v?B.some(ke(v,0)):B.none()},f9=(e,t,o,r)=>{const c=e.getRoot();let u,f=!1,b=o?r.startContainer:r.endContainer,v=o?r.startOffset:r.endOffset;const w=it(b)&&v===b.childNodes.length,_=e.schema.getNonEmptyElements();let D=o;if(Zc(b))return B.none();if(it(b)&&v>b.childNodes.length-1&&(D=!1),dd(b)&&(b=c,v=0),b===c){if(D&&(u=b.childNodes[v>0?v-1:0],u&&(Zc(u)||_[u.nodeName]||ja(u))))return B.none();if(b.hasChildNodes()){if(v=Math.min(!D&&v>0?v-1:v,b.childNodes.length-1),b=b.childNodes[v],v=Ye(b)&&w?b.data.length:0,!t&&b===c.lastChild&&ja(b)||_J(c,b)||Zc(b)||yp(b))return B.none();if(b.hasChildNodes()&&!ja(b)){u=b;const M=new _s(b,c);do{if(ts(u)||Zc(u)){f=!1;break}if(Ye(u)&&u.data.length>0){v=D?0:u.data.length,b=u,f=!0;break}if(_[u.nodeName.toLowerCase()]&&!iy(u)){v=e.nodeIndex(u),b=u.parentNode,D||v++,f=!0;break}}while(u=D?M.next():M.prev())}}}return t&&(Ye(b)&&v===0&&yA(e,w,t,!0,b).each(M=>{b=M.container(),v=M.offset(),f=!0}),it(b)&&(u=b.childNodes[v],u||(u=b.childNodes[v-1]),u&&ds(u)&&!vA(u,"A")&&!bA(e,u,!1)&&!bA(e,u,!0)&&yA(e,w,t,!0,u).each(M=>{b=M.container(),v=M.offset(),f=!0}))),D&&!t&&Ye(b)&&v===b.data.length&&yA(e,w,t,!1,b).each(M=>{b=M.container(),v=M.offset(),f=!0}),f&&b?B.some(ke(b,v)):B.none()},c4=(e,t)=>{const o=t.collapsed,r=t.cloneRange(),c=ke.fromRangeStart(t);return f9(e,o,!0,r).each(u=>{(!o||!ke.isAbove(c,u))&&r.setStart(u.container(),u.offset())}),o||f9(e,o,!1,r).each(u=>{r.setEnd(u.container(),u.offset())}),o&&r.collapse(!0),Vf(t,r)?B.none():B.some(r)},i4=(e,t)=>e.splitText(t),gv=e=>{let t=e.startContainer,o=e.startOffset,r=e.endContainer,c=e.endOffset;if(t===r&&Ye(t)){if(o>0&&o<t.data.length)if(r=i4(t,o),t=r.previousSibling,c>o){c=c-o;const u=i4(r,c).previousSibling;t=r=u,c=u.data.length,o=0}else c=0}else if(Ye(t)&&o>0&&o<t.data.length&&(t=i4(t,o),o=0),Ye(r)&&c>0&&c<r.data.length){const u=i4(r,c).previousSibling;r=u,c=u.data.length}return{startContainer:t,startOffset:o,endContainer:r,endOffset:c}},Rd=e=>({walk:(u,f)=>Ou(e,u,f),split:gv,expand:(u,f={type:"word"})=>{if(f.type==="word"){const b=$m(e,u,[{inline:"span"}],{includeTrailingSpace:!1,expandToBlock:!1}),v=e.createRng();return v.setStart(b.startContainer,b.startOffset),v.setEnd(b.endContainer,b.endOffset),v}return u},normalize:u=>c4(e,u).fold($e,f=>(u.setStart(f.startContainer,f.startOffset),u.setEnd(f.endContainer,f.endOffset),!0))});Rd.compareRanges=Vf,Rd.getCaretRangeFromPoint=z6,Rd.getSelectedNode=gr,Rd.getNode=Em;const g9=(e,t)=>e.view(t).fold(qe([]),r=>{const c=e.owner(r),u=g9(e,c);return[r].concat(u)}),AJ=(e,t)=>{const o=t.owner(e);return g9(t,o)};var DJ=Object.freeze({__proto__:null,view:e=>{var o;return(e.dom===document?B.none():B.from((o=e.dom.defaultView)==null?void 0:o.frameElement)).map(Y.fromDom)},owner:e=>Cl(e)});const h9=e=>{const t=E0(),o=K2(t),r=AJ(e,DJ),c=mp(e),u=xn(r,(f,b)=>{const v=mp(b);return{left:f.left+v.left,top:f.top+v.top}},{left:0,top:0});return Tl(u.left+c.left+o.left,u.top+c.top+o.top)},l4=e=>An(e)==="textarea",p9=(e,t)=>e.dispatch("ScrollIntoView",t).isDefaultPrevented(),Z6=(e,t)=>{e.dispatch("AfterScrollIntoView",t)},RJ=(e,t)=>{const o=ks(e);if(o.length===0||l4(e))return{element:e,offset:t};if(t<o.length&&!l4(o[t]))return{element:o[t],offset:0};{const r=o[o.length-1];return l4(r)?{element:e,offset:t}:An(r)==="img"?{element:r,offset:1}:fo(r)?{element:r,offset:ya(r).length}:{element:r,offset:ks(r).length}}},W6=(e,t)=>{const o=dp(e),r=p3(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:t}},j6=(e,t)=>{const o=RJ(e,t),r=Y.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+fr+"</span>");return Qr(o.element,r),W6(r,()=>Zo(r))},b9=e=>W6(Y.fromDom(e),yt),G6=(e,t,o,r)=>{y9(e,(c,u)=>v9(e,t,o,r),o)},q6=(e,t,o,r,c)=>{const u={elm:r.element.dom,alignToTop:c};if(p9(e,u))return;const f=K2(t).top;o(e,t,f,r,c),Z6(e,u)},v9=(e,t,o,r)=>{const c=Y.fromDom(e.getBody()),u=Y.fromDom(e.getDoc());q2(c);const f=j6(Y.fromDom(o.startContainer),o.startOffset);q6(e,u,t,f,r),f.cleanup()},K6=(e,t,o,r)=>{const c=Y.fromDom(e.getDoc());q6(e,c,o,b9(t),r)},y9=(e,t,o)=>{const r=o.startContainer,c=o.startOffset,u=o.endContainer,f=o.endOffset;t(Y.fromDom(r),Y.fromDom(u));const b=e.dom.createRng();b.setStart(r,c),b.setEnd(u,f),e.selection.setRng(o)},CA=(e,t,o,r,c)=>{const u=t.pos,f=30;if(r)jw(u.left,Math.max(0,u.top-f),c);else{const b=u.top-o+t.height+f;jw(-e.getBody().getBoundingClientRect().left,b,c)}},Y6=(e,t,o,r,c,u)=>{const f=r+o,b=c.pos.top,v=c.bottom,w=v-b>=r;b<o?CA(e,c,r,u!==!1,t):b>f?CA(e,c,r,w?u!==!1:u===!0,t):v>f&&!w&&CA(e,c,r,u===!0,t)},X6=(e,t,o,r,c)=>{const u=sd(t).dom.innerHeight;Y6(e,t,o,u,r,c)},J6=(e,t,o,r,c)=>{const u=sd(t).dom.innerHeight;Y6(e,t,o,u,r,c);const f=h9(r.element),b=bc(window);f.top<b.y?Li(r.element,c!==!1):f.top>b.bottom&&Li(r.element,c===!0)},C9=(e,t,o)=>G6(e,X6,t,o),S9=(e,t,o)=>K6(e,t,X6,o),w9=(e,t,o)=>G6(e,J6,t,o),x9=(e,t,o)=>K6(e,t,J6,o),St=(e,t,o)=>{(e.inline?S9:x9)(e,t,o)},Qi=(e,t,o)=>{(e.inline?C9:w9)(e,t,o)},E9=(e,t)=>t.collapsed?e.isEditable(t.startContainer):e.isEditable(t.startContainer)&&e.isEditable(t.endContainer),Q6=(e,t,o,r,c)=>{const u=o?t.startContainer:t.endContainer,f=o?t.startOffset:t.endOffset;return B.from(u).map(Y.fromDom).map(b=>!r||!t.collapsed?Bi(b,c(b,f)).getOr(b):b).bind(b=>Ts(b)?B.some(b):Lc(b).filter(Ts)).map(b=>b.dom).getOr(e)},u4=(e,t,o=!1)=>Q6(e,t,!0,o,(r,c)=>Math.min(rf(r),c)),SA=(e,t,o=!1)=>Q6(e,t,!1,o,(r,c)=>c>0?c-1:c),wA=(e,t)=>{const o=e;for(;e&&Ye(e)&&e.length===0;)e=t?e.nextSibling:e.previousSibling;return e||o},xA=(e,t)=>{if(!t)return e;let o=t.startContainer,r=t.endContainer;const c=t.startOffset,u=t.endOffset;let f=t.commonAncestorContainer;t.collapsed||(o===r&&u-c<2&&o.hasChildNodes()&&(f=o.childNodes[c]),Ye(o)&&Ye(r)&&(o.length===c?o=wA(o.nextSibling,!0):o=o.parentNode,u===0?r=wA(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(f=o)));const b=Ye(f)?f.parentNode:f;return Wa(b)?b:e},T9=(e,t,o,r)=>{const c=[],u=e.getRoot(),f=e.getParent(o||u4(u,t,t.collapsed),e.isBlock),b=e.getParent(r||SA(u,t,t.collapsed),e.isBlock);if(f&&f!==u&&c.push(f),f&&b&&f!==b){let v;const w=new _s(f,u);for(;(v=w.next())&&v!==b;)e.isBlock(v)&&c.push(v)}return b&&f!==b&&b!==u&&c.push(b),c},eN=(e,t,o)=>B.from(t).bind(r=>B.from(r.parentNode).map(c=>{const u=e.nodeIndex(r),f=e.createRng();return f.setStart(c,u),f.setEnd(c,u+1),o&&(GE(e,f,r,!0),GE(e,f,r,!1)),f})),EA=(e,t)=>Ue(t,o=>{const r=e.dispatch("GetSelectionRange",{range:o});return r.range!==o?r.range:o}),k9={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},d4=(e,t,o)=>{const r=o?"lastChild":"firstChild",c=o?"prev":"next";if(e[r])return e[r];if(e!==t){let u=e[c];if(u)return u;for(let f=e.parent;f&&f!==t;f=f.parent)if(u=f[c],u)return u}},_9=e=>{const t=e.value??"";if(!Pg(t))return!1;const o=e.parent;return!(o&&(o.name!=="span"||o.attr("style"))&&/^[ ]+$/.test(t))},tN=e=>{const t=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class Zr{constructor(t,o){Ze(this,"name");Ze(this,"type");Ze(this,"attributes");Ze(this,"value");Ze(this,"parent");Ze(this,"firstChild");Ze(this,"lastChild");Ze(this,"next");Ze(this,"prev");Ze(this,"raw");this.name=t,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}static create(t,o){const r=new Zr(t,k9[t]||1);return o&&Bn(o,(c,u)=>{r.attr(u,c)}),r}replace(t){const o=this;return t.parent&&t.remove(),o.insert(t,o),o.remove(),o}attr(t,o){const r=this;if(!U(t))return de(t)&&Bn(t,(u,f)=>{r.attr(f,u)}),r;const c=r.attributes;if(c){if(o!==void 0){if(o===null){if(t in c.map){delete c.map[t];let u=c.length;for(;u--;)if(c[u].name===t)return c.splice(u,1),r}return r}if(t in c.map){let u=c.length;for(;u--;)if(c[u].name===t){c[u].value=o;break}}else c.push({name:t,value:o});return c.map[t]=o,r}return c.map[t]}}clone(){const t=this,o=new Zr(t.name,t.type),r=t.attributes;if(r){const c=[];c.map={};for(let u=0,f=r.length;u<f;u++){const b=r[u];b.name!=="id"&&(c[c.length]={name:b.name,value:b.value},c.map[b.name]=b.value)}o.attributes=c}return o.value=t.value,o}wrap(t){const o=this;return o.parent&&(o.parent.insert(t,o),t.append(o)),o}unwrap(){const t=this;for(let o=t.firstChild;o;){const r=o.next;t.insert(o,t,!0),o=r}t.remove()}remove(){const t=this,o=t.parent,r=t.next,c=t.prev;return o&&(o.firstChild===t?(o.firstChild=r,r&&(r.prev=null)):c&&(c.next=r),o.lastChild===t?(o.lastChild=c,c&&(c.next=null)):r&&(r.prev=c),t.parent=t.next=t.prev=null),t}append(t){const o=this;t.parent&&t.remove();const r=o.lastChild;return r?(r.next=t,t.prev=r,o.lastChild=t):o.lastChild=o.firstChild=t,t.parent=o,t}insert(t,o,r){t.parent&&t.remove();const c=o.parent||this;return r?(o===c.firstChild?c.firstChild=t:o.prev&&(o.prev.next=t),t.prev=o.prev,t.next=o,o.prev=t):(o===c.lastChild?c.lastChild=t:o.next&&(o.next.prev=t),t.next=o.next,t.prev=o,o.next=t),t.parent=c,t}getAll(t){const o=this,r=[];for(let c=o.firstChild;c;c=d4(c,o))c.name===t&&r.push(c);return r}children(){const t=this,o=[];for(let r=t.firstChild;r;r=r.next)o.push(r);return o}empty(){const t=this;if(t.firstChild){const o=[];for(let c=t.firstChild;c;c=d4(c,t))o.push(c);let r=o.length;for(;r--;){const c=o[r];c.parent=c.firstChild=c.lastChild=c.next=c.prev=null}}return t.firstChild=t.lastChild=null,t}isEmpty(t,o={},r){const c=this;let u=c.firstChild;if(tN(c))return!1;if(u)do{if(u.type===1){if(u.attr("data-mce-bogus"))continue;if(t[u.name]||tN(u))return!1}if(u.type===8||u.type===3&&!_9(u)||u.type===3&&u.parent&&o[u.parent.name]&&Pg(u.value??"")||r&&r(u))return!1}while(u=d4(u,c));return!0}walk(t){return d4(this,null,t)}}const A9=Ke.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),nN=e=>U(e.nodeValue)&&e.nodeValue.includes(fr),oN=e=>`${e.length===0?"":`${Ue(e,t=>`[${t}]`).join(",")},`}[data-mce-bogus="all"]`,O9=(e,t)=>t.querySelectorAll(oN(e)),sN=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,t=>nN(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),TA=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,t=>{if(nN(t)){const o=t.parentNode;return o&&Sn(A9,o.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),m4=e=>sN(e).nextNode()!==null,D9=e=>TA(e).nextNode()!==null,R9=(e,t)=>t.querySelector(oN(e))!==null,M9=(e,t)=>{ne(O9(e,t),o=>{const r=Y.fromDom(o);es(r,"data-mce-bogus")==="all"?Zo(r):ne(e,c=>{is(r,c)&&sr(r,c)})})},rN=e=>{let t=e.nextNode();for(;t!==null;)t.nodeValue=null,t=e.nextNode()},N9=T(rN,sN),B9=T(rN,TA),aN=(e,t)=>{const o=[{condition:ze(R9,t),action:ze(M9,t)},{condition:m4,action:N9},{condition:D9,action:B9}];let r=e,c=!1;return ne(o,({condition:u,action:f})=>{u(r)&&(c||(r=e.cloneNode(!0),c=!0),f(r))}),r},cN=e=>{const t=Fr(e,"[data-mce-bogus]");ne(t,o=>{es(o,"data-mce-bogus")==="all"?Zo(o):Wi(o)?(Qr(o,Y.fromText(of)),Zo(o)):li(o)})},iN=e=>{const t=Fr(e,"input");ne(t,o=>{sr(o,"name")})},P9=(e,t)=>{const o=Ys(e),r=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return t.replace(r,"")},$9=(e,t)=>{const o=e.getDoc(),r=Br(Y.fromDom(e.getBody())),c=Y.fromTag("div",o);hs(c,"data-mce-bogus","all"),ui(c,{position:"fixed",left:"-9999999px",top:"0"}),ad(c,t.innerHTML),cN(c),iN(c);const u=zw(r);Qn(u,c);const f=Xa(c.dom.innerText);return Zo(c),f},I9=(e,t,o)=>{let r;return t.format==="raw"?r=Ke.trim(Xa(aN(o,e.serializer.getTempAttrs()).innerHTML)):t.format==="text"?r=$9(e,o):t.format==="tree"?r=e.serializer.serialize(o,t):r=P9(e,e.serializer.serialize(o,t)),t.format!=="text"&&!lb(Y.fromDom(o))&&U(r)?Ke.trim(r):r},L9=(e,t)=>B.from(e.getBody()).fold(qe(t.format==="tree"?new Zr("body",11):""),o=>I9(e,t,o)),lN=Ke.makeMap,kA=e=>{const t=[];e=e||{};const o=e.indent,r=lN(e.indent_before||""),c=lN(e.indent_after||""),u=Sc.getEncodeFunc(e.entity_encoding||"raw",e.entities),f=e.element_format!=="xhtml";return{start:(b,v,w)=>{if(o&&r[b]&&t.length>0){const _=t[t.length-1];_.length>0&&_!==`
`&&t.push(`
`)}if(t.push("<",b),v)for(let _=0,D=v.length;_<D;_++){const M=v[_];t.push(" ",M.name,'="',u(M.value,!0),'"')}if(!w||f?t[t.length]=">":t[t.length]=" />",w&&o&&c[b]&&t.length>0){const _=t[t.length-1];_.length>0&&_!==`
`&&t.push(`
`)}},end:b=>{let v;t.push("</",b,">"),o&&c[b]&&t.length>0&&(v=t[t.length-1],v.length>0&&v!==`
`&&t.push(`
`))},text:(b,v)=>{b.length>0&&(t[t.length]=v?b:u(b))},cdata:b=>{t.push("<![CDATA[",b,"]]>")},comment:b=>{t.push("<!--",b,"-->")},pi:(b,v)=>{v?t.push("<?",b," ",u(v),"?>"):t.push("<?",b,"?>"),o&&t.push(`
`)},doctype:b=>{t.push("<!DOCTYPE",b,">",o?`
`:"")},reset:()=>{t.length=0},getContent:()=>t.join("").replace(/\n$/,"")}},wh=(e={},t=Hr())=>{const o=kA(e);return e.validate="validate"in e?e.validate:!0,{serialize:c=>{const u=e.validate,f={3:v=>{o.text(v.value??"",v.raw)},8:v=>{o.comment(v.value??"")},7:v=>{o.pi(v.name,v.value)},10:v=>{o.doctype(v.value??"")},4:v=>{o.cdata(v.value??"")},11:v=>{let w=v;if(w=w.firstChild)do b(w);while(w=w.next)}};o.reset();const b=v=>{var _;const w=f[v.type];if(w)w(v);else{const D=v.name,M=D in t.getVoidElements();let L=v.attributes;if(u&&L&&L.length>1){const W=[];W.map={};const V=t.getElementRule(v.name);if(V){for(let q=0,ae=V.attributesOrder.length;q<ae;q++){const ce=V.attributesOrder[q];if(ce in L.map){const me=L.map[ce];W.map[ce]=me,W.push({name:ce,value:me})}}for(let q=0,ae=L.length;q<ae;q++){const ce=L[q].name;if(!(ce in W.map)){const me=L.map[ce];W.map[ce]=me,W.push({name:ce,value:me})}}L=W}}if(o.start(D,L,M),mf(D))U(v.value)&&o.text(v.value,!0),o.end(D);else if(!M){let W=v.firstChild;if(W){(D==="pre"||D==="textarea")&&W.type===3&&((_=W.value)==null?void 0:_[0])===`
`&&o.text(`
`,!0);do b(W);while(W=W.next)}o.end(D)}}};return c.type===1&&!e.inner?b(c):c.type===3?f[3](c):f[11](c),o.getContent()}}},uN=new Set;ne(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{uN.add(t)});const QC=new Set;ne(["background-color"],t=>{QC.add(t)});const xh=["font","text-decoration","text-emphasis"],f4=(e,t)=>e.parseStyle(e.getAttrib(t,"style")),hv=(e,t)=>It(f4(e,t)),F9=e=>uN.has(e),H9=e=>QC.has(e),dN=(e,t)=>Ge(hv(e,t),o=>F9(o)),mN=(e,t)=>dN(e,t)&&Ge(hv(e,t),o=>H9(o)),z9=e=>ge(e,t=>Ge(xh,o=>pn(t,o))),V9=(e,t,o)=>{const r=hv(e,t),c=hv(e,o),u=f=>{const b=e.getStyle(t,f)??"",v=e.getStyle(o,f)??"";return xs(b)&&xs(v)&&b!==v};return Ge(r,f=>{const b=v=>Ge(v,w=>w===f);if(!b(c)&&b(xh)){const v=z9(c);return Ge(v,u)}else return u(f)})},_A=(e,t,o)=>B.from(o.container()).filter(Ye).exists(r=>{const c=e?0:-1;return t(r.data.charAt(o.offset()+c))}),AA=ze(_A,!0,Or),g4=ze(_A,!1,Or),U9=e=>{const t=e.container();return Ye(t)&&(t.data.length===0||Bp(t.data)&&dv.isBookmarkNode(t.parentNode))},Eh=(e,t)=>o=>BC(e?0:-1,o).filter(t).isSome(),fN=e=>fi(e)&&Ns(Y.fromDom(e),"display")==="block",OA=e=>ts(e)&&!B3(e),DA=Eh(!0,fN),gN=Eh(!1,fN),eS=Eh(!0,gi),tS=Eh(!1,gi),nS=Eh(!0,ja),RA=Eh(!1,ja),Uf=Eh(!0,OA),Im=Eh(!1,OA),hN=e=>e.slice(0,-1),Z9=(e,t,o)=>ri(t,e)?hN(ai(e,r=>o(r)||Ln(r,t))):[],pN=(e,t)=>Z9(e,t,$e),Mu=(e,t)=>[e].concat(pN(e,t)),h4=(e,t,o)=>yi(e,t,o,U9),bN=e=>t=>e.isBlock(An(t)),MA=(e,t,o)=>To(Mu(Y.fromDom(t.container()),e),bN(o)),NA=(e,t,o,r)=>h4(e,t.dom,o).forall(c=>MA(t,o,r).fold(()=>!ku(c,o,t.dom),u=>!ku(c,o,t.dom)&&ri(u,Y.fromDom(c.container())))),BA=(e,t,o,r)=>MA(t,o,r).fold(()=>h4(e,t.dom,o).forall(c=>!ku(c,o,t.dom)),c=>h4(e,c.dom,o).isNone()),p4=ze(BA,!1),PA=ze(BA,!0),vN=ze(NA,!1),yN=ze(NA,!0),CN=e=>m1(e).exists(Wi),b4=(e,t,o,r)=>{const c=ge(Mu(Y.fromDom(o.container()),t),f=>r.isBlock(An(f))),u=Vs(c).getOr(t);return jc(e,u.dom,o).filter(CN)},$A=(e,t,o)=>m1(t).exists(Wi)||b4(!0,e,t,o).isSome(),v4=(e,t,o)=>PC(t).exists(Wi)||b4(!1,e,t,o).isSome(),SN=ze(b4,!1),W9=ze(b4,!0),wN=e=>ke.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),xN=(e,t,o)=>{const r=ge(Mu(Y.fromDom(t.container()),e),c=>o.isBlock(An(c)));return Vs(r).getOr(e)},EN=(e,t,o)=>wN(t)?g4(t):g4(t)||p(xN(e,t,o).dom,t).exists(g4),TN=(e,t,o)=>wN(t)?AA(t):AA(t)||m(xN(e,t,o).dom,t).exists(AA),j9=e=>Ce(["pre","pre-wrap"],e),y4=e=>m1(e).bind(t=>Ro(t,Ts)).exists(t=>j9(Ns(t,"white-space"))),MJ=(e,t)=>p(e.dom,t).isNone(),NJ=(e,t)=>m(e.dom,t).isNone(),G9=(e,t,o)=>MJ(e,t)||NJ(e,t)||p4(e,t,o)||PA(e,t,o)||v4(e,t,o)||$A(e,t,o),BJ=e=>de(e)&&ts(e)&&RC(e),kN=(e,t)=>o=>BJ(new _s(o,e)[t]()),La=(e,t)=>{const o=m(e.dom,t).getOr(t),r=kN(e.dom,"next");return t.isAtEnd()&&(r(t.container())||r(o.container()))},q9=(e,t)=>{const o=p(e.dom,t).getOr(t),r=kN(e.dom,"prev");return t.isAtStart()&&(r(t.container())||r(o.container()))},K9=(e,t,o)=>y4(t)?!1:G9(e,t,o)||EN(e,t,o)||TN(e,t,o),oS=(e,t,o)=>y4(t)?!1:p4(e,t,o)||vN(e,t,o)||v4(e,t,o)||EN(e,t,o)||q9(e,t),Y9=e=>{const t=e.container(),o=e.offset();return Ye(t)&&o<t.data.length?ke(t,o+1):e},Fa=(e,t,o)=>y4(t)?!1:PA(e,t,o)||yN(e,t,o)||$A(e,t,o)||TN(e,t,o)||La(e,t),_N=(e,t,o)=>oS(e,t,o)||Fa(e,Y9(t),o),AN=(e,t)=>Ia(e.charAt(t)),X9=(e,t)=>Or(e.charAt(t)),J9=e=>{const t=e.container();return Ye(t)&&Us(t.data,Zs)},Q9=e=>{const t=e.split("");return Ue(t,(o,r)=>Ia(o)&&r>0&&r<t.length-1&&_d(t[r-1])&&_d(t[r+1])?" ":o).join("")},ez=(e,t,o,r)=>{const c=t.data,u=ke(t,0);return!o&&AN(c,0)&&!_N(e,u,r)?(t.data=" "+c.slice(1),!0):o&&X9(c,0)&&oS(e,u,r)?(t.data=Zs+c.slice(1),!0):!1},tz=e=>{const t=e.data,o=Q9(t);return o!==t?(e.data=o,!0):!1},qc=(e,t,o,r)=>{const c=t.data,u=ke(t,c.length-1);return!o&&AN(c,c.length-1)&&!_N(e,u,r)?(t.data=c.slice(0,-1)+" ",!0):o&&X9(c,c.length-1)&&Fa(e,u,r)?(t.data=c.slice(0,-1)+Zs,!0):!1},ON=(e,t,o)=>{const r=t.container();if(!Ye(r))return B.none();if(J9(t)){const c=ez(e,r,!1,o)||tz(r)||qc(e,r,!1,o);return ni(c,t)}else if(_N(e,t,o)){const c=ez(e,r,!0,o)||qc(e,r,!0,o);return ni(c,t)}else return B.none()},DN=e=>{const t=Y.fromDom(e.getBody());e.selection.isCollapsed()&&ON(t,ke.fromRangeStart(e.selection.getRng()),e.schema).each(o=>{e.selection.setRng(o.toRange())})},RN=(e,t,o,r)=>{if(o===0)return;const c=Y.fromDom(e),u=fu(c,w=>r.isBlock(An(w))).getOr(c),f=e.data.slice(t,t+o),b=t+o>=e.data.length&&Fa(u,ke(e,e.data.length),r),v=t===0&&oS(u,ke(e,0),r);e.replaceData(t,o,F0(f,4,v,b))},C4=(e,t,o)=>{const r=e.data.slice(t),c=r.length-op(r).length;RN(e,t,c,o)},S4=(e,t,o)=>{const r=e.data.slice(0,t),c=r.length-hg(r).length;RN(e,t-c,c,o)},w4=(e,t,o,r,c=!0)=>{const u=hg(e.data).length,f=c?e:t,b=c?t:e;return c?f.appendData(b.data):f.insertData(0,b.data),Zo(Y.fromDom(b)),r&&C4(f,u,o),f},nz=(e,t)=>{const o=e.container(),r=e.offset();return!ke.isTextPosition(e)&&o===t.parentNode&&r>ke.before(t).offset()},oz=(e,t)=>nz(t,e)?ke(t.container(),t.offset()-1):t,sz=e=>Ye(e)?ke(e,0):ke.before(e),rz=e=>Ye(e)?ke(e,e.data.length):ke.after(e),IA=e=>ss(e.previousSibling)?B.some(rz(e.previousSibling)):e.previousSibling?E(e.previousSibling):B.none(),MN=e=>ss(e.nextSibling)?B.some(sz(e.nextSibling)):e.nextSibling?y(e.nextSibling):B.none(),NN=(e,t)=>B.from(t.previousSibling?t.previousSibling:t.parentNode).bind(o=>p(e,ke.before(o))).orThunk(()=>m(e,ke.after(t))),az=(e,t)=>m(e,ke.after(t)).orThunk(()=>p(e,ke.before(t))),PJ=(e,t)=>IA(t).orThunk(()=>MN(t)).orThunk(()=>NN(e,t)),cz=(e,t)=>MN(t).orThunk(()=>IA(t)).orThunk(()=>az(e,t)),iz=(e,t,o)=>e?cz(t,o):PJ(t,o),$J=(e,t,o)=>iz(e,t,o).map(ze(oz,o)),BN=(e,t,o)=>{o.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),t)})},Jn=e=>t=>t.dom===e,sS=(e,t)=>t&&Sn(e.schema.getBlockElements(),An(t)),Zf=(e,t,o)=>{if(As(e,t)){const r=Y.fromHtml('<br data-mce-bogus="1">');return o?ne(ks(t),c=>{rA(c)||Zo(c)}):Ii(t),Qn(t,r),B.some(ke.before(r.dom))}else return B.none()},p1=(e,t,o,r)=>{const c=ci(e).filter(fo),u=lu(e).filter(fo);return Zo(e),Xu(c,u,t,(f,b,v)=>{const w=f.dom,_=b.dom,D=w.data.length;return w4(w,_,o,r),v.container()===_?ke(w,D):v}).orThunk(()=>(r&&(c.each(f=>S4(f.dom,f.dom.length,o)),u.each(f=>C4(f.dom,0,o))),t))},x4=(e,t)=>Sn(e.schema.getTextInlineElements(),An(t)),Lm=(e,t,o,r=!0,c=!1)=>{const u=$J(t,e.getBody(),o.dom),f=fu(o,ze(sS,e),Jn(e.getBody())),b=p1(o,u,e.schema,x4(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):f.bind(v=>Zf(e.schema,v,c)).fold(()=>{r&&BN(e,t,b)},v=>{r&&BN(e,t,B.some(v))})},LA=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,PN=e=>LA.test(e),b1=(e,t)=>Ic(Y.fromDom(t),T_(e))&&!ps(e.schema,t)&&e.dom.isEditable(t),FA=e=>Un.DOM.getStyle(e,"direction",!0)==="rtl"||PN(e.textContent??""),$N=(e,t,o)=>ge(Un.DOM.getParents(o.container(),"*",t),e),Th=(e,t,o)=>{const r=$N(e,t,o);return B.from(r[r.length-1])},lz=(e,t,o)=>{const r=Rm(t,e),c=Rm(o,e);return de(r)&&r===c},uz=e=>yd(e)||xf(e),Fl=(e,t)=>{const o=t.container(),r=t.offset();return e?Rl(o)?Ye(o.nextSibling)?ke(o.nextSibling,0):ke.after(o):yd(t)?ke(o,r+1):t:Rl(o)?Ye(o.previousSibling)?ke(o.previousSibling,o.previousSibling.data.length):ke.before(o):xf(t)?ke(o,r-1):t},IN=ze(Fl,!0),LN=ze(Fl,!1),HA=(e,t)=>{const o=r=>r.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(t),e.off("beforeinput input",o)},FN=e=>{e.execCommand("delete")},zA=e=>HA(e,"Delete"),dz=e=>HA(e,"ForwardDelete"),IJ=e=>t=>$o(Lc(t),e,Ln),mz=e=>Ca(e)||Na(e),VA=(e,t)=>ri(e,t)?Ro(t,mz,IJ(e)):B.none(),HN=(e,t=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!t})},zN=(e,t,o)=>tr(y(o),E(o),(r,c)=>{const u=Fl(!0,r),f=Fl(!1,c),b=Fl(!1,t);return e?m(o,b).exists(v=>v.isEqual(f)&&t.isEqual(u)):p(o,b).exists(v=>v.isEqual(u)&&t.isEqual(f))}).getOr(!0),VN=e=>(vl(e)?ci(e):or(e)).bind(VN).orThunk(()=>B.some(e)),fz=(e,t,o,r=!0)=>{t.deleteContents();const c=VN(o).getOr(o),u=Y.fromDom(e.dom.getParent(c.dom,e.dom.isBlock)??o.dom);if(u.dom===e.getBody()?HN(e,r):As(e.schema,u,{checkRootAsContent:!1})&&(Cm(u),r&&e.selection.setCursorLocation(u.dom,0)),!Ln(o,u)){const f=$o(Lc(u),o)?[]:go(u);ne(f.concat(ks(o)),b=>{!Ln(b,u)&&!ri(b,u)&&As(e.schema,b)&&Zo(b)})}},gz=e=>t=>Ln(e,t),ec=e=>Fr(e,"td,th"),hz=(e,t)=>Qa(Y.fromDom(e),t),pz=e=>tr(e.startTable,e.endTable,(t,o)=>{const r=Mg(t,u=>Ln(u,o)),c=Mg(o,u=>Ln(u,t));return!r&&!c?e:{...e,startTable:r?B.none():e.startTable,endTable:c?B.none():e.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(e),UN=e=>pz(e),LJ=(e,t)=>{const o=hz(e.startContainer,t),r=hz(e.endContainer,t),c=o.isSome(),u=r.isSome(),f=tr(o,r,Ln).getOr(!1);return UN({startTable:o,endTable:r,isStartInTable:c,isEndInTable:u,isSameTable:f,isMultiTable:!f&&c&&u})},UA=(e,t)=>({start:e,end:t}),bz=(e,t,o)=>({rng:e,table:t,cells:o}),rS=ml.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),pv=(e,t)=>ea(Y.fromDom(e),"td,th",t),vz=e=>!Ln(e.start,e.end),ZN=(e,t)=>Qa(e.start,t).bind(o=>Qa(e.end,t).bind(r=>ni(Ln(o,r),o))),yz=(e,t)=>!vz(e)&&ZN(e,t).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),Vo=(e,t)=>{const o=pv(e.startContainer,t),r=pv(e.endContainer,t);return tr(o,r,UA)},Cz=e=>t=>Qa(t,e).bind(o=>Tr(ec(o)).map(r=>UA(t,r))),Sz=e=>t=>Qa(t,e).bind(o=>Vs(ec(o)).map(r=>UA(r,t))),v1=e=>t=>ZN(t,e).map(o=>bz(t,o,ec(o))),ZA=(e,t,o,r)=>{if(o.collapsed||!e.forall(vz))return B.none();if(t.isSameTable){const c=e.bind(v1(r));return B.some({start:c,end:c})}else{const c=pv(o.startContainer,r),u=pv(o.endContainer,r),f=c.bind(Cz(r)).bind(v1(r)),b=u.bind(Sz(r)).bind(v1(r));return B.some({start:f,end:b})}},WN=(e,t)=>qu(e,o=>Ln(o,t)),WA=e=>tr(WN(e.cells,e.rng.start),WN(e.cells,e.rng.end),(t,o)=>e.cells.slice(t,o+1)),wz=(e,t,o)=>e.exists(r=>yz(r,o)&&Hf(r.start,t)),jA=(e,t)=>{const{startTable:o,endTable:r}=t,c=e.cloneRange();return o.each(u=>c.setStartAfter(u.dom)),r.each(u=>c.setEndBefore(u.dom)),c},xz=(e,t,o,r)=>ZA(e,t,o,r).bind(({start:c,end:u})=>c.or(u)).bind(c=>{const{isSameTable:u}=t,f=WA(c).getOr([]);if(u&&c.cells.length===f.length)return B.some(rS.fullTable(c.table));if(f.length>0){if(u)return B.some(rS.partialTable(f,B.none()));{const b=jA(o,t);return B.some(rS.partialTable(f,B.some({...t,rng:b})))}}else return B.none()}),FJ=(e,t,o,r)=>ZA(e,t,o,r).bind(({start:c,end:u})=>{const f=c.bind(WA).getOr([]),b=u.bind(WA).getOr([]);if(f.length>0&&b.length>0){const v=jA(o,t);return B.some(rS.multiTable(f,b,v))}else return B.none()}),HJ=(e,t)=>{const o=gz(e),r=Vo(t,o),c=LJ(t,o);return wz(r,t,o)?r.map(u=>rS.singleCellTable(t,u.start)):c.isMultiTable?FJ(r,c,t,o):xz(r,c,t,o)},jN=e=>ne(e,t=>{sr(t,"contenteditable"),Cm(t)}),Ez=(e,t)=>B.from(e.dom.getParent(t,e.dom.isBlock)).map(Y.fromDom),Tz=(e,t,o)=>{o.each(r=>{t?Zo(r):(Cm(r),e.selection.setCursorLocation(r.dom,0))})},GA=(e,t,o,r)=>{const c=o.cloneRange();r?(c.setStart(o.startContainer,o.startOffset),c.setEndAfter(t.dom.lastChild)):(c.setStartBefore(t.dom.firstChild),c.setEnd(o.endContainer,o.endOffset)),E4(e,c,t,!1).each(u=>u())},qA=e=>{const t=Rt(e),o=Y.fromDom(e.selection.getNode());Lg(o.dom)&&As(e.schema,o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),t.length>1&&Ge(t,r=>Ln(r,o))&&hs(o,"data-mce-selected","1")},GN=(e,t,o)=>B.some(()=>{const r=e.selection.getRng(),c=o.bind(({rng:u,isStartInTable:f})=>{const b=Ez(e,f?u.endContainer:u.startContainer);u.deleteContents(),Tz(e,f,b.filter(ze(As,e.schema)));const v=f?t[0]:t[t.length-1];return GA(e,v,r,f),As(e.schema,v)?B.none():B.some(f?t.slice(1):t.slice(0,-1))}).getOr(t);jN(c),qA(e)}),Pn=(e,t,o,r)=>B.some(()=>{const c=e.selection.getRng(),u=t[0],f=o[o.length-1];GA(e,u,c,!0),GA(e,f,c,!1);const b=As(e.schema,u)?t:t.slice(1),v=As(e.schema,f)?o:o.slice(0,-1);jN(b.concat(v)),r.deleteContents(),qA(e)}),E4=(e,t,o,r=!0)=>B.some(()=>{fz(e,t,o,r)}),aS=(e,t)=>B.some(()=>Lm(e,!1,t)),cS=(e,t,o)=>HJ(t,o).bind(r=>r.fold(ze(E4,e),ze(aS,e),ze(GN,e),ze(Pn,e))),iS=(e,t)=>KA(e,t),lS=(e,t,o,r)=>KN(t,r).fold(()=>cS(e,t,o),c=>iS(e,c)),qN=(e,t,o)=>{const r=Y.fromDom(e.getBody()),c=e.selection.getRng();return o.length!==0?GN(e,o,B.none()):lS(e,r,c,t)},kz=(e,t)=>To(Mu(t,e),wf),KN=(e,t)=>To(Mu(t,e),iu("caption")),zJ=(e,t,o,r,c)=>Sh(o,e.getBody(),c).bind(u=>kz(t,Y.fromDom(u.getNode())).bind(f=>Ln(f,r)?B.none():B.some(yt))),KA=(e,t)=>B.some(()=>{Cm(t),e.selection.setCursorLocation(t.dom,0)}),_z=(e,t,o,r)=>y(e.dom).bind(c=>E(e.dom).map(u=>t?o.isEqual(c)&&r.isEqual(u):o.isEqual(u)&&r.isEqual(c))).getOr(!0),VJ=(e,t)=>KA(e,t),Az=(e,t,o)=>KN(e,Y.fromDom(o.getNode())).fold(()=>B.some(yt),r=>ni(!Ln(r,t),yt)),Oz=(e,t,o,r,c)=>Sh(o,e.getBody(),c).fold(()=>B.some(yt),u=>_z(r,o,c,u)?VJ(e,r):Az(t,r,u)),UJ=(e,t,o,r)=>{const c=ke.fromRangeStart(e.selection.getRng());return kz(o,r).bind(u=>As(e.schema,u,{checkRootAsContent:!1})?KA(e,u):zJ(e,o,t,u,c))},Dz=(e,t,o,r)=>{const c=ke.fromRangeStart(e.selection.getRng());return As(e.schema,r)?KA(e,r):Oz(e,o,t,r,c)},jo=(e,t)=>e?nS(t):RA(t),ZJ=(e,t)=>{const o=ke.fromRangeStart(e.selection.getRng());return jo(t,o)||jc(t,e.getBody(),o).exists(r=>jo(t,r))},WJ=(e,t,o)=>{const r=Y.fromDom(e.getBody());return KN(r,o).fold(()=>UJ(e,t,r,o).orThunk(()=>ni(ZJ(e,t),yt)),c=>Dz(e,t,r,c))},YA=(e,t)=>{const o=Y.fromDom(e.selection.getStart(!0)),r=Rt(e);return e.selection.isCollapsed()&&r.length===0?WJ(e,t,o):qN(e,o,r)},Md=(e,t)=>{let o=t;for(;o&&o!==e;){if(vc(o)||ts(o))return o;o=o.parentNode}return null},Rz=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],Mz=Ke.each,Nd=e=>{const t=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(u,f)=>{if(u.nodeName!==f.nodeName||u.nodeType!==f.nodeType)return!1;const b=w=>{const _={};return Mz(t.getAttribs(w),D=>{const M=D.nodeName.toLowerCase();M!=="style"&&!c(M)&&(_[M]=t.getAttrib(w,M))}),_},v=(w,_)=>{for(const D in w)if(Sn(w,D)){const M=_[D];if(Je(M)||w[D]!==M)return!1;delete _[D]}for(const D in _)if(Sn(_,D))return!1;return!0};return it(u)&&it(f)&&(!v(b(u),b(f))||!v(t.parseStyle(t.getAttrib(u,"style")),t.parseStyle(t.getAttrib(f,"style"))))?!1:!vs(u)&&!vs(f)},c=u=>Ge(Rz,f=>pn(u,f))||o.has(u);return{compare:r,isAttributeInternal:c}},to=(e,t)=>{if(Ye(e))return{container:e,offset:t};const o=Rd.getNode(e,t);return Ye(o)?{container:o,offset:t>=e.childNodes.length?o.data.length:0}:o.previousSibling&&Ye(o.previousSibling)?{container:o.previousSibling,offset:o.previousSibling.data.length}:o.nextSibling&&Ye(o.nextSibling)?{container:o.nextSibling,offset:0}:{container:e,offset:t}},Dr=e=>{const t=e.cloneRange(),o=to(e.startContainer,e.startOffset);t.setStart(o.container,o.offset);const r=to(e.endContainer,e.endOffset);return t.setEnd(r.container,r.offset),t},el=Un.DOM,Nz=()=>el.create("span",{"data-mce-type":"bookmark"}),YN=(e,t,o)=>{if(it(e)){const r=o();return e.hasChildNodes()?t===e.childNodes.length?e.appendChild(r):e.insertBefore(r,e.childNodes[t]):e.appendChild(r),{container:r,offset:0}}else return{container:e,offset:t}},XN=(e,t)=>{const o=r=>{var f;let c=(f=r.parentNode)==null?void 0:f.firstChild,u=0;for(;c;){if(c===r)return u;(!it(c)||c.getAttribute("data-mce-type")!=="bookmark")&&u++,c=c.nextSibling}return-1};if(it(e)&&de(e.parentNode)){const r=e;t=o(e),e=e.parentNode,el.remove(r),!e.hasChildNodes()&&el.isBlock(e)&&e.appendChild(el.create("br"))}return{container:e,offset:t}},JN=(e,t,o,r)=>{const c=el.createRng();return c.setStart(e,t),c.setEnd(o,r),Dr(c)},Fm=(e,t=Nz)=>{const{container:o,offset:r}=YN(e.startContainer,e.startOffset,t);if(e.collapsed)return{startContainer:o,startOffset:r};{const{container:c,offset:u}=YN(e.endContainer,e.endOffset,t);return{startContainer:o,startOffset:r,endContainer:c,endOffset:u}}},Hl=e=>{const{container:t,offset:o}=XN(e.startContainer,e.startOffset);if(!Je(e.endContainer)&&!Je(e.endOffset)){const{container:r,offset:c}=XN(e.endContainer,e.endOffset);return JN(t,o,r,c)}else return JN(t,o,t,o)},XA=(e,t,o,r)=>{if(Ke.each(o.styles,(c,u)=>{e.setStyle(t,u,zf(c,r))}),o.styles){const c=e.getAttrib(t,"style");c&&e.setAttrib(t,"data-mce-style",c)}},y1=(e,t,o,r,c)=>{const u=e.dom;X(o.onformat)&&o.onformat(t,o,r,c),XA(u,t,o,r),Ke.each(o.attributes,(f,b)=>{u.setAttrib(t,b,zf(f,r))}),Ke.each(o.classes,f=>{const b=zf(f,r);u.hasClass(t,b)||u.addClass(t,b)})},Bz=e=>!Yt(e.attributes)&&!Yt(e.styles),JA=GC,QN=(e,t,o)=>{const r=e.formatter.get(o);if(r)for(let c=0;c<r.length;c++){const u=r[c];if(Au(u)&&u.inherit===!1&&e.dom.is(t,u.selector))return!0}return!1},T4=(e,t,o,r,c)=>{const u=e.dom.getRoot();if(t===u)return!1;const f=e.dom.getParent(t,b=>QN(e,b,o)?!0:b.parentNode===u||!!zl(e,b,o,r,!0));return!!zl(e,f,o,r,c)},k4=(e,t,o)=>ca(o)&&JA(t,o.inline)||Od(o)&&JA(t,o.block)?!0:Au(o)?it(t)&&e.is(t,o.selector):!1,eB=(e,t,o,r,c,u)=>{const f=o[r],b=r==="attributes";if(X(o.onmatch))return o.onmatch(t,o,r);if(f){if(m0(f)){for(let v=0;v<f.length;v++)if(b?e.getAttrib(t,f[v]):qC(e,t,f[v]))return!0}else for(const v in f)if(Sn(f,v)){const w=b?e.getAttrib(t,v):qC(e,t,v),_=zf(f[v],u),D=Le(w)||pg(w);if(D&&Le(_))continue;if(c&&D&&!o.exact||(!c||o.exact)&&!JA(w,KE(_,v)))return!1}}return!0},zl=(e,t,o,r,c)=>{const u=e.formatter.get(o),f=e.dom;if(u&&it(t))for(let b=0;b<u.length;b++){const v=u[b];if(k4(e.dom,t,v)&&eB(f,t,v,"attributes",c,r)&&eB(f,t,v,"styles",c,r)){const w=v.classes;if(w){for(let _=0;_<w.length;_++)if(!e.dom.hasClass(t,zf(w[_],r)))return}return v}}},QA=(e,t,o,r,c)=>{if(r)return T4(e,r,t,o,c);if(r=e.selection.getNode(),T4(e,r,t,o,c))return!0;const u=e.selection.getStart();return!!(u!==r&&T4(e,u,t,o,c))},eO=(e,t,o)=>{const r=[],c={},u=e.selection.getStart();return e.dom.getParent(u,f=>{for(let b=0;b<t.length;b++){const v=t[b];!c[v]&&zl(e,f,v,o)&&(c[v]=!0,r.push(v))}},e.dom.getRoot()),r},tB=(e,t)=>{const o=c=>Ln(c,Y.fromDom(e.getBody())),r=(c,u)=>zl(e,c.dom,u)?B.some(u):B.none();return B.from(e.selection.getStart(!0)).bind(c=>B0(Y.fromDom(c),u=>ki(t,f=>r(u,f)),o)).getOrNull()},tO=(e,t)=>{const o=e.formatter.get(t),r=e.dom;if(o&&e.selection.isEditable()){const c=e.selection.getStart(),u=YE(r,c);for(let f=o.length-1;f>=0;f--){const b=o[f];if(!Au(b))return!0;for(let v=u.length-1;v>=0;v--)if(r.is(u[v],b.selector))return!0}}return!1},jJ=(e,t,o)=>kn(o,(r,c)=>{const u=XE(e,c);return e.formatter.matchNode(t,c,{},u)?r.concat([c]):r},[]),wr=fr,Pz=(e,t)=>e.importNode(t,!0),$z=e=>{if(e){const t=new _s(e,e);for(let o=t.current();o;o=t.next())if(Ye(o))return o}return null},nO=e=>{const t=Y.fromTag("span");return Ir(t,{id:O,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Qn(t,Y.fromText(wr)),t},Iz=e=>{const t=$z(e);return t&&t.data.charAt(0)===wr&&t.deleteData(0,1),t},oO=(e,t,o)=>{const r=e.dom,c=e.selection;if(w6(t))Lm(e,!1,Y.fromDom(t),o,!0);else{const u=c.getRng(),f=r.getParent(t,r.isBlock),b=u.startContainer,v=u.startOffset,w=u.endContainer,_=u.endOffset,D=Iz(t);r.remove(t,!0),b===D&&v>0&&u.setStart(D,v-1),w===D&&_>0&&u.setEnd(D,_-1),f&&r.isEmpty(f)&&Cm(Y.fromDom(f)),c.setRng(u)}},sO=(e,t,o)=>{const r=e.dom,c=e.selection;if(t)oO(e,t,o);else if(t=H(e.getBody(),c.getStart()),!t)for(;t=r.get(O);)oO(e,t,o)},nB=(e,t,o)=>{var u,f;const r=e.dom,c=r.getParent(o,ze(jC,e.schema));c&&r.isEmpty(c)?(u=o.parentNode)==null||u.replaceChild(t,o):(J3(Y.fromDom(o)),r.isEmpty(o)?(f=o.parentNode)==null||f.replaceChild(t,o):r.insertAfter(t,o))},bv=(e,t)=>(e.appendChild(t),t),oB=(e,t)=>{const o=xn(e,(c,u)=>bv(c,u.cloneNode(!1)),t),r=o.ownerDocument??document;return bv(o,r.createTextNode(wr))},sB=(e,t,o,r,c,u)=>{const f=e.formatter,b=e.dom,v=ge(It(f.get()),D=>D!==r&&!Us(D,"removeformat")),w=jJ(e,o,v);if(ge(w,D=>!S6(e,D,r)).length>0){const D=o.cloneNode(!1);return b.add(t,D),f.remove(r,c,D,u),b.remove(D),B.some(D)}else return B.none()},rB=e=>Y2(e,ya(e).replace(new RegExp(`${Zs}$`)," ")),kh=(e,t)=>{const o=()=>{t!==null&&!e.dom.isEmpty(t)&&ci(Y.fromDom(t)).each(r=>{fo(r)?rB(r):fp(r,c=>fo(c)).each(c=>{fo(c)&&rB(c)})})};e.once("input",r=>{r.data&&!Or(r.data)&&(r.isComposing?e.once("compositionend",()=>{o()}):o())})},aB=(e,t,o)=>{let r;const c=e.selection,u=e.formatter.get(t);if(!u)return;const f=c.getRng();let b=f.startOffset;const w=f.startContainer.nodeValue;r=H(e.getBody(),c.getStart());const _=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(w&&b>0&&b<w.length&&_.test(w.charAt(b))&&_.test(w.charAt(b-1))){const D=c.getBookmark();f.collapse(!0);let M=$m(e.dom,f,u);M=gv(M),e.formatter.apply(t,o,M),c.moveToBookmark(D)}else{let D=r?$z(r):null;(!r||(D==null?void 0:D.data)!==wr)&&(r=Pz(e.getDoc(),nO(!0).dom),D=r.firstChild,f.insertNode(r),b=1,kh(e,r)),e.formatter.apply(t,o,r),c.setCursorLocation(D,b)}},cB=(e,t,o,r)=>{const c=e.dom,u=e.selection;let f=!1;const b=e.formatter.get(t);if(!b)return;const v=u.getRng(),w=v.startContainer,_=v.startOffset;let D=w;Ye(w)&&(_!==w.data.length&&(f=!0),D=D.parentNode);const M=[];let L;for(;D;){if(zl(e,D,t,o,r)){L=D;break}D.nextSibling&&(f=!0),M.push(D),D=D.parentNode}if(L)if(f){const W=u.getBookmark();v.collapse(!0);let V=$m(c,v,b,{includeTrailingSpace:!0});V=gv(V),e.formatter.remove(t,o,V,r),u.moveToBookmark(W)}else{const W=H(e.getBody(),L),V=de(W)?c.getParents(L.parentNode,gt,W):[],q=nO(!1).dom;nB(e,q,W??L);const ae=sB(e,q,L,t,o,r),ce=oB([...M,...ae.toArray(),...V],q);W&&oO(e,W,de(W)),u.setCursorLocation(ce,1),kh(e,q),c.isEmpty(L)&&c.remove(L)}},iB=(e,t,o)=>{const r=e.selection,c=e.getBody();sO(e,null,o),(t===8||t===46)&&r.isCollapsed()&&r.getStart().innerHTML===wr&&sO(e,H(c,r.getStart()),!0),(t===37||t===39)&&sO(e,H(c,r.getStart()),!0)},lB=e=>Ye(e)&&ga(e.data,Zs),uB=e=>{e.on("mouseup keydown",t=>{iB(e,t.keyCode,lB(e.selection.getRng().endContainer))})},dB=e=>{const t=nO(!1),o=oB(e,t.dom);return{caretContainer:t,caretPosition:ke(o,0)}},rO=(e,t)=>{const{caretContainer:o,caretPosition:r}=dB(t);return Qr(Y.fromDom(e),o),Zo(Y.fromDom(e)),r},Lz=(e,t)=>{const{caretContainer:o,caretPosition:r}=dB(t);return e.insertNode(o.dom),r},mB=(e,t)=>{if(N(t.dom))return!1;const o=e.schema.getTextInlineElements();return Sn(o,An(t))&&!N(t.dom)&&!mm(t.dom)},fB=["fontWeight","fontStyle","color","fontSize","fontFamily"],Fz=e=>At(e.styles)&&Ge(It(e.styles),t=>Ce(fB,t)),Hz=e=>To(e,t=>ca(t)&&t.inline==="span"&&Fz(t)),zz=(e,t)=>{const o=e.get(t);return Yt(o)?Hz(o):B.none()},aO=(e,t)=>p(t,ke.fromRangeStart(e)).isNone(),gB=(e,t)=>m(t,ke.fromRangeEnd(e)).exists(o=>!ds(o.getNode())||m(t,o).isSome())===!1,Vz=e=>t=>vp(t)&&e.isEditable(t),hB=(e,t)=>Ue(e.getSelectedBlocks(),(o,r)=>r===0&&t(o)?e.dom.getParent(o,vp)??o:o),cO=e=>{if(e.isCollapsed())return[];const t=e.getRng(),o=hB(e,r=>aO(t,r)&&!vp(r));if(o.length===1)return aO(t,o[0])&&gB(t,o[0])?o:[];{const r=Vs(o).filter(f=>aO(t,f)).toArray(),c=Tr(o).filter(f=>gB(t,f)).toArray(),u=o.slice(1,-1);return r.concat(u).concat(c)}},iO=e=>ge(cO(e),Vz(e.dom)),pB=e=>ge(hB(e,t=>!vp(t)),Vz(e.dom)),bB=Ke.each,lO=e=>it(e)&&!vs(e)&&!N(e)&&!mm(e),vB=(e,t)=>{for(let o=e;o;o=o[t]){if(Ye(o)&&xs(o.data))return e;if(it(o)&&!vs(o))return o}return e},yB=(e,t,o)=>{const r=Nd(e),c=Wa(t)&&e.dom.isEditable(t),u=Wa(o)&&e.dom.isEditable(o);if(c&&u){const f=vB(t,"previousSibling"),b=vB(o,"nextSibling");if(r.compare(f,b)){for(let v=f.nextSibling;v&&v!==b;){const w=v;v=v.nextSibling,f.appendChild(w)}return e.dom.remove(b),Ke.each(Ke.grep(b.childNodes),v=>{f.appendChild(v)}),f}}return o},CB=(e,t,o,r)=>{if(r&&t.merge_siblings!==!1){const c=yB(e,v6(r),r)??r;yB(e,c,v6(c,!0))}},Uz=(e,t,o)=>{if(t.clear_child_styles){const r=t.links?"*:not(a)":"*";bB(e.select(r,o),c=>{lO(c)&&e.isEditable(c)&&bB(t.styles,(u,f)=>{e.setStyle(c,f,"")})})}},uO=(e,t,o)=>{bB(e.childNodes,r=>{lO(r)&&(t(r)&&o(r),r.hasChildNodes()&&uO(r,t,o))})},Zz=(e,t)=>{t.nodeName==="SPAN"&&e.getAttribs(t).length===0&&e.remove(t,!0)},dO=(e,t)=>o=>!!(o&&qC(e,o,t)),SB=(e,t,o)=>r=>{e.setStyle(r,t,o),r.getAttribute("style")===""&&r.removeAttribute("style"),Zz(e,r)},C1=ml.generate([{keep:[]},{rename:["name"]},{removed:[]}]),Wf=/^(src|href|style)$/,mO=Ke.each,uS=GC,Wz=e=>/^(TR|TH|TD)$/.test(e.nodeName),wB=(e,t,o)=>e.isChildOf(t,o)&&t!==o&&!e.isBlock(o),fO=(e,t,o)=>{let r=t[o?"startContainer":"endContainer"],c=t[o?"startOffset":"endOffset"];if(it(r)){const u=r.childNodes.length-1;!o&&c&&c--,r=r.childNodes[c>u?u:c]}return Ye(r)&&o&&c>=r.data.length&&(r=new _s(r,e.getBody()).next()||r),Ye(r)&&!o&&c===0&&(r=new _s(r,e.getBody()).prev()||r),r},gO=(e,t)=>{const o=t?"firstChild":"lastChild",r=e[o];return Wz(e)&&r?e.nodeName==="TR"&&r[o]||r:e},_4=(e,t,o,r)=>{var u;const c=e.create(o,r);return(u=t.parentNode)==null||u.insertBefore(c,t),c.appendChild(t),c},hO=(e,t,o,r,c)=>{const u=Y.fromDom(t),f=Y.fromDom(e.create(r,c)),b=o?kr(u):pa(u);return ii(f,b),o?(Qr(u,f),uu(f,u)):(xl(u,f),Qn(f,u)),f.dom},jz=(e,t)=>t.links&&e.nodeName==="A",xB=(e,t,o)=>{const r=t.parentNode;let c;const u=e.dom,f=Ys(e);Od(o)&&r===u.getRoot()&&(!o.list_block||!uS(t,o.list_block))&&ne(Mr(t.childNodes),b=>{lv(e,f,b.nodeName.toLowerCase())?c?c.appendChild(b):(c=_4(u,b,f),u.setAttribs(c,Yi(e))):c=null}),!(xJ(o)&&!uS(o.inline,t))&&u.remove(t,!0)},EB=(e,t,o)=>Fn(e)?{name:t,value:null}:{name:e,value:zf(t,o)},TB=(e,t)=>{e.getAttrib(t,"style")===""&&(t.removeAttribute("style"),t.removeAttribute("data-mce-style"))},kB=(e,t,o,r,c)=>{let u=!1;mO(o.styles,(f,b)=>{const{name:v,value:w}=EB(b,f,r),_=KE(w,v);(o.remove_similar||ie(w)||!it(c)||uS(qC(e,c,v),_))&&e.setStyle(t,v,""),u=!0}),u&&TB(e,t)},S1=(e,t,o)=>{t==="removeformat"?ne(pB(e.selection),r=>{ne(fB,c=>e.dom.setStyle(r,c,"")),TB(e.dom,r)}):zz(e.formatter,t).each(r=>{ne(pB(e.selection),c=>kB(e.dom,c,r,o,null))})},A4=(e,t,o,r,c)=>{const u=e.dom,f=Nd(e),b=e.schema;if(ca(t)&&Ga(b,t.inline)&&ps(b,r)&&r.parentElement===e.getBody())return xB(e,r,t),C1.removed();if(!t.ceFalseOverride&&r&&u.getContentEditableParent(r)==="false"||r&&!k4(u,r,t)&&!jz(r,t))return C1.keep();const v=r,w=t.preserve_attributes;if(ca(t)&&t.remove==="all"&&Yt(w)){const _=ge(u.getAttribs(v),D=>Ce(w,D.name.toLowerCase()));if(u.removeAllAttribs(v),ne(_,D=>u.setAttrib(v,D.name,D.value)),_.length>0)return C1.rename("span")}if(t.remove!=="all"){kB(u,v,t,o,c),mO(t.attributes,(D,M)=>{const{name:L,value:W}=EB(M,D,o);if(t.remove_similar||ie(W)||!it(c)||uS(u.getAttrib(c,L),W)){if(L==="class"){const V=u.getAttrib(v,L);if(V){let q="";if(ne(V.split(/\s+/),ae=>{/mce\-\w+/.test(ae)&&(q+=(q?" ":"")+ae)}),q){u.setAttrib(v,L,q);return}}}if(Wf.test(L)&&v.removeAttribute("data-mce-"+L),L==="style"&&di(["li"])(v)&&u.getStyle(v,"list-style-type")==="none"){v.removeAttribute(L),u.setStyle(v,"list-style-type","none");return}L==="class"&&v.removeAttribute("className"),v.removeAttribute(L)}}),mO(t.classes,D=>{D=zf(D,o),(!it(c)||u.hasClass(c,D))&&u.removeClass(v,D)});const _=u.getAttribs(v);for(let D=0;D<_.length;D++){const M=_[D].nodeName;if(!f.isAttributeInternal(M))return C1.keep()}}return t.remove!=="none"?(xB(e,v,t),C1.removed()):C1.keep()},Gz=(e,t,o,r,c)=>{let u;return t.parentNode&&ne(YE(e.dom,t.parentNode).reverse(),f=>{if(!u&&it(f)&&f.id!=="_start"&&f.id!=="_end"){const b=zl(e,f,o,r,c);b&&b.split!==!1&&(u=f)}}),u},qz=(e,t,o,r)=>A4(e,t,o,r,r).fold(qe(r),c=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,c)),qe(null)),pO=(e,t,o,r,c,u,f,b)=>{var D;let v,w;const _=e.dom;if(o){const M=o.parentNode;for(let L=r.parentNode;L&&L!==M;L=L.parentNode){let W=_.clone(L,!1);for(let V=0;V<t.length&&(W=qz(e,t[V],b,W),W!==null);V++);W&&(v&&W.appendChild(v),w||(w=W),v=W)}(!f.mixed||!_.isBlock(o))&&(r=_.split(o,r)??r),v&&w&&((D=c.parentNode)==null||D.insertBefore(v,c),w.appendChild(c),ca(f)&&CB(e,f,b,v))}return r},Kz=(e,t,o,r,c)=>{const u=e.formatter.get(t),f=u[0],b=e.dom,v=e.selection,w=V=>{const q=Gz(e,V,t,o,c);return pO(e,u,q,V,V,!0,f,o)},_=V=>vs(V)&&it(V)&&(V.id==="_start"||V.id==="_end"),D=V=>Ge(u,q=>dS(e,q,o,V,V)),M=V=>{const q=Mr(V.childNodes),ce=D(V)||Ge(u,Ie=>k4(b,V,Ie)),me=V.parentNode;if(!ce&&de(me)&&sA(f)&&D(me),f.deep&&q.length)for(let Ie=0;Ie<q.length;Ie++)M(q[Ie]);ne(["underline","line-through","overline"],Ie=>{it(V)&&e.dom.getStyle(V,"text-decoration")===Ie&&V.parentNode&&C6(b,V.parentNode)===Ie&&dS(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:Ie}},void 0,V)})},L=V=>{const q=b.get(V?"_start":"_end");if(q){let ae=q[V?"firstChild":"lastChild"];return _(ae)&&(ae=ae[V?"firstChild":"lastChild"]),Ye(ae)&&ae.data.length===0&&(ae=V?q.previousSibling||q.nextSibling:q.nextSibling||q.previousSibling),b.remove(q,!0),ae}else return null},W=V=>{let q,ae,ce=$m(b,V,u,{includeTrailingSpace:V.collapsed});if(f.split){if(ce=gv(ce),q=fO(e,ce,!0),ae=fO(e,ce),q!==ae){if(q=gO(q,!0),ae=gO(ae,!1),wB(b,q,ae)){const _e=B.from(q.firstChild).getOr(q);w(hO(b,_e,!0,"span",{id:"_start","data-mce-type":"bookmark"})),L(!0);return}if(wB(b,ae,q)){const _e=B.from(ae.lastChild).getOr(ae);w(hO(b,_e,!1,"span",{id:"_end","data-mce-type":"bookmark"})),L(!1);return}q=_4(b,q,"span",{id:"_start","data-mce-type":"bookmark"}),ae=_4(b,ae,"span",{id:"_end","data-mce-type":"bookmark"});const me=b.createRng();me.setStartAfter(q),me.setEndBefore(ae),Ou(b,me,_e=>{ne(_e,Ie=>{!vs(Ie)&&!vs(Ie.parentNode)&&w(Ie)})}),w(q),w(ae),q=L(!0),ae=L()}else q=ae=w(q);ce.startContainer=q.parentNode?q.parentNode:q,ce.startOffset=b.nodeIndex(q),ce.endContainer=ae.parentNode?ae.parentNode:ae,ce.endOffset=b.nodeIndex(ae)+1}Ou(b,ce,me=>{ne(me,M)})};if(r){if(ZC(r)){const V=b.createRng();V.setStartBefore(r),V.setEndAfter(r),W(V)}else W(r);rC(e,t,r,o);return}!v.isCollapsed()||!ca(f)||Rt(e).length?(p6(e,()=>VC(e,W),V=>ca(f)&&QA(e,t,o,V)),e.nodeChanged()):cB(e,t,o,c),S1(e,t,o),rC(e,t,r,o)},O4=(e,t,o,r,c)=>{(r||e.selection.isEditable())&&Kz(e,t,o,r,c)},_B=(e,t,o,r)=>A4(e,t,o,r).fold(()=>B.some(r),c=>B.some(e.dom.rename(r,c)),B.none),dS=(e,t,o,r,c)=>A4(e,t,o,r,c).fold($e,u=>(e.dom.rename(r,u),!0),gt),AB=["fontsize","subscript","superscript"],D4=["strikethrough",...AB],Yz=(e,t,o)=>de(e.matchNode(t.dom,o,{},o==="fontsize")),R4=(e,t)=>Ge(AB,o=>Yz(e,t,o)),Xz=e=>Ce(D4,e),OB=(e,t,o,r,c)=>{const u=ai(t,e).filter(Ts);return S2(u,o).map(f=>{const b=u[f],v=r(b),w=[...c(ba(b)).toArray(),...mo(u.slice(0,f),_=>o(_)?c(_).toArray():[ba(_)])];return{container:b,innerWrapper:v,outerWrappers:w}})},DB=(e,t,o,r)=>{ne(ks(e),c=>{Ts(c)&&o(c)&&r(c).isNone()&&li(c)}),ne(ks(e),c=>Qn(t,c)),uu(e,t)},RB=(e,t)=>{if(t.length>0){const o=t[t.length-1];Qr(e,o);const r=kn(t.slice(0,t.length-1),(c,u)=>(Qn(c,u),u),o);Qn(r,e)}},Jz=(e,t,o,r,c)=>{const u=f=>Ln(Y.fromDom(e.getRoot()),f)||e.isBlock(f.dom);ne(t,f=>{OB(u,f,o,r,c).each(({container:b,innerWrapper:v,outerWrappers:w})=>{e.split(b.dom,f.dom),DB(f,v,o,c),RB(f,w)})})},bO=(e,t,o)=>{const r=b=>de(zl(e,b.dom,t)),c=b=>{const v=Y.fromTag(An(b)),w=zl(e,b.dom,t,{});return de(w)&&Bz(w)&&y1(e,v.dom,w),v},u=b=>{const v=zl(e,b.dom,t,{});return de(v)?_B(e,v,{},b.dom).map(Y.fromDom):B.some(b)},f=Fm(e.selection.getRng());Jz(e.dom,o,r,c,u),e.selection.setRng(Hl(f))},Qz=(e,t)=>mo(t,o=>{const r=M0(o,c=>R4(e,c));return R4(e,o)?[o,...r]:r}),eV=(e,t,o)=>{if(Xz(t)){const r=Qz(e.formatter,o);bO(e,"strikethrough",r)}},tV=(e,t)=>{const o=ge(t,r=>R4(e.formatter,r));bO(e,"strikethrough",o)},Kc=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),MB=e=>e.name==="summary",nV=(e,t)=>{let o=e;for(;o=o.walk();)t(o)},vO=(e,t,o,r)=>{const c=o.name;for(let u=0,f=e.length;u<f;u++){const b=e[u];if(b.name===c){const v=r.nodes[c];v?v.nodes.push(o):r.nodes[c]={filter:b,nodes:[o]}}}if(o.attributes)for(let u=0,f=t.length;u<f;u++){const b=t[u],v=b.name;if(v in o.attributes.map){const w=r.attributes[v];w?w.nodes.push(o):r.attributes[v]={filter:b,nodes:[o]}}}},oV=(e,t,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&nV(o,c=>{vO(e,t,c,r)}),r},NB=(e,t)=>{const o=(r,c)=>{Bn(r,u=>{const f=Mr(u.nodes);ne(u.filter.callbacks,b=>{for(let v=f.length-1;v>=0;v--){const w=f[v];(!(c?w.attr(u.filter.name)!==void 0:w.name===u.filter.name)||Le(w.parent))&&f.splice(v,1)}f.length>0&&b(f,u.filter.name,t)})})};o(e.nodes,!1),o(e.attributes,!0)},BB=(e,t,o,r={})=>{const c=oV(e,t,o);NB(c,r)},_h=(e,t,o,r)=>{if((e.pad_empty_with_br||t.insert)&&o(r)){const u=new Zr("br",1);t.insert&&u.attr("data-mce-bogus","1"),r.empty().append(u)}else r.empty().append(new Zr("#text",3)).value=Zs},vv=e=>{var t;return sV(e,"#text")&&((t=e==null?void 0:e.firstChild)==null?void 0:t.value)===Zs},sV=(e,t)=>{const o=e==null?void 0:e.firstChild;return de(o)&&o===e.lastChild&&o.name===t},rV=(e,t)=>{const o=e.getElementRule(t.name);return(o==null?void 0:o.paddEmpty)===!0},mS=(e,t,o,r)=>r.isEmpty(t,o,c=>rV(e,c)),Bd=(e,t)=>de(e)&&(t(e)||e.name==="br"),aV=e=>{let t;for(let o=e;o;o=o.parent){const r=o.attr("contenteditable");if(r==="false")break;r==="true"&&(t=o)}return B.from(t)},cV=e=>{const t=[];for(let o=e.firstChild;de(o);o=o.walk())t.push(o);return t},yv=(e,t,o=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const c of r)o&&!t.isValidChild(o.name,c.name)&&yv(c,t,o);e.unwrap()}},PB=(e,t,o,r=yt)=>{const c=t.getTextBlockElements(),u=t.getNonEmptyElements(),f=t.getWhitespaceElements(),b=Ke.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),v=new Set,w=_=>_!==o&&!b[_.name];for(let _=0;_<e.length;_++){const D=e[_];let M,L,W;if(!D.parent||v.has(D))continue;if(c[D.name]&&D.parent.name==="li"){let q=D.next;for(;q&&c[q.name];){q.name="li",v.add(q),D.parent.insert(q,D.parent);q=q.next}D.unwrap();continue}const V=[D];for(M=D.parent;M&&!t.isValidChild(M.name,D.name)&&w(M);M=M.parent)V.push(M);if(M&&V.length>1)if(fS(t,D,M))yv(D,t);else{V.reverse(),L=V[0].clone(),r(L);let q=L;for(let ae=0;ae<V.length-1;ae++){t.isValidChild(q.name,V[ae].name)&&ae>0?(W=V[ae].clone(),r(W),q.append(W)):W=q;for(let ce=V[ae].firstChild;ce&&ce!==V[ae+1];){const me=ce.next;W.append(ce),ce=me}q=W}mS(t,u,f,L)?M.insert(D,V[0],!0):(M.insert(L,V[0],!0),M.insert(D,L)),M=V[0],(mS(t,u,f,M)||sV(M,"br"))&&M.empty().remove()}else if(D.parent){if(D.name==="li"){let q=D.prev;if(q&&(q.name==="ul"||q.name==="ol")){q.append(D);continue}if(q=D.next,q&&(q.name==="ul"||q.name==="ol")&&q.firstChild){q.insert(D,q.firstChild,!0);continue}const ae=new Zr("ul",1);r(ae),D.wrap(ae);continue}if(t.isValidChild(D.parent.name,"div")&&t.isValidChild("div",D.name)){const q=new Zr("div",1);r(q),D.wrap(q)}else yv(D,t)}}},yO=(e,t)=>{let o=e;for(;o;){if(o.name===t)return!0;o=o.parent}return!1},fS=(e,t,o=t.parent)=>o?e.children[t.name]&&!e.isValidChild(o.name,t.name)||t.name==="a"&&yO(o,"a")?!0:MB(o)&&Kc(t)?!((o==null?void 0:o.firstChild)===t&&(o==null?void 0:o.lastChild)===t):!1:!1,$B=(e,t,o,r)=>{const c=document.createRange();return c.setStart(e,t),c.setEnd(o,r),c},iV=e=>{const t=ke.fromRangeStart(e),o=ke.fromRangeEnd(e),r=e.commonAncestorContainer;return jc(!1,r,o).map(c=>!ku(t,o,r)&&ku(t,c,r)?$B(t.container(),t.offset(),c.container(),c.offset()):e).getOr(e)},CO=e=>e.collapsed?e:iV(e),jf=Ke.explode,IB=()=>{const e={};return{addFilter:(c,u)=>{ne(jf(c),f=>{Sn(e,f)||(e[f]={name:f,callbacks:[]}),e[f].callbacks.push(u)})},getFilters:()=>ei(e),removeFilter:(c,u)=>{ne(jf(c),f=>{if(Sn(e,f))if(de(u)){const b=e[f],v=ge(b.callbacks,w=>w!==u);v.length>0?b.callbacks=v:delete e[f]}else delete e[f]})}}},lV=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),uV=e=>e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&"),Dn=(e,t)=>{ne(t,o=>{e.attr(o,null)})},dV=(e,t,o)=>{e.addNodeFilter("font",r=>{ne(r,c=>{const u=t.parse(c.attr("style")),f=c.attr("color"),b=c.attr("face"),v=c.attr("size");f&&(u.color=f),b&&(u["font-family"]=b),v&&k2(v).each(w=>{u["font-size"]=o[w-1]}),c.name="span",c.attr("style",t.serialize(u)),Dn(c,["color","face","size"])})})},mV=(e,t,o)=>{e.addNodeFilter("strike",r=>{const c=t.type!=="html4";ne(r,u=>{if(c)u.name="s";else{const f=o.parse(u.attr("style"));f["text-decoration"]="line-through",u.name="span",u.attr("style",o.serialize(f))}})})},LB=(e,t,o)=>{const r=pd();t.convert_fonts_to_spans&&dV(e,r,Ke.explode(t.font_size_legacy_values??"")),mV(e,o,r)},fV=(e,t,o)=>{t.inline_styles&&LB(e,t,o)},gV=e=>fetch(e).then(t=>t.ok?t.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),Ls=e=>{const t=/([a-z0-9+\/=\s]+)/i.exec(e);return t?t[1]:""},hV=e=>{try{return decodeURIComponent(e)}catch{return e}},SO=e=>{const[t,...o]=e.split(","),r=o.join(","),c=/data:([^/]+\/[^;]+)(;.+)?/.exec(t);if(c){const u=c[2]===";base64",f=hV(r),b=u?Ls(f):f;return B.some({type:c[1],data:b,base64Encoded:u})}else return B.none()},FB=(e,t,o=!0)=>{let r=t;if(o)try{r=atob(t)}catch{return B.none()}const c=new Uint8Array(r.length);for(let u=0;u<c.length;u++)c[u]=r.charCodeAt(u);return B.some(new Blob([c],{type:e}))},pV=e=>new Promise((t,o)=>{SO(e).bind(({type:r,data:c,base64Encoded:u})=>FB(r,c,u)).fold(()=>o("Invalid data URI"),t)}),fs=e=>pn(e,"blob:")?gV(e):pn(e,"data:")?pV(e):Promise.reject("Unknown URI format"),wO=e=>new Promise((t,o)=>{const r=new FileReader;r.onloadend=()=>{t(r.result)},r.onerror=()=>{var c;o((c=r.error)==null?void 0:c.message)},r.readAsDataURL(e)});let HB=0;const bV=e=>"blobid"+HB++,xO=(e,t,o)=>SO(e).bind(({data:r,type:c,base64Encoded:u})=>{if(t&&!u)return B.none();{const f=u?r:btoa(r);return o(f,c)}}),zB=(e,t,o)=>{const r=e.create(bV(),t,o);return e.add(r),r},Hm=(e,t,o=!1)=>xO(t,o,(r,c)=>B.from(e.getByData(r,c)).orThunk(()=>FB(c,r).map(u=>zB(e,u,r)))),EO=(e,t)=>{const o=()=>Promise.reject("Invalid data URI");if(pn(t,"blob:")){const r=e.getByUri(t);return de(r)?Promise.resolve(r):fs(t).then(c=>wO(c).then(u=>xO(u,!1,f=>B.some(zB(e,c,f))).getOrThunk(o)))}else return pn(t,"data:")?Hm(e,t).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},vV=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,yV=e=>B.from(e.match(vV)).bind(t=>Ea(t,1)).map(t=>pn(t,"www.")?t.substring(4):t),M4=(e,t)=>{B.from(e.attr("src")).bind(yV).forall(o=>!Ce(t,o))&&e.attr("sandbox","")},TO=(e,t)=>pn(e,`${t}/`),CV=e=>Je(e)?"iframe":TO(e,"image")?"img":TO(e,"video")?"video":TO(e,"audio")?"audio":"iframe",xr=({type:e,src:t,width:o,height:r}={},c,u)=>{const f=CV(e),b=new Zr(f,1);return b.attr(f==="audio"?{src:t}:{src:t,width:o,height:r}),(f==="audio"||f==="video")&&b.attr("controls",""),f==="iframe"&&c&&M4(b,u),b},SV=e=>de(e.attr("data-mce-bogus")),Ah=e=>e.attr("src")===Xn.transparentSrc||de(e.attr("data-mce-placeholder")),wV=(e,t)=>{const{blob_cache:o}=t;if(o){const r=c=>{const u=c.attr("src");Ah(c)||SV(c)||Le(u)||Hm(o,u,!0).each(f=>{c.attr("src",f.blobUri())})};e.addAttributeFilter("src",c=>ne(c,r))}},xV=(e,t)=>{const o=e.schema;e.addAttributeFilter("href",f=>{let b=f.length;const v=_=>_.split(" ").filter(M=>M.length>0).concat(["noopener"]).sort().join(" "),w=_=>{const D=_?Ke.trim(_):"";return/\b(noopener)\b/g.test(D)?D:v(D)};if(!t.allow_unsafe_link_target)for(;b--;){const _=f[b];_.name==="a"&&_.attr("target")==="_blank"&&_.attr("rel",w(_.attr("rel")))}}),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",f=>{let b=f.length,v,w,_,D;for(;b--;)if(D=f[b],D.name==="a"&&D.firstChild&&!D.attr("href"))for(_=D.parent,v=D.lastChild;v&&_;)w=v.prev,_.insert(v,D),v=w}),t.fix_list_elements&&e.addNodeFilter("ul,ol",f=>{let b=f.length,v,w;for(;b--;)if(v=f[b],w=v.parent,w&&(w.name==="ul"||w.name==="ol"))if(v.prev&&v.prev.name==="li")v.prev.append(v);else{const _=new Zr("li",1);_.attr("style","list-style-type: none"),v.wrap(_)}});const r=o.getValidClasses();t.validate&&r&&e.addAttributeFilter("class",f=>{let b=f.length;for(;b--;){const v=f[b],w=v.attr("class")??"",_=Ke.explode(w," ");let D="";for(let M=0;M<_.length;M++){const L=_[M];let W=!1,V=r["*"];V&&V[L]&&(W=!0),V=r[v.name],!W&&V&&V[L]&&(W=!0),W&&(D&&(D+=" "),D+=L)}D.length||(D=null),v.attr("class",D)}}),wV(e,t);const c=t.sandbox_iframes??!1,u=_i(t.sandbox_iframes_exclusions??[]);t.convert_unsafe_embeds&&e.addNodeFilter("object,embed",f=>ne(f,b=>{b.replace(xr({type:b.attr("type"),src:b.name==="object"?b.attr("data"):b.attr("src"),width:b.attr("width"),height:b.attr("height")},c,u))})),c&&e.addNodeFilter("iframe",f=>ne(f,b=>M4(b,u)))};/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:VB,setPrototypeOf:UB,isFrozen:EV,getPrototypeOf:TV,getOwnPropertyDescriptor:kV}=Object;let{freeze:Ci,seal:Nu,create:gS}=Object,{apply:kO,construct:_O}=typeof Reflect<"u"&&Reflect;Ci||(Ci=function(t){return t}),Nu||(Nu=function(t){return t}),kO||(kO=function(t,o,r){return t.apply(o,r)}),_O||(_O=function(t,o){return new t(...o)});const AO=tc(Array.prototype.forEach),hS=tc(Array.prototype.lastIndexOf),ZB=tc(Array.prototype.pop),w1=tc(Array.prototype.push),_V=tc(Array.prototype.splice),N4=tc(String.prototype.toLowerCase),OO=tc(String.prototype.toString),WB=tc(String.prototype.match),Pd=tc(String.prototype.replace),x1=tc(String.prototype.indexOf),B4=tc(String.prototype.trim),tl=tc(Object.prototype.hasOwnProperty),ia=tc(RegExp.prototype.test),$d=P4(TypeError);function tc(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var o=arguments.length,r=new Array(o>1?o-1:0),c=1;c<o;c++)r[c-1]=arguments[c];return kO(e,t,r)}}function P4(e){return function(){for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return _O(e,o)}}function Uo(e,t){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:N4;UB&&UB(e,null);let r=t.length;for(;r--;){let c=t[r];if(typeof c=="string"){const u=o(c);u!==c&&(EV(t)||(t[r]=u),c=u)}e[c]=!0}return e}function DO(e){for(let t=0;t<e.length;t++)tl(e,t)||(e[t]=null);return e}function Id(e){const t=gS(null);for(const[o,r]of VB(e))tl(e,o)&&(Array.isArray(r)?t[o]=DO(r):r&&typeof r=="object"&&r.constructor===Object?t[o]=Id(r):t[o]=r);return t}function Cv(e,t){for(;e!==null;){const r=kV(e,t);if(r){if(r.get)return tc(r.get);if(typeof r.value=="function")return tc(r.value)}e=TV(e)}function o(){return null}return o}const RO=Ci(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Oh=Ci(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),$4=Ci(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),jB=Ci(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),I4=Ci(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),L4=Ci(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),MO=Ci(["#text"]),NO=Ci(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),F4=Ci(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),BO=Ci(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Bu=Ci(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Dh=Nu(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Pu=Nu(/<%[\w\W]*|[\w\W]*%>/gm),AV=Nu(/\$\{[\w\W]*/gm),OV=Nu(/^data-[\-\w.\u00B7-\uFFFF]+$/),DV=Nu(/^aria-[\-\w]+$/),GB=Nu(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),RV=Nu(/^(?:\w+script|data):/i),MV=Nu(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),qB=Nu(/^html$/i),NV=Nu(/^[a-z][.\w]*(-[.\w]+)+$/i);var KB=Object.freeze({__proto__:null,ARIA_ATTR:DV,ATTR_WHITESPACE:MV,CUSTOM_ELEMENT:NV,DATA_ATTR:OV,DOCTYPE_NAME:qB,ERB_EXPR:Pu,IS_ALLOWED_URI:GB,IS_SCRIPT_OR_DATA:RV,MUSTACHE_EXPR:Dh,TMPLIT_EXPR:AV});const pS={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},BV=function(){return typeof window>"u"?null:window},PV=function(t,o){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let r=null;const c="data-tt-policy-suffix";o&&o.hasAttribute(c)&&(r=o.getAttribute(c));const u="dompurify"+(r?"#"+r:"");try{return t.createPolicy(u,{createHTML(f){return f},createScriptURL(f){return f}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}},H4=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function z4(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:BV();const t=zn=>z4(zn);if(t.version="3.2.6",t.removed=[],!e||!e.document||e.document.nodeType!==pS.document||!e.Element)return t.isSupported=!1,t;let{document:o}=e;const r=o,c=r.currentScript,{DocumentFragment:u,HTMLTemplateElement:f,Node:b,Element:v,NodeFilter:w,NamedNodeMap:_=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:D,DOMParser:M,trustedTypes:L}=e,W=v.prototype,V=Cv(W,"cloneNode"),q=Cv(W,"remove"),ae=Cv(W,"nextSibling"),ce=Cv(W,"childNodes"),me=Cv(W,"parentNode");if(typeof f=="function"){const zn=o.createElement("template");zn.content&&zn.content.ownerDocument&&(o=zn.content.ownerDocument)}let _e,Ie="";const{implementation:ut,createNodeIterator:$t,createDocumentFragment:Ae,getElementsByTagName:ve}=o,{importNode:Oe}=r;let dt=H4();t.isSupported=typeof VB=="function"&&typeof me=="function"&&ut&&ut.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:en,ERB_EXPR:tn,TMPLIT_EXPR:Wn,DATA_ATTR:xo,ARIA_ATTR:Ko,IS_SCRIPT_OR_DATA:cs,ATTR_WHITESPACE:Gr,CUSTOM_ELEMENT:xi}=KB;let{IS_ALLOWED_URI:ft}=KB,Zt=null;const co=Uo({},[...RO,...Oh,...$4,...I4,...MO]);let no=null;const ua=Uo({},[...NO,...F4,...BO,...Bu]);let Be=Object.seal(gS(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),st=null,Tt=null,$n=!0,yn=!0,Oo=!1,Jl=!0,Dc=!1,Ql=!0,al=!1,jh=!1,sc=!1,Jc=!1,ag=!1,d2=!1,jk=!0,nn=!1;const Gn="user-content-";let Xs=!0,os=!1,Bo={},Hs=null;const Ei=Uo({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Rc=null;const eu=Uo({},["audio","video","img","source","image","track"]);let cg=null;const Gk=Uo({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),qk="http://www.w3.org/1998/Math/MathML",Ow="http://www.w3.org/2000/svg",Jm="http://www.w3.org/1999/xhtml";let m2=Jm,LM=!1,Kk=null;const pQ=Uo({},[qk,Ow,Jm],OO);let FM=Uo({},["mi","mo","mn","ms","mtext"]),HM=Uo({},["annotation-xml"]);const bQ=Uo({},["title","style","font","a","script"]);let Yk=null;const f2=["application/xhtml+xml","text/html"],hH="text/html";let he=null,xe=null;const ht=o.createElement("form"),rt=function(Ee){return Ee instanceof RegExp||Ee instanceof Function},un=function(){let Ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(xe&&xe===Ee)){if((!Ee||typeof Ee!="object")&&(Ee={}),Ee=Id(Ee),Yk=f2.indexOf(Ee.PARSER_MEDIA_TYPE)===-1?hH:Ee.PARSER_MEDIA_TYPE,he=Yk==="application/xhtml+xml"?OO:N4,Zt=tl(Ee,"ALLOWED_TAGS")?Uo({},Ee.ALLOWED_TAGS,he):co,no=tl(Ee,"ALLOWED_ATTR")?Uo({},Ee.ALLOWED_ATTR,he):ua,Kk=tl(Ee,"ALLOWED_NAMESPACES")?Uo({},Ee.ALLOWED_NAMESPACES,OO):pQ,cg=tl(Ee,"ADD_URI_SAFE_ATTR")?Uo(Id(Gk),Ee.ADD_URI_SAFE_ATTR,he):Gk,Rc=tl(Ee,"ADD_DATA_URI_TAGS")?Uo(Id(eu),Ee.ADD_DATA_URI_TAGS,he):eu,Hs=tl(Ee,"FORBID_CONTENTS")?Uo({},Ee.FORBID_CONTENTS,he):Ei,st=tl(Ee,"FORBID_TAGS")?Uo({},Ee.FORBID_TAGS,he):Id({}),Tt=tl(Ee,"FORBID_ATTR")?Uo({},Ee.FORBID_ATTR,he):Id({}),Bo=tl(Ee,"USE_PROFILES")?Ee.USE_PROFILES:!1,$n=Ee.ALLOW_ARIA_ATTR!==!1,yn=Ee.ALLOW_DATA_ATTR!==!1,Oo=Ee.ALLOW_UNKNOWN_PROTOCOLS||!1,Jl=Ee.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Dc=Ee.SAFE_FOR_TEMPLATES||!1,Ql=Ee.SAFE_FOR_XML!==!1,al=Ee.WHOLE_DOCUMENT||!1,Jc=Ee.RETURN_DOM||!1,ag=Ee.RETURN_DOM_FRAGMENT||!1,d2=Ee.RETURN_TRUSTED_TYPE||!1,sc=Ee.FORCE_BODY||!1,jk=Ee.SANITIZE_DOM!==!1,nn=Ee.SANITIZE_NAMED_PROPS||!1,Xs=Ee.KEEP_CONTENT!==!1,os=Ee.IN_PLACE||!1,ft=Ee.ALLOWED_URI_REGEXP||GB,m2=Ee.NAMESPACE||Jm,FM=Ee.MATHML_TEXT_INTEGRATION_POINTS||FM,HM=Ee.HTML_INTEGRATION_POINTS||HM,Be=Ee.CUSTOM_ELEMENT_HANDLING||{},Ee.CUSTOM_ELEMENT_HANDLING&&rt(Ee.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Be.tagNameCheck=Ee.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Ee.CUSTOM_ELEMENT_HANDLING&&rt(Ee.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Be.attributeNameCheck=Ee.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Ee.CUSTOM_ELEMENT_HANDLING&&typeof Ee.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Be.allowCustomizedBuiltInElements=Ee.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Dc&&(yn=!1),ag&&(Jc=!0),Bo&&(Zt=Uo({},MO),no=[],Bo.html===!0&&(Uo(Zt,RO),Uo(no,NO)),Bo.svg===!0&&(Uo(Zt,Oh),Uo(no,F4),Uo(no,Bu)),Bo.svgFilters===!0&&(Uo(Zt,$4),Uo(no,F4),Uo(no,Bu)),Bo.mathMl===!0&&(Uo(Zt,I4),Uo(no,BO),Uo(no,Bu))),Ee.ADD_TAGS&&(Zt===co&&(Zt=Id(Zt)),Uo(Zt,Ee.ADD_TAGS,he)),Ee.ADD_ATTR&&(no===ua&&(no=Id(no)),Uo(no,Ee.ADD_ATTR,he)),Ee.ADD_URI_SAFE_ATTR&&Uo(cg,Ee.ADD_URI_SAFE_ATTR,he),Ee.FORBID_CONTENTS&&(Hs===Ei&&(Hs=Id(Hs)),Uo(Hs,Ee.FORBID_CONTENTS,he)),Xs&&(Zt["#text"]=!0),al&&Uo(Zt,["html","head","body"]),Zt.table&&(Uo(Zt,["tbody"]),delete st.tbody),Ee.TRUSTED_TYPES_POLICY){if(typeof Ee.TRUSTED_TYPES_POLICY.createHTML!="function")throw $d('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Ee.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw $d('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');_e=Ee.TRUSTED_TYPES_POLICY,Ie=_e.createHTML("")}else _e===void 0&&(_e=PV(L,c)),_e!==null&&typeof Ie=="string"&&(Ie=_e.createHTML(""));Ci&&Ci(Ee),xe=Ee}},oo=Uo({},[...Oh,...$4,...jB]),Js=Uo({},[...I4,...L4]),ig=function(Ee){let Wt=me(Ee);(!Wt||!Wt.tagName)&&(Wt={namespaceURI:m2,tagName:"template"});const Mn=N4(Ee.tagName),qr=N4(Wt.tagName);return Kk[Ee.namespaceURI]?Ee.namespaceURI===Ow?Wt.namespaceURI===Jm?Mn==="svg":Wt.namespaceURI===qk?Mn==="svg"&&(qr==="annotation-xml"||FM[qr]):!!oo[Mn]:Ee.namespaceURI===qk?Wt.namespaceURI===Jm?Mn==="math":Wt.namespaceURI===Ow?Mn==="math"&&HM[qr]:!!Js[Mn]:Ee.namespaceURI===Jm?Wt.namespaceURI===Ow&&!HM[qr]||Wt.namespaceURI===qk&&!FM[qr]?!1:!Js[Mn]&&(bQ[Mn]||!oo[Mn]):!!(Yk==="application/xhtml+xml"&&Kk[Ee.namespaceURI]):!1},Qm=function(Ee){w1(t.removed,{element:Ee});try{me(Ee).removeChild(Ee)}catch{q(Ee)}},Xk=function(Ee,Wt){try{w1(t.removed,{attribute:Wt.getAttributeNode(Ee),from:Wt})}catch{w1(t.removed,{attribute:null,from:Wt})}if(Wt.removeAttribute(Ee),Ee==="is")if(Jc||ag)try{Qm(Wt)}catch{}else try{Wt.setAttribute(Ee,"")}catch{}},vQ=function(Ee){let Wt=null,Mn=null;if(sc)Ee="<remove></remove>"+Ee;else{const Mc=WB(Ee,/^[\r\n\t ]+/);Mn=Mc&&Mc[0]}Yk==="application/xhtml+xml"&&m2===Jm&&(Ee='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Ee+"</body></html>");const qr=_e?_e.createHTML(Ee):Ee;if(m2===Jm)try{Wt=new M().parseFromString(qr,Yk)}catch{}if(!Wt||!Wt.documentElement){Wt=ut.createDocument(m2,"template",null);try{Wt.documentElement.innerHTML=LM?Ie:qr}catch{}}const cl=Wt.body||Wt.documentElement;return Ee&&Mn&&cl.insertBefore(o.createTextNode(Mn),cl.childNodes[0]||null),m2===Jm?ve.call(Wt,al?"html":"body")[0]:al?Wt.documentElement:cl},yQ=function(Ee){return $t.call(Ee.ownerDocument||Ee,Ee,w.SHOW_ELEMENT|w.SHOW_COMMENT|w.SHOW_TEXT|w.SHOW_PROCESSING_INSTRUCTION|w.SHOW_CDATA_SECTION,null)},KX=function(Ee){return Ee instanceof D&&(typeof Ee.nodeName!="string"||typeof Ee.textContent!="string"||typeof Ee.removeChild!="function"||!(Ee.attributes instanceof _)||typeof Ee.removeAttribute!="function"||typeof Ee.setAttribute!="function"||typeof Ee.namespaceURI!="string"||typeof Ee.insertBefore!="function"||typeof Ee.hasChildNodes!="function")},CQ=function(Ee){return typeof b=="function"&&Ee instanceof b};function n0(zn,Ee,Wt){AO(zn,Mn=>{Mn.call(t,Ee,Wt,xe)})}const SQ=function(Ee){let Wt=null;if(n0(dt.beforeSanitizeElements,Ee,null),KX(Ee))return Qm(Ee),!0;const Mn=he(Ee.nodeName);if(n0(dt.uponSanitizeElement,Ee,{tagName:Mn,allowedTags:Zt}),Ql&&Ee.hasChildNodes()&&!CQ(Ee.firstElementChild)&&ia(/<[/\w!]/g,Ee.innerHTML)&&ia(/<[/\w!]/g,Ee.textContent)||Ee.nodeType===pS.progressingInstruction||Ql&&Ee.nodeType===pS.comment&&ia(/<[/\w]/g,Ee.data))return Qm(Ee),!0;if(!Zt[Mn]||st[Mn]){if(!st[Mn]&&xQ(Mn)&&(Be.tagNameCheck instanceof RegExp&&ia(Be.tagNameCheck,Mn)||Be.tagNameCheck instanceof Function&&Be.tagNameCheck(Mn)))return!1;if(Xs&&!Hs[Mn]){const qr=me(Ee)||Ee.parentNode,cl=ce(Ee)||Ee.childNodes;if(cl&&qr){const Mc=cl.length;for(let ju=Mc-1;ju>=0;--ju){const o0=V(cl[ju],!0);o0.__removalCount=(Ee.__removalCount||0)+1,qr.insertBefore(o0,ae(Ee))}}}return Qm(Ee),!0}return Ee instanceof v&&!ig(Ee)||(Mn==="noscript"||Mn==="noembed"||Mn==="noframes")&&ia(/<\/no(script|embed|frames)/i,Ee.innerHTML)?(Qm(Ee),!0):(Dc&&Ee.nodeType===pS.text&&(Wt=Ee.textContent,AO([en,tn,Wn],qr=>{Wt=Pd(Wt,qr," ")}),Ee.textContent!==Wt&&(w1(t.removed,{element:Ee.cloneNode()}),Ee.textContent=Wt)),n0(dt.afterSanitizeElements,Ee,null),!1)},wQ=function(Ee,Wt,Mn){if(jk&&(Wt==="id"||Wt==="name")&&(Mn in o||Mn in ht))return!1;if(!(yn&&!Tt[Wt]&&ia(xo,Wt))){if(!($n&&ia(Ko,Wt))){if(!no[Wt]||Tt[Wt]){if(!(xQ(Ee)&&(Be.tagNameCheck instanceof RegExp&&ia(Be.tagNameCheck,Ee)||Be.tagNameCheck instanceof Function&&Be.tagNameCheck(Ee))&&(Be.attributeNameCheck instanceof RegExp&&ia(Be.attributeNameCheck,Wt)||Be.attributeNameCheck instanceof Function&&Be.attributeNameCheck(Wt))||Wt==="is"&&Be.allowCustomizedBuiltInElements&&(Be.tagNameCheck instanceof RegExp&&ia(Be.tagNameCheck,Mn)||Be.tagNameCheck instanceof Function&&Be.tagNameCheck(Mn))))return!1}else if(!cg[Wt]){if(!ia(ft,Pd(Mn,Gr,""))){if(!((Wt==="src"||Wt==="xlink:href"||Wt==="href")&&Ee!=="script"&&x1(Mn,"data:")===0&&Rc[Ee])){if(!(Oo&&!ia(cs,Pd(Mn,Gr,"")))){if(Mn)return!1}}}}}}return!0},xQ=function(Ee){return Ee!=="annotation-xml"&&WB(Ee,xi)},EQ=function(Ee){n0(dt.beforeSanitizeAttributes,Ee,null);const{attributes:Wt}=Ee;if(!Wt||KX(Ee))return;const Mn={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:no,forceKeepAttr:void 0};let qr=Wt.length;for(;qr--;){const cl=Wt[qr],{name:Mc,namespaceURI:ju,value:o0}=cl,zM=he(Mc),YX=o0;let il=Mc==="value"?YX:B4(YX);if(Mn.attrName=zM,Mn.attrValue=il,Mn.keepAttr=!0,Mn.forceKeepAttr=void 0,n0(dt.uponSanitizeAttribute,Ee,Mn),il=Mn.attrValue,nn&&(zM==="id"||zM==="name")&&(Xk(Mc,Ee),il=Gn+il),Ql&&ia(/((--!?|])>)|<\/(style|title)/i,il)){Xk(Mc,Ee);continue}if(Mn.forceKeepAttr)continue;if(!Mn.keepAttr){Xk(Mc,Ee);continue}if(!Jl&&ia(/\/>/i,il)){Xk(Mc,Ee);continue}Dc&&AO([en,tn,Wn],kQ=>{il=Pd(il,kQ," ")});const TQ=he(Ee.nodeName);if(!wQ(TQ,zM,il)){Xk(Mc,Ee);continue}if(_e&&typeof L=="object"&&typeof L.getAttributeType=="function"&&!ju)switch(L.getAttributeType(TQ,zM)){case"TrustedHTML":{il=_e.createHTML(il);break}case"TrustedScriptURL":{il=_e.createScriptURL(il);break}}if(il!==YX)try{ju?Ee.setAttributeNS(ju,Mc,il):Ee.setAttribute(Mc,il),KX(Ee)?Qm(Ee):ZB(t.removed)}catch{Xk(Mc,Ee)}}n0(dt.afterSanitizeAttributes,Ee,null)},xee=function zn(Ee){let Wt=null;const Mn=yQ(Ee);for(n0(dt.beforeSanitizeShadowDOM,Ee,null);Wt=Mn.nextNode();)n0(dt.uponSanitizeShadowNode,Wt,null),SQ(Wt),EQ(Wt),Wt.content instanceof u&&zn(Wt.content);n0(dt.afterSanitizeShadowDOM,Ee,null)};return t.sanitize=function(zn){let Ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Wt=null,Mn=null,qr=null,cl=null;if(LM=!zn,LM&&(zn="<!-->"),typeof zn!="string"&&!CQ(zn))if(typeof zn.toString=="function"){if(zn=zn.toString(),typeof zn!="string")throw $d("dirty is not a string, aborting")}else throw $d("toString is not a function");if(!t.isSupported)return zn;if(jh||un(Ee),t.removed=[],typeof zn=="string"&&(os=!1),os){if(zn.nodeName){const o0=he(zn.nodeName);if(!Zt[o0]||st[o0])throw $d("root node is forbidden and cannot be sanitized in-place")}}else if(zn instanceof b)Wt=vQ("<!---->"),Mn=Wt.ownerDocument.importNode(zn,!0),Mn.nodeType===pS.element&&Mn.nodeName==="BODY"||Mn.nodeName==="HTML"?Wt=Mn:Wt.appendChild(Mn);else{if(!Jc&&!Dc&&!al&&zn.indexOf("<")===-1)return _e&&d2?_e.createHTML(zn):zn;if(Wt=vQ(zn),!Wt)return Jc?null:d2?Ie:""}Wt&&sc&&Qm(Wt.firstChild);const Mc=yQ(os?zn:Wt);for(;qr=Mc.nextNode();)SQ(qr),EQ(qr),qr.content instanceof u&&xee(qr.content);if(os)return zn;if(Jc){if(ag)for(cl=Ae.call(Wt.ownerDocument);Wt.firstChild;)cl.appendChild(Wt.firstChild);else cl=Wt;return(no.shadowroot||no.shadowrootmode)&&(cl=Oe.call(r,cl,!0)),cl}let ju=al?Wt.outerHTML:Wt.innerHTML;return al&&Zt["!doctype"]&&Wt.ownerDocument&&Wt.ownerDocument.doctype&&Wt.ownerDocument.doctype.name&&ia(qB,Wt.ownerDocument.doctype.name)&&(ju="<!DOCTYPE "+Wt.ownerDocument.doctype.name+`>
`+ju),Dc&&AO([en,tn,Wn],o0=>{ju=Pd(ju,o0," ")}),_e&&d2?_e.createHTML(ju):ju},t.setConfig=function(){let zn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};un(zn),jh=!0},t.clearConfig=function(){xe=null,jh=!1},t.isValidAttribute=function(zn,Ee,Wt){xe||un({});const Mn=he(zn),qr=he(Ee);return wQ(Mn,qr,Wt)},t.addHook=function(zn,Ee){typeof Ee=="function"&&w1(dt[zn],Ee)},t.removeHook=function(zn,Ee){if(Ee!==void 0){const Wt=hS(dt[zn],Ee);return Wt===-1?void 0:_V(dt[zn],Wt,1)[0]}return ZB(dt[zn])},t.removeHooks=function(zn){dt[zn]=[]},t.removeAllHooks=function(){dt=H4()},t}var V4=z4();const YB=Ke.each,$V=Ke.trim,XB=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],JB={ftp:21,http:80,https:443,mailto:25},PO=["img","video"],QB=(e,t)=>de(e)?!e:de(t)?!Ce(PO,t):!0,eP=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},U4=(e,t,o)=>{const r=eP(t).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?QB(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class $u{constructor(t,o={}){Ze(this,"source");Ze(this,"protocol");Ze(this,"authority");Ze(this,"userInfo");Ze(this,"user");Ze(this,"password");Ze(this,"host");Ze(this,"port");Ze(this,"relative");Ze(this,"path","");Ze(this,"directory","");Ze(this,"file");Ze(this,"query");Ze(this,"anchor");Ze(this,"settings");t=$V(t),this.settings=o;const r=o.base_uri,c=this;if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t)){c.source=t;return}const u=t.indexOf("//")===0;if(t.indexOf("/")===0&&!u&&(t=(r&&r.protocol||"http")+"://mce_host"+t),!/^[\w\-]*:?\/\//.test(t)){const b=r?r.path:new $u(document.location.href).directory;if((r==null?void 0:r.protocol)==="")t="//mce_host"+c.toAbsPath(b,t);else{const v=/([^#?]*)([#?]?.*)/.exec(t);v&&(t=(r&&r.protocol||"http")+"://mce_host"+c.toAbsPath(b,v[1])+v[2])}}t=t.replace(/@@/g,"(mce_at)");const f=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);f&&YB(XB,(b,v)=>{let w=f[v];w&&(w=w.replace(/\(mce_at\)/g,"@@")),c[b]=w}),r&&(c.protocol||(c.protocol=r.protocol),c.userInfo||(c.userInfo=r.userInfo),!c.port&&c.host==="mce_host"&&(c.port=r.port),(!c.host||c.host==="mce_host")&&(c.host=r.host),c.source=""),u&&(c.protocol="")}static parseDataUri(t){let o;const r=decodeURIComponent(t).split(","),c=/data:([^;]+)/.exec(r[0]);return c&&(o=c[1]),{type:o,data:r[1]}}static isDomSafe(t,o,r={}){if(r.allow_script_urls)return!0;{const c=Sc.decode(t).replace(/[\s\u0000-\u001F]+/g,"");return!U4(r,c,o)}}static getDocumentBaseUrl(t){let o;return t.protocol.indexOf("http")!==0&&t.protocol!=="file:"?o=t.href??"":o=t.protocol+"//"+t.host+t.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/")),o}setPath(t){const o=/^(.*?)\/?(\w+)?$/.exec(t);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(t){if(t==="./")return t;const o=new $u(t,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),c=o.getURI();if(r===c||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===c)return r;let u=this.toRelPath(this.path,o.path);return o.query&&(u+="?"+o.query),o.anchor&&(u+="#"+o.anchor),u}toAbsolute(t,o){const r=new $u(t,{base_uri:this});return r.getURI(o&&this.isSameOrigin(r))}isSameOrigin(t){if(this.host==t.host&&this.protocol==t.protocol){if(this.port==t.port)return!0;const o=this.protocol?JB[this.protocol]:null;if(o&&(this.port||o)==(t.port||o))return!0}return!1}toRelPath(t,o){let r=0,c="",u,f;const b=t.substring(0,t.lastIndexOf("/")).split("/"),v=o.split("/");if(b.length>=v.length){for(u=0,f=b.length;u<f;u++)if(u>=v.length||b[u]!==v[u]){r=u+1;break}}if(b.length<v.length){for(u=0,f=v.length;u<f;u++)if(u>=b.length||b[u]!==v[u]){r=u+1;break}}if(r===1)return o;for(u=0,f=b.length-(r-1);u<f;u++)c+="../";for(u=r-1,f=v.length;u<f;u++)u!==r-1?c+="/"+v[u]:c+=v[u];return c}toAbsPath(t,o){let r=0;const c=/\/$/.test(o)?"/":"",u=t.split("/"),f=o.split("/"),b=[];YB(u,D=>{D&&b.push(D)});const v=[];for(let D=f.length-1;D>=0;D--)if(!(f[D].length===0||f[D]===".")){if(f[D]===".."){r++;continue}if(r>0){r--;continue}v.push(f[D])}const w=b.length-r;let _;return w<=0?_=Cs(v).join("/"):_=b.slice(0,w).join("/")+"/"+Cs(v).join("/"),_.indexOf("/")!==0&&(_="/"+_),c&&_.lastIndexOf("/")!==_.length-1&&(_+=c),_}getURI(t=!1){let o;return(!this.source||t)&&(o="",t||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const IV=Ke.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Iu="data-mce-type";let Vl=0;const bS=(e,t,o,r,c)=>{const u=t.validate,f=o.getSpecialElements();e.nodeType===Za&&(!t.allow_conditional_comments&&/^\[if/i.test(e.nodeValue??"")&&(e.nodeValue=" "+e.nodeValue),t.sanitize&&t.allow_html_in_comments&&U(e.nodeValue)&&(e.nodeValue=lV(e.nodeValue)));const b=(c==null?void 0:c.tagName)??e.nodeName.toLowerCase();if(r!=="html"&&o.isValid(r)){de(c)&&(c.allowedTags[b]=!0);return}if(e.nodeType!==cp||b==="body")return;const v=Y.fromDom(e),w=is(v,Iu),_=es(v,"data-mce-bogus");if(!w&&U(_)){_==="all"?Zo(v):li(v);return}const D=o.getElementRule(b);if(u&&!D){Sn(f,b)?Zo(v):li(v);return}else de(c)&&(c.allowedTags[b]=!0);if(u&&D&&!w){if(ne(D.attributesForced??[],M=>{hs(v,M.name,M.value==="{$uid}"?`mce_${Vl++}`:M.value)}),ne(D.attributesDefault??[],M=>{is(v,M.name)||hs(v,M.name,M.value==="{$uid}"?`mce_${Vl++}`:M.value)}),D.attributesRequired&&!Ge(D.attributesRequired,M=>is(v,M))){li(v);return}if(D.removeEmptyAttrs&&Ag(v)){li(v);return}D.outputName&&D.outputName!==b&&lp(v,D.outputName)}},tP=(e,t,o,r,c)=>{const u=e.tagName.toLowerCase(),{attrName:f,attrValue:b}=c;c.keepAttr=vS(t,o,r,u,f,b),c.keepAttr?(c.allowedAttributes[f]=!0,IO(f,o,e.nodeName)&&(c.attrValue=f),t.allow_svg_data_urls&&pn(b,"data:image/svg+xml")&&(c.forceKeepAttr=!0)):$O(e,f)&&(c.forceKeepAttr=!0)},vS=(e,t,o,r,c,u)=>o!=="html"&&!mf(r)?!0:!(c in IV&&U4(e,u,r))&&(!e.validate||t.isValid(r,c)||pn(c,"data-")||pn(c,"aria-")),$O=(e,t)=>e.hasAttribute(Iu)&&(t==="id"||t==="class"||t==="style"),IO=(e,t,o)=>e in t.getBoolAttrs()&&!Sn(t.getCustomElements(),o.toLowerCase()),nP=(e,t,o,r)=>{const{attributes:c}=e;for(let u=c.length-1;u>=0;u--){const f=c[u],b=f.name,v=f.value;!vS(t,o,r,e.tagName.toLowerCase(),b,v)&&!$O(e,b)?e.removeAttribute(b):IO(b,o,e.nodeName)&&e.setAttribute(b,b)}},oP=(e,t,o)=>{const r=V4();return r.addHook("uponSanitizeElement",(c,u)=>{bS(c,e,t,o.track(c),u)}),r.addHook("uponSanitizeAttribute",(c,u)=>{tP(c,e,t,o.current(),u)}),r},sP=(e,t)=>{const r={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body","html"],ALLOWED_ATTR:[]}};return r.PARSER_MEDIA_TYPE=t,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r},rP=e=>{const t=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(r=>`xlink:${r}`),o={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:t};V4().sanitize(e,o)},Z4=(e,t)=>{const o={IN_PLACE:!0,USE_PROFILES:{mathMl:!0}},r=V4(),c=t.allow_mathml_annotation_encodings,u=Yt(c)&&c.length>0,f=v=>{const w=v.getAttribute("encoding");return u&&U(w)&&Ce(c,w)},b=(v,w)=>u&&w==="semantics"?B.some(!0):w==="annotation"?B.some(it(v)&&f(v)):Yt(t.extended_mathml_elements)&&t.extended_mathml_elements.includes(w)?B.from(!0):B.none();r.addHook("uponSanitizeElement",(v,w)=>{const _=w.tagName??v.nodeName.toLowerCase();b(v,_).each(M=>{w.allowedTags[_]=M,!M&&t.sanitize&&it(v)&&v.remove()})}),r.addHook("uponSanitizeAttribute",(v,w)=>{Yt(t.extended_mathml_attributes)&&t.extended_mathml_attributes.includes(w.attrName)&&(w.forceKeepAttr=!0)}),r.sanitize(e,o)},LO=e=>t=>{const o=my(t);if(o==="svg")rP(t);else if(o==="math")Z4(t,e);else throw new Error("Not a namespace element")},LV=(e,t)=>{const o=lx();if(e.sanitize){const r=oP(e,t,o);return{sanitizeHtmlElement:(u,f)=>{r.sanitize(u,sP(e,f)),r.removed=[],o.reset()},sanitizeNamespaceElement:LO(e)}}else return{sanitizeHtmlElement:(u,f)=>{const b=document.createNodeIterator(u,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let v;for(;v=b.nextNode();){const w=o.track(v);bS(v,e,t,w),it(v)&&nP(v,e,t,w)}o.reset()},sanitizeNamespaceElement:yt}},aP=["script","style","template","param","meta","title","link"],cP=Ke.makeMap,iP=Ke.extend,FO=(e,t,o,r,c)=>{const u=e.name,f=u in o&&u!=="title"&&u!=="textarea"&&u!=="noscript",b=t.childNodes;for(let v=0,w=b.length;v<w;v++){const _=b[v],D=new Zr(_.nodeName.toLowerCase(),_.nodeType);if(it(_)){const M=_.attributes;for(let L=0,W=M.length;L<W;L++){const V=M[L];D.attr(V.name,V.value)}mf(D.name)&&(r(_),D.value=_.innerHTML)}else Ye(_)?(D.value=_.data,f&&(D.raw=!0)):Tn(_)?D.value=c?uV(_.data):_.data:(cy(_)||ur(_))&&(D.value=_.data);if(ly(_)){const M=Zr.create("#text");M.value=_.innerHTML,M.raw=!0,D.append(M)}else mf(D.name)||FO(D,_,o,r,c);e.append(D)}},FV=(e,t,o)=>{const r=[];for(let c=e,u=c;c;u=c,c=c.walk()){const f=c;ne(t,b=>b(f)),Le(f.parent)&&f!==e?c=u:r.push(f)}for(let c=r.length-1;c>=0;c--){const u=r[c];ne(o,f=>f(u))}},HV=(e,t,o,r)=>{const c=o.validate,u=t.getNonEmptyElements(),f=t.getWhitespaceElements(),b=iP(cP(aP),t.getBlockElements()),v=G0(t),w=/[ \t\r\n]+/g,_=/^[ \t\r\n]+/,D=/[ \t\r\n]+$/,M=ce=>{let me=ce.parent;for(;de(me);){if(me.name in f)return!0;me=me.parent}return!1},L=ce=>{let me=ce;for(;de(me);){if(me.name in v)return mS(t,u,f,me);me=me.parent}return!1},W=ce=>ce.name in b||Cc(t,ce)||mf(ce.name)&&ce.parent===e,V=(ce,me)=>{const _e=me?ce.prev:ce.next;return de(_e)||Le(ce.parent)?!1:W(ce.parent)&&(ce.parent!==e||r.isRootContent===!0)};return[ce=>{if(ce.type===3&&!M(ce)){let me=ce.value??"";me=me.replace(w," "),(Bd(ce.prev,W)||V(ce,!0))&&(me=me.replace(_,"")),me.length===0||me===" "&&ce.prev&&ce.prev.type===Za&&ce.next&&ce.next.type===Za?ce.remove():ce.value=me}},ce=>{if(ce.type===1){const me=t.getElementRule(ce.name);if(c&&me){const _e=mS(t,u,f,ce);me.paddInEmptyBlock&&_e&&L(ce)?_h(o,r,W,ce):me.removeEmpty&&_e?W(ce)?ce.remove():ce.unwrap():me.paddEmpty&&(_e||vv(ce))&&_h(o,r,W,ce)}}else if(ce.type===3&&!M(ce)){let me=ce.value??"";(ce.next&&W(ce.next)||V(ce,!1))&&(me=me.replace(D,"")),me.length===0?ce.remove():ce.value=me}}]},HO=(e,t)=>{const o=t.forced_root_block??e.forced_root_block;return o===!1?"":o===!0?"p":o},lP=' xmlns="http://www.w3.org/1999/xhtml"',Sv=(e={},t=Hr())=>{const o=IB(),r=IB(),c={validate:!0,root_name:"body",sanitize:!0,allow_html_in_comments:!1,...e},u=new DOMParser,f=LV(c,t),b=(me,_e,Ie="html",ut=!1)=>{const $t=Ie==="xhtml",Ae=$t?"application/xhtml+xml":"text/html",ve=Sn(t.getSpecialElements(),_e.toLowerCase()),Oe=ve?`<${_e}>${me}</${_e}>`:me,dt=()=>/^[\s]*<head/i.test(me)||/^[\s]*<html/i.test(me)||/^[\s]*<!DOCTYPE/i.test(me)?`<html${$t?lP:""}>${Oe}</html>`:$t?`<html${lP}><head></head><body>${Oe}</body></html>`:`<body>${Oe}</body>`,en=u.parseFromString(dt(),Ae),tn=ut?en.documentElement:en.body;return f.sanitizeHtmlElement(tn,Ae),ve?tn.firstChild:tn},v=o.addFilter,w=o.getFilters,_=o.removeFilter,D=r.addFilter,M=r.getFilters,L=r.removeFilter,W=(me,_e)=>{fS(t,me)&&_e.push(me)},V=(me,_e)=>{const Ie=U(_e.attr(Iu)),ut=_e.type===1&&!Sn(me,_e.name)&&!Cc(t,_e)&&!mf(_e.name);return _e.type===3||ut&&!Ie},q=(me,_e)=>{const Ie=iP(cP(aP),t.getBlockElements()),ut=/^[ \t\r\n]+/,$t=/[ \t\r\n]+$/;let Ae=me.firstChild,ve=null;const Oe=dt=>{var en,tn;dt&&(Ae=dt.firstChild,Ae&&Ae.type===3&&(Ae.value=(en=Ae.value)==null?void 0:en.replace(ut,"")),Ae=dt.lastChild,Ae&&Ae.type===3&&(Ae.value=(tn=Ae.value)==null?void 0:tn.replace($t,"")))};if(t.isValidChild(me.name,_e.toLowerCase())){for(;Ae;){const dt=Ae.next;V(Ie,Ae)?(ve||(ve=new Zr(_e,1),ve.attr(c.forced_root_block_attrs),me.insert(ve,Ae)),ve.append(Ae)):(Oe(ve),ve=null),Ae=dt}Oe(ve)}},ce={schema:t,addAttributeFilter:D,getAttributeFilters:M,removeAttributeFilter:L,addNodeFilter:v,getNodeFilters:w,removeNodeFilter:_,parse:(me,_e={})=>{const Ie=c.validate,ut=(_e.context??c.root_name)==="#document",$t=_e.context??(ut?"html":c.root_name),Ae=b(me,$t,_e.format,ut);Cr(t,Ae);const ve=new Zr($t,11);FO(ve,Ae,t.getSpecialElements(),f.sanitizeNamespaceElement,c.sanitize&&c.allow_html_in_comments),Ae.innerHTML="";const[Oe,dt]=HV(ve,t,c,_e),en=[],tn=Ie?cs=>W(cs,en):yt,Wn={nodes:{},attributes:{}},xo=cs=>vO(w(),M(),cs,Wn);FV(ve,[Oe,xo],[dt,tn]),en.reverse(),Ie&&en.length>0&&(_e.context?_e.invalid=!0:PB(en,t,ve,xo));const Ko=HO(c,_e);return Ko&&(ve.name==="body"||_e.isRootContent)&&q(ve,Ko),_e.invalid||NB(Wn,_e),ve}};return xV(ce,c),fV(ce,c,t),ce},W4=e=>e instanceof Zr,zV=e=>W4(e)?wh({validate:!1}).serialize(e):e,uP=(e,t,o)=>{const r=zV(e),c=t(r);if(c.isDefaultPrevented())return c;if(W4(e))if(c.content!==r){const u=Sv({validate:!1,forced_root_block:!1,...o}).parse(c.content,{context:e.name});return{...c,content:u}}else return{...c,content:e};else return c},dP=e=>({sanitize:qb(e),sandbox_iframes:vh(e),sandbox_iframes_exclusions:Td(e)}),mP=(e,t)=>{if(t.no_events)return ma.value(t);{const o=gh(e,t);return o.isDefaultPrevented()?ma.error(eE(e,{content:"",...o}).content):ma.value(o)}},yS=(e,t,o)=>o.no_events?t:uP(t,c=>eE(e,{...o,content:c}),dP(e)).content,CS=(e,t)=>{if(t.no_events)return ma.value(t);{const o=uP(t.content,r=>C_(e,{...t,content:r}),dP(e));return o.isDefaultPrevented()?(Qx(e,o),ma.error(void 0)):ma.value(o)}},zO=(e,t,o)=>{o.no_events||Qx(e,{...o,content:t})},VV="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),UV=["content_css_cors"],ZV="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),VO=[{name:"export",replacedWith:"Export to PDF"}],fP=(e,t)=>{const o=ge(t,r=>Sn(e,r));return ou(o)},WV=e=>{const t=fP(e,VV),o=e.forced_root_block;return(o===!1||o==="")&&t.push("forced_root_block (false only)"),ou(t)},UO=e=>fP(e,UV),gP=(e,t)=>{const o=Ke.makeMap(e.plugins," "),c=ge(t,u=>Sn(o,u));return ou(c)},jV=e=>gP(e,ZV),GV=e=>gP(e,VO.map(t=>t.name)),qV=(e,t)=>{const o=WV(e),r=jV(t),c=r.length>0,u=o.length>0,f=t.theme==="mobile";if(c||u||f){const b=`
- `,v=f?`

Themes:${b}mobile`:"",w=c?`

Plugins:${b}${r.join(b)}`:"",_=u?`

Options:${b}${o.join(b)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 8.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/8/migration-from-7x/ for more information."+v+w+_)}},KV=e=>To(VO,t=>t.name===e).fold(()=>e,t=>t.replacedWith?`${e}, replaced by ${t.replacedWith}`:e),YV=(e,t)=>{const o=UO(e),r=GV(t),c=r.length>0,u=o.length>0;if(c||u){const f=`
- `,b=c?`

Plugins:${f}${r.map(KV).join(f)}`:"",v=u?`

Options:${f}${o.join(f)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+b+v)}},XV=(e,t)=>{qV(e,t),YV(e,t)},j4={fire:'The "fire" event api has been deprecated and will be removed in TinyMCE 9. Use "dispatch" instead.',selectionSetContent:'The "editor.selection.setContent" method has been deprecated and will be removed in TinyMCE 9. Use "editor.insertContent" instead.'},SS=e=>{console.warn(j4[e],new Error().stack)},hP=e=>e.dom.length===0?(Zo(e),B.none()):B.some(e),JV=(e,t)=>e.filter(o=>dv.isBookmarkNode(o.dom)).bind(t?lu:ci),G4=(e,t,o,r,c)=>{const u=e.dom,f=t.dom,b=r?u.length:f.length;r?(w4(u,f,c,!1,!r),o.setStart(f,b)):(w4(f,u,c,!1,!r),o.setEnd(f,b))},QV=(e,t,o)=>{Lc(e).each(r=>{const c=e.dom;t&&oS(r,ke(c,0),o)?C4(c,0,o):!t&&Fa(r,ke(c,c.length),o)&&S4(c,c.length,o)})},pP=(e,t,o,r,c)=>{e.bind(u=>((r?S4:C4)(u.dom,r?u.dom.length:0,c),t.filter(fo).map(b=>G4(u,b,o,r,c)))).orThunk(()=>JV(t,r).or(t).filter(fo).map(f=>QV(f,r,c)))},eU=(e,t,o)=>{const r=B.from(t.firstChild).map(Y.fromDom),c=B.from(t.lastChild).map(Y.fromDom);e.deleteContents(),e.insertNode(t);const u=r.bind(ci).filter(fo).bind(hP),f=c.bind(lu).filter(fo).bind(hP);pP(u,r,e,!0,o),pP(f,c,e,!1,o),e.collapse(!1)},tU=(e,t)=>({format:"html",...e,set:!0,selection:!0,content:t}),nU=(e,t)=>{if(t.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),c=r?{context:r.nodeName.toLowerCase()}:{},u=e.parser.parse(t.content,{forced_root_block:!1,...c,...t});return wh({validate:!1},e.schema).serialize(u)}else return t.content},q4=(e,t,o={})=>{const r=tU(o,t);CS(e,r).each(c=>{const u=nU(e,c),f=e.selection.getRng();eU(f,f.createContextualFragment(u),e.schema),e.selection.setRng(f),Qi(e,f),zO(e,u,c)})},oU=(e,t,o={})=>{SS("selectionSetContent"),q4(e,t,o)},sU=e=>de(e.firstChild)&&e.firstChild===e.lastChild,rU=e=>e.name==="br"||e.value===Zs,aU=(e,t)=>e.getBlockElements()[t.name]&&sU(t)&&rU(t.firstChild),cU=(e,t)=>{const o=e.getNonEmptyElements();return de(t)&&(t.isEmpty(o)||aU(e,t))},GJ=(e,t)=>{let o=t.firstChild,r=t.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),cU(e,r)&&(r=r==null?void 0:r.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},Lu=e=>{var r,c;const t=e.firstChild,o=e.lastChild;return t&&t.nodeName==="META"&&((r=t.parentNode)==null||r.removeChild(t)),o&&o.id==="mce_marker"&&((c=o.parentNode)==null||c.removeChild(o)),e},bP=(e,t,o)=>{const r=t.serialize(o),c=e.createFragment(r);return Lu(c)},iU=e=>ge((e==null?void 0:e.childNodes)??[],t=>t.nodeName==="LI"),vP=e=>e.data===Zs||ds(e),lU=e=>de(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&vP(e.firstChild),uU=e=>!e.firstChild||lU(e),qJ=e=>e.length>0&&uU(e[e.length-1])?e.slice(0,-1):e,la=(e,t)=>{const o=e.getParent(t,e.isBlock);return o&&o.nodeName==="LI"?o:null},dU=(e,t)=>!!la(e,t),ZO=(e,t)=>{const o=t.cloneRange(),r=t.cloneRange();return o.setStartBefore(e),r.setEndAfter(e),[o.cloneContents(),r.cloneContents()]},yP=(e,t)=>{const o=ke.before(e),c=Ll(t).next(o);return c?c.toRange():null},wS=(e,t)=>{const o=ke.after(e),c=Ll(t).prev(o);return c?c.toRange():null},mU=(e,t,o,r)=>{const c=ZO(e,r),u=e.parentNode;return u&&(u.insertBefore(c[0],e),Ke.each(t,f=>{u.insertBefore(f,e)}),u.insertBefore(c[1],e),u.removeChild(e)),wS(t[t.length-1],o)},fU=(e,t,o)=>{const r=e.parentNode;return r&&Ke.each(t,c=>{r.insertBefore(c,e)}),yP(e,o)},gU=(e,t,o,r)=>(r.insertAfter(t.reverse(),e),wS(t[0],o)),hU=(e,t,o,r)=>{const c=bP(t,e,r),u=la(t,o.startContainer),f=qJ(iU(c.firstChild)),b=1,v=2,w=t.getRoot(),_=D=>{const M=ke.fromRangeStart(o),L=Ll(t.getRoot()),W=D===b?L.prev(M):L.next(M),V=W==null?void 0:W.getNode();return V?la(t,V)!==u:!0};return u?_(b)?fU(u,f,w):_(v)?gU(u,f,w,t):mU(u,f,w,o):null},pU=["pre"],CP=(e,t,o,r)=>{var w;const c=t.firstChild,u=t.lastChild,f=u.attr("data-mce-type")==="bookmark"?u.prev:u,b=c===f,v=Ce(pU,c.name);if(b&&v){const _=c.attr("contenteditable")!=="false",D=((w=e.getParent(o,e.isBlock))==null?void 0:w.nodeName.toLowerCase())===c.name,M=B.from(Md(r,o)).forall(vc);return _&&D&&M}else return!1},WO=Lg,SP=(e,t,o)=>{if(de(o)){const r=e.getParent(t.endContainer,WO);return o===r&&Hf(Y.fromDom(o),t)}else return!1},wP=(e,t)=>{if(e.isBlock(t)&&e.isEditable(t)){const o=t.childNodes;return o.length===1&&ds(o[0])||o.length===0}else return!1},bU=(e,t,o)=>{var r;o.getAttribute("data-mce-bogus")==="all"?(r=o.parentNode)==null||r.insertBefore(e.dom.createFragment(t),o):wP(e.dom,o)?e.dom.setHTML(o,t):q4(e,t,{no_events:!0})},vU=(e,t,o)=>{B.from(e.getParent(t,"td,th")).map(Y.fromDom).each(r=>Ry(r,o))},yU=(e,t)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(t){const c=e.getBody(),u=Nd(e),f="*[data-mce-fragment]",b=r.select(f);Ke.each(b,v=>{const w=M=>de(o[M.nodeName.toLowerCase()]),_=M=>M.childNodes.length===1;if((M=>!(dN(r,M)||mN(r,M)))(v)&&w(v)&&_(v)){const M=hv(r,v),L=(ae,ce)=>ul(ae,me=>Ce(ce,me)),W=ae=>_(v)&&r.is(ae,f)&&w(ae)&&(ae.nodeName===v.nodeName&&L(M,hv(r,ae))||W(ae.children[0])),V=ae=>de(ae)&&ae!==c&&(u.compare(v,ae)||V(ae.parentElement)),q=ae=>de(ae)&&ae!==c&&r.is(ae,f)&&(V9(r,v,ae)||q(ae.parentElement));(W(v.children[0])||V(v.parentElement)&&!q(v.parentElement))&&r.remove(v,!0)}}),tV(e,lf(b))}},CU=e=>{let t=e;for(;t=t.walk();)t.type===1&&t.attr("data-mce-fragment","1")},SU=e=>{Ke.each(e.getElementsByTagName("*"),t=>{t.removeAttribute("data-mce-fragment")})},K4=e=>!!e.getAttribute("data-mce-fragment"),xP=(e,t)=>de(t)&&!e.schema.getVoidElements()[t.nodeName],EP=(e,t)=>{var _,D;let o;const r=e.dom,c=e.selection;if(!t)return;c.scrollIntoView(t);const u=Md(e.getBody(),t);if(u&&r.getContentEditable(u)==="false"){r.remove(t),c.select(u);return}let f=r.createRng();const b=t.previousSibling;if(Ye(b)){f.setStart(b,((_=b.nodeValue)==null?void 0:_.length)??0);const M=t.nextSibling;Ye(M)&&(b.appendData(M.data),(D=M.parentNode)==null||D.removeChild(M))}else f.setStartBefore(t),f.setEndBefore(t);const v=M=>{let L=ke.fromRangeStart(M);return L=Ll(e.getBody()).next(L),L==null?void 0:L.toRange()},w=r.getParent(t,r.isBlock);if(r.remove(t),w&&r.isEmpty(w)){const M=WO(w);Ii(Y.fromDom(w)),f.setStart(w,0),f.setEnd(w,0),!M&&!K4(w)&&(o=v(f))?(f=o,r.remove(w)):r.add(w,r.create("br",M?{}:{"data-mce-bogus":"1"}))}c.setRng(f)},wU=e=>{const t=e.dom,o=CO(e.selection.getRng());e.selection.setRng(o);const r=t.getParent(o.startContainer,WO);SP(t,o,r)?E4(e,o,Y.fromDom(r)):LH(o)||IH(o)?o.deleteContents():e.getDoc().execCommand("Delete",!1)},TP=e=>{for(let t=e;t;t=t.walk())if(t.attr("id")==="mce_marker")return B.some(t);return B.none()},xU=(e,t,o)=>{var r;return Ge(o.children(),Kc)&&((r=e.getParent(t,e.isBlock))==null?void 0:r.nodeName)==="SUMMARY"},EU=(e,t,o)=>{var q;const r=e.selection,c=e.dom,u=e.parser,f=o.merge,b=wh({validate:!0},e.schema),v='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';o.preserve_zwsp||(t=Xa(t)),t.indexOf("{$caret}")===-1&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,v);let w=r.getRng();const _=w.startContainer,D=e.getBody();_===D&&r.isCollapsed()&&c.isBlock(D.firstChild)&&xP(e,D.firstChild)&&c.isEmpty(D.firstChild)&&(w=c.createRng(),w.setStart(D.firstChild,0),w.setEnd(D.firstChild,0),r.setRng(w)),r.isCollapsed()||wU(e);const M=r.getNode(),L={context:M.nodeName.toLowerCase(),data:o.data,insert:!0},W=u.parse(t,L);if(o.paste===!0&&GJ(e.schema,W)&&dU(c,M))return w=hU(b,c,r.getRng(),W),w&&r.setRng(w),t;o.paste===!0&&CP(c,W,M,e.getBody())&&((q=W.firstChild)==null||q.unwrap()),CU(W);let V=W.lastChild;if(V&&V.attr("id")==="mce_marker"){const ae=V;for(V=V.prev;V&&V.name!=="table";V=V.walk(!0))if(V.type===3||!c.isBlock(V.name)){V.parent&&e.schema.isValidChild(V.parent.name,"span")&&V.parent.insert(ae,V,V.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(M),!L.invalid&&!xU(c,M,W))t=b.serialize(W),bU(e,t,M);else{q4(e,v);let ae=r.getNode(),ce;const me=e.getBody();for(dd(ae)?ae=ce=me:ce=ae;ce&&ce!==me;)ae=ce,ce=ce.parentNode;t=ae===me?me.innerHTML:c.getOuterHTML(ae);const _e=u.parse(t),Ie=TP(_e),ut=Ie.bind(aV).getOr(_e);Ie.each(ve=>ve.replace(W));const $t=cV(W);W.unwrap();const Ae=ge($t,ve=>fS(e.schema,ve));PB(Ae,e.schema,ut),BB(u.getNodeFilters(),u.getAttributeFilters(),_e),t=b.serialize(_e),ae===me?c.setHTML(me,t):c.setOuterHTML(ae,t)}return yU(e,f),EP(e,c.get("mce_marker")),SU(e.getBody()),vU(c,r.getStart(),e.schema),U0(e.schema,e.getBody(),r.getStart()),t},TU=e=>{fv(e)&&y(e.getBody()).each(t=>{const o=t.getNode(),r=ja(o)?y(o).getOr(t):t;e.selection.setRng(r.toRange())})},xS=(e,t,o)=>{e.dom.setHTML(e.getBody(),t),o!==!0&&TU(e)},jO=(e,t,o,r)=>{if(o=Xa(o),o.length===0||/^\s+$/.test(o)){const c='<br data-mce-bogus="1">';t.nodeName==="TABLE"?o="<tr><td>"+c+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(o="<li>"+c+"</li>");const u=Ys(e);return e.schema.isValidChild(t.nodeName.toLowerCase(),u.toLowerCase())?(o=c,o=e.dom.createHTML(u,Yi(e),o)):o||(o=c),xS(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=wh({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const c=lb(Y.fromDom(t))?o:Ke.trim(o);return xS(e,c,r.no_selection),{content:c,html:c}}},kU=(e,t,o,r)=>{BB(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const c=wh({validate:!1},e.schema).serialize(o),u=Xa(lb(Y.fromDom(t))?c:Ke.trim(c));return xS(e,u,r.no_selection),{content:o,html:u}},GO=(e,t,o)=>B.from(e.getBody()).map(r=>W4(t)?kU(e,r,t,o):jO(e,r,t,o)).getOr({content:t,html:W4(o.content)?"":o.content}),ES={},kP=di(["pre"]),_U=(e,t)=>{ES[e]||(ES[e]=[]),ES[e].push(t)},AU=(e,t)=>{Sn(ES,e)&&ne(ES[e],o=>{o(t)})};_U("pre",e=>{const t=e.selection.getRng(),o=c=>u=>{const f=u.previousSibling;return kP(f)&&Ce(c,f)},r=(c,u)=>{const f=Y.fromDom(u),b=Cl(f).dom;Zo(f),ii(Y.fromDom(c),[Y.fromTag("br",b),Y.fromTag("br",b),...ks(f)])};if(!t.collapsed){const c=e.selection.getSelectedBlocks(),u=ge(ge(c,kP),o(c));ne(u,f=>{r(f.previousSibling,f)})}});const _P=Ke.each,OU=(e,t,o,r)=>{const c=u=>{if(Wa(u)&&it(u.parentNode)&&e.isEditable(u)){const f=C6(e,u.parentNode);e.getStyle(u,"color")&&f?e.setStyle(u,"text-decoration",f):e.getStyle(u,"text-decoration")===f&&e.setStyle(u,"text-decoration",null)}};t.styles&&(t.styles.color||t.styles.textDecoration)&&(Ke.walk(r,c,"childNodes"),c(r))},AP=(e,t,o,r)=>{if(t.styles&&t.styles.backgroundColor){const c=dO(e,"fontSize");uO(r,u=>c(u)&&e.isEditable(u),SB(e,"backgroundColor",zf(t.styles.backgroundColor,o)))}},DU=(e,t,o,r)=>{if(ca(t)&&(t.inline==="sub"||t.inline==="sup")){const c=dO(e,"fontSize");uO(r,f=>c(f)&&e.isEditable(f),SB(e,"fontSize",""));const u=ge(e.select(t.inline==="sup"?"sub":"sup",r),e.isEditable);e.remove(u,!0)}},RU=(e,t,o,r)=>{_P(t,c=>{ca(c)&&_P(e.dom.select(c.inline,r),u=>{lO(u)&&dS(e,c,o,u,c.exact?u:null)}),Uz(e.dom,c,r)})},MU=(e,t,o,r,c)=>{const u=c.parentNode;zl(e,u,o,r)&&dS(e,t,r,c)||t.merge_with_parents&&u&&e.dom.getParent(u,f=>zl(e,f,o,r)?(dS(e,t,r,c),!0):!1)},NU=Ke.each,BU=(e,t,o,r)=>{if(m6(e)&&ca(t)&&o.parentNode){const c=G0(e.schema),u=S3(Y.fromDom(o),f=>N(f.dom));return Ss(c,r)&&Vt(e.schema,o.parentNode,{skipBogus:!1,includeZwsp:!0})&&!u}else return!1},PU=(e,t,o,r)=>{const c=e.formatter.get(t),u=c[0],f=!r&&e.selection.isCollapsed(),b=e.dom,v=e.selection,w=(L,W)=>{let V=!1;return NU(L,q=>Au(q)?b.getContentEditable(W)==="false"&&!q.ceFalseOverride||de(q.collapsed)&&q.collapsed!==f?!0:b.is(W,q.selector)&&!N(W)?(y1(e,W,q,o,W),V=!0,!1):!0:!1),V},_=L=>{if(U(L)){const W=b.create(L);return y1(e,W,u,o,r),W}else return null},D=(L,W,V)=>{const q=[];let ae=!0;const ce=u.inline||u.block,me=_(ce),_e=$t=>zH(u)&&zl(e,$t,t,o),Ie=($t,Ae,ve)=>{const Oe=VH(u)&&jC(e.schema,$t)&&lv(e,Ae,ce);return ve&&Oe},ut=($t,Ae,ve,Oe)=>{const dt=$t.nodeName.toLowerCase(),en=lv(e,ce,dt)&&lv(e,Ae,ce),tn=!V&&Ye($t)&&Bp($t.data),Wn=N($t),xo=!ca(u)||!L.isBlock($t);return(ve||Oe)&&en&&!tn&&!Wn&&xo};Ou(L,W,$t=>{let Ae;const ve=Oe=>{let dt=!1,en=ae,tn=!1;const Wn=Oe.parentNode,xo=Wn.nodeName.toLowerCase(),Ko=L.getContentEditable(Oe);de(Ko)&&(en=ae,ae=Ko==="true",dt=!0,tn=y6(e,Oe));const cs=ae&&!dt;if(ds(Oe)&&!BU(e,u,Oe,xo)){Ae=null,Od(u)&&L.remove(Oe);return}if(_e(Oe)){Ae=null;return}if(Ie(Oe,xo,cs)){const Gr=L.rename(Oe,ce);y1(e,Gr,u,o,Oe),q.push(Gr),Ae=null;return}if(Au(u)){let Gr=w(c,Oe);if(!Gr&&de(Wn)&&sA(u)&&(Gr=w(c,Wn)),!ca(u)||Gr){Ae=null;return}}de(me)&&ut(Oe,xo,cs,tn)?(Ae||(Ae=L.clone(me,!1),Wn.insertBefore(Ae,Oe),q.push(Ae)),tn&&dt&&(ae=en),Ae.appendChild(Oe)):(Ae=null,ne(Mr(Oe.childNodes),ve),dt&&(ae=en),Ae=null)};ne($t,ve)}),u.links===!0&&ne(q,$t=>{const Ae=ve=>{ve.nodeName==="A"&&y1(e,ve,u,o,r),ne(Mr(ve.childNodes),Ae)};Ae($t)}),eV(e,t,lf(q)),ne(q,$t=>{const Ae=dt=>{let en=0;return ne(dt.childNodes,tn=>{!FH(tn)&&!vs(tn)&&en++}),en},ve=dt=>To(dt.childNodes,WC).filter(tn=>L.getContentEditable(tn)!=="false"&&k4(L,tn,u)).map(tn=>{const Wn=L.clone(tn,!1);return y1(e,Wn,u,o,dt),L.replace(Wn,dt,!0),L.remove(tn,!0),Wn}).getOr(dt),Oe=Ae($t);if((q.length>1||!L.isBlock($t))&&Oe===0){L.remove($t,!0);return}(ca(u)||Od(u)&&u.wrapper)&&(!u.exact&&Oe===1&&($t=ve($t)),RU(e,c,o,$t),MU(e,u,t,o,$t),AP(L,u,o,$t),OU(L,u,o,$t),DU(L,u,o,$t),CB(e,u,o,$t))})},M=ZC(r)?r:v.getNode();if(b.getContentEditable(M)==="false"&&!y6(e,M)){r=M,w(c,r),xd(e,t,r,o);return}if(u){if(r)if(ZC(r)){if(!w(c,r)){const L=b.createRng();L.setStartBefore(r),L.setEndAfter(r),D(b,$m(b,L,c),!0)}}else D(b,r,!0);else!f||!ca(u)||Rt(e).length?(v.setRng(CO(v.getRng())),p6(e,()=>{VC(e,(L,W)=>{const V=W?L:$m(b,L,c);D(b,V,!1)})},gt),e.nodeChanged()):aB(e,t,o),zz(e.formatter,t).each(L=>{const W=iO(e.selection);ne(W,V=>XA(b,V,L,o))});AU(t,e)}xd(e,t,r,o)},OP=(e,t,o,r)=>{(r||e.selection.isEditable())&&PU(e,t,o,r)},E1=e=>Sn(e,"vars"),Y4=(e,t)=>{e.set({}),t.on("NodeChange",o=>{RP(t,o.element,e.get())}),t.on("FormatApply FormatRemove",o=>{const r=B.from(o.node).map(c=>ZC(c)?c:c.startContainer).bind(c=>it(c)?B.some(c):B.from(c.parentElement)).getOrThunk(()=>qO(t));RP(t,r,e.get())})},qO=e=>e.selection.getStart(),KO=(e,t,o,r,c)=>pr(t,b=>{const v=e.formatter.matchNode(b,o,c??{},r);return!Je(v)},b=>QN(e,b,o)?!0:r?!1:de(e.formatter.matchNode(b,o,c,!0))),DP=(e,t)=>{const o=t??qO(e);return ge(YE(e.dom,o),r=>it(r)&&!mm(r))},RP=(e,t,o)=>{const r=DP(e,t);Bn(o,(c,u)=>{const f=b=>{const v=KO(e,r,u,b.similar,E1(b)?b.vars:void 0),w=v.isSome();if(b.state.get()!==w){b.state.set(w);const _=v.getOr(t);E1(b)?b.callback(w,{node:_,format:u,parents:r}):ne(b.callbacks,D=>D(w,{node:_,format:u,parents:r}))}};ne([c.withSimilar,c.withoutSimilar],f),ne(c.withVars,f)})},YO=(e,t,o,r,c,u)=>{const f=t.get();ne(o.split(","),b=>{const v=Jo(f,b).getOrThunk(()=>{const _={withSimilar:{state:Xt(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Xt(!1),similar:!1,callbacks:[]},withVars:[]};return f[b]=_,_}),w=()=>{const _=DP(e);return KO(e,_,b,c,u).isSome()};if(Je(u)){const _=c?v.withSimilar:v.withoutSimilar;_.callbacks.push(r),_.callbacks.length===1&&_.state.set(w())}else v.withVars.push({state:Xt(w()),similar:c,vars:u,callback:r})}),t.set(f)},$U=(e,t,o)=>{const r=e.get();ne(t.split(","),c=>Jo(r,c).each(u=>{r[c]={withSimilar:{...u.withSimilar,callbacks:ge(u.withSimilar.callbacks,f=>f!==o)},withoutSimilar:{...u.withoutSimilar,callbacks:ge(u.withoutSimilar.callbacks,f=>f!==o)},withVars:ge(u.withVars,f=>f.callback!==o)}})),e.set(r)},IU=(e,t,o,r,c,u)=>(YO(e,t,o,r,c,u),{unbind:()=>$U(t,o,r)}),LU=(e,t,o,r)=>{const c=e.formatter.get(t);c&&(QA(e,t,o,r)&&(!("toggle"in c[0])||c[0].toggle)?O4(e,t,o,r):OP(e,t,o,r))},XO=(e,t,o)=>({element:e,width:t,rows:o}),MP=(e,t)=>({element:e,cells:t}),X4=(e,t)=>({x:e,y:t}),wv=(e,t)=>$i(e,t).bind(k2).getOr(1),FU=(e,t,o,r,c)=>{const u=wv(c,"rowspan"),f=wv(c,"colspan"),b=e.rows;for(let v=o;v<o+u;v++){b[v]||(b[v]=MP(ip(r),[]));for(let w=t;w<t+f;w++){const _=b[v].cells;_[w]=v===o&&w===t?c:ba(c)}}},xv=(e,t,o)=>{const r=e.rows;return!!(r[o]?r[o].cells:[])[t]},nl=(e,t,o)=>{for(;xv(e,t,o);)t++;return t},Ev=e=>kn(e,(t,o)=>o.cells.length>t?o.cells.length:t,0),Ao=(e,t)=>{const o=e.rows;for(let r=0;r<o.length;r++){const c=o[r].cells;for(let u=0;u<c.length;u++)if(Ln(c[u],t))return B.some(X4(u,r))}return B.none()},Tv=(e,t,o,r,c)=>{const u=[],f=e.rows;for(let b=o;b<=c;b++){const v=f[b].cells,w=t<r?v.slice(t,r+1):v.slice(r,t+1);u.push(MP(f[b].element,w))}return u},NP=(e,t,o)=>{const r=t.x,c=t.y,u=o.x,f=o.y,b=c<f?Tv(e,r,c,u,f):Tv(e,r,f,u,c);return XO(e.element,Ev(b),b)},BP=(e,t)=>{const o=ba(e.element),r=Y.fromTag("tbody");return ii(r,t),Qn(o,r),o},J4=e=>Ue(e.rows,t=>{const o=Ue(t.cells,c=>{const u=ip(c);return sr(u,"colspan"),sr(u,"rowspan"),u}),r=ba(t.element);return ii(r,o),r}),JO=e=>{const t=XO(ba(e),0,[]);return ne(Fr(e,"tr"),(o,r)=>{ne(Fr(o,"td,th"),(c,u)=>{FU(t,nl(t,u,r),r,o,c)})}),XO(t.element,Ev(t.rows),t.rows)},QO=e=>BP(e,J4(e)),eD=(e,t,o)=>Ao(e,t).bind(r=>Ao(e,o).map(c=>NP(e,r,c))),tD=e=>To(e,t=>An(t)==="ul"||An(t)==="ol"),Q4=(e,t)=>To(e,o=>An(o)==="li"&&Hf(o,t)).fold(qe([]),o=>tD(e).map(r=>{const c=Y.fromTag(An(r)),u=nf(Og(r),(f,b)=>pn(b,"list-style"));return ui(c,u),[Y.fromTag("li"),c]}).getOr([])),nD=(e,t)=>{const o=kn(t,(r,c)=>(Qn(c,r),c),e);return t.length>0?am([o]):o},PP=e=>Na(e)?Lc(e).filter(bi).fold(qe([]),t=>[e,t]):bi(e)?[e]:[],$P=(e,t,o)=>{const r=Y.fromDom(t.commonAncestorContainer),c=Mu(r,e),u=ge(c,v=>o.isWrapper(An(v))),f=Q4(c,t),b=u.concat(f.length?f:PP(r));return Ue(b,ba)},oD=()=>am([]),IP=(e,t,o)=>nD(Y.fromDom(t.cloneContents()),$P(e,t,o)),LP=(e,t)=>Ws(t,"table",ze(Ln,e)),T1=(e,t)=>LP(e,t[0]).bind(o=>{const r=t[0],c=t[t.length-1],u=JO(o);return eD(u,r,c).map(f=>am([QO(f)]))}).getOrThunk(oD),FP=(e,t,o)=>t.length>0&&t[0].collapsed?oD():IP(e,t[0],o),sD=(e,t,o)=>{const r=WE(t,e);return r.length>0?T1(e,r):FP(e,t,o)},eT=(e,t)=>t>=0&&t<e.length&&Or(e.charAt(t)),HP=e=>Xa(e.innerText),zP=e=>e.map(t=>t.nodeName).getOr("div").toLowerCase(),VP=e=>B.from(e.selection.getRng()).map(t=>{const o=B.from(e.dom.getParent(t.commonAncestorContainer,e.dom.isBlock)),r=e.getBody(),c=zP(o),u=Y.fromDom(t.cloneContents());cN(u),iN(u);const f=e.dom.add(r,c,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},u.dom),b=HP(f),v=Xa(f.textContent??"");if(e.dom.remove(f),eT(v,0)||eT(v,v.length-1)){const w=o.getOr(r),_=HP(w),D=_.indexOf(b);if(D===-1)return b;{const M=eT(_,D-1),L=eT(_,D+b.length);return(M?" ":"")+b+(L?" ":"")}}else return b}).getOr(""),UP=(e,t)=>{const o=e.selection.getRng(),r=e.dom.create("body"),c=e.selection.getSel(),u=EA(e,Sa(c)),f=t.contextual?sD(Y.fromDom(e.getBody()),u,e.schema).dom:o.cloneContents();return f&&r.appendChild(f),e.selection.serializer.serialize(r,t)},tT=(e,t)=>{if(t.format==="text")return VP(e);{const o=UP(e,t);return t.format==="tree"?o:e.selection.isCollapsed()?"":o}},ZP=(e,t)=>({...e,format:t,get:!0,selection:!0,getInner:!0}),WP=(e,t,o={})=>{const r=ZP(o,t);return mP(e,r).fold(Fo,c=>{const u=tT(e,c);return yS(e,u,c)})},nT=0,rD=1,aD=2,jP=(e,t)=>{const o=e.length+t.length+2,r=new Array(o),c=new Array(o),u=(_,D,M)=>({start:_,end:D,diag:M}),f=(_,D,M,L,W)=>{const V=v(_,D,M,L);if(V===null||V.start===D&&V.diag===D-L||V.end===_&&V.diag===_-M){let q=_,ae=M;for(;q<D||ae<L;)q<D&&ae<L&&e[q]===t[ae]?(W.push([nT,e[q]]),++q,++ae):D-_>L-M?(W.push([aD,e[q]]),++q):(W.push([rD,t[ae]]),++ae)}else{f(_,V.start,M,V.start-V.diag,W);for(let q=V.start;q<V.end;++q)W.push([nT,e[q]]);f(V.end,D,V.end-V.diag,L,W)}},b=(_,D,M,L)=>{let W=_;for(;W-D<L&&W<M&&e[W]===t[W-D];)++W;return u(_,W,D)},v=(_,D,M,L)=>{const W=D-_,V=L-M;if(W===0||V===0)return null;const q=W-V,ae=V+W,ce=(ae%2===0?ae:ae+1)/2;r[1+ce]=_,c[1+ce]=D+1;let me,_e,Ie,ut,$t;for(me=0;me<=ce;++me){for(_e=-me;_e<=me;_e+=2){for(Ie=_e+ce,_e===-me||_e!==me&&r[Ie-1]<r[Ie+1]?r[Ie]=r[Ie+1]:r[Ie]=r[Ie-1]+1,ut=r[Ie],$t=ut-_+M-_e;ut<D&&$t<L&&e[ut]===t[$t];)r[Ie]=++ut,++$t;if(q%2!==0&&q-me<=_e&&_e<=q+me&&c[Ie-q]<=r[Ie])return b(c[Ie-q],_e+_-M,D,L)}for(_e=q-me;_e<=q+me;_e+=2){for(Ie=_e+ce-q,_e===q-me||_e!==q+me&&c[Ie+1]<=c[Ie-1]?c[Ie]=c[Ie+1]-1:c[Ie]=c[Ie-1],ut=c[Ie]-1,$t=ut-_+M-_e;ut>=_&&$t>=M&&e[ut]===t[$t];)c[Ie]=ut--,$t--;if(q%2===0&&-me<=_e&&_e<=me&&c[Ie]<=r[Ie+q])return b(c[Ie],_e+_-M,D,L)}}return null},w=[];return f(0,e.length,0,t.length,w),w},cD=e=>it(e)?e.outerHTML:Ye(e)?Sc.encodeRaw(e.data,!1):Tn(e)?"<!--"+e.data+"-->":"",GP=e=>{let t;const o=document.createElement("div"),r=document.createDocumentFragment();for(e&&(o.innerHTML=e);t=o.firstChild;)r.appendChild(t);return r},qP=(e,t,o)=>{const r=GP(t);if(e.hasChildNodes()&&o<e.childNodes.length){const c=e.childNodes[o];e.insertBefore(r,c)}else e.appendChild(r)},KP=(e,t)=>{if(e.hasChildNodes()&&t<e.childNodes.length){const o=e.childNodes[t];e.removeChild(o)}},iD=(e,t)=>{let o=0;ne(e,r=>{r[0]===nT?o++:r[0]===rD?(qP(t,r[1],o),o++):r[0]===aD&&KP(t,o)})},YP=(e,t)=>ge(Ue(Mr(e.childNodes),T(Xa,cD)),o=>o.length>0),XP=(e,t)=>{const o=Ue(Mr(t.childNodes),cD);return iD(jP(o,e),t),t},JP=mc(()=>document.implementation.createHTMLDocument("undo")),QP=e=>e.querySelector("iframe")!==null,e$=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),t$=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),TS=e=>{const t=e.serializer.getTempAttrs(),o=aN(e.getBody(),t);return QP(o)?e$(YP(o)):t$(Xa(o.innerHTML))},kS=(e,t,o)=>{const r=o?t.beforeBookmark:t.bookmark;t.type==="fragmented"?XP(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:de(r)&&bt(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},kv=e=>e.type==="fragmented"?e.fragments.join(""):e.content,lD=(e,t)=>{const o=Y.fromTag("body",JP());return ad(o,kv(t)),ne(Fr(o,"*[data-mce-bogus]"),li),e&&ne(Fr(o,"details[open]"),r=>sr(r,"open")),va(o)},HU=(e,t)=>kv(e)===kv(t),n$=(e,t,o)=>lD(e,t)===lD(e,o),_v=(e,t,o)=>!t||!o?!1:HU(t,o)?!0:n$(e,t,o),_S=e=>e.get()===0,Rh=(e,t,o)=>{_S(o)&&(e.typing=t)},oT=(e,t)=>{e.typing&&(Rh(e,!1,t),e.add())},o$=e=>{e.typing&&(e.typing=!1,e.add())},Av=(e,t,o)=>{_S(t)&&o.set(ch(e.selection))},uD=(e,t,o,r,c,u,f)=>{const b=TS(e),v=Ke.extend(u||{},b);if(!_S(r)||e.removed)return null;const w=t.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:v,lastLevel:w,originalEvent:f}).isDefaultPrevented()||w&&_v(e.readonly,w,v))return null;t.data[o.get()]&&c.get().each(M=>{t.data[o.get()].beforeBookmark=M});const _=SE(e);if(_&&t.data.length>_){for(let M=0;M<t.data.length-1;M++)t.data[M]=t.data[M+1];t.data.length--,o.set(t.data.length)}v.bookmark=ch(e.selection),o.get()<t.data.length-1&&(t.data.length=o.get()+1),t.data.push(v),o.set(t.data.length-1);const D={level:v,lastLevel:w,originalEvent:f};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",D),e.dispatch("change",D)):e.dispatch("AddUndo",D),v},dD=(e,t,o)=>{t.data=[],o.set(0),t.typing=!1,e.dispatch("ClearUndos")},Ov=(e,t,o,r,c)=>{if(t.transact(r)){const u=t.data[o.get()].bookmark,f=t.data[o.get()-1];kS(e,f,!0),t.transact(c)&&(t.data[o.get()-1].beforeBookmark=u)}},Mh=(e,t,o)=>{let r;return t.get()<o.length-1&&(t.set(t.get()+1),r=o[t.get()],kS(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r},s$=(e,t,o,r)=>{let c;return t.typing&&(t.add(),t.typing=!1,Rh(t,!1,o)),r.get()>0&&(r.set(r.get()-1),c=t.data[r.get()],kS(e,c,!0),e.setDirty(!0),e.dispatch("Undo",{level:c})),c},zU=e=>{e.clear(),e.add()},VU=(e,t,o)=>o.get()>0||t.typing&&t.data[0]&&!_v(e.readonly,TS(e),t.data[0]),r$=(e,t)=>t.get()<e.data.length-1&&!e.typing,a$=(e,t,o)=>(oT(e,t),e.beforeChange(),e.ignore(o),e.add()),c$=(e,t)=>{try{e.set(e.get()+1),t()}finally{e.set(e.get()-1)}},UU=(e,t)=>{const o=e.dom,r=de(t)?t:e.getBody();ne(o.select("table,a",r),c=>{switch(c.nodeName){case"TABLE":const u=xE(e),f=o.getAttrib(c,"border");(!f||f==="0")&&e.hasVisual?o.addClass(c,u):o.removeClass(c,u);break;case"A":if(!o.getAttrib(c,"href")){const b=o.getAttrib(c,"name")||c.id,v=Wb(e);b&&e.hasVisual?o.addClass(c,v):o.removeClass(c,v)}break}}),e.dispatch("VisualAid",{element:t,hasVisual:e.hasVisual})},Gf=e=>({init:{bindEvents:yt},undoManager:{beforeChange:(t,o)=>Av(e,t,o),add:(t,o,r,c,u,f)=>uD(e,t,o,r,c,u,f),undo:(t,o,r)=>s$(e,t,o,r),redo:(t,o)=>Mh(e,t,o),clear:(t,o)=>dD(e,t,o),reset:t=>zU(t),hasUndo:(t,o)=>VU(e,t,o),hasRedo:(t,o)=>r$(t,o),transact:(t,o,r)=>a$(t,o,r),ignore:(t,o)=>c$(t,o),extra:(t,o,r,c)=>Ov(e,t,o,r,c)},formatter:{match:(t,o,r,c)=>QA(e,t,o,r,c),matchAll:(t,o)=>eO(e,t,o),matchNode:(t,o,r,c)=>zl(e,t,o,r,c),canApply:t=>tO(e,t),closest:t=>tB(e,t),apply:(t,o,r)=>OP(e,t,o,r),remove:(t,o,r,c)=>O4(e,t,o,r,c),toggle:(t,o,r)=>LU(e,t,o,r),formatChanged:(t,o,r,c,u)=>IU(e,t,o,r,c,u)},editor:{getContent:t=>L9(e,t),setContent:(t,o)=>GO(e,t,o),insertContent:(t,o)=>EU(e,t,o),addVisual:t=>UU(e,t)},selection:{getContent:(t,o)=>WP(e,t,o)},autocompleter:{addDecoration:yt,removeDecoration:yt},raw:{getModel:()=>B.none()}}),k1=e=>{const t=w=>At(w)?w:{},{init:o,undoManager:r,formatter:c,editor:u,selection:f,autocompleter:b,raw:v}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(w,_,D)=>r.transact(D),ignore:(w,_)=>r.ignore(_),extra:(w,_,D,M)=>r.extra(D,M)},formatter:{match:(w,_,D,M)=>c.match(w,t(_),M),matchAll:c.matchAll,matchNode:c.matchNode,canApply:w=>c.canApply(w),closest:w=>c.closest(w),apply:(w,_,D)=>c.apply(w,t(_)),remove:(w,_,D,M)=>c.remove(w,t(_)),toggle:(w,_,D)=>c.toggle(w,t(_)),formatChanged:(w,_,D,M,L)=>c.formatChanged(_,D,M,L)},editor:{getContent:w=>u.getContent(w),setContent:(w,_)=>({content:u.setContent(w,_),html:""}),insertContent:(w,_)=>(u.insertContent(w),""),addVisual:u.addVisual},selection:{getContent:(w,_)=>f.getContent(_)},autocompleter:{addDecoration:b.addDecoration,removeDecoration:b.removeDecoration},raw:{getModel:()=>B.some(v.getRawModel())}}},i$=()=>{const e=qe(null),t=qe("");return{init:{bindEvents:yt},undoManager:{beforeChange:yt,add:e,undo:e,redo:e,clear:yt,reset:yt,hasUndo:$e,hasRedo:$e,transact:e,ignore:yt,extra:yt},formatter:{match:$e,matchAll:qe([]),matchNode:qe(void 0),canApply:$e,closest:t,apply:yt,remove:yt,toggle:yt,formatChanged:qe({unbind:yt})},editor:{getContent:t,setContent:qe({content:"",html:""}),insertContent:qe(""),addVisual:yt},selection:{getContent:t},autocompleter:{addDecoration:yt,removeDecoration:yt},raw:{getModel:qe(B.none())}}},Ld=e=>Sn(e.plugins,"rtc"),ZU=e=>Jo(e.plugins,"rtc").bind(t=>B.from(t.setup)),WU=e=>{const t=e;return ZU(e).fold(()=>(t.rtcInstance=Gf(e),B.none()),o=>(t.rtcInstance=i$(),B.some(()=>o().then(r=>(t.rtcInstance=k1(r),r.rtc.isRemote)))))},mD=e=>e.rtcInstance?e.rtcInstance:Gf(e),Go=e=>{const t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},Fu=(e,t,o)=>{Go(e).undoManager.beforeChange(t,o)},l$=(e,t,o,r,c,u,f)=>Go(e).undoManager.add(t,o,r,c,u,f),fD=(e,t,o,r)=>Go(e).undoManager.undo(t,o,r),gD=(e,t,o)=>Go(e).undoManager.redo(t,o),sT=(e,t,o)=>{Go(e).undoManager.clear(t,o)},jU=(e,t)=>{Go(e).undoManager.reset(t)},u$=(e,t,o)=>Go(e).undoManager.hasUndo(t,o),AS=(e,t,o)=>Go(e).undoManager.hasRedo(t,o),GU=(e,t,o,r)=>Go(e).undoManager.transact(t,o,r),rT=(e,t,o)=>{Go(e).undoManager.ignore(t,o)},hD=(e,t,o,r,c)=>{Go(e).undoManager.extra(t,o,r,c)},d$=(e,t,o,r,c)=>Go(e).formatter.match(t,o,r,c),OS=(e,t,o)=>Go(e).formatter.matchAll(t,o),qU=(e,t,o,r,c)=>Go(e).formatter.matchNode(t,o,r,c),KU=(e,t)=>Go(e).formatter.canApply(t),Fd=(e,t)=>Go(e).formatter.closest(t),Si=(e,t,o,r)=>{Go(e).formatter.apply(t,o,r)},DS=(e,t,o,r,c)=>{Go(e).formatter.remove(t,o,r,c)},wi=(e,t,o,r)=>{Go(e).formatter.toggle(t,o,r)},YU=(e,t,o,r,c,u)=>Go(e).formatter.formatChanged(t,o,r,c,u),qo=(e,t)=>mD(e).editor.getContent(t),XU=(e,t,o)=>mD(e).editor.setContent(t,o),qf=(e,t,o)=>mD(e).editor.insertContent(t,o),RS=(e,t,o)=>Go(e).selection.getContent(t,o),m$=(e,t)=>Go(e).editor.addVisual(t),aT=e=>Go(e).init.bindEvents(),pD=(e,t={})=>{const o=t.format?t.format:"html";return RS(e,o,t)},f$=(e,t,o)=>{if(Sn(e,t)){const r=ge(e[t],c=>c!==o);r.length===0?delete e[t]:e[t]=r}};var bD=(e,t)=>{let o,r;const c=(b,v)=>To(v,w=>e.is(w,b)),u=b=>e.getParents(b,void 0,e.getRoot()),f=()=>{o={},r={},t.on("NodeChange",b=>{const v=b.element,w=u(v),_={};Bn(o,(D,M)=>{c(M,w).each(L=>{r[M]||(ne(D,W=>{W(!0,{node:L,selector:M,parents:w})}),r[M]=D),_[M]=D})}),Bn(r,(D,M)=>{_[M]||(delete r[M],ne(D,L=>{L(!1,{node:v,selector:M,parents:w})}))})})};return{selectorChangedWithUnbind:(b,v)=>(o||f(),o[b]||(o[b]=[]),o[b].push(v),c(b,u(t.selection.getStart())).each(()=>{r[b]=o[b]}),{unbind:()=>{f$(o,b,v),f$(r,b,v)}})}};const g$=e=>!!(e&&e.ownerDocument)&&ri(Y.fromDom(e.ownerDocument),Y.fromDom(e)),h$=e=>e?g$(e.startContainer)&&g$(e.endContainer):!1,vD=(e,t,o,r)=>{let c,u;const{selectorChangedWithUnbind:f}=bD(e,r),b=(ft,Zt)=>{const co=e.createRng();de(ft)&&de(Zt)?(co.setStart(ft,Zt),co.setEnd(ft,Zt),_e(co),ae(!1)):(GE(e,co,r.getBody(),!0),_e(co))},v=ft=>pD(r,ft),w=(ft,Zt)=>oU(r,ft,Zt),_=ft=>u4(r.getBody(),me(),ft),D=ft=>SA(r.getBody(),me(),ft),M=(ft,Zt)=>Gr.getBookmark(ft,Zt),L=ft=>Gr.moveToBookmark(ft),W=(ft,Zt)=>(eN(e,ft,Zt).each(_e),ft),V=()=>{const ft=me(),Zt=ce();return!ft||ft.item?!1:ft.compareEndPoints?ft.compareEndPoints("StartToEnd",ft)===0:!Zt||ft.collapsed},q=()=>{if(r.mode.isReadOnly())return!1;const ft=me(),Zt=r.getBody().querySelectorAll('[data-mce-selected="1"]');return Zt.length>0?ul(Zt,co=>e.isEditable(co.parentElement)):E9(e,ft)},ae=ft=>{const Zt=me();Zt.collapse(!!ft),_e(Zt)},ce=()=>t.getSelection?t.getSelection():t.document.selection,me=()=>{let ft;const Zt=(no,ua,Be)=>{try{return ua.compareBoundaryPoints(no,Be)}catch{return-1}},co=t.document;if(de(r.bookmark)&&!fv(r)){const no=o4(r);if(no.isSome())return no.map(ua=>EA(r,[ua])[0]).getOr(co.createRange())}try{const no=ce();no&&!H0(no.anchorNode)&&(no.rangeCount>0?ft=no.getRangeAt(0):ft=co.createRange(),ft=EA(r,[ft])[0])}catch{}if(ft||(ft=co.createRange()),dd(ft.startContainer)&&ft.collapsed){const no=e.getRoot();ft.setStart(no,0),ft.setEnd(no,0)}return c&&u&&(Zt(ft.START_TO_START,ft,c)===0&&Zt(ft.END_TO_END,ft,c)===0?ft=u:(c=null,u=null)),ft},_e=(ft,Zt)=>{if(!h$(ft))return;const co=ce();if(ft=r.dispatch("SetSelectionRange",{range:ft,forward:Zt}).range,co){u=ft;try{co.removeAllRanges(),co.addRange(ft)}catch{}Zt===!1&&co.extend&&(co.collapse(ft.endContainer,ft.endOffset),co.extend(ft.startContainer,ft.startOffset)),c=co.rangeCount>0?co.getRangeAt(0):null}if(!ft.collapsed&&ft.startContainer===ft.endContainer&&(co!=null&&co.setBaseAndExtent)&&ft.endOffset-ft.startOffset<2&&ft.startContainer.hasChildNodes()){const ua=ft.startContainer.childNodes[ft.startOffset];ua&&ua.nodeName==="IMG"&&(co.setBaseAndExtent(ft.startContainer,ft.startOffset,ft.endContainer,ft.endOffset),(co.anchorNode!==ft.startContainer||co.focusNode!==ft.endContainer)&&co.setBaseAndExtent(ua,0,ua,1))}r.dispatch("AfterSetSelectionRange",{range:ft,forward:Zt})},Ie=ft=>(q4(r,e.getOuterHTML(ft)),ft),ut=()=>xA(r.getBody(),me()),$t=(ft,Zt)=>T9(e,me(),ft,Zt),Ae=()=>{const ft=ce(),Zt=ft==null?void 0:ft.anchorNode,co=ft==null?void 0:ft.focusNode;if(!ft||!Zt||!co||H0(Zt)||H0(co))return!0;const no=e.createRng(),ua=e.createRng();try{no.setStart(Zt,ft.anchorOffset),no.collapse(!0),ua.setStart(co,ft.focusOffset),ua.collapse(!0)}catch{return!0}return no.compareBoundaryPoints(no.START_TO_START,ua)<=0},cs={dom:e,win:t,serializer:o,editor:r,expand:(ft={type:"word"})=>_e(Rd(e).expand(me(),ft)),collapse:ae,setCursorLocation:b,getContent:v,setContent:w,getBookmark:M,moveToBookmark:L,select:W,isCollapsed:V,isEditable:q,isForward:Ae,setNode:Ie,getNode:ut,getSel:ce,setRng:_e,getRng:me,getStart:_,getEnd:D,getSelectedBlocks:$t,normalize:()=>{const ft=me(),Zt=ce();if(!cv(Zt)&&zC(r)){const co=c4(e,ft);return co.each(no=>{_e(no,Ae())}),co.getOr(ft)}return ft},selectorChanged:(ft,Zt)=>(f(ft,Zt),cs),selectorChangedWithUnbind:f,getScrollContainer:()=>{let ft,Zt=e.getRoot();for(;Zt&&Zt.nodeName!=="BODY";){if(Zt.scrollHeight>Zt.clientHeight){ft=Zt;break}Zt=Zt.parentNode}return ft},scrollIntoView:(ft,Zt)=>{de(ft)?St(r,ft,Zt):Qi(r,me(),Zt)},placeCaretAt:(ft,Zt)=>_e(z6(ft,Zt,r.getDoc())),getBoundingClientRect:()=>{const ft=me();return ft.collapsed?ke.fromRangeStart(ft).getClientRects()[0]:ft.getBoundingClientRect()},destroy:()=>{t=c=u=null,xi.destroy()}},Gr=dv(cs),xi=d9(cs,r);return cs.bookmarkManager=Gr,cs.controlSelection=xi,cs},yD=(e,t,o)=>{t.addNodeFilter("br",(r,c,u)=>{const f=Ke.extend({},o.getBlockElements()),b=o.getNonEmptyElements(),v=o.getWhitespaceElements();f.body=1;const w=_=>_.name in f||Cc(o,_);for(let _=0,D=r.length;_<D;_++){let M=r[_],L=M.parent;if(L&&w(L)&&M===L.lastChild){let W=M.prev;for(;W;){const V=W.name;if(V!=="span"||W.attr("data-mce-type")!=="bookmark"){V==="br"&&(M=null);break}W=W.prev}if(M&&(M.remove(),mS(o,b,v,L))){const V=o.getElementRule(L.name);V&&(V.removeEmpty?L.remove():V.paddEmpty&&_h(e,u,w,L))}}else{let W=M;for(;L&&L.firstChild===W&&L.lastChild===W&&(W=L,!f[L.name]);)L=L.parent;if(W===L){const V=new Zr("#text",3);V.value=Zs,M.replace(V)}}}})},p$=(e,t,o)=>{e.addAttributeFilter("data-mce-tabindex",(r,c)=>{let u=r.length;for(;u--;){const f=r[u];f.attr("tabindex",f.attr("data-mce-tabindex")),f.attr(c,null)}}),e.addAttributeFilter("src,href,style",(r,c)=>{const u="data-mce-"+c,f=t.url_converter,b=t.url_converter_scope;let v=r.length;for(;v--;){const w=r[v];let _=w.attr(u);_!==void 0?(w.attr(c,_.length>0?_:null),w.attr(u,null)):(_=w.attr(c),c==="style"?_=o.serializeStyle(o.parseStyle(_),w.name):f&&(_=f.call(b,_,c,w.name)),w.attr(c,_.length>0?_:null))}}),e.addAttributeFilter("class",r=>{let c=r.length;for(;c--;){const u=r[c];let f=u.attr("class");f&&(f=f.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),u.attr("class",f.length>0?f:null))}}),e.addAttributeFilter("data-mce-type",(r,c,u)=>{let f=r.length;for(;f--;){const b=r[f];b.attr("data-mce-type")==="bookmark"&&!u.cleanup&&(B.from(b.firstChild).exists(w=>!Bp(w.value??""))?b.unwrap():b.remove())}}),e.addNodeFilter("script,style",(r,c)=>{const u=b=>b.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let f=r.length;for(;f--;){const b=r[f],v=b.firstChild,w=(v==null?void 0:v.value)??"";if(c==="script"){const _=b.attr("type");_&&b.attr("type",_==="mce-no/type"?null:_.replace(/^mce\-/,"")),t.element_format==="xhtml"&&v&&w.length>0&&(v.value=`// <![CDATA[
`+u(w)+`
// ]]>`)}else t.element_format==="xhtml"&&v&&w.length>0&&(v.value=`<!--
`+u(w)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let c=r.length;for(;c--;){const u=r[c],f=u.value;t.preserve_cdata&&(f==null?void 0:f.indexOf("[CDATA["))===0?(u.name="#cdata",u.type=4,u.value=o.decode(f.replace(/^\[CDATA\[|\]\]$/g,""))):(f==null?void 0:f.indexOf("mce:protected "))===0&&(u.name="#text",u.type=3,u.raw=!0,u.value=unescape(f).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,c)=>{let u=r.length;for(;u--;){const f=r[u];f.type===7?f.remove():f.type===1&&c==="input"&&!f.attr("type")&&f.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{ne(r,c=>{c.attr("data-mce-type")==="format-caret"&&(c.isEmpty(e.schema.getNonEmptyElements())?c.remove():c.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)}),t.remove_trailing_brs&&yD(t,e,e.schema)},cT=e=>{const t=r=>(r==null?void 0:r.name)==="br",o=e.lastChild;if(t(o)){const r=o.prev;t(r)&&(o.remove(),r.remove())}},JU=(e,t,o)=>{let r;const c=e.dom;let u=t.cloneNode(!0);const f=document.implementation;if(f.createHTMLDocument){const b=f.createHTMLDocument("");Ke.each(u.nodeName==="BODY"?u.childNodes:[u],v=>{b.body.appendChild(b.importNode(v,!0))}),u.nodeName!=="BODY"?u=b.body.firstChild:u=b.body,r=c.doc,c.doc=b}return Ob(e,{...o,node:u}),r&&(c.doc=r),u},QU=(e,t)=>de(e)&&e.hasEventListeners("PreProcess")&&!t.no_events,eZ=(e,t,o)=>QU(e,o)?JU(e,t,o):t,tZ=(e,t,o)=>{Ke.inArray(t,o)===-1&&(e.addAttributeFilter(o,(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)}),t.push(o))},nZ=(e,t,o)=>!t.no_events&&e?tC(e,{...t,content:o}).content:o,b$=(e,t,o)=>{const r=Xa(o.getInner?t.innerHTML:e.getOuterHTML(t));return o.selection||lb(Y.fromDom(t))?r:Ke.trim(r)},oZ=(e,t,o)=>{const r=o.selection?{forced_root_block:!1,...o}:o,c=e.parse(t,r);return cT(c),c},sZ=(e,t,o)=>wh(e,t).serialize(o),v$=(e,t,o,r,c)=>{const u=sZ(t,o,r);return nZ(e,c,u)},rZ=(e,t)=>{const o=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},c=t&&t.dom?t.dom:Un.DOM,u=t&&t.schema?t.schema:Hr(r),f=Sv(r,u);p$(f,r,c);const b=(v,w={})=>{const{indent:_,entity_encoding:D,...M}=w,L={format:"html",...M},W=eZ(t,v,L),V=b$(c,W,L),q=oZ(f,V,L);if(L.format==="tree")return q;const ae={...r,...de(_)?{indent:_}:{},...de(D)?{entity_encoding:D}:{}};return v$(t,ae,u,q,L)};return{schema:u,addNodeFilter:f.addNodeFilter,addAttributeFilter:f.addAttributeFilter,serialize:b,addRules:u.addValidElements,setRules:u.setValidElements,addTempAttr:ze(tZ,f,o),getTempAttrs:qe(o),getNodeFilters:f.getNodeFilters,getAttributeFilters:f.getAttributeFilters,removeNodeFilter:f.removeNodeFilter,removeAttributeFilter:f.removeAttributeFilter}},CD=(e,t)=>{const o=rZ(e,t);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},MS="html",aZ=(e,t)=>({...e,format:t,get:!0,getInner:!0}),cZ=(e,t={})=>{const o=t.format?t.format:MS,r=aZ(t,o);return mP(e,r).fold(Fo,c=>{const u=qo(e,c);return yS(e,u,c)})},y$="html",C$=(e,t)=>({format:y$,...e,set:!0,content:t}),SD=(e,t,o={})=>{const r=C$(o,t);CS(e,r).each(c=>{const u=XU(e,c.content,c);zO(e,u.html,c)})},NS=Un.DOM,Ha=e=>{NS.setStyle(e.id,"display",e.orgDisplay)},iT=e=>B.from(e).each(t=>t.destroy()),S$=e=>{const t=e;t.contentAreaContainer=t.formElement=t.container=t.editorContainer=null,t.bodyElement=t.contentDocument=t.contentWindow=null,t.iframeElement=t.targetElm=null;const o=e.selection;if(o){const r=o.dom;t.selection=o.win=o.dom=r.doc=null}},wD=e=>{const t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,delete t._mceOldSubmit),NS.unbind(t,"submit reset",e.formEventDelegate))},xD=e=>{if(!e.removed){const{_selectionOverrides:t,editorUpload:o}=e,r=e.getBody(),c=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&de(c==null?void 0:c.nextSibling)&&NS.remove(c.nextSibling),nC(e),e.editorManager.remove(e),!e.inline&&r&&Ha(e),Kx(e),NS.remove(e.getContainer()),iT(t),iT(o),e.destroy()}},w$=(e,t)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!t&&!e.removed){e.remove();return}t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),iT(o),iT(r)),wD(e),S$(e),e.destroyed=!0}},lT=(()=>{const e={};return{add:(c,u)=>{e[c]=u},get:c=>e[c]?e[c]:{icons:{}},has:c=>Sn(e,c)}})(),Dv=mr.ModelManager,ED=(e,t)=>t.dom[e],TD=(e,t)=>parseInt(Ns(t,e),10),ol=ze(ED,"clientWidth"),lZ=ze(ED,"clientHeight"),uZ=ze(TD,"margin-top"),KJ=ze(TD,"margin-left"),kD=e=>e.dom.getBoundingClientRect(),dZ=(e,t,o)=>{const r=ol(e),c=lZ(e);return t>=0&&o>=0&&t<=r&&o<=c},YJ=(e,t,o,r)=>{const c=kD(t),u=e?c.left+t.dom.clientLeft+KJ(t):0,f=e?c.top+t.dom.clientTop+uZ(t):0,b=o-u,v=r-f;return{x:b,y:v}},mZ=(e,t,o)=>{const r=Y.fromDom(e.getBody()),c=e.inline?r:ir(r),u=YJ(e.inline,c,t,o);return dZ(c,u.x,u.y)},_D=e=>B.from(e).map(Y.fromDom),Hu=e=>{const t=e.inline?e.getBody():e.getContentAreaContainer();return _D(t).map(ko).getOr(!1)};var AD=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const BS=e=>{const t=[],o=()=>{const M=e.theme;return M&&M.getNotificationManagerImpl?M.getNotificationManagerImpl():AD()},r=()=>B.from(t[0]),c=(M,L)=>M.type===L.type&&M.text===L.text&&!M.progressBar&&!M.timeout&&!L.progressBar&&!L.timeout,u=()=>{r().each(M=>{M.reposition()})},f=M=>{t.push(M)},b=M=>{qu(t,L=>L===M).each(L=>{t.splice(L,1)})},v=(M,L=!0)=>e.removed||!Hu(e)?{}:(L&&e.dispatch("BeforeOpenNotification",{notification:M}),To(t,W=>c(o().getArgs(W),M)).getOrThunk(()=>{e.editorManager.setActive(e);const W=o().open(M,()=>{b(W)},()=>L6(e));return f(W),u(),e.dispatch("OpenNotification",{notification:{...W}}),W})),w=()=>{r().each(M=>{o().close(M),b(M),u()})},_=qe(t);return(M=>{M.on("SkinLoaded",()=>{const L=gC(M);L&&v({text:L,type:"warning",timeout:0},!1),u()}),M.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(u)}),M.on("remove",()=>{ne(t.slice(),L=>{o().close(L)})}),M.on("keydown",L=>{var V;const W=((V=L.key)==null?void 0:V.toLowerCase())==="f12"||L.keyCode===123;L.altKey&&W&&(L.preventDefault(),r().map(q=>Y.fromDom(q.getEl())).each(q=>T0(q)))})})(e),{open:v,close:w,getNotifications:_}},Nh=mr.PluginManager,_1=mr.ThemeManager;var OD=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const x$=e=>{let t=[];const o=()=>{const q=e.theme;return q&&q.getWindowManagerImpl?q.getWindowManagerImpl():OD()},r=(q,ae)=>(...ce)=>ae?ae.apply(q,ce):void 0,c=q=>{e.dispatch("OpenWindow",{dialog:q})},u=q=>{e.dispatch("CloseWindow",{dialog:q})},f=(q,ae)=>{t.push({instanceApi:q,triggerElement:ae}),c(q)},b=q=>{u(q);const ae=ki(t,({instanceApi:ce,triggerElement:me})=>ce===q?me:B.none());t=ge(t,({instanceApi:ce})=>ce!==q),t.length===0?e.focus():ae.filter(ko).each(T0)},v=()=>B.from(t[t.length-1]),w=q=>{e.editorManager.setActive(e),n4(e);const ae=wl();e.ui.show();const ce=q();return f(ce,ae),ce},_=(q,ae)=>w(()=>o().open(q,ae,b)),D=q=>w(()=>o().openUrl(q,b)),M=q=>{t.length!==0&&q.each(ae=>T0(ae))},L=(q,ae,ce)=>{const me=wl(),_e=o();_e.alert(q,r(ce||_e,()=>{M(me),ae==null||ae()}))},W=(q,ae,ce)=>{const me=wl(),_e=o();_e.confirm(q,r(ce||_e,Ie=>{M(me),ae==null||ae(Ie)}))},V=()=>{v().each(({instanceApi:q})=>{o().close(q),b(q)})};return e.on("remove",()=>{ne(t,({instanceApi:q})=>{o().close(q)})}),{open:_,openUrl:D,alert:L,confirm:W,close:V}},DD=(e,t)=>{e.notificationManager.open({type:"error",text:t})},uT=(e,t)=>{e._skinLoaded?DD(e,t):e.on("SkinLoaded",()=>{DD(e,t)})},fZ=(e,t)=>{uT(e,xc.translate(["Failed to upload image: {0}",t]))},Kf=(e,t,o)=>{Db(e,t,{message:o}),console.error(o)},A1=(e,t,o)=>o?`Failed to load ${e}: ${o} from url ${t}`:`Failed to load ${e} url: ${t}`,E$=(e,t,o)=>{Kf(e,"PluginLoadError",A1("plugin",t,o))},gZ=(e,t,o)=>{Kf(e,"IconsLoadError",A1("icons",t,o))},O1=(e,t,o)=>{Kf(e,"LanguageLoadError",A1("language",t,o))},T$=(e,t,o)=>{Kf(e,"ThemeLoadError",A1("theme",t,o))},hZ=(e,t,o)=>{Kf(e,"ModelLoadError",A1("model",t,o))},k$=(e,t)=>{Kf(e,"LicenseKeyManagerLoadError",A1("license key manager",t))},pZ=(e,t)=>{Kf(e,"ComponentLoadError",A1("component",t))},bZ=(e,t,o)=>{const r=xc.translate(["Failed to initialize plugin: {0}",t]);Db(e,"PluginLoadError",{message:r}),dT(r,o),uT(e,r)},dT=(e,...t)=>{const o=window.console;o&&(o.error?o.error(e,...t):o.log(e,...t))},_$=new WeakMap,vZ=e=>{if(_$.has(e))return;_$.set(e,!0);const t=()=>{e.on("SwitchMode",r=>{const{mode:c}=r;c!=="readonly"&&e.mode.set("readonly")})},o=()=>{e.on("DisabledStateChange",r=>{const{state:c}=r;c||r.preventDefault()},!0)};e.initialized?(e.removed||e.mode.set("readonly"),e.options.set("disabled",!0)):e.on("init",()=>{e.removed||e.mode.set("readonly"),e.options.set("disabled",!0)}),o(),t()},RD=(e,t)=>{const{type:o,message:r}=t;e.notificationManager.open({type:o,text:r})},yZ=e=>{switch(e){case"error":return console.error;case"info":return console.info;case"warn":return console.warn;case"log":default:return console.log}},MD=e=>{yZ(e.type)(e.message)},zm=(e,t)=>{const{console:o,editor:r}=t;de(r)&&(e._skinLoaded?RD(e,r):e.on("SkinLoaded",()=>{RD(e,r)})),de(o)&&MD(o)},ND="Read more: https://www.tiny.cloud/docs/tinymce/latest/license-key/",PS="Make sure to provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms.",A$=e=>{const t="The editor is disabled because a TinyMCE license key has not been provided.";zm(e,{console:{type:"error",message:[`${t}`,PS,ND].join(" ")},editor:{type:"warning",message:`${t}`}})},O$=(e,t)=>{const o=`${t==="online"?"API":"license"} key`,r=`The editor is disabled because the TinyMCE ${o} could not be validated.`;zm(e,{console:{type:"error",message:[`${r}`,`The TinyMCE Commercial License Key Manager plugin is required for the provided ${o} to be validated but could not be loaded.`,ND].join(" ")},editor:{type:"warning",message:`${r}`}})},D$=(e,t,o)=>{const r=`The "${t}" plugin requires a valid TinyMCE license key.`;zm(e,{console:{type:"error",message:[`${r}`,ND].join(" ")},...o?{}:{editor:{type:"warning",message:"One or more premium plugins are disabled due to license key restrictions."}}})},$S="licensekeymanager",R$=e=>U(c1(e))?"online":"offline",CZ=e=>{var o;const t=(o=DE(e))==null?void 0:o.toLowerCase();return t==="gpl"?"gpl":Le(t)?"no_key":"non_gpl"},BD=e=>{const t=R$(e),o=CZ(e),r=new Set([...n1(e),...It(bC(e))]).has($S);return o!=="gpl"||t==="online"||r?{type:"use_plugin",onlineStatus:t,licenseKeyType:o,forcePlugin:r}:{type:"use_gpl",onlineStatus:t,licenseKeyType:o,forcePlugin:r}},M$=e=>t=>{let o=!1;return{validate:r=>{const{plugin:c}=r,u=U(c);return u&&(D$(t,c,o),o=!0),Promise.resolve(e&&!u)}}},SZ=M$(!1),mT=M$(!0),IS="manager",PD=$S,ID=(()=>{const e=mr();return{load:(c,u)=>{if(BD(c).type==="use_plugin"){const v=Jo(bC(c),PD).map(ws).filter(xs).getOr(`plugins/${PD}/plugin${u}.js`);e.load(IS,v).catch(()=>{k$(c,v)})}},add:c=>{e.add(IS,c)},init:c=>{const u=v=>{Object.defineProperty(c,"licenseKeyManager",{value:v,writable:!1,configurable:!1,enumerable:!0})},f=BD(c),b=e.get(IS);if(de(b)){const v=b(c,e.urls[IS]);u(v)}else switch(f.type){case"use_gpl":{u(mT(c));break}case"use_plugin":{vZ(c),u(SZ(c)),f.onlineStatus==="offline"&&f.licenseKeyType==="no_key"?A$(c):O$(c,f.onlineStatus);break}}c.licenseKeyManager.validate({})}}})(),wZ=e=>{B.from(e.selection.getNode()).each(t=>{t.removeAttribute("data-mce-selected")})},LD=(e,t,o)=>{try{e.getDoc().execCommand(t,!1,String(o))}catch{}},N$=(e,t)=>{LD(e,"StyleWithCSS",t),LD(e,"enableInlineTableEditing",t),LD(e,"enableObjectResizing",t)},FD=e=>{e.selection.setRng(e.selection.getRng())},B$=(e,t,o)=>{R0(e,t)&&!o?yr(e,t):o&&Hc(e,t)},HD=e=>{const t=Y.fromDom(e.getBody());B$(t,"mce-content-readonly",!0),e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),wZ(e)},P$=e=>{const t=Y.fromDom(e.getBody());B$(t,"mce-content-readonly",!1),e.hasEditableRoot()&&df(t,!0),N$(e,!1),L6(e)&&e.focus(),FD(e),e.nodeChanged()},Yf=e=>Xi(e),D1="data-mce-contenteditable",LS=e=>{ne(Fr(e,'*[contenteditable="true"]'),t=>{hs(t,D1,"true"),df(t,!1)})},Hd=e=>{ne(Fr(e,`*[${D1}="true"]`),t=>{sr(t,D1),df(t,!0)})},$$=(e,t)=>{const o=Y.fromDom(e.getBody());t?(HD(e),df(o,!1),LS(o)):(Hd(o),P$(e))},zD=e=>{e.serializer?Os(e):e.on("PreInit",()=>{Os(e)})},Os=e=>{e.parser.addAttributeFilter("contenteditable",t=>{Yf(e)&&ne(t,o=>{o.attr(D1,o.attr("contenteditable")),o.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(D1,t=>{Yf(e)&&ne(t,o=>{o.attr("contenteditable",o.attr(D1))})}),e.serializer.addTempAttr(D1)},VD=e=>e.type==="click",fT=["copy"],Xf=e=>Ce(fT,e.type),I$=(e,t)=>ea(t,"a",r=>Ln(r,Y.fromDom(e.getBody()))).bind(r=>$i(r,"href")),UD=(e,t)=>Q2(t,"details",r=>Ln(r,Y.fromDom(e.getBody()))),xZ=(e,t)=>{if(VD(t)&&!vt.metaKeyPressed(t)){const o=Y.fromDom(t.target);I$(e,o).fold(()=>{UD(e,o)&&t.preventDefault()},r=>{if(t.preventDefault(),/^#/.test(r)){const c=e.dom.select(`${r},[name="${u0(r,"#")}"]`);c.length&&e.selection.scrollIntoView(c[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else Xf(t)&&e.dispatch(t.type,t)},Rv=e=>{e.on("ShowCaret ObjectSelected",t=>{Yf(e)&&t.preventDefault()}),e.on("DisabledStateChange",t=>{t.isDefaultPrevented()||$$(e,t.state)})},EZ=e=>{zD(e),Rv(e)},TZ=e=>/^[a-z0-9\-]+$/i.test(e),Bh=e=>"content/"+e+"/content.css",kZ=e=>tinymce.Resource.has(Bh(e)),R1=e=>Jf(e,x_(e)),_Z=e=>Jf(e,mC(e)),Jf=(e,t)=>{const o=e.editorManager.baseURL+"/skins/content",c=`content${e.editorManager.suffix}.css`;return Ue(t,u=>kZ(u)?u:TZ(u)&&!e.inline?`${o}/${u}/${c}`:e.documentBaseURI.toAbsolute(u))},AZ=e=>{e.contentCSS=e.contentCSS.concat(R1(e),_Z(e))},Ul=e=>e?Mr(e.getElementsByTagName("img")):[],M1=(e,t)=>{const o={};return{findAll:(c,u=gt)=>{const f=ge(Ul(c),v=>{const w=v.src;return v.hasAttribute("data-mce-bogus")||v.hasAttribute("data-mce-placeholder")||!w||w===Xn.transparentSrc?!1:pn(w,"blob:")?!e.isUploaded(w)&&u(v):pn(w,"data:")?u(v):!1}),b=Ue(f,v=>{const w=v.src;if(Sn(o,w))return o[w].then(_=>U(_)?_:{image:v,blobInfo:_.blobInfo});{const _=EO(t,w).then(D=>(delete o[w],{image:v,blobInfo:D})).catch(D=>(delete o[w],D));return o[w]=_,_}});return Promise.all(b)}}},L$=()=>{let o={};const r=(M,L)=>({status:M,resultUri:L}),c=M=>M in o;return{hasBlobUri:c,getResultUri:M=>{const L=o[M];return L?L.resultUri:null},isPending:M=>c(M)?o[M].status===1:!1,isUploaded:M=>c(M)?o[M].status===2:!1,markPending:M=>{o[M]=r(1,null)},markUploaded:(M,L)=>{o[M]=r(2,L)},removeFailed:M=>{delete o[M]},destroy:()=>{o={}}}};let FS=0;const ZD=()=>{const e=()=>Math.round(ep()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},OZ=e=>e+FS+++ZD(),Mv=()=>{let e=[];const t=D=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[D.toLowerCase()]||"dat",o=(D,M,L,W,V)=>{if(U(D))return r({id:D,name:W,filename:V,blob:M,base64:L});if(At(D))return r(D);throw new Error("Unknown input type")},r=D=>{if(!D.blob||!D.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const M=D.id||OZ("blobid"),L=D.name||M,W=D.blob;return{id:qe(M),name:qe(L),filename:qe(D.filename||L+"."+t(W.type)),blob:qe(W),base64:qe(D.base64),blobUri:qe(D.blobUri||URL.createObjectURL(W)),uri:qe(D.uri)}},c=D=>{f(D.id())||e.push(D)},u=D=>To(e,D).getOrUndefined(),f=D=>u(M=>M.id()===D);return{create:o,add:c,get:f,getByUri:D=>u(M=>M.blobUri()===D),getByData:(D,M)=>u(L=>L.base64()===D&&L.blob().type===M),findFirst:u,removeByUri:D=>{e=ge(e,M=>M.blobUri()===D?(URL.revokeObjectURL(M.blobUri()),!1):!0)},destroy:()=>{ne(e,D=>{URL.revokeObjectURL(D.blobUri())}),e=[]}}},DZ=(e,t)=>{const o={},r=(V,q)=>V?V.replace(/\/$/,"")+"/"+q.replace(/^\//,""):q,c=(V,q)=>new Promise((ae,ce)=>{const me=new XMLHttpRequest;me.open("POST",t.url),me.withCredentials=t.credentials,me.upload.onprogress=Ie=>{q(Ie.loaded/Ie.total*100)},me.onerror=()=>{ce("Image upload failed due to a XHR Transport error. Code: "+me.status)},me.onload=()=>{if(me.status<200||me.status>=300){ce("HTTP Error: "+me.status);return}const Ie=JSON.parse(me.responseText);if(!Ie||!U(Ie.location)){ce("Invalid JSON: "+me.responseText);return}ae(r(t.basePath,Ie.location))};const _e=new FormData;_e.append("file",V.blob(),V.filename()),me.send(_e)}),u=X(t.handler)?t.handler:c,f=()=>new Promise(V=>{V([])}),b=(V,q)=>({url:q,blobInfo:V,status:!0}),v=(V,q)=>({url:"",blobInfo:V,status:!1,error:q}),w=(V,q)=>{Ke.each(o[V],ae=>{ae(q)}),delete o[V]},_=(V,q,ae)=>(e.markPending(V.blobUri()),new Promise(ce=>{let me,_e;try{const Ie=()=>{me&&(me.close(),_e=yt)},ut=Ae=>{Ie();const ve=U(Ae)?Ae:Ae.url;e.markUploaded(V.blobUri(),ve),w(V.blobUri(),b(V,ve)),ce(b(V,ve))},$t=Ae=>{Ie(),e.removeFailed(V.blobUri()),w(V.blobUri(),v(V,Ae)),ce(v(V,Ae))};_e=Ae=>{Ae<0||Ae>100||B.from(me).orThunk(()=>B.from(ae).map(Xo)).each(ve=>{me=ve,ve.progressBar.value(Ae)})},q(V,_e).then(ut,Ae=>{$t(U(Ae)?{message:Ae}:Ae)})}catch(Ie){ce(v(V,Ie))}})),D=V=>V===c,M=V=>{const q=V.blobUri();return new Promise(ae=>{o[q]=o[q]||[],o[q].push(ae)})},L=(V,q)=>(V=Ke.grep(V,ae=>!e.isUploaded(ae.blobUri())),Promise.all(Ke.map(V,ae=>e.isPending(ae.blobUri())?M(ae):_(ae,u,q))));return{upload:(V,q)=>!t.url&&D(u)?f():L(V,q)}},Zl=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),HS=(e,t)=>DZ(t,{url:Lb(e),basePath:dC(e),credentials:S_(e),handler:hE(e)}),F$=e=>{const t=L$(),o=HS(e,t);return{upload:(r,c=!0)=>o.upload(r,c?Zl(e):void 0)}},WD=(e,t)=>e.dom.isEmpty(t.dom)&&de(e.schema.getTextBlockElements()[An(t)]),jD=e=>t=>{WD(e,t)&&Qn(t,Y.fromHtml('<br data-mce-bogus="1" />'))},N1=e=>{const t=Mv();let o,r;const c=L$(),u=[],f=me=>_e=>e.selection?me(_e):[],b=me=>me+(me.indexOf("?")===-1?"?":"&")+new Date().getTime(),v=(me,_e,Ie)=>{let ut=0;do ut=me.indexOf(_e,ut),ut!==-1&&(me=me.substring(0,ut)+Ie+me.substr(ut+_e.length),ut+=Ie.length-_e.length+1);while(ut!==-1);return me},w=(me,_e,Ie)=>{const ut=`src="${Ie}"${Ie===Xn.transparentSrc?' data-mce-placeholder="1"':""}`;return me=v(me,`src="${_e}"`,ut),me=v(me,'data-mce-src="'+_e+'"','data-mce-src="'+Ie+'"'),me},_=(me,_e)=>{ne(e.undoManager.data,Ie=>{Ie.type==="fragmented"?Ie.fragments=Ue(Ie.fragments,ut=>w(ut,me,_e)):Ie.content=w(Ie.content,me,_e)})},D=(me,_e)=>{const Ie=e.convertURL(_e,"src");_(me.src,_e),Ir(Y.fromDom(me),{src:fE(e)?b(_e):_e,"data-mce-src":Ie})},M=()=>(o||(o=HS(e,c)),q().then(f(me=>{const _e=Ue(me,Ie=>Ie.blobInfo);return o.upload(_e,Zl(e)).then(f(Ie=>{const ut=[];let $t=!1;const Ae=Ue(Ie,(ve,Oe)=>{const{blobInfo:dt,image:en}=me[Oe];let tn=!1;return ve.status&&gE(e)?(ve.url&&!Us(en.src,ve.url)&&($t=!0),t.removeByUri(en.src),Ld(e)||D(en,ve.url)):ve.error&&(ve.error.remove&&(_(en.src,Xn.transparentSrc),ut.push(en),tn=!0),fZ(e,ve.error.message)),{element:en,status:ve.status,uploadUri:ve.url,blobInfo:dt,removed:tn}});return ut.length>0&&!Ld(e)?e.undoManager.transact(()=>{ne(lf(ut),ve=>{const Oe=Lc(ve);Zo(ve),Oe.each(jD(e)),t.removeByUri(ve.dom.src)})}):$t&&e.undoManager.dispatchChange(),Ae}))}))),L=()=>lC(e)?M():Promise.resolve([]),W=me=>ul(u,_e=>_e(me)),V=me=>{u.push(me)},q=()=>(r||(r=M1(c,t)),r.findAll(e.getBody(),W).then(f(me=>{const _e=ge(me,Ie=>U(Ie)?(uT(e,Ie),!1):Ie.uriType!=="blob");return Ld(e)||ne(_e,Ie=>{_(Ie.image.src,Ie.blobInfo.blobUri()),Ie.image.src=Ie.blobInfo.blobUri(),Ie.image.removeAttribute("data-mce-src")}),_e}))),ae=()=>{t.destroy(),c.destroy(),r=o=null},ce=me=>me.replace(/src="(blob:[^"]+)"/g,(_e,Ie)=>{const ut=c.getResultUri(Ie);if(ut)return'src="'+ut+'"';let $t=t.getByUri(Ie);return $t||($t=kn(e.editorManager.get(),(Ae,ve)=>Ae||ve.editorUpload&&ve.editorUpload.blobCache.getByUri(Ie),void 0)),$t?'src="data:'+$t.blob().type+";base64,"+$t.base64()+'"':_e});return e.on("SetContent",()=>{lC(e)?L():q()}),e.on("RawSaveContent",me=>{me.content=ce(me.content)}),e.on("GetContent",me=>{me.source_view||me.format==="raw"||me.format==="tree"||(me.content=ce(me.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",me=>{ne(me,_e=>{const Ie=_e.attr("src");if(!Ie||t.getByUri(Ie))return;const ut=c.getResultUri(Ie);ut&&_e.attr("src",ut)})})}),{blobCache:t,addFilter:V,uploadImages:M,uploadImagesAuto:L,scanForImages:q,destroy:ae}},GD=e=>{const t=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"left"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:c=>{t.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:".mce-placeholder",styles:{display:"block",marginLeft:"auto",marginRight:"auto"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"right"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:c=>{t.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const c={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},f={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[f,c,u]:[c,f,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"},remove_similar:!0},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},samp:{inline:"samp"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(c,u,f)=>it(c)&&c.hasAttribute("href"),onformat:(c,u,f)=>{Ke.each(f,(b,v)=>{t.setAttrib(c,v,b)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":c=>(c==null?void 0:c.customValue)??null}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Ke.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd".split(/\s/),c=>{r[c]={block:c,remove:"all"}}),r},H$={remove_similar:!0,inherit:!1},Nv={selector:"td,th",...H$},RZ={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...Nv},tablecellverticalalign:{styles:{"vertical-align":"%value"},...Nv},tablecellbordercolor:{styles:{borderColor:"%value"},...Nv},tablecellclass:{classes:["%value"],...Nv},tableclass:{selector:"table",classes:["%value"],...H$},tablecellborderstyle:{styles:{borderStyle:"%value"},...Nv},tablecellborderwidth:{styles:{borderWidth:"%value"},...Nv}},MZ=qe(RZ),NZ=e=>{const t={},o=f=>de(f)?t[f]:t,r=f=>Sn(t,f),c=(f,b)=>{f&&(U(f)?(Yt(b)||(b=[b]),ne(b,v=>{Je(v.deep)&&(v.deep=!Au(v)),Je(v.split)&&(v.split=!Au(v)||ca(v)),Je(v.remove)&&Au(v)&&!ca(v)&&(v.remove="none"),Au(v)&&ca(v)&&(v.mixed=!0,v.block_expand=!0),U(v.classes)&&(v.classes=v.classes.split(/\s+/))}),t[f]=b):Bn(f,(v,w)=>{c(w,v)}))},u=f=>(f&&t[f]&&delete t[f],t);return c(GD(e)),c(MZ()),c(A_(e)),{get:o,has:r,register:c,unregister:u}},gT=Ke.each,nc=Un.DOM,Wl=e=>de(e)&&At(e),z$=(e,t)=>{const o=t&&t.schema||Hr({}),r=(v,w)=>{w.classes.length>0&&nc.addClass(v,w.classes.join(" ")),nc.setAttribs(v,w.attrs)},c=v=>{const w=U(v)?{name:v,classes:[],attrs:{}}:v,_=nc.create(w.name);return r(_,w),_},u=(v,w)=>{const _=o.getElementRule(v.nodeName.toLowerCase()),D=_==null?void 0:_.parentsRequired;return D&&D.length?w&&Ce(D,w)?w:D[0]:!1},f=(v,w,_)=>{let D;const M=w[0],L=Wl(M)?M.name:void 0,W=u(v,L);if(W)L===W?(D=M,w=w.slice(1)):D=W;else if(M)D=M,w=w.slice(1);else if(!_)return v;const V=D?c(D):nc.create("div");V.appendChild(v),_&&Ke.each(_,ae=>{const ce=c(ae);V.insertBefore(ce,v)});const q=Wl(D)?D.siblings:void 0;return f(V,w,q)},b=nc.create("div");if(e.length>0){const v=e[0],w=c(v),_=Wl(v)?v.siblings:void 0;b.appendChild(f(w,e.slice(1),_))}return b},BZ=e=>{e=Ke.trim(e);let t="div";const o={name:t,classes:[],attrs:{},selector:e};return e!=="*"&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,c,u,f,b)=>{switch(c){case"#":o.attrs.id=u;break;case".":o.classes.push(u);break;case":":Ke.inArray("checked disabled enabled read-only required".split(" "),u)!==-1&&(o.attrs[u]=u);break}if(f==="["){const v=b.match(/([\w\-]+)(?:\=\"([^\"]+))?/);v&&(o.attrs[v[1]]=v[2])}return""})),o.name=t||"div",o},PZ=e=>U(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Ke.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),t=>{const o=Ke.map(t.split(/(?:~\+|~|\+)/),BZ),r=o.pop();return o.length&&(r.siblings=o),r}).reverse()):[],$Z=(e,t)=>{let o="",r=O_(e);if(r==="")return"";const c=M=>U(M)?M.replace(/%(\w+)/g,""):"",u=(M,L)=>nc.getStyle(L??e.getBody(),M,!0);if(U(t)){const M=e.formatter.get(t);if(!M)return"";t=M[0]}if("preview"in t){const M=t.preview;if(M===!1)return"";r=M||r}let f=t.block||t.inline||"span",b;const v=PZ(t.selector);v.length>0?(v[0].name||(v[0].name=f),f=t.selector,b=z$(v,e)):b=z$([f],e);const w=nc.select(f,b)[0]||b.firstChild;gT(t.styles,(M,L)=>{const W=c(M);W&&nc.setStyle(w,L,W)}),gT(t.attributes,(M,L)=>{const W=c(M);W&&nc.setAttrib(w,L,W)}),gT(t.classes,M=>{const L=c(M);nc.hasClass(w,L)||nc.addClass(w,L)}),e.dispatch("PreviewFormats"),nc.setStyles(b,{position:"absolute",left:-65535}),e.getBody().appendChild(b);const _=u("fontSize"),D=/px$/.test(_)?parseInt(_,10):0;return gT(r.split(" "),M=>{let L=u(M,w);if(!(M==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(L)&&(L=u(M),pi(L).toLowerCase()==="#ffffff"))&&!(M==="color"&&pi(L).toLowerCase()==="#000000")){if(M==="font-size"&&/em|%$/.test(L)){if(D===0)return;L=parseFloat(L)/(/%$/.test(L)?100:1)*D+"px"}M==="border"&&L&&(o+="padding:0 2px;"),o+=M+":"+L+";"}}),e.dispatch("AfterPreviewFormats"),nc.remove(b),o},IZ=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},V$=e=>{const t=NZ(e),o=Xt({});return IZ(e),uB(e),Ld(e)||Y4(o,e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:(r,c,u)=>{Si(e,r,c,u)},remove:(r,c,u,f)=>{DS(e,r,c,u,f)},toggle:(r,c,u)=>{wi(e,r,c,u)},match:(r,c,u,f)=>d$(e,r,c,u,f),closest:r=>Fd(e,r),matchAll:(r,c)=>OS(e,r,c),matchNode:(r,c,u,f)=>qU(e,r,c,u,f),canApply:r=>KU(e,r),formatChanged:(r,c,u,f)=>YU(e,o,r,c,u,f),getCssText:ze($Z,e)}},U$=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},LZ=(e,t,o)=>{const r=Xt(!1),c=v=>{Rh(t,!1,o),t.add({},v)};e.on("init",()=>{t.add()}),e.on("BeforeExecCommand",v=>{const w=v.command;U$(w)||(oT(t,o),t.beforeChange())}),e.on("ExecCommand",v=>{const w=v.command;U$(w)||c(v)}),e.on("ObjectResizeStart cut",()=>{t.beforeChange()}),e.on("SaveContent ObjectResized blur",c),e.on("dragend",c),e.on("keyup",v=>{const w=v.keyCode;if(v.isDefaultPrevented())return;const _=Xn.os.isMacOS()&&v.key==="Meta";(w>=33&&w<=36||w>=37&&w<=40||w===45||v.ctrlKey||_)&&(c(),e.nodeChanged()),(w===46||w===8)&&e.nodeChanged(),r.get()&&t.typing&&!_v(e.readonly,TS(e),t.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged())}),e.on("keydown",v=>{const w=v.keyCode;if(v.isDefaultPrevented())return;if(w>=33&&w<=36||w>=37&&w<=40||w===45){t.typing&&c(v);return}const _=v.ctrlKey&&!v.altKey||v.metaKey;if((w<16||w>20)&&w!==224&&w!==91&&!t.typing&&!_){t.beforeChange(),Rh(t,!0,o),t.add({},v),r.set(!0);return}(Xn.os.isMacOS()?v.metaKey:v.ctrlKey&&!v.altKey)&&t.beforeChange()}),e.on("mousedown",v=>{t.typing&&c(v)});const u=v=>v.inputType==="insertReplacementText",f=v=>v.inputType==="insertText"&&v.data===null,b=v=>v.inputType==="insertFromPaste"||v.inputType==="insertFromDrop";e.on("input",v=>{v.inputType&&(u(v)||f(v)||b(v))&&c(v)}),e.on("AddUndo Undo Redo ClearUndos",v=>{v.isDefaultPrevented()||e.nodeChanged()})},FZ=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},HZ=e=>{const t=oi(),o=Xt(0),r=Xt(0),c={data:[],typing:!1,beforeChange:()=>{Fu(e,o,t)},add:(u,f)=>l$(e,c,r,o,t,u,f),dispatchChange:()=>{e.setDirty(!0);const u=TS(e);u.bookmark=ch(e.selection),e.dispatch("change",{level:u,lastLevel:Ea(c.data,r.get()).getOrUndefined()})},undo:()=>fD(e,c,o,r),redo:()=>gD(e,r,c.data),clear:()=>{sT(e,c,r)},reset:()=>{jU(e,c)},hasUndo:()=>u$(e,c,r),hasRedo:()=>AS(e,c,r),transact:u=>GU(e,c,o,u),ignore:u=>{rT(e,o,u)},extra:(u,f)=>{hD(e,c,r,u,f)}};return Ld(e)||LZ(e,c,o),FZ(e),c},zZ=[9,27,vt.HOME,vt.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,vt.DOWN,vt.UP,vt.LEFT,vt.RIGHT].concat(Xn.browser.isFirefox()?[224]:[]),Z$="data-mce-placeholder",W$=e=>e.type==="keydown"||e.type==="keyup",j$=e=>{const t=e.keyCode;return t===vt.BACKSPACE||t===vt.DELETE},VZ=e=>{if(W$(e)){const t=e.keyCode;return!j$(e)&&(vt.metaKeyPressed(e)||e.altKey||t>=112&&t<=123||Ce(zZ,t))}else return!1},UZ=e=>W$(e)&&!(j$(e)||e.type==="keyup"&&e.keyCode===229),Ph=(e,t,o)=>{if(e.isEmpty(t,void 0,{skipBogus:!1,includeZwsp:!0})){const r=t.firstElementChild;return r?e.getStyle(t.firstElementChild,"padding-left")||e.getStyle(t.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},ZZ=e=>{const t=e.dom,o=Ys(e),r=fC(e)??"",c=(u,f)=>{if(VZ(u))return;const b=e.getBody(),v=UZ(u)?!1:Ph(t,b,o);(t.getAttrib(b,Z$)!==""!==v||f)&&(t.setAttrib(b,Z$,v?r:null),sC(e,v),e.on(v?"keydown":"keyup",c),e.off(v?"keyup":"keydown",c))};xs(r)&&e.on("init",u=>{c(u,!0),e.on("change SetContent ExecCommand",c),e.on("paste",f=>Ru.setEditorTimeout(e,()=>c(f)))})},WZ=e=>t=>de(t)&&t.nodeName.toLowerCase()===e,Bv=e=>t=>de(t)&&e.test(t.nodeName),zd=e=>de(e)&&e.nodeType===3,hT=e=>de(e)&&e.nodeType===1,jl=Bv(/^(OL|UL|DL)$/),jZ=Bv(/^(OL|UL)$/),pT=Bv(/^(LI|DT|DD)$/),GZ=Bv(/^(DT|DD)$/),B1=WZ("br"),qZ=e=>{var t;return((t=e.parentNode)==null?void 0:t.firstChild)===e},qD=(e,t)=>de(t)&&t.nodeName in e.schema.getTextBlockElements(),KD=(e,t)=>de(e)&&e.nodeName in t,KZ=(e,t)=>de(t)&&t.nodeName in e.schema.getVoidElements(),YZ=(e,t)=>B1(t)?e.isBlock(t.nextSibling)&&!B1(t.previousSibling):!1,P1=(e,t,o)=>{const r=e.isEmpty(t);return o&&e.select("span[data-mce-type=bookmark]",t).length>0?!1:r},G$=(e,t)=>e.isChildOf(t,e.getRoot()),q$=Un.DOM,XZ=(e,t)=>{const o=t.parentElement;if(o&&o.nodeName==="LI"&&o.firstChild===t){const r=o.previousSibling;r&&r.nodeName==="LI"?(r.appendChild(t),P1(e,o)&&q$.remove(o)):q$.setStyle(o,"listStyleType","none")}if(jl(o)){const r=o.previousSibling;r&&r.nodeName==="LI"&&r.appendChild(t)}},YD=(e,t)=>{const o=Ke.grep(e.select("ol,ul",t));Ke.each(o,r=>{XZ(e,r)})},K$=(e,t)=>{if(zd(e))return{container:e,offset:t};const o=Rd.getNode(e,t);return zd(o)?{container:o,offset:t>=e.childNodes.length?o.data.length:0}:o.previousSibling&&zd(o.previousSibling)?{container:o.previousSibling,offset:o.previousSibling.data.length}:o.nextSibling&&zd(o.nextSibling)?{container:o.nextSibling,offset:0}:{container:e,offset:t}},XD=e=>{const t=e.cloneRange(),o=K$(e.startContainer,e.startOffset);t.setStart(o.container,o.offset);const r=K$(e.endContainer,e.endOffset);return t.setEnd(r.container,r.offset),t},Y$=["OL","UL","DL"],X$=Y$.join(","),zS=(e,t)=>{const o=e.selection.getStart(!0);return e.dom.getParent(o,X$,VS(e,o))},J$=(e,t)=>de(e)&&t.length===1&&t[0]===e,JZ=e=>ge(e.querySelectorAll(X$),jl),QZ=e=>{const t=zS(e),o=e.selection.getSelectedBlocks();return J$(t,o)?JZ(t):ge(o,r=>jl(r)&&t!==r)},eW=(e,t)=>{const o=Ke.map(t,r=>{const c=e.dom.getParent(r,"li,dd,dt",VS(e,r));return c||r});return _i(o)},JD=e=>{const t=e.selection.getSelectedBlocks();return ge(eW(e,t),pT)},tW=e=>ge(JD(e),GZ),QD=(e,t)=>{const o=e.dom.getParents(t,"TD,TH");return o.length>0?o[0]:e.getBody()},nW=(e,t)=>!jl(t)&&!pT(t)&&Ge(Y$,o=>e.isValidChild(t.nodeName,o)),VS=(e,t)=>{const o=e.dom.getParents(t,e.dom.isBlock),r=u=>u.nodeName.toLowerCase()!==Ys(e);return To(o,u=>r(u)&&nW(e.schema,u)).getOr(e.getBody())},Q$=e=>Lc(e).exists(t=>pT(t.dom)&&Nr(t).exists(o=>!jl(o.dom))&&or(t).exists(o=>!jl(o.dom))),e8=(e,t)=>{const o=e.dom.getParents(t,"ol,ul",VS(e,t));return Tr(o)},oW=e=>{const t=e8(e,e.selection.getStart()),o=ge(e.selection.getSelectedBlocks(),jZ);return t.toArray().concat(o)},sW=e=>{const t=e.selection.getStart();return e.dom.getParents(t,"ol,ul",VS(e,t))},rW=e=>{const t=oW(e),o=sW(e);return To(o,r=>Q$(Y.fromDom(r))).fold(()=>aW(e,t),r=>[r])},aW=(e,t)=>{const o=Ue(t,r=>e8(e,r).getOr(r));return _i(o)},bT=e=>/\btox\-/.test(e.className),t8=(e,t)=>t!==null&&!e.dom.isEditable(t),cW=e=>{const t=zS(e);return t8(e,t)||!e.selection.isEditable()},eR=(e,t)=>{const o=e.dom.getParent(t,"ol,ul,dl");return t8(e,o)||!e.selection.isEditable()},$h=(e,t,o)=>e.dispatch("ListMutation",{action:t,element:o}),tR=(e,t,o={})=>{const r=e.dom,c=e.schema.getBlockElements(),u=r.createFragment(),f=Ys(e),b=Yi(e);let v,w,_=!1;for(w=r.create(f,{...b,...o.style?{style:o.style}:{}}),KD(t.firstChild,c)||u.appendChild(w);v=t.firstChild;){const D=v.nodeName;!_&&(D!=="SPAN"||v.getAttribute("data-mce-type")!=="bookmark")&&(_=!0),KD(v,c)?(u.appendChild(v),w=null):(w||(w=r.create(f,b),u.appendChild(w)),w.appendChild(v))}return!_&&w&&w.appendChild(r.create("br",{"data-mce-bogus":"1"})),u},Pv=e=>w0(e,"OL,UL"),JJ=e=>w0(e,"LI"),nR=e=>Nr(e).exists(Pv),iW=e=>or(e).exists(Pv),n8=(e,t)=>kC(e).map(o=>o>=t).getOr(!0),$1=e=>"listAttributes"in e,o8=e=>"isComment"in e,lW=e=>"isFragment"in e,s8=e=>e.depth>0,uW=e=>e.isSelected,dW=e=>{const t=ks(e),o=iW(e)?t.slice(0,-1):t;return Ue(o,ip)},oR=(e,t,o)=>Lc(e).filter(Ts).map(r=>({depth:t,dirty:!1,isSelected:o,content:dW(e),itemAttributes:Nn(e),listAttributes:Nn(r),listType:An(r),isInPreviousLi:!1})),vT=(e,t)=>{Qn(e.item,t.list)},mW=e=>{for(let t=1;t<e.length;t++)vT(e[t-1],e[t])},r8=(e,t)=>{tr(Tr(e),Vs(t),vT)},fW=(e,t)=>{const o={list:Y.fromTag(t,e),item:Y.fromTag("li",e)};return Qn(o.list,o.item),o},gW=(e,t,o)=>{const r=[];for(let c=0;c<o;c++)r.push(fW(e,$1(t)?t.listType:t.parentListType));return r},hW=(e,t)=>{for(let o=0;o<e.length-1;o++)pc(e[o].item,"list-style-type","none");Tr(e).each(o=>{$1(t)&&(Ir(o.list,t.listAttributes),Ir(o.item,t.itemAttributes)),ii(o.item,t.content)})},pW=(e,t)=>{An(e.list)!==t.listType&&(e.list=lp(e.list,t.listType)),Ir(e.list,t.listAttributes)},bW=(e,t,o)=>{const r=Y.fromTag("li",e);return Ir(r,t),ii(r,o),r},vW=(e,t)=>{Qn(e.list,t),e.item=t},a8=(e,t,o)=>{const r=t.slice(0,o.depth);return Tr(r).each(c=>{if($1(o)){const u=bW(e,o.itemAttributes,o.content);vW(c,u),pW(c,o)}else if(lW(o))ii(c.item,o.content);else{const u=Y.fromHtml(`<!--${o.content}-->`);Qn(c.list,u)}}),r},yW=(e,t,o)=>{const r=gW(e,o,o.depth-t.length);return mW(r),hW(r,o),r8(t,r),t.concat(r)},CW=(e,t)=>{let o=B.none();const r=kn(t,(c,u,f)=>o8(u)?f===0?(o=B.some(u),c):a8(e,c,u):u.depth>c.length?yW(e,c,u):a8(e,c,u),[]);return o.each(c=>{const u=Y.fromHtml(`<!--${c.content}-->`);Vs(r).each(f=>{uu(f.list,u)})}),Vs(r).map(c=>c.list)},SW=(e,t,o)=>{switch(t){case"Indent":if(n8(e,o.depth))o.depth++;else return;break;case"Outdent":o.depth--;break;case"Flatten":o.depth=0}o.dirty=!0},sR=(e,t)=>{$1(e)&&$1(t)&&(e.listType=t.listType,e.listAttributes={...t.listAttributes})},wW=e=>{e.listAttributes=nf(e.listAttributes,(t,o)=>o!=="start")},xW=(e,t)=>{const o=e[t].depth,r=u=>u.depth===o&&!u.dirty,c=u=>u.depth<o;return pr(Cs(e.slice(0,t)),r,c).orThunk(()=>pr(e.slice(t+1),r,c))},c8=e=>(ne(e,(t,o)=>{xW(e,o).fold(()=>{t.dirty&&$1(t)&&wW(t)},r=>sR(t,r))}),e),i8=(e,t,o,r)=>{if(vl(r))return[{depth:e+1,content:r.dom.nodeValue??"",dirty:!1,isSelected:!1,isComment:!0}];t.each(f=>{Ln(f.start,r)&&o.set(!0)});const c=oR(r,e,o.get());t.each(f=>{Ln(f.end,r)&&o.set(!1)});const u=or(r).filter(Pv).map(f=>US(e,t,o,f)).getOr([]);return c.toArray().concat(u)},EW=(e,t,o,r)=>Nr(r).filter(Pv).fold(()=>i8(e,t,o,r),c=>{const u=kn(ks(r),(f,b,v)=>{if(v===0)return f;if(JJ(b))return f.concat(i8(e,t,o,b));{const w={isFragment:!0,depth:e,content:[b],isSelected:!1,dirty:!1,parentListType:An(c)};return f.concat(w)}},[]);return US(e,t,o,c).concat(u)}),US=(e,t,o,r)=>mo(ks(r),c=>{const u=Pv(c)?US:EW,f=e+1;return u(f,t,o,c)}),I1=(e,t)=>{const o=Xt(!1),r=0;return Ue(e,c=>({sourceList:c,entries:US(r,t,o,c)}))},l8=(e,t)=>{const o=c8(t);return Ue(o,r=>{const c=o8(r)?am([Y.fromHtml(`<!--${r.content}-->`)]):am(r.content),u=$1(r)?r.itemAttributes:{};return Y.fromDom(tR(e,c.dom,u))})},TW=(e,t)=>{const o=c8(t);return CW(e.contentDocument,o).toArray()},kW=(e,t)=>mo(Qt(t,s8),o=>Vs(o).exists(s8)?TW(e,o):l8(e,o)),_W=(e,t,o)=>{ne(ge(t,uW),r=>SW(e,o,r))},AW=e=>{const t=Ue(JD(e),Y.fromDom);return tr(To(t,vo(nR)),To(Cs(t),vo(nR)),(o,r)=>({start:o,end:r}))},$v=(e,t,o)=>{const r=I1(t,AW(e));ne(r,c=>{_W(e,c.entries,o);const u=kW(e,c.entries);ne(u,f=>{$h(e,o==="Indent"?"IndentList":"OutdentList",f.dom)}),Vw(c.sourceList,u),Zo(c.sourceList)})},OW=e=>kC(e).forall(t=>{const o=e.selection.getSelectedBlocks();return Ge(o,r=>ea(Y.fromDom(r),"li").forall(c=>C3(c,"ol,ul").length<=t))}),Vm=Un.DOM,rR=(e,t,o)=>{const r=w=>{const _=w.parentNode;_&&Ke.each(c,D=>{_.insertBefore(D,o.parentNode)}),Vm.remove(w)},c=Vm.select('span[data-mce-type="bookmark"]',t),u=tR(e,o),f=Vm.createRng();f.setStartAfter(o),f.setEndAfter(t);const b=f.extractContents();for(let w=b.firstChild;w;w=w.firstChild)if(w.nodeName==="LI"&&e.dom.isEmpty(w)){Vm.remove(w);break}e.dom.isEmpty(b)||Vm.insertAfter(b,t),Vm.insertAfter(u,t);const v=o.parentElement;v&&P1(e.dom,v)&&r(v),Vm.remove(o),P1(e.dom,t)&&Vm.remove(t)},DW=iu("dd"),aR=iu("dt"),yT=(e,t)=>{DW(t)?lp(t,"dt"):aR(t)&&Ni(t).each(o=>rR(e,o.dom,t.dom))},RW=e=>{aR(e)&&lp(e,"dd")},MW=(e,t,o)=>{t==="Indent"?ne(o,RW):ne(o,r=>yT(e,r))},NW=(e,t)=>{const o=lf(rW(e)),r=lf(tW(e));let c=!1;if(o.length||r.length){const u=e.selection.getBookmark();$v(e,o,t),MW(e,t,r),e.selection.moveToBookmark(u),e.selection.setRng(XD(e.selection.getRng())),e.nodeChanged(),c=!0}return c},cR=(e,t)=>!cW(e)&&NW(e,t),u8=e=>cR(e,"Indent"),ZS=e=>cR(e,"Outdent"),CT=e=>cR(e,"Flatten"),Iv=e=>{switch(e){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},BW=(e,t,o)=>{const r=o["list-style-type"]?o["list-style-type"]:null;e.setStyle(t,"list-style-type",r)},d8=(e,t)=>{Ke.each(t,(o,r)=>{e.setAttribute(r,o)})},PW=(e,t,o)=>{d8(t,o["list-attributes"]),Ke.each(e.select("li",t),r=>{d8(r,o["list-item-attributes"])})},Lv=(e,t,o)=>{BW(e,t,o),PW(e,t,o)},$W=(e,t,o)=>{Ke.each(o,r=>e.setStyle(t,r,""))},ST=(e,t)=>de(t)&&!KD(t,e.schema.getBlockElements()),iR=(e,t,o,r)=>{let c=t[o?"startContainer":"endContainer"];const u=t[o?"startOffset":"endOffset"];hT(c)&&(c=c.childNodes[Math.min(u,c.childNodes.length-1)]||c),!o&&B1(c.nextSibling)&&(c=c.nextSibling);const f=v=>{for(;!e.dom.isBlock(v)&&v.parentNode&&r!==v;)v=v.parentNode;return v},b=(v,w)=>{var L;const _=new _s(v,f(v)),D=w?"next":"prev";let M;for(;M=_[D]();)if(!(KZ(e,M)||gl(M.textContent)||((L=M.textContent)==null?void 0:L.length)===0))return B.some(M);return B.none()};if(o&&zd(c))if(gl(c.textContent))c=b(c,!1).getOr(c);else for(c.parentNode!==null&&ST(e,c.parentNode)&&(c=c.parentNode);c.previousSibling!==null&&(ST(e,c.previousSibling)||zd(c.previousSibling));)c=c.previousSibling;if(!o&&zd(c))if(gl(c.textContent))c=b(c,!0).getOr(c);else for(c.parentNode!==null&&ST(e,c.parentNode)&&(c=c.parentNode);c.nextSibling!==null&&(ST(e,c.nextSibling)||zd(c.nextSibling));)c=c.nextSibling;for(;c.parentNode!==r;){const v=c.parentNode;if(qD(e,c)||/^(TD|TH)$/.test(v.nodeName))return c;c=v}return c},IW=(e,t,o)=>{const r=[],c=e.dom,u=iR(e,t,!0,o),f=iR(e,t,!1,o);let b;const v=[];for(let w=u;w&&(v.push(w),w!==f);w=w.nextSibling);return Ke.each(v,w=>{var D;if(qD(e,w)){r.push(w),b=null;return}if(c.isBlock(w)||B1(w)){B1(w)&&c.remove(w),b=null;return}const _=w.nextSibling;if(dv.isBookmarkNode(w)&&(jl(_)||qD(e,_)||!_&&w.parentNode===o)){b=null;return}b||(b=c.create("p"),(D=w.parentNode)==null||D.insertBefore(b,w),r.push(b)),b.appendChild(w)}),r},LW=(e,t,o)=>{const r=e.getStyle(t,"list-style-type");let c=o?o["list-style-type"]:"";return c=c===null?"":c,r===c},FW=(e,t)=>{const o=e.selection.getStart(!0),r=iR(e,t,!0,e.getBody());return N0(Y.fromDom(r),Y.fromDom(t.commonAncestorContainer))?t.commonAncestorContainer:o},lR=(e,t,o)=>{const r=e.selection.getRng();let c="LI";const u=VS(e,FW(e,r)),f=e.dom;if(f.getContentEditable(e.selection.getNode())==="false")return;t=t.toUpperCase(),t==="DL"&&(c="DT");const b=Fm(r),v=ge(IW(e,r,u),e.dom.isEditable);Ke.each(v,w=>{let _;const D=w.previousSibling,M=w.parentNode;pT(M)||(D&&jl(D)&&D.nodeName===t&&LW(f,D,o)?(_=D,w=f.rename(w,c),D.appendChild(w)):(_=f.create(t),M.insertBefore(_,w),_.appendChild(w),w=f.rename(w,c)),$W(f,w,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),Lv(f,_,o),uR(e.dom,_))}),e.selection.setRng(Hl(b))},HW=(e,t)=>jl(e)&&e.nodeName===(t==null?void 0:t.nodeName),m8=(e,t,o)=>{const r=e.getStyle(t,"list-style-type",!0),c=e.getStyle(o,"list-style-type",!0);return r===c},zW=(e,t)=>e.className===t.className,f8=(e,t,o)=>HW(t,o)&&m8(e,t,o)&&zW(t,o),uR=(e,t)=>{let o,r=t.nextSibling;if(f8(e,t,r)){const c=r;for(;o=c.firstChild;)t.appendChild(o);e.remove(c)}if(r=t.previousSibling,f8(e,t,r)){const c=r;for(;o=c.lastChild;)t.insertBefore(o,t.firstChild);e.remove(c)}},VW=(e,t,o,r)=>{if(t.nodeName!==o){const c=e.dom.rename(t,o);Lv(e.dom,c,r),$h(e,Iv(o),c)}else Lv(e.dom,t,r),$h(e,Iv(o),t)},UW=(e,t,o,r)=>{if(t.classList.forEach((c,u,f)=>{c.startsWith("tox-")&&(f.remove(c),f.length===0&&t.removeAttribute("class"))}),t.nodeName!==o){const c=e.dom.rename(t,o);Lv(e.dom,c,r),$h(e,Iv(o),c)}else Lv(e.dom,t,r),$h(e,Iv(o),t)},dR=(e,t,o,r,c)=>{const u=jl(t);if(u&&t.nodeName===r&&!g8(c)&&!bT(t))CT(e);else{lR(e,r,c);const f=Fm(e.selection.getRng()),b=u?[t,...o]:o,v=u&&bT(t)?UW:VW;Ke.each(b,w=>{v(e,w,r,c)}),e.selection.setRng(Hl(f))}},g8=e=>"list-style-type"in e,ZW=(e,t,o,r)=>{if(t!==e.getBody())if(t)if(t.nodeName===o&&!g8(r)&&!bT(t))CT(e);else{const c=Fm(e.selection.getRng());bT(t)&&t.classList.forEach((f,b,v)=>{f.startsWith("tox-")&&(v.remove(f),v.length===0&&t.removeAttribute("class"))}),Lv(e.dom,t,r);const u=e.dom.rename(t,o);uR(e.dom,u),e.selection.setRng(Hl(c)),lR(e,o,r),$h(e,Iv(o),u)}else lR(e,o,r),$h(e,Iv(o),t)},mR=(e,t,o)=>{const r=zS(e);if(eR(e,r))return;const c=QZ(e),u=At(o)?o:{};c.length>0?dR(e,r,c,t,u):ZW(e,r,t,u)},h8=(e,t,o,r)=>{let c=t.startContainer;const u=t.startOffset;if(zd(c)&&(o?u<c.data.length:u>0))return c;const f=e.schema.getNonEmptyElements();hT(c)&&(c=Rd.getNode(c,u));const b=new _s(c,r);o&&YZ(e.dom,c)&&b.next();const v=o?b.next.bind(b):b.prev2.bind(b);for(;c=v();)if(c.nodeName==="LI"&&!c.hasChildNodes()||f[c.nodeName]||zd(c)&&c.data.length>0)return c;return null},p8=(e,t)=>{const o=t.childNodes;return o.length===1&&!jl(o[0])&&e.isBlock(o[0])},WW=e=>B.from(e).map(Y.fromDom).filter(yl).exists(t=>Fi(t)&&!Ce(["details"],An(t))),jW=(e,t)=>{p8(e,t)&&WW(t.firstChild)&&e.remove(t.firstChild,!0)},b8=(e,t,o)=>{let r;const c=p8(e,o)?o.firstChild:o;if(jW(e,t),!P1(e,t,!0))for(;r=t.firstChild;)c.appendChild(r)},fR=(e,t,o)=>{let r;const c=t.parentNode;if(!G$(e,t)||!G$(e,o))return;jl(o.lastChild)&&(r=o.lastChild),c===o.lastChild&&B1(c.previousSibling)&&e.remove(c.previousSibling);const u=o.lastChild;u&&B1(u)&&t.hasChildNodes()&&e.remove(u),P1(e,o,!0)&&Ii(Y.fromDom(o)),b8(e,t,o),r&&o.appendChild(r);const b=ri(Y.fromDom(o),Y.fromDom(t))?e.getParents(t,jl,o):[];e.remove(t),ne(b,v=>{P1(e,v)&&v!==e.getRoot()&&e.remove(v)})},GW=(e,t,o)=>{Ii(Y.fromDom(o)),fR(e.dom,t,o),e.selection.setCursorLocation(o,0)},qW=(e,t,o,r)=>{const c=e.dom;if(c.isEmpty(r))GW(e,o,r);else{const u=Fm(t);fR(c,o,r),e.selection.setRng(Hl(u))}},KW=(e,t,o,r)=>{const c=Fm(t);fR(e.dom,o,r);const u=Hl(c);e.selection.setRng(u)},YW=(e,t)=>{const o=e.dom,r=e.selection,c=r.getStart(),u=QD(e,c),f=o.getParent(r.getStart(),"LI",u);if(f){const b=f.parentElement;if(b===e.getBody()&&P1(o,b))return!0;const v=XD(r.getRng()),w=o.getParent(h8(e,v,t,u),"LI",u),_=w&&(t?o.isChildOf(f,w):o.isChildOf(w,f));if(w&&w!==f&&!_)return e.undoManager.transact(()=>{t?qW(e,v,w,f):qZ(f)?ZS(e):KW(e,v,f,w)}),!0;if(_&&!t&&w!==f){const D=v.commonAncestorContainer.parentElement;return!D||o.isChildOf(w,D)?!1:(e.undoManager.transact(()=>{const M=Fm(v);b8(o,D,w),D.remove();const L=Hl(M);e.selection.setRng(L)}),!0)}else if(!w&&!t&&v.startOffset===0&&v.endOffset===0)return e.undoManager.transact(()=>{CT(e)}),!0}return!1},XW=(e,t,o)=>{const r=e.getParent(t.parentNode,e.isBlock,o);e.remove(t),r&&e.isEmpty(r)&&e.remove(r)},JW=(e,t)=>{const o=e.dom,r=e.selection.getStart(),c=QD(e,r),u=o.getParent(r,o.isBlock,c);if(u&&o.isEmpty(u,void 0,{checkRootAsContent:!0})){const f=XD(e.selection.getRng()),b=h8(e,f,t,c),v=o.getParent(b,"LI",c);if(b&&v){const w=L=>Ce(["td","th","caption"],An(L)),_=L=>L.dom===c,D=Ro(Y.fromDom(v),w,_),M=Ro(Y.fromDom(f.startContainer),w,_);return gg(D,M,Ln)?(e.undoManager.transact(()=>{const L=v.parentNode;XW(o,u,c),uR(o,L),e.selection.select(b,!0),e.selection.collapse(t)}),!0):!1}}return!1},QW=(e,t)=>YW(e,t)||JW(e,t),gR=e=>{const t=e.selection.getStart(),o=QD(e,t),r=e.dom.getParent(t,"LI,DT,DD",o);return de(r)||JD(e).length>0},ej=e=>gR(e)?(e.undoManager.transact(()=>{let t=!0;const o=()=>t=!1;e.on("input",o),e.execCommand("Delete"),e.off("input",o),t&&e.dispatch("input"),YD(e.dom,e.getBody())}),!0):!1,hR=(e,t)=>{const o=e.selection;return!eR(e,o.getNode())&&(o.isCollapsed()?QW(e,t):ej(e))},tj=(e,t)=>({block:e,position:t}),nj=(e,t)=>({from:e,to:t}),wT=(e,t)=>{const o=Y.fromDom(e),r=Y.fromDom(t.container());return VA(o,r).map(c=>tj(c,t))},oj=e=>!(ri(e.to.block,e.from.block)||ri(e.from.block,e.to.block)),sj=e=>!Ln(e.from.block,e.to.block),pR=(e,t)=>Ro(t,c=>wf(c)||vc(c.dom),c=>Ln(c,e)).filter(Ts).getOr(e),rj=(e,t)=>{const o=Y.fromDom(e);return Ln(pR(o,t.from.block),pR(o,t.to.block))},aj=e=>ts(e.from.block.dom)===!1&&ts(e.to.block.dom)===!1,cj=e=>{const t=o=>Ca(o)||He(o.dom)||Na(o);return t(e.from.block)&&t(e.to.block)},ij=(e,t,o,r)=>ds(r.position.getNode())&&!As(e,r.block)?l(!1,r.block.dom).bind(c=>c.isEqual(r.position)?jc(o,t,c).bind(u=>wT(t,u)):B.some(r)).getOr(r):r,bR=(e,t,o,r)=>{const c=wT(t,ke.fromRangeStart(r)),u=c.bind(f=>jc(o,t,f.position).bind(b=>wT(t,b).map(v=>ij(e,t,o,v))));return tr(c,u,nj).filter(f=>sj(f)&&rj(t,f)&&aj(f)&&cj(f)&&oj(f))},v8=(e,t,o,r)=>r.collapsed?bR(e,t,o,r):B.none(),QJ=(e,t)=>{const o=ks(e);return qu(o,r=>t.isBlock(An(r))).fold(qe(o),r=>o.slice(0,r))},Fv=(e,t)=>{const o=QJ(e,t);return ne(o,Zo),o},lj=(e,t,o)=>{const r=Mu(o,t);return To(r.reverse(),c=>As(e,c)).each(Zo)},eQ=(e,t)=>ge(pa(t),o=>!As(e,o)).length===0,tQ=(e,t,o,r,c)=>{if(As(r,o))return Cm(o),y(o.dom);eQ(r,c)&&As(r,t)&&Qr(c,Y.fromTag("br"));const u=p(o.dom,ke.before(c.dom));return ne(Fv(t,r),f=>{Qr(c,f)}),lj(r,e,t),u},nQ=(e,t)=>e.isInline(An(t)),Vd=(e,t,o,r)=>{if(As(r,o)){if(As(r,t)){const f=xn((b=>{const v=(w,_)=>Nr(w).fold(()=>_,D=>nQ(r,D)?v(D,_.concat(ba(D))):_);return v(b,[])})(o),(b,v)=>(Fc(b,v),v),ym());Ii(t),Qn(t,f)}return Zo(o),y(t.dom)}const c=E(o.dom);return ne(Fv(t,r),u=>{Qn(o,u)}),lj(r,e,t),c},WS=(e,t)=>{const o=Mu(t,e);return B.from(o[o.length-1])},Ud=(e,t)=>ri(t,e)?WS(t,e):B.none(),Ih=(e,t)=>{l(e,t.dom).bind(o=>B.from(o.getNode())).map(Y.fromDom).filter(Wi).each(Zo)},xT=(e,t,o,r)=>(Ih(!0,t),Ih(!1,o),Ud(t,o).fold(ze(Vd,e,t,o,r),ze(tQ,e,t,o,r))),vR=(e,t,o,r,c)=>t?xT(e,r,o,c):xT(e,o,r,c),L1=(e,t)=>{const o=Y.fromDom(e.getBody());return v8(e.schema,o.dom,t,e.selection.getRng()).map(c=>()=>{vR(o,t,c.from.block,c.to.block,e.schema).each(u=>{e.selection.setRng(u.toRange())})})},uj=(e,t,o)=>{const r=t.getRng();return tr(VA(e,Y.fromDom(r.startContainer)),VA(e,Y.fromDom(r.endContainer)),(c,u)=>Ln(c,u)?B.none():B.some(()=>{r.deleteContents(),vR(e,!0,c,u,o).each(f=>{t.setRng(f.toRange())})})).getOr(B.none())},yR=(e,t)=>{const o=Y.fromDom(t),r=ze(Ln,e);return fu(o,wf,r).isSome()},oQ=(e,t)=>yR(e,t.startContainer)||yR(e,t.endContainer),dj=(e,t)=>{const o=p(e.dom,ke.fromRangeStart(t)).isNone(),r=m(e.dom,ke.fromRangeEnd(t)).isNone();return!oQ(e,t)&&o&&r},jS=e=>B.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),y8=e=>{const t=Y.fromDom(e.getBody()),o=e.selection.getRng();return dj(t,o)?jS(e):uj(t,e.selection,e.schema)},Fs=(e,t)=>e.selection.isCollapsed()?B.none():y8(e),Qf=(e,t,o,r,c)=>B.from(t._selectionOverrides.showCaret(e,o,r,c)),mj=e=>{const t=e.ownerDocument.createRange();return t.selectNode(e),t},Um=(e,t)=>e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?B.none():B.some(mj(t)),F1=(e,t,o)=>{const r=tv(1,e.getBody(),t),c=ke.fromRangeStart(r),u=c.getNode();if(Wc(u))return Qf(1,e,u,!c.isAtEnd(),!1);const f=c.getNode(!0);if(Wc(f))return Qf(1,e,f,!1,!1);const b=Md(e.dom.getRoot(),c.getNode());return Wc(b)?Qf(1,e,b,!1,o):B.none()},eg=(e,t,o)=>t.collapsed?F1(e,t,o).getOr(t):t,fj=e=>Uf(e)||eS(e),gj=e=>Im(e)||tS(e),CR=(e,t)=>{Ye(t)&&t.data.length===0&&e.remove(t)},ET=(e,t,o,r,c,u)=>{Qf(r,e,u.getNode(!c),c,!0).each(f=>{if(t.collapsed){const b=t.cloneRange();c?b.setEnd(f.startContainer,f.startOffset):b.setStart(f.endContainer,f.endOffset),b.deleteContents()}else t.deleteContents();e.selection.setRng(f)}),CR(e.dom,o)},C8=(e,t)=>{const o=e.selection.getRng();if(!Ye(o.commonAncestorContainer))return B.none();const r=t?1:-1,c=Ll(e.getBody()),u=ze(ov,t?c.next:c.prev),f=t?fj:gj,b=Nm(r,e.getBody(),o),v=u(b),w=v&&Fl(t,v);if(!w||!Il(b,w))return B.none();if(f(w))return B.some(()=>ET(e,o,b.getNode(),r,t,w));const _=u(w);return _&&f(_)&&Il(w,_)?B.some(()=>ET(e,o,b.getNode(),r,t,_)):B.none()},TT=(e,t)=>C8(e,t),SR=(e,t)=>{const o=e.getBody();return t?y(o).filter(Uf):E(o).filter(Im)},wR=e=>{const t=e.selection.getRng();return!t.collapsed&&(SR(e,!0).exists(o=>o.isEqual(ke.fromRangeStart(t)))||SR(e,!1).exists(o=>o.isEqual(ke.fromRangeEnd(t))))},xR=e=>de(e)&&(wf(Y.fromDom(e))||Na(Y.fromDom(e))),sl=ml.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),hj=(e,t)=>{const o=t.getNode(!e),r=e?"after":"before";return it(o)&&o.getAttribute("data-mce-caret")===r},pj=(e,t,o,r,c)=>{const u=f=>c.isInline(f.nodeName.toLowerCase())&&!ku(o,r,e);return nv(!t,o).fold(()=>nv(t,r).fold($e,u),u)},S8=(e,t,o,r,c)=>{const u=c.getNode(!o);return VA(Y.fromDom(t),Y.fromDom(r.getNode())).map(f=>As(e,f)?sl.remove(f.dom):sl.moveToElement(u)).orThunk(()=>B.some(sl.moveToElement(u)))},w8=(e,t,o,r)=>jc(t,e,o).bind(c=>xR(c.getNode())||pj(e,t,o,c,r)?B.none():t&&ts(c.getNode())||!t&&ts(c.getNode(!0))?S8(r,e,t,o,c):t&&Im(o)||!t&&Uf(o)?B.some(sl.moveToPosition(c)):B.none()),ER=(e,t)=>Le(t)?B.none():e&&ts(t.nextSibling)?B.some(sl.moveToElement(t.nextSibling)):!e&&ts(t.previousSibling)?B.some(sl.moveToElement(t.previousSibling)):B.none(),x8=(e,t,o)=>o.fold(r=>B.some(sl.remove(r)),r=>B.some(sl.moveToElement(r)),r=>ku(t,r,e)?B.none():B.some(sl.moveToPosition(r))),bj=(e,t,o,r)=>hj(t,o)?ER(t,o.getNode(!t)).orThunk(()=>w8(e,t,o,r)):w8(e,t,o,r).bind(c=>x8(e,o,c)),vj=(e,t,o,r)=>{const c=tv(t?1:-1,e,o),u=ke.fromRangeStart(c),f=Y.fromDom(e);return!t&&Im(u)?B.some(sl.remove(u.getNode(!0))):t&&Uf(u)?B.some(sl.remove(u.getNode())):!t&&Uf(u)&&v4(f,u,r)?SN(f,u,r).map(b=>sl.remove(b.getNode())):t&&Im(u)&&$A(f,u,r)?W9(f,u,r).map(b=>sl.remove(b.getNode())):bj(e,t,u,r)},Hv=(e,t)=>o=>(e._selectionOverrides.hideFakeCaret(),Lm(e,t,Y.fromDom(o)),!0),E8=(e,t)=>o=>{const r=t?ke.before(o):ke.after(o);return e.selection.setRng(r.toRange()),!0},yj=e=>t=>(e.selection.setRng(t.toRange()),!0),TR=(e,t)=>B.from(Md(e.getBody(),t)),Cj=(e,t)=>{const o=e.selection.getNode();return TR(e,o).filter(ts).fold(()=>vj(e.getBody(),t,e.selection.getRng(),e.schema).map(r=>()=>r.fold(Hv(e,t),E8(e,t),yj(e))),()=>B.some(yt))},T8=e=>{ne(Fr(e,".mce-offscreen-selection"),Zo)},Sj=(e,t)=>{const o=e.selection.getNode();return ts(o)&&!Lg(o)?TR(e,o.parentNode).filter(ts).fold(()=>B.some(()=>{T8(Y.fromDom(e.getBody())),Lm(e,t,Y.fromDom(e.selection.getNode())),HN(e)}),()=>B.some(yt)):wR(e)?B.some(()=>{fz(e,e.selection.getRng(),Y.fromDom(e.getBody()))}):B.none()},kR=e=>{const t=e.dom,o=e.selection,r=Md(e.getBody(),o.getNode());if(vc(r)&&t.isBlock(r)&&t.isEmpty(r)){const c=t.create("br",{"data-mce-bogus":"1"});t.setHTML(r,""),r.appendChild(c),o.setRng(ke.before(c).toRange())}return!0},kT=(e,t)=>e.selection.isCollapsed()?Cj(e,t):Sj(e,t),_T=(e,t)=>{var b;const o=e.dom,r=o.getParent(e.selection.getStart(),o.isBlock),c=o.getParent(e.selection.getEnd(),o.isBlock),u=e.getBody();if(((b=r==null?void 0:r.nodeName)==null?void 0:b.toLowerCase())==="div"&&r&&c&&r===u.firstChild&&c===u.lastChild&&!o.isEmpty(u)){const v=r.cloneNode(!1),w=()=>{if(t?dz(e):zA(e),u.firstChild!==r){const _=Fm(e.selection.getRng(),()=>document.createElement("span"));Array.from(u.childNodes).forEach(D=>v.appendChild(D)),u.appendChild(v),e.selection.setRng(Hl(_))}};return B.some(w)}return B.none()},k8=(e,t)=>{const o=ke.fromRangeStart(e.selection.getRng());return jc(t,e.getBody(),o).filter(r=>t?DA(r):gN(r)).bind(r=>BC(t?0:-1,r)).map(r=>()=>e.selection.select(r))},AT=(e,t)=>e.selection.isCollapsed()?k8(e,t):B.none(),H1=Ye,_8=e=>H1(e)&&e.data[0]===fr,A8=e=>H1(e)&&e.data[e.data.length-1]===fr,O8=e=>(e.ownerDocument??document).createTextNode(fr),_R=e=>{var t;if(H1(e.previousSibling))return A8(e.previousSibling)||e.previousSibling.appendData(fr),e.previousSibling;if(H1(e))return _8(e)||e.insertData(0,fr),e;{const o=O8(e);return(t=e.parentNode)==null||t.insertBefore(o,e),o}},GS=e=>{var t,o;if(H1(e.nextSibling))return _8(e.nextSibling)||e.nextSibling.insertData(0,fr),e.nextSibling;if(H1(e))return A8(e)||e.appendData(fr),e;{const r=O8(e);return e.nextSibling?(t=e.parentNode)==null||t.insertBefore(r,e.nextSibling):(o=e.parentNode)==null||o.appendChild(r),r}},Lh=(e,t)=>e?_R(t):GS(t),AR=ze(Lh,!0),D8=ze(Lh,!1),OR=(e,t)=>Ye(e.container())?Lh(t,e.container()):Lh(t,e.getNode()),qS=(e,t)=>{const o=t.get();return o&&e.container()===o&&Rl(o)},DR=(e,t)=>t.fold(o=>{Pf(e.get());const r=AR(o);return e.set(r),B.some(ke(r,r.length-1))},o=>y(o).map(r=>{if(qS(r,e)){const c=e.get();return ke(c,1)}else{Pf(e.get());const c=OR(r,!0);return e.set(c),ke(c,1)}}),o=>E(o).map(r=>{if(qS(r,e)){const c=e.get();return ke(c,c.length-1)}else{Pf(e.get());const c=OR(r,!1);return e.set(c),ke(c,c.length-1)}}),o=>{Pf(e.get());const r=D8(o);return e.set(r),B.some(ke(r,1))}),R8=(e,t)=>{for(let o=0;o<e.length;o++){const r=e[o].apply(null,t);if(r.isSome())return r}return B.none()},Rr=ml.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),OT=(e,t)=>{const o=Rm(t,e);return o||e},M8=(e,t,o)=>{const r=IN(o),c=OT(t,r.container());return Th(e,c,r).fold(()=>m(c,r).bind(ze(Th,e,c)).map(u=>Rr.before(u)),B.none)},KS=(e,t)=>H(e,t)===null,RR=(e,t,o)=>Th(e,t,o).filter(ze(KS,t)),MR=(e,t,o)=>{const r=LN(o);return RR(e,t,r).bind(c=>p(c,r).isNone()?B.some(Rr.start(c)):B.none())},N8=(e,t,o)=>{const r=IN(o);return RR(e,t,r).bind(c=>m(c,r).isNone()?B.some(Rr.end(c)):B.none())},B8=(e,t,o)=>{const r=LN(o),c=OT(t,r.container());return Th(e,c,r).fold(()=>p(c,r).bind(ze(Th,e,c)).map(u=>Rr.after(u)),B.none)},P8=e=>!FA(NR(e)),Zd=(e,t,o)=>R8([M8,MR,N8,B8],[e,t,o]).filter(P8),NR=e=>e.fold(Fo,Fo,Fo,Fo),$8=e=>e.fold(qe("before"),qe("start"),qe("end"),qe("after")),DT=e=>e.fold(Rr.before,Rr.before,Rr.after,Rr.after),BR=e=>e.fold(Rr.start,Rr.start,Rr.end,Rr.end),PR=(e,t)=>$8(e)===$8(t)&&NR(e)===NR(t),wj=(e,t,o,r,c,u)=>tr(Th(t,o,r),Th(t,o,c),(f,b)=>f!==b&&lz(o,f,b)?Rr.after(e?f:b):u).getOr(u),I8=(e,t)=>e.fold(gt,o=>!PR(o,t)),xj=(e,t,o,r,c)=>{const u=Fl(e,c);return jc(e,o,u).map(ze(Fl,e)).fold(()=>r.map(DT),v=>Zd(t,o,v).map(ze(wj,e,t,o,u,v)).filter(ze(I8,r))).filter(P8)},Ej=(e,t)=>e?t.fold(T(B.some,Rr.start),B.none,T(B.some,Rr.after),B.none):t.fold(B.none,T(B.some,Rr.before),B.none,T(B.some,Rr.end)),Tj=(e,t,o,r)=>{const c=Fl(e,r),u=Zd(t,o,c);return Zd(t,o,c).bind(ze(Ej,e)).orThunk(()=>xj(e,t,o,u,r))},kj=e=>X(e.selection.getSel().modify),L8=(e,t,o)=>{const r=e?1:-1;return t.setRng(ke(o.container(),o.offset()+r).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},_j=(e,t)=>{const o=t.selection.getRng(),r=e?ke.fromRangeEnd(o):ke.fromRangeStart(o);return kj(t)?e&&yd(r)?L8(!0,t.selection,r):!e&&xf(r)?L8(!1,t.selection,r):!1:!1};var Zm;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(Zm||(Zm={}));const RT=(e,t)=>e===-1?Cs(t):t,Aj=(e,t,o)=>e===1?t.next(o):t.prev(o),Oj=(e,t,o,r)=>ds(r.getNode(t===1))?Zm.Br:ku(o,r)===!1?Zm.Block:Zm.Wrap,F8=(e,t,o,r)=>{const c=Ll(o);let u=r;const f=[];for(;u;){const b=Aj(t,c,u);if(!b)break;if(ds(b.getNode(!1)))return t===1?{positions:RT(t,f).concat([b]),breakType:Zm.Br,breakAt:B.some(b)}:{positions:RT(t,f),breakType:Zm.Br,breakAt:B.some(b)};if(!b.isVisible()){u=b;continue}if(e(u,b)){const v=Oj(o,t,u,b);return{positions:RT(t,f),breakType:v,breakAt:B.some(b)}}f.push(b),u=b}return{positions:RT(t,f),breakType:Zm.Eol,breakAt:B.none()}},$R=(e,t,o,r)=>t(o,r).breakAt.map(c=>{const u=t(o,c).positions;return e===-1?u.concat(c):[c].concat(u)}).getOr([]),IR=(e,t)=>kn(e,(o,r)=>o.fold(()=>B.some(r),c=>tr(Vs(c.getClientRects()),Vs(r.getClientRects()),(u,f)=>{const b=Math.abs(t-u.left);return Math.abs(t-f.left)<=b?r:c}).or(o)),B.none()),z1=(e,t)=>Vs(t.getClientRects()).bind(o=>IR(e,o.left)),Wr=ze(F8,ke.isAbove,-1),YS=ze(F8,ke.isBelow,1),XS=ze($R,-1,Wr),Fh=ze($R,1,YS),MT=(e,t)=>Wr(e,t).breakAt.isNone(),_c=(e,t)=>YS(e,t).breakAt.isNone(),V1=e=>y(e).map(t=>[t].concat(YS(e,t).positions)).getOr([]),H8=e=>E(e).map(t=>Wr(e,t).positions.concat(t)).getOr([]),z8=(e,t)=>z1(XS(e,t),t),LR=(e,t)=>z1(Fh(e,t),t),Dj=ts,FR=(e,t)=>Math.abs(e.left-t),NT=(e,t)=>Math.abs(e.right-t),HR=e=>Ss(e,"node"),V8=(e,t)=>vg(e,(o,r)=>{const c=Math.min(FR(o,t),NT(o,t)),u=Math.min(FR(r,t),NT(r,t));return u===c&&HR(r)&&Dj(r.node)||u<c?r:o}),Rj=e=>{const t=o=>Ue(o,r=>{const c=wm(r);return c.node=e,c});if(it(e))return t(e.getClientRects());if(Ye(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),t(o.getClientRects())}else return[]},zR=e=>mo(e,Rj);var Ac;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(Ac||(Ac={}));const VR=(e,t,o,r)=>{let c=r;for(;c=u1(c,e,pb,t);)if(o(c))return},U8=(e,t,o,r,c,u)=>{let f=0;const b=[],v=D=>{let M=zR([D]);e===Ac.Up&&(M=M.reverse());for(let L=0;L<M.length;L++){const W=M[L];if(!o(W,w)){if(b.length>0&&t(W,hl(b))&&f++,W.line=f,c(W))return!0;b.push(W)}}return!1},w=hl(u.getClientRects());if(!w)return b;const _=u.getNode();return _&&(v(_),VR(e,r,v,_)),b},BT=(e,t)=>t.line>e,UR=(e,t)=>t.line===e,Z8=ze(U8,Ac.Up,Tf,xm),W8=ze(U8,Ac.Down,xm,Tf),ZR=e=>hl(e.getClientRects()),Mj=(e,t,o,r)=>{const c=Ll(t);let u,f,b,v;const w=[];let _=0;e===Ac.Down?(u=c.next,f=xm,b=Tf,v=ke.after(r)):(u=c.prev,f=Tf,b=xm,v=ke.before(r));const D=ZR(v);do{if(!v.isVisible())continue;const M=ZR(v);if(b(M,D))continue;w.length>0&&f(M,hl(w))&&_++;const L=wm(M);if(L.position=v,L.line=_,o(L))return w;w.push(L)}while(v=u(v));return w},j8=e=>t=>BT(e,t),WR=e=>t=>UR(e,t),Wm=(e,t)=>{e.selection.setRng(t),Qi(e,e.selection.getRng())},jR=(e,t,o)=>B.some(eg(e,t,o)),GR=(e,t)=>{const o=e.getNode(t===-1);return de(o)&&hr(o)?B.some(o):B.none()},G8=(e,t)=>{const o=e.dom.createRng();return o.selectNode(t),o},q8=(e,t,o,r,c,u)=>{const f=t===1,b=Ll(e.getBody()),v=ze(ov,f?b.next:b.prev),w=f?r:c;if(!o.collapsed){const W=gr(o);if(u(W))if(hr(W)){const V=Nm(t,e.getBody(),o);return B.from(v(V)).map(q=>q.toRange())}else return Qf(t,e,W,t===-1,!1);else if(wR(e)){const V=o.cloneRange();return V.collapse(t===-1),B.from(V)}}const _=Nm(t,e.getBody(),o);if(w(_))return Um(e,_.getNode(!f));let D=v(_);const M=mb(o);if(D)D=Fl(f,D);else return M?B.some(o):B.none();if(w(D))return GR(D,t).fold(()=>Qf(t,e,D==null?void 0:D.getNode(!f),f,!1),W=>B.some(G8(e,W)));const L=v(D);return L&&w(L)&&Il(D,L)?GR(D,t).fold(()=>Qf(t,e,L.getNode(!f),f,!1),W=>B.some(G8(e,W))):M?jR(e,D.toRange(),!1):B.none()},K8=(e,t,o,r,c,u)=>{const f=Nm(t,e.getBody(),o),b=hl(f.getClientRects()),v=t===Ac.Down,w=e.getBody();if(!b)return B.none();if(wR(e)){const q=v?ke.fromRangeEnd(o):ke.fromRangeStart(o);return(v?LR:z8)(w,q).orThunk(()=>B.from(q)).map(ce=>ce.toRange())}const D=(v?W8:Z8)(w,j8(1),f),M=ge(D,WR(1)),L=b.left,W=V8(M,L);if(W&&u(W.node)){const q=Math.abs(L-W.left),ae=Math.abs(L-W.right);return Qf(t,e,W.node,q<ae,!1)}let V;if(r(f)?V=f.getNode():c(f)?V=f.getNode(!0):V=gr(o),V){const q=Mj(t,w,j8(1),V);let ae=V8(ge(q,WR(1)),L);if(ae||(ae=hl(ge(q,WR(0))),ae))return jR(e,ae.position.toRange(),!1)}return M.length===0?PT(e,v).filter(v?c:r).map(q=>eg(e,q.toRange(),!1)):B.none()},PT=(e,t)=>{const o=e.selection.getRng(),r=t?ke.fromRangeEnd(o):ke.fromRangeStart(o),c=Qb(r.container(),e.getBody());if(t){const u=YS(c,r);return Tr(u.positions)}else{const u=Wr(c,r);return Vs(u.positions)}},$T=(e,t,o)=>PT(e,t).filter(o).exists(r=>(e.selection.setRng(r.toRange()),!0)),zv=(e,t)=>{const o=e.dom.createRng();o.setStart(t.container(),t.offset()),o.setEnd(t.container(),t.offset()),e.selection.setRng(o)},qR=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},IT=(e,t,o)=>DR(t,o).map(r=>(zv(e,r),o)),Y8=(e,t,o)=>{const r=ke.fromRangeStart(e);if(e.collapsed)return r;{const c=ke.fromRangeEnd(e);return o?p(t,c).getOr(c):m(t,r).getOr(r)}},X8=(e,t,o)=>{const r=e.getBody(),c=Y8(e.selection.getRng(),r,o),u=ze(b1,e);return Tj(o,u,r,c).bind(b=>IT(e,t,b))},KR=(e,t,o)=>{const r=Ue(Fr(Y.fromDom(t.getRoot()),'*[data-mce-selected="inline-boundary"]'),f=>f.dom),c=ge(r,e),u=ge(o,e);ne(Ds(c,u),ze(qR,!1)),ne(Ds(u,c),ze(qR,!0))},J8=(e,t)=>{const o=t.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=ke.fromRangeStart(e.selection.getRng());ke.isTextPosition(r)&&!uz(r)&&(zv(e,Z_(o,r)),t.set(null))}},Q8=(e,t,o,r)=>{if(t.selection.isCollapsed()){const c=ge(r,e);ne(c,u=>{const f=ke.fromRangeStart(t.selection.getRng());Zd(e,t.getBody(),f).bind(b=>IT(t,o,b))})}},YR=(e,t,o)=>Dm(e)?X8(e,t,o).isSome():!1,eI=(e,t,o)=>Dm(t)?_j(e,t):!1,Nj=e=>{const t=Xt(null),o=ze(b1,e);return e.on("NodeChange",r=>{Dm(e)&&(KR(o,e.dom,r.parents),J8(e,t),Q8(o,e,t,r.parents))}),t},LT=ze(eI,!0),Bj=ze(eI,!1),Hh=(e,t,o)=>{if(Dm(e)){const r=PT(e,t).getOrThunk(()=>{const c=e.selection.getRng();return t?ke.fromRangeEnd(c):ke.fromRangeStart(c)});return Zd(ze(b1,e),e.getBody(),r).exists(c=>{const u=DT(c);return DR(o,u).exists(f=>(zv(e,f),!0))})}else return!1},Pj=(e,t)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(t.container(),t.offset()),o},$j=e=>tr(y(e),E(e),(t,o)=>{const r=Fl(!0,t),c=Fl(!1,o);return m(e,r).forall(u=>u.isEqual(c))}).getOr(!0),tI=(e,t)=>o=>DR(t,o).map(r=>()=>zv(e,r)),nI=(e,t,o,r)=>{const c=e.getBody(),u=ze(b1,e);e.undoManager.ignore(()=>{e.selection.setRng(Pj(o,r)),zA(e),Zd(u,c,ke.fromRangeStart(e.selection.getRng())).map(BR).bind(tI(e,t)).each(er)}),e.nodeChanged()},oI=(e,t)=>{const o=Rm(t,e);return o||e},sI=(e,t,o,r)=>{const c=oI(e.getBody(),r.container()),u=ze(b1,e),f=Zd(u,c,r);return f.bind(v=>o?v.fold(qe(B.some(BR(v))),B.none,qe(B.some(DT(v))),B.none):v.fold(B.none,qe(B.some(DT(v))),B.none,qe(B.some(BR(v))))).map(tI(e,t)).getOrThunk(()=>{const v=Sh(o,c,r),w=v.bind(_=>Zd(u,c,_));return tr(f,w,()=>Th(u,c,r).bind(_=>$j(_)?B.some(()=>{Lm(e,o,Y.fromDom(_))}):B.none())).getOrThunk(()=>w.bind(()=>v.map(_=>()=>{o?nI(e,t,r,_):nI(e,t,_,r)})))})},XR=(e,t,o)=>{if(e.selection.isCollapsed()&&Dm(e)){const r=ke.fromRangeStart(e.selection.getRng());return sI(e,t,o,r)}return B.none()},Ij=e=>rf(e)>1,rI=(e,t)=>{const o=Y.fromDom(e.getBody()),r=Y.fromDom(e.selection.getStart()),c=Mu(r,o);return qu(c,t).fold(qe(c),u=>c.slice(0,u))},Lj=e=>rf(e)===1,Fj=e=>rI(e,t=>e.schema.isBlock(An(t))||Ij(t)),aI=e=>rI(e,t=>e.schema.isBlock(An(t))),Hj=(e,t)=>{const o=ze(mB,e);return mo(t,r=>o(r)?[r.dom]:[])},JR=e=>{const t=aI(e);return Hj(e,t)},zj=(e,t,o,r)=>{const c=Hj(t,r);if(c.length===0)Lm(t,e,o);else{const u=rO(o.dom,c);t.selection.setRng(u.toRange())}},Vj=(e,t)=>{const o=ge(Fj(e),Lj);return Tr(o).bind(r=>{const c=ke.fromRangeStart(e.selection.getRng());return zN(t,c,r.dom)&&!rA(r)?B.some(()=>zj(t,e,r,o)):B.none()})},Uj=(e,t)=>{const o=t.parentElement;return ds(t)&&!ie(o)&&e.dom.isEmpty(o)},Zj=e=>rA(Y.fromDom(e)),cI=(e,t)=>{const o=e.selection.getStart(),r=Uj(e,o)||Zj(o)?rO(o,t):Lz(e.selection.getRng(),t);e.selection.setRng(r.toRange())},iI=(e,t)=>{const o=Ds(t,JR(e));o.length>0&&cI(e,o)},QR=e=>Ye(e.startContainer),Wj=e=>e.startOffset===0&&QR(e),jj=(e,t)=>{const o=t.startContainer.parentElement;return!ie(o)&&mB(e,Y.fromDom(o))},Gj=e=>{const t=e.startContainer.parentNode,o=e.endContainer.parentNode;return!ie(t)&&!ie(o)&&t.isEqualNode(o)},qj=e=>{const t=e.endContainer;return e.endOffset===(Ye(t)?t.length:t.childNodes.length)},Kj=e=>Gj(e)&&qj(e),Yj=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),Xj=e=>Kj(e)||Yj(e),Jj=e=>{const t=e.selection.getRng();return Wj(t)&&jj(e,t)&&Xj(t)},Qj=e=>{if(Jj(e)){const t=JR(e);return B.some(()=>{zA(e),iI(e,t)})}else return B.none()},e5=(e,t)=>e.selection.isCollapsed()?Vj(e,t):Qj(e),lI=(e,t)=>Rg(e,o=>N(o.dom),o=>t.isBlock(An(o))),eG=e=>lI(Y.fromDom(e.selection.getStart()),e.schema),tG=e=>{const t=e.selection.getRng();return t.collapsed&&(QR(t)||e.dom.isEmpty(t.startContainer))&&!eG(e)},JS=e=>(tG(e)&&cI(e,[]),!0),Vv=(e,t,o)=>de(o)?B.some(()=>{e._selectionOverrides.hideFakeCaret(),Lm(e,t,Y.fromDom(o))}):B.none(),nG=(e,t)=>{const o=t?eS:tS,c=Nm(t?1:-1,e.getBody(),e.selection.getRng());return o(c)?Vv(e,t,c.getNode(!t)):B.from(Fl(t,c)).filter(u=>o(u)&&Il(c,u)).bind(u=>Vv(e,t,u.getNode(!t)))},oG=(e,t)=>{const o=e.selection.getNode();return gi(o)?Vv(e,t,o):B.none()},FT=(e,t)=>e.selection.isCollapsed()?nG(e,t):oG(e,t),t5=e=>Ro(e,t=>vc(t.dom)||ts(t.dom)).exists(t=>vc(t.dom)),n5=e=>k2(e??"").getOr(0),uI=(e,t)=>{const o=e||Dx(t)?"margin":"padding",r=Ns(t,"direction")==="rtl"?"-right":"-left";return o+r},sQ=(e,t,o,r,c,u)=>{const f=uI(o,Y.fromDom(u)),b=n5(e.getStyle(u,f));if(t==="outdent"){const v=Math.max(0,b-r);e.setStyle(u,f,v?v+c:"")}else{const v=b+r+c;e.setStyle(u,f,v)}},sG=(e,t)=>ul(t,o=>{const r=uI(Hb(e),o),c=lr(o,r).map(n5).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&c>0}),dI=e=>{const t=mI(e);return!e.mode.isReadOnly()&&(t.length>1||sG(e,t))},rG=e=>!e.mode.isReadOnly()&&OW(e),Uv=e=>bi(e)||Na(e),aG=e=>Lc(e).exists(Uv),mI=e=>ge(lf(e.selection.getSelectedBlocks()),t=>!Uv(t)&&!aG(t)&&t5(t)),fI=(e,t)=>{var b;if(e.mode.isReadOnly())return;const{dom:o}=e,r=w_(e),c=((b=/[a-z%]+$/i.exec(r))==null?void 0:b[0])??"px",u=n5(r),f=Hb(e);ne(mI(e),v=>{sQ(o,t,f,u,c,v.dom)}),t==="indent"?u8(e):ZS(e)},gI=e=>fI(e,"indent"),tg=e=>fI(e,"outdent"),Oc=e=>{if(e.selection.isCollapsed()&&dI(e)){const t=e.dom,o=e.selection.getRng(),r=ke.fromRangeStart(o),c=t.getParent(o.startContainer,t.isBlock);if(c!==null&&p4(Y.fromDom(c),r,e.schema))return B.some(()=>tg(e))}return B.none()},hI=(e,t)=>{const o=CO(e.selection.getRng());return $H(o)?B.some(()=>Lm(e,t,Y.fromDom(e.selection.getNode()))):B.none()},U1=(e,t)=>e.selection.isCollapsed()?B.none():hI(e,t),ng=(e,t,o)=>ki([Oc,kT,TT,(r,c)=>XR(r,t,c),L1,YA,AT,FT,Fs,e5,_T,U1],r=>r(e,o)).filter(r=>e.selection.isEditable()),zu=(e,t)=>{ng(e,t,!1).fold(()=>{e.selection.isEditable()&&(zA(e),HN(e))},er),gR(e)&&YD(e.dom,e.getBody())},QS=(e,t)=>{ng(e,t,!0).fold(()=>{e.selection.isEditable()&&dz(e)},er),gR(e)&&YD(e.dom,e.getBody())},o5=(e,t)=>{e.addCommand("delete",()=>{zu(e,t)}),e.addCommand("forwardDelete",()=>{QS(e,t)})},HT=5,pI=400,s5=e=>e.touches===void 0||e.touches.length!==1?B.none():B.some(e.touches[0]),cG=(e,t)=>{const o=Math.abs(e.clientX-t.x),r=Math.abs(e.clientY-t.y);return o>HT||r>HT},iG=e=>{const t=oi(),o=Xt(!1),r=Jd(c=>{e.dispatch("longpress",{...c,type:"longpress"}),o.set(!0)},pI);e.on("touchstart",c=>{s5(c).each(u=>{r.cancel();const f={x:u.clientX,y:u.clientY,target:c.target};r.throttle(c),o.set(!1),t.set(f)})},!0),e.on("touchmove",c=>{r.cancel(),s5(c).each(u=>{t.on(f=>{cG(u,f)&&(t.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",c=>{r.cancel(),c.type!=="touchcancel"&&t.get().filter(u=>u.target.isEqualNode(c.target)).each(()=>{o.get()?c.preventDefault():e.dispatch("tap",{...c,type:"tap"})})},!0)},zT=(e,t)=>Sn(e,t.nodeName),bI=(e,t)=>Ye(t)?!0:it(t)?!zT(e.getBlockElements(),t)&&!vs(t)&&!ps(e,t)&&!Hg(t)&&!ly(t):!1,vI=(e,t,o)=>Ge(pN(Y.fromDom(o),Y.fromDom(t)),r=>zT(e,r.dom)),lG=(e,t)=>{if(Ye(t)){if(t.data.length===0)return!0;if(/^\s+$/.test(t.data))return!t.nextSibling||zT(e,t.nextSibling)||Hg(t.nextSibling)}return!1},yI=e=>e.dom.create(Ys(e),Yi(e)),rQ=e=>{const t=e.dom,o=e.selection,r=e.schema,c=r.getBlockElements(),u=o.getStart(),f=e.getBody();let b,v,w=null;const _=Ys(e);if(!u||!it(u))return;const D=f.nodeName.toLowerCase();if(!r.isValidChild(D,_.toLowerCase())||vI(c,f,u))return;if(f.firstChild===f.lastChild&&ds(f.firstChild)){b=yI(e),b.appendChild(ym().dom),f.replaceChild(b,f.firstChild),e.selection.setCursorLocation(b,0),e.nodeChanged();return}let M=f.firstChild;for(;M;)if(it(M)&&Da(r,M),bI(r,M)){if(lG(c,M)){v=M,M=M.nextSibling,t.remove(v);continue}if(!b){if(!w&&e.hasFocus()&&(w=Fm(e.selection.getRng(),()=>document.createElement("span"))),!M.parentNode){M=null;break}b=yI(e),f.insertBefore(b,M)}v=M,M=M.nextSibling,b.appendChild(v)}else b=null,M=M.nextSibling;w&&(e.selection.setRng(Hl(w)),e.nodeChanged())},uG=(e,t,o)=>{const r=Y.fromDom(yI(e)),c=ym();Qn(r,c),o(t,r);const u=document.createRange();return u.setStartBefore(c.dom),u.setEndBefore(c.dom),u},Vu=e=>{e.on("NodeChange",()=>rQ(e))},CI=e=>t=>(" "+t.attr("class")+" ").indexOf(e)!==-1,dG=(e,t,o)=>function(r){const c=arguments,u=c[c.length-2],f=u>0?t.charAt(u-1):"";if(f==='"')return r;if(f===">"){const b=t.lastIndexOf("<",u);if(b!==-1&&t.substring(b,u).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(c[0])+'">'+e.dom.encode(typeof c[1]=="string"?c[1]:c[0])+"</span>"},Z1=(e,t,o)=>{let r=t.length,c=o.content;if(o.format!=="raw"){for(;r--;)c=c.replace(t[r],dG(e,c,s1(e)));o.content=c}},SI=(e,t)=>ul(e,o=>{const r=t.match(o);return r!==null&&r[0].length===t.length}),mG=e=>{const t="contenteditable",o=" "+Ke.trim(_E(e))+" ",r=" "+Ke.trim(s1(e))+" ",c=CI(o),u=CI(r),f=V_(e);f.length>0&&e.on("BeforeSetContent",b=>{Z1(e,f,b)}),e.parser.addAttributeFilter("class",b=>{let v=b.length;for(;v--;){const w=b[v];c(w)?w.attr(t,"true"):u(w)&&w.attr(t,"false")}}),e.serializer.addAttributeFilter(t,b=>{let v=b.length;for(;v--;){const w=b[v];if(!c(w)&&!u(w))continue;const _=w.attr("data-mce-content");f.length>0&&_?SI(f,_)?(w.name="#text",w.type=3,w.raw=!0,w.value=_):w.remove():w.attr(t,null)}})},VT=e=>gu(Y.fromDom(e.getBody()),"*[data-mce-caret]").map(t=>t.dom).getOrNull(),UT=(e,t)=>{t.hasAttribute("data-mce-caret")&&(ji(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},wI=(e,t)=>{const o=VT(e);if(o){if(t.type==="compositionstart"){t.preventDefault(),t.stopPropagation(),UT(e,o);return}db(o)&&(UT(e,o),e.undoManager.add())}},xI=e=>{e.on("keyup compositionstart",ze(wI,e))},EI=ts,TI=(e,t,o)=>q8(t,e,o,Uf,Im,EI),kI=(e,t,o)=>K8(t,e,o,u=>Uf(u)||nS(u),u=>Im(u)||RA(u),EI),_I=e=>{const t=e.dom.create(Ys(e));return t.innerHTML='<br data-mce-bogus="1">',t},ZT=(e,t,o)=>{const r=Ll(e.getBody()),c=ze(ov,t===1?r.next:r.prev);if(o.collapsed){const u=e.dom.getParent(o.startContainer,"PRE");if(!u)return;if(!c(ke.fromRangeStart(o))){const b=Y.fromDom(_I(e));t===1?xl(Y.fromDom(u),b):Qr(Y.fromDom(u),b),e.selection.select(b.dom,!0),e.selection.collapse()}}},fG=(e,t)=>{const o=t?1:-1,r=e.selection.getRng();return TI(o,e,r).orThunk(()=>(ZT(e,o,r),B.none()))},gG=(e,t)=>{const o=t?1:-1,r=e.selection.getRng();return kI(o,e,r).orThunk(()=>(ZT(e,o,r),B.none()))},hG=(e,t)=>{const o=t?e.getEnd(!0):e.getStart(!0);return FA(o)?!t:t},AI=(e,t)=>fG(e,hG(e.selection,t)).exists(o=>(Wm(e,o),!0)),OI=(e,t)=>gG(e,t).exists(o=>(Wm(e,o),!0)),DI=(e,t)=>$T(e,t,t?Im:Uf),WT=(e,t)=>SR(e,!t).map(o=>{const r=o.toRange(),c=e.selection.getRng();return t?r.setStart(c.startContainer,c.startOffset):r.setEnd(c.endContainer,c.endOffset),r}).exists(o=>(Wm(e,o),!0)),RI=(e,t)=>{const o=f=>Ln(f,t),r=f=>vc(f.dom),c=Y.fromDom(e.container());return Ro(c,r,o).filter(f=>!o(f))},MI=(e,t,o)=>(o?LR:z8)(e.getBody(),t).map(c=>c.toRange()),pG=(e,t)=>{const o=ke.fromRangeStart(e.selection.getRng()),r=ke.fromRangeEnd(e.selection.getRng()),c=Y.fromDom(e.getBody());return np(tr(RI(o,c),RI(r,c),(f,b)=>Ln(f,b)?B.some(f):B.none())).fold($e,f=>t&&_c(f.dom,r)||!t&&MT(f.dom,o)?MI(e,t?r:o,t).exists(b=>(Wm(e,b),!0)):!1)},jm=(e,t)=>pG(e,t),r5=e=>Ce(["figcaption"],An(e)),bG=(e,t,o)=>{const r=ze(Ln,t);return Ro(Y.fromDom(e.container()),c=>o.isBlock(An(c)),r).filter(r5)},vG=(e,t,o)=>t?_c(e.dom,o):MT(e.dom,o),yG=(e,t)=>{const o=Y.fromDom(e.getBody()),r=ke.fromRangeStart(e.selection.getRng());return bG(r,o,e.schema).exists(()=>{if(vG(o,t,r)){const u=uG(e,o,t?Qn:uu);return e.selection.setRng(u),!0}else return!1})},jT=(e,t)=>e.selection.isCollapsed()?yG(e,t):!1,a5=(e,t,o)=>{const r=e.selection.getRng(),c=ke.fromRangeStart(r);return e.getBody().firstChild===t&&MT(o,c)?(e.execCommand("InsertNewBlockBefore"),!0):!1},NI=(e,t)=>{const o=e.selection.getRng(),r=ke.fromRangeStart(o);return e.getBody().lastChild===t&&_c(t,r)?(e.execCommand("InsertNewBlockAfter"),!0):!1},BI=(e,t)=>t?B.from(e.dom.getParent(e.selection.getNode(),"details")).map(o=>NI(e,o)).getOr(!1):B.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(o=>B.from(e.dom.getParent(o,"details")).map(r=>a5(e,r,o))).getOr(!1),c5=(e,t)=>BI(e,t),PI={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},ew=e=>Ue(e,t=>({...PI,...t})),GT=e=>Ue(e,t=>({...PI,...t})),i5=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,$I=(e,t)=>mo(ew(e),o=>i5(o,t)?[o]:[]),II=(e,t)=>mo(GT(e),o=>i5(o,t)?[o]:[]),sn=(e,...t)=>()=>e.apply(null,t),zh=(e,t)=>To($I(e,t),o=>o.action()),qT=(e,t)=>ki(II(e,t),o=>o.action()),Zv=(e,t)=>{const o=t?1:-1,r=e.selection.getRng();return q8(e,o,r,eS,tS,gi).exists(c=>(Wm(e,c),!0))},LI=(e,t)=>{const o=t?1:-1,r=e.selection.getRng();return K8(e,o,r,eS,tS,gi).exists(c=>(Wm(e,c),!0))},l5=(e,t)=>$T(e,t,t?tS:eS),CG=(e,t)=>FI(e,t,gt),FI=(e,t,o)=>mo(ks(e),r=>Ic(r,t)?o(r)?[r]:[]:FI(r,t,o)),HI=(e,t,o=$e)=>{if(o(t))return B.none();if(Ce(e,An(t)))return B.some(t);const r=c=>Ic(c,"table")||o(c);return Ws(t,e.join(","),r)},SG=(e,t)=>HI(["td","th"],e,t),zI=e=>CG(e,"th,td"),wG=(e,t)=>ea(e,"table",t),VI=ml.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),tw={...VI,none:e=>VI.none(e)},u5=(e,t,o,r,c=gt)=>{const u=r===1;if(!u&&o<=0)return tw.first(e[0]);if(u&&o>=e.length-1)return tw.last(e[e.length-1]);{const f=o+r,b=e[f];return c(b)?tw.middle(t,b):u5(e,t,f,r,c)}},UI=(e,t)=>wG(e,t).bind(o=>{const r=zI(o);return qu(r,u=>Ln(e,u)).map(u=>({index:u,all:r}))}),xG=(e,t,o)=>UI(e,o).fold(()=>tw.none(e),c=>u5(c.all,e,c.index,1,t)),EG=(e,t,o)=>UI(e,o).fold(()=>tw.none(),c=>u5(c.all,e,c.index,-1,t));var d5=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],TG=()=>{const e=w=>Y.fromDom(w.dom.cloneNode(!1)),t=w=>Cl(w).dom,o=w=>Ts(w)?An(w)==="body"?!0:Ce(d5,An(w)):!1,r=w=>Ts(w)?Ce(["br","img","hr","input"],An(w)):!1,c=w=>Ts(w)&&es(w,"contenteditable")==="false",u=(w,_)=>w.dom.compareDocumentPosition(_.dom),f=(w,_)=>{const D=Nn(w);Ir(_,D)},b=w=>{const _=An(w);return Ce(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],_)},v=w=>Ts(w)?$i(w,"lang"):B.none();return{up:qe({selector:Ws,closest:ea,predicate:fu,all:ai}),down:qe({selector:Fr,predicate:M0}),styles:qe({get:Ns,getRaw:lr,set:pc,remove:O0}),attrs:qe({get:es,set:hs,remove:sr,copyTo:f}),insert:qe({before:Qr,after:xl,afterAll:k0,append:Qn,appendAll:ii,prepend:uu,wrap:Fc}),remove:qe({unwrap:li,remove:Zo}),create:qe({nu:Y.fromTag,clone:e,text:Y.fromText}),query:qe({comparePosition:u,prevSibling:ci,nextSibling:lu}),property:qe({children:ks,name:An,parent:Lc,document:t,isText:fo,isComment:vl,isElement:Ts,isSpecial:b,getLanguage:v,getText:ya,setText:Y2,isBoundary:o,isEmptyTag:r,isNonEditable:c}),eq:Ln,is:w0}};const Gm=(e,t)=>({element:e,offset:t}),m5=(e,t)=>{if(e.property().isText(t))return Gm(t,e.property().getText(t).length);{const o=e.property().children(t);return o.length>0?m5(e,o[o.length-1]):Gm(t,o.length)}},KT=(e,t,o)=>{const r=e.property().children(t);return r.length>0&&o<r.length?KT(e,r[o],0):r.length>0&&e.property().isElement(t)&&r.length===o?m5(e,r[r.length-1]):Gm(t,o)},ZI=KT,f5=TG(),Vh=(e,t)=>ZI(f5,e,t),g5=Xr("image"),Gl=e=>{const t=e;return B.from(t[g5])},W1=(e,t)=>{const o=e;o[g5]=t},YT=Xr("event"),h5=e=>{const t=e;return B.from(t[YT])},XT=e=>t=>{const o=t;o[YT]=e},WI=(e,t)=>XT(t)(e),jI=XT(0),kG=XT(2),_G=XT(1),AG=(e=>t=>{const o=t;return B.from(o[YT]).exists(r=>r===e)})(0),GI=()=>Object.freeze({length:0,item:e=>null}),p5=Xr("mode"),OG=e=>{const t=e;return B.from(t[p5])},og=e=>t=>{const o=t;o[p5]=e},nw=(e,t)=>og(t)(e),b5=og(0),JT=og(2),v5=og(1),qI=e=>t=>{const o=t;return B.from(o[p5]).exists(r=>r===e)},Wv=qI(0),KI=qI(1),YI=(e,t)=>({...t,get length(){return t.length},add:(o,r)=>{if(Wv(e))if(U(o)){if(!Je(r))return t.add(o,r)}else return t.add(o);return null},remove:o=>{Wv(e)&&t.remove(o)},clear:()=>{Wv(e)&&t.clear()}}),QT=["none","copy","link","move"],XI=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],jv=()=>{const e=new window.DataTransfer;let t="move",o="all";const r={get dropEffect(){return t},set dropEffect(c){Ce(QT,c)&&(t=c)},get effectAllowed(){return o},set effectAllowed(c){AG(r)&&Ce(XI,c)&&(o=c)},get items(){return YI(r,e.items)},get files(){return KI(r)?GI():e.files},get types(){return e.types},setDragImage:(c,u,f)=>{Wv(r)&&(W1(r,{image:c,x:u,y:f}),e.setDragImage(c,u,f))},getData:c=>KI(r)?"":e.getData(c),setData:(c,u)=>{Wv(r)&&e.setData(c,u)},clearData:c=>{Wv(r)&&e.clearData(c)}};return b5(r),r},DG=e=>{const t=jv(),o=OG(e);return JT(e),jI(t),t.dropEffect=e.dropEffect,t.effectAllowed=e.effectAllowed,Gl(e).each(r=>t.setDragImage(r.image,r.x,r.y)),ne(e.types,r=>{r!=="Files"&&t.setData(r,e.getData(r))}),ne(e.files,r=>t.items.add(r)),h5(e).each(r=>{WI(t,r)}),o.each(r=>{nw(e,r),nw(t,r)}),t},JI=e=>{const t=e.getData("text/html");return t===""?B.none():B.some(t)},QI=(e,t)=>e.setData("text/html",t),RG=(e,t)=>({left:e.left-t,top:e.top-t,right:e.right+t*2,bottom:e.bottom+t*2,width:e.width+t,height:e.height+t}),MG=(e,t)=>mo(t,o=>{const r=RG(wm(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),e7=(e,t,o)=>kn(e,(r,c)=>r.fold(()=>B.some(c),u=>{const f=Math.sqrt(Math.abs(u.x-t)+Math.abs(u.y-o)),b=Math.sqrt(Math.abs(c.x-t)+Math.abs(c.y-o));return B.some(b<f?c:u)}),B.none()),t7=(e,t,o,r,c)=>{const u=Fr(Y.fromDom(o),"td,th,caption").map(b=>b.dom),f=ge(MG(e,u),b=>t(b,c));return e7(f,r,c).map(b=>b.cell)},NG=e=>e.bottom,n7=e=>e.top,ow=(e,t)=>e.y<t,BG=(e,t)=>e.y>t,o7=ze(t7,NG,ow),s7=ze(t7,n7,BG),r7=(e,t)=>Vs(t.getClientRects()).bind(o=>o7(e,o.left,o.top)).bind(o=>z1(H8(o),t)),y5=(e,t)=>Tr(t.getClientRects()).bind(o=>s7(e,o.left,o.top)).bind(o=>z1(V1(o),t)),a7=(e,t,o)=>o.breakAt.exists(r=>e(t,r).breakAt.isSome()),PG=e=>e.breakType===Zm.Wrap&&e.positions.length===0,c7=e=>e.breakType===Zm.Br&&e.positions.length===1,i7=(e,t,o)=>{const r=e(t,o);return PG(r)||!ds(o.getNode())&&c7(r)?!a7(e,t,r):r.breakAt.isNone()},$G=ze(i7,Wr),IG=ze(i7,YS),C5=(e,t,o)=>{const r=ke.fromRangeStart(t);return l(!e,o).exists(c=>c.isEqual(r))},LG=(e,t,o,r)=>{const c=e.selection.getRng(),u=t?1:-1;return Xb()&&C5(t,c,o)?(Qf(u,e,o,!t,!1).each(f=>{Wm(e,f)}),!0):!1},FG=(e,t,o)=>r7(t,o).orThunk(()=>Vs(o.getClientRects()).bind(r=>IR(XS(e,ke.before(t)),r.left))).getOr(ke.before(t)),ek=(e,t,o)=>y5(t,o).orThunk(()=>Vs(o.getClientRects()).bind(r=>IR(Fh(e,ke.after(t)),r.left))).getOr(ke.after(t)),l7=(e,t)=>{const o=t.getNode(e);return ja(o)?B.some(o):B.none()},S5=(e,t,o)=>{t.undoManager.transact(()=>{const r=e?xl:Qr,c=uG(t,Y.fromDom(o),r);Wm(t,c)})},w5=(e,t,o)=>{const r=l7(!!t,o),c=t===!1;r.fold(()=>Wm(e,o.toRange()),u=>l(c,e.getBody()).filter(f=>f.isEqual(o)).fold(()=>Wm(e,o.toRange()),f=>S5(t,e,u)))},u7=(e,t,o,r)=>{const c=e.selection.getRng(),u=ke.fromRangeStart(c),f=e.getBody();if(!t&&$G(r,u)){const b=FG(f,o,u);return w5(e,t,b),!0}else if(t&&IG(r,u)){const b=ek(f,o,u);return w5(e,t,b),!0}else return!1},x5=(e,t,o)=>B.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>B.from(e.dom.getParent(r,"table")).map(c=>o(e,t,c,r))).getOr(!1),d7=(e,t)=>x5(e,t,LG),E5=(e,t)=>x5(e,t,u7),HG=e=>{const t=lm.exact(e,0,e,0);return dm(t)},zG=e=>Gv(e)||go(e).some(t=>yl(t)&&Gv(t)),sw=(e,t,o)=>o.fold(B.none,B.none,(r,c)=>x3(c).map(u=>HG(u)),r=>e.mode.isReadOnly()||!VG(r)||!zG(r)?B.none():(e.execCommand("mceTableInsertRowAfter"),m7(e,t,r))),VG=e=>Ro(e,iu("table")).exists(Fi),m7=(e,t,o)=>sw(e,t,xG(o,Gv)),UG=(e,t,o)=>sw(e,t,EG(o,Gv)),Gv=e=>Fi(e)||Mg(e,ZG),ZG=e=>yl(e)&&Fi(e),f7=(e,t)=>{const o=["table","li","dl"],r=Y.fromDom(e.getBody()),c=b=>{const v=An(b);return Ln(b,r)||Ce(o,v)},u=e.selection.getRng(),f=Y.fromDom(t?u.endContainer:u.startContainer);return SG(f,c).map(b=>(wG(b,c).each(_=>{e.model.table.clearSelectedCells(_.dom)}),e.selection.collapse(!t),(t?m7:UG)(e,c,b).each(_=>{e.selection.setRng(_)}),!0)).getOr(!1)},g7=(e,t,o)=>{const r=Xn.os.isMacOS()||Xn.os.isiOS(),c=Xn.browser.isFirefox();zh([{keyCode:vt.RIGHT,action:sn(AI,e,!0)},{keyCode:vt.LEFT,action:sn(AI,e,!1)},{keyCode:vt.UP,action:sn(OI,e,!1)},{keyCode:vt.DOWN,action:sn(OI,e,!0)},...r?[{keyCode:vt.UP,action:sn(WT,e,!1),metaKey:!0,shiftKey:!0},{keyCode:vt.DOWN,action:sn(WT,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:vt.RIGHT,action:sn(d7,e,!0)},{keyCode:vt.LEFT,action:sn(d7,e,!1)},{keyCode:vt.UP,action:sn(E5,e,!1)},{keyCode:vt.DOWN,action:sn(E5,e,!0)},{keyCode:vt.UP,action:sn(E5,e,!1)},{keyCode:vt.UP,action:sn(c5,e,!1)},{keyCode:vt.DOWN,action:sn(c5,e,!0)},{keyCode:vt.RIGHT,action:sn(Zv,e,!0)},{keyCode:vt.LEFT,action:sn(Zv,e,!1)},{keyCode:vt.UP,action:sn(LI,e,!1)},{keyCode:vt.DOWN,action:sn(LI,e,!0)},{keyCode:vt.RIGHT,action:sn(YR,e,t,!0)},{keyCode:vt.LEFT,action:sn(YR,e,t,!1)},{keyCode:vt.RIGHT,ctrlKey:!r,altKey:r,action:sn(LT,e,t)},{keyCode:vt.LEFT,ctrlKey:!r,altKey:r,action:sn(Bj,e,t)},{keyCode:vt.UP,action:sn(jT,e,!1)},{keyCode:vt.DOWN,action:sn(jT,e,!0)},...c?[{keyCode:vt.UP,action:sn(jm,e,!1)},{keyCode:vt.DOWN,action:sn(jm,e,!0)}]:[]],o).each(u=>{o.preventDefault()})},WG=(e,t)=>{e.on("keydown",o=>{o.isDefaultPrevented()||g7(e,t,o)})},Wd=(e,t)=>({container:e,offset:t}),tk=Un.DOM,nk=e=>t=>e===t?-1:0,jG=e=>t=>e.isBlock(t)||Ce(["BR","IMG","HR","INPUT"],t.nodeName)||e.getContentEditable(t)==="false",T5=(e,t,o)=>{if(Ye(e)&&t>=0)return B.some(Wd(e,t));{const r=vu(tk);return B.from(r.backwards(e,t,nk(e),o)).map(c=>Wd(c.container,c.container.data.length))}},k5=(e,t,o)=>{if(Ye(e)&&t>=e.length)return B.some(Wd(e,t));{const r=vu(tk);return B.from(r.forwards(e,t,nk(e),o)).map(c=>Wd(c.container,0))}},_5=(e,t,o)=>{if(!Ye(e))return B.none();const r=e.data;if(t>=0&&t<=r.length)return B.some(Wd(e,t));{const c=vu(tk);return B.from(c.backwards(e,t,nk(e),o)).bind(u=>{const f=u.container.data;return _5(u.container,t+f.length,o)})}},A5=(e,t,o)=>{if(!Ye(e))return B.none();const r=e.data;if(t<=r.length)return B.some(Wd(e,t));{const c=vu(tk);return B.from(c.forwards(e,t,nk(e),o)).bind(u=>A5(u.container,t-r.length,o))}},O5=(e,t,o,r,c)=>{const u=vu(e,jG(e));return B.from(u.backwards(t,o,r,c))},GG=e=>e.collapsed&&Ye(e.startContainer),qG=e=>Xa(e.toString().replace(/\u00A0/g," ")),h7=e=>e!==""&&`  \uFEFF\f
\r	\v`.indexOf(e)!==-1,Er=(e,t)=>e.substring(t.length),KG=(e,t,o,r=!1)=>{let c;const u=o.charAt(0);for(c=t-1;c>=0;c--){const f=e.charAt(c);if(!r&&h7(f))return B.none();if(u===f&&Us(e,o,c,t))break}return B.some(c)},D5=(e,t,o,r=!1)=>{if(!GG(t))return B.none();const c={text:"",offset:0},u=(b,v,w)=>(c.text=w+c.text,c.offset+=v,KG(c.text,c.offset,o,r).getOr(v)),f=e.getParent(t.startContainer,e.isBlock)||e.getRoot();return O5(e,t.startContainer,t.startOffset,u,f).bind(b=>{const v=t.cloneRange();if(v.setStart(b.container,b.offset),v.setEnd(t.endContainer,t.endOffset),v.collapsed)return B.none();const w=qG(v);return w.lastIndexOf(o)!==0?B.none():B.some({text:Er(w,o),range:v,trigger:o})})},YG=e=>e.nodeType===V2,p7=e=>e.nodeType===cp,ok=e=>{if(YG(e))return Wd(e,e.data.length);{const t=e.childNodes;return t.length>0?ok(t[t.length-1]):Wd(e,t.length)}},R5=(e,t)=>{const o=e.childNodes;return o.length>0&&t<o.length?R5(o[t],0):o.length>0&&p7(e)&&o.length===t?ok(o[o.length-1]):Wd(e,t)},rw=(e,t)=>{const o=e.getParent(t.container,e.isBlock)??e.getRoot();return O5(e,t.container,t.offset,(r,c)=>c===0?-1:c,o).filter(r=>{const c=r.container.data.charAt(r.offset-1);return!h7(c)}).isSome()},XG=e=>t=>{const o=R5(t.startContainer,t.startOffset);return!rw(e,o)},JG=(e,t,o)=>ki(o.triggers,r=>D5(e,t,r)),QG=(e,t)=>{const o=t(),r=e.selection.getRng();return JG(e.dom,r,o).bind(c=>b7(e,t,c))},b7=(e,t,o,r={})=>{const c=t(),f=e.selection.getRng().startContainer.nodeValue??"",b=ge(c.lookupByTrigger(o.trigger),w=>o.text.length>=w.minChars&&w.matches.getOrThunk(()=>XG(e.dom))(o.range,f,o.text));if(b.length===0)return B.none();const v=Promise.all(Ue(b,w=>w.fetch(o.text,w.maxResults,r).then(D=>({matchText:o.text,items:D,columns:w.columns,onAction:w.onAction,highlightOn:w.highlightOn}))));return B.some({lookupData:v,context:o})},eq=eC("type"),tq=Gx("fetch"),nq=Gx("onAction"),oq=e=>fh("columns",e),sq=$a([eq,eC("trigger"),f_("minChars",1),oq(1),f_("maxResults",10),i6("matches"),tq,nq,g_("highlightOn",[],Yy)]),rq=e=>mh("Autocompleter",sq,e),aq=()=>{const e={},t={},o={},r={},c={},u={},f={},b={},v={},w=(L,W)=>(V,q)=>{L[V.toLowerCase()]={...q,type:W}},_=(L,W)=>(V,q)=>{L[V.toLowerCase()]={type:W,...q}},D=(L,W)=>r[L.toLowerCase()]=W,M=(L,W)=>f[L.toLowerCase()]=W;return{addButton:w(e,"button"),addGroupToolbarButton:w(e,"grouptoolbarbutton"),addToggleButton:w(e,"togglebutton"),addMenuButton:w(e,"menubutton"),addSplitButton:w(e,"splitbutton"),addMenuItem:w(t,"menuitem"),addNestedMenuItem:w(t,"nestedmenuitem"),addToggleMenuItem:w(t,"togglemenuitem"),addAutocompleter:w(o,"autocompleter"),addContextMenu:w(c,"contextmenu"),addContextToolbar:w(u,"contexttoolbar"),addContextForm:_(u,"contextform"),addSidebar:w(b,"sidebar"),addView:w(v,"views"),addIcon:D,addContext:M,getAll:()=>({buttons:e,menuItems:t,icons:r,popups:o,contextMenus:c,contextToolbars:u,sidebars:b,views:v,contexts:f})}},cq=e=>{const t=e.ui.registry.getAll().popups,o=Yd(t,f=>rq(f).fold(b=>{throw new Error(wu(b))},Fo)),r=d0(dl(o,f=>f.trigger)),c=ei(o);return{dataset:o,triggers:r,lookupByTrigger:f=>ge(c,b=>b.trigger===f)}},iq=(e,t)=>{const o=Jd(t.load,50);e.on("input",r=>{r.inputType==="insertCompositionText"&&!e.composing||o.throttle()}),e.on("keydown",r=>{const c=r.which;c===8?o.throttle():c===27?(o.cancel(),t.cancelIfNecessary()):(c===38||c===40)&&o.cancel()},!0),e.on("remove",o.cancel)},lq=e=>{const t=oi(),o=Xt(!1),r=t.isSet,c=()=>{r()&&(Am(e),o.set(!1),t.clear())},u=D=>{r()||t.set({trigger:D.trigger,matchLength:D.text.length})},f=mc(()=>cq(e)),b=D=>t.get().map(M=>D5(e.dom,e.selection.getRng(),M.trigger,!0).bind(L=>b7(e,f,L,D))).getOrThunk(()=>QG(e,f)),v=D=>{b(D).fold(c,M=>{u(M.context),M.lookupData.then(L=>{t.get().map(W=>{const V=M.context;W.trigger===V.trigger&&(t.set({...W,matchLength:V.text.length}),o.get()?(aC(e,{range:V.range}),Yp(e,{lookupData:L})):(o.set(!0),aC(e,{range:V.range}),Kp(e,{lookupData:L})))})})})},w=(D,M)=>{const L=D.compareBoundaryPoints(window.Range.START_TO_START,M),W=D.compareBoundaryPoints(window.Range.END_TO_END,M);return L>=0&&W<=0},_=()=>t.get().bind(({trigger:D})=>{const M=e.selection.getRng();return D5(e.dom,M,D,o.get()).filter(({range:L})=>w(M,L)).map(({range:L})=>L)});e.addCommand("mceAutocompleterReload",(D,M)=>{const L=At(M)?M.fetchOptions:{};v(L)}),e.addCommand("mceAutocompleterClose",c),e.addCommand("mceAutocompleterRefreshActiveRange",()=>{_().each(D=>{aC(e,{range:D})})}),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>_().isSome()),iq(e,{cancelIfNecessary:c,load:v})},v7=Oi().browser.isSafari(),M5=e=>Cm(Y.fromDom(e)),y7=(e,t)=>{var o;return e.startOffset===0&&e.endOffset===((o=t.textContent)==null?void 0:o.length)},sk=(e,t)=>B.from(e.getParent(t.container(),"details")),C7=(e,t)=>sk(e,t).isSome(),dq=(e,t)=>{const o=B.from(e.getParent(t.startContainer,"details")),r=B.from(e.getParent(t.endContainer,"details"));if(o.isSome()||r.isSome()){const c=o.bind(u=>B.from(e.select("summary",u)[0]));return B.some({startSummary:c,startDetails:o,endDetails:r})}else return B.none()},S7=(e,t)=>y(t).exists(o=>o.isEqual(e)),mq=(e,t)=>E(t).exists(o=>ds(o.getNode())&&p(t,o).exists(r=>r.isEqual(e))||o.isEqual(e)),w7=(e,t)=>t.startSummary.exists(o=>S7(e,o)),fq=(e,t)=>t.startSummary.exists(o=>mq(e,o)),x7=(e,t)=>t.startDetails.exists(o=>p(o,e).forall(r=>t.startSummary.exists(c=>!c.contains(e.container())&&c.contains(r.container())))),E7=(e,t,o)=>o.startDetails.exists(r=>m(e,t).forall(c=>!r.contains(c.container()))),T7=(e,t)=>{const o=t.getNode();Je(o)||e.selection.setCursorLocation(o,t.offset())},k7=(e,t,o)=>{const r=e.dom.getParent(t.container(),"details");if(r&&!r.open){const c=e.dom.select("summary",r)[0];c&&(o?y(c):E(c)).each(f=>T7(e,f))}else T7(e,t)},gq=(e,t)=>{const o=v=>v.contains(e.startContainer),r=v=>v.contains(e.endContainer),c=t.startSummary.exists(o),u=t.startSummary.exists(r),f=t.startDetails.forall(v=>t.endDetails.forall(w=>v!==w));return(c||u)&&!(c&&u)||f},_7=(e,t,o)=>{const{dom:r,selection:c}=e,u=e.getBody();if(o==="character"){const f=ke.fromRangeStart(c.getRng()),b=r.getParent(f.container(),r.isBlock),v=sk(r,f),w=b&&r.isEmpty(b),_=ie(b==null?void 0:b.previousSibling),D=ie(b==null?void 0:b.nextSibling);return w&&(t?D:_)&&Sh(!t,u,f).exists(W=>C7(r,W)&&!gg(v,sk(r,W)))?!0:Sh(t,u,f).fold($e,M=>{const L=sk(r,M);if(C7(r,M)&&!gg(v,L)){if(t||k7(e,M,!1),b&&w){if(t&&_)return!0;if(!t&&D)return!0;k7(e,M,t),e.dom.remove(b)}return!0}else return!1})}else return!1},A7=(e,t,o,r)=>{const u=e.selection.getRng(),f=ke.fromRangeStart(u),b=e.getBody();return r==="selection"?gq(u,t):o?fq(f,t)||E7(b,f,t):w7(f,t)||x7(f,t)},hq=(e,t,o)=>dq(e.dom,e.selection.getRng()).fold(()=>_7(e,t,o),r=>A7(e,r,t,o)||_7(e,t,o)),pq=(e,t,o)=>{const r=e.selection,c=r.getNode(),u=r.getRng(),f=ke.fromRangeStart(u);return P3(c)?(o==="selection"&&y7(u,c)||zN(t,f,c)?M5(c):e.undoManager.transact(()=>{const b=r.getSel();let{anchorNode:v,anchorOffset:w,focusNode:_,focusOffset:D}=b??{};const M=()=>{de(v)&&de(w)&&de(_)&&de(D)&&(b==null||b.setBaseAndExtent(v,w,_,D))},L=()=>{v=b==null?void 0:b.anchorNode,w=b==null?void 0:b.anchorOffset,_=b==null?void 0:b.focusNode,D=b==null?void 0:b.focusOffset},W=(q,ae)=>{ne(q.childNodes,ce=>{ZC(ce)&&ae.appendChild(ce)})},V=e.dom.create("span",{"data-mce-bogus":"1"});W(c,V),c.appendChild(V),M(),(o==="word"||o==="line")&&(b==null||b.modify("extend",t?"right":"left",o)),!r.isCollapsed()&&y7(r.getRng(),V)?M5(c):(e.execCommand(t?"ForwardDelete":"Delete"),L(),W(V,c),M()),e.dom.remove(V)}),!0):!1},Uh=(e,t,o)=>hq(e,t,o)||v7&&pq(e,t,o)?B.some(yt):B.none(),O7=e=>(t,o,r={})=>{const c=t.getBody(),u={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:c,currentTarget:c,eventPhase:Event.AT_TARGET,originalTarget:c,explicitOriginalTarget:c,isTrusted:!1,srcElement:c,cancelable:!1,preventDefault:yt,inputType:o},f=xy(new InputEvent(e));return t.dispatch(e,{...f,...u,...r})},aw=O7("input"),cw=O7("beforeinput"),D7=Oi(),R7=D7.os,M7=R7.isMacOS()||R7.isiOS(),N7=D7.browser.isFirefox(),vq=(e,t,o)=>{const r=o.keyCode===vt.BACKSPACE?"deleteContentBackward":"deleteContentForward",c=e.selection.isCollapsed(),u=c?"character":"selection",f=b=>c?b?"word":"line":"selection";qT([{keyCode:vt.BACKSPACE,action:sn(Oc,e)},{keyCode:vt.BACKSPACE,action:sn(kT,e,!1)},{keyCode:vt.DELETE,action:sn(kT,e,!0)},{keyCode:vt.BACKSPACE,action:sn(TT,e,!1)},{keyCode:vt.DELETE,action:sn(TT,e,!0)},{keyCode:vt.BACKSPACE,action:sn(XR,e,t,!1)},{keyCode:vt.DELETE,action:sn(XR,e,t,!0)},{keyCode:vt.BACKSPACE,action:sn(YA,e,!1)},{keyCode:vt.DELETE,action:sn(YA,e,!0)},{keyCode:vt.BACKSPACE,action:sn(Uh,e,!1,u)},{keyCode:vt.DELETE,action:sn(Uh,e,!0,u)},...M7?[{keyCode:vt.BACKSPACE,altKey:!0,action:sn(Uh,e,!1,f(!0))},{keyCode:vt.DELETE,altKey:!0,action:sn(Uh,e,!0,f(!0))},{keyCode:vt.BACKSPACE,metaKey:!0,action:sn(Uh,e,!1,f(!1))}]:[{keyCode:vt.BACKSPACE,ctrlKey:!0,action:sn(Uh,e,!1,f(!0))},{keyCode:vt.DELETE,ctrlKey:!0,action:sn(Uh,e,!0,f(!0))}],{keyCode:vt.BACKSPACE,action:sn(AT,e,!1)},{keyCode:vt.DELETE,action:sn(AT,e,!0)},{keyCode:vt.BACKSPACE,action:sn(FT,e,!1)},{keyCode:vt.DELETE,action:sn(FT,e,!0)},{keyCode:vt.BACKSPACE,action:sn(Fs,e,!1)},{keyCode:vt.DELETE,action:sn(Fs,e,!0)},{keyCode:vt.BACKSPACE,action:sn(L1,e,!1)},{keyCode:vt.DELETE,action:sn(L1,e,!0)},{keyCode:vt.BACKSPACE,action:sn(e5,e,!1)},{keyCode:vt.DELETE,action:sn(e5,e,!0)},{keyCode:vt.BACKSPACE,action:sn(_T,e,!1)},{keyCode:vt.DELETE,action:sn(_T,e,!0)},{keyCode:vt.BACKSPACE,action:sn(U1,e,!1)},{keyCode:vt.DELETE,action:sn(U1,e,!0)}],o).filter(b=>e.selection.isEditable()).each(b=>{o.preventDefault(),cw(e,r).isDefaultPrevented()||(b(),aw(e,r))})},yq=(e,t,o,r)=>zh([{keyCode:vt.BACKSPACE,action:sn(kR,e)},{keyCode:vt.DELETE,action:sn(kR,e)},...M7?[{keyCode:vt.BACKSPACE,altKey:!0,action:sn(JS,e)},{keyCode:vt.DELETE,altKey:!0,action:sn(JS,e)},...o?[{keyCode:N7?224:91,action:sn(()=>(iI(e,r),JS(e)))}]:[]]:[{keyCode:vt.BACKSPACE,ctrlKey:!0,action:sn(JS,e)},{keyCode:vt.DELETE,ctrlKey:!0,action:sn(JS,e)}]],t),Cq=(e,t)=>{let o=!1,r=[];e.on("keydown",c=>{o=c.keyCode===vt.BACKSPACE,r=JR(e),c.isDefaultPrevented()||vq(e,t,c)}),e.on("keyup",c=>{c.isDefaultPrevented()||(yq(e,c,o,r),r.length=0),o=!1})},Sq=(e,t)=>{const o=Y.fromDom(e),r=Y.fromDom(t),c=iu("span"),u=ze(Ln,o),f=v=>Ts(v)&&lr(v,"font-size").isSome(),b=[...f(r)?[r]:[],...id(r,f,u)];ne(b.slice(1),v=>{O0(v,"font-size"),sr(v,"data-mce-style"),c(v)&&Ag(v)&&li(v)})},wq=e=>{for(;e;){if(it(e)||Ye(e)&&e.data&&/[\r\n\s]/.test(e.data))return B.from(Y.fromDom(e));e=e.nextSibling}return B.none()},qv=(e,t)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!t)return;if(/^(LI|DT|DD)$/.test(t.nodeName)){const u=v=>/^(ul|ol|dl)$/.test(An(v)),f=v=>u(v)?B.from(v):fp(v,u),b=v=>o.isEmpty(v.dom);wq(t.firstChild).each(v=>{f(v).fold(()=>{if(b(v)){const w=Vh(v,0).element;Ts(w)&&!Wi(w)&&Qn(w,Y.fromText(Zs))}},w=>{Qr(w,Y.fromText(Zs))})})}const c=o.createRng();if(t.normalize(),t.hasChildNodes()){const u=new _s(t,t);let f=t,b;for(;b=u.current();){if(Ye(b)){c.setStart(b,0),c.setEnd(b,0);break}if(r[b.nodeName.toLowerCase()]){c.setStartBefore(b),c.setEndBefore(b);break}f=b,b=u.next()}b||(c.setStart(f,0),c.setEnd(f,0))}else ds(t)?t.nextSibling&&o.isBlock(t.nextSibling)?(c.setStartBefore(t),c.setEndBefore(t)):(c.setStartAfter(t),c.setEndAfter(t)):(c.setStart(t,0),c.setEnd(t,0));e.selection.setRng(c),Qi(e,c)},iw=(e,t)=>{const o=e.getRoot();let r,c=t;for(;c!==o&&c&&e.getContentEditable(c)!=="false";){if(e.getContentEditable(c)==="true"){r=c;break}c=c.parentNode}return c!==o?r:o},N5=e=>B.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),iQ=e=>N5(e).fold(qe(""),t=>t.nodeName.toUpperCase()),xq=e=>N5(e).filter(t=>Na(Y.fromDom(t))).isSome(),Kv=e=>{e.innerHTML='<br data-mce-bogus="1">'},B7=(e,t,o)=>{const r=e.dom;B.from(o.style).map(r.parseStyle).each(v=>{const _={...Og(Y.fromDom(t)),...v};r.setStyles(t,_)});const c=B.from(o.class).map(v=>v.split(/\s+/)),u=B.from(t.className).map(v=>ge(v.split(/\s+/),w=>w!==""));tr(c,u,(v,w)=>{const _=ge(w,M=>!Ce(v,M)),D=[...v,..._];r.setAttrib(t,"class",D.join(" "))});const f=["style","class"],b=nf(o,(v,w)=>!Ce(f,w));r.setAttribs(t,b)},Yv=(e,t)=>{if(Ys(e).toLowerCase()===t.tagName.toLowerCase()){const r=Yi(e);B7(e,t,r)}},P7=(e,t,o,r,c=!0,u,f)=>{const b=e.dom,v=e.schema,w=Ys(e),_=o?o.nodeName.toUpperCase():"";let D=t;const M=v.getTextInlineElements();let L;u||_==="TABLE"||_==="HR"?L=b.create(u||w,f||{}):L=o.cloneNode(!1);let W=L;if(!c)b.setAttrib(L,"style",null),b.setAttrib(L,"class",null);else{do if(M[D.nodeName]){if(N(D)||vs(D))continue;const V=D.cloneNode(!1);b.setAttrib(V,"id",""),L.hasChildNodes()?(V.appendChild(L.firstChild),L.appendChild(V)):(W=V,L.appendChild(V))}while((D=D.parentNode)&&D!==r);L.nodeName!=="LI"&&Sq(L,W)}return Yv(e,L),Kv(W),L},$7=(e,t)=>e.dom.getParent(t,yp),I7=(e,t,o)=>{let r=t;for(;r&&r!==e&&ie(r.nextSibling);){const c=r.parentElement;if(!c||!o(c))return yp(c);r=c}return!1},Eq=(e,t,o)=>!t&&o.nodeName.toLowerCase()===Ys(e)&&e.dom.isEmpty(o)&&I7(e.getBody(),o,r=>Sn(e.schema.getTextBlockElements(),r.nodeName.toLowerCase())),Tq=(e,t,o)=>{var u,f;const r=t(Ys(e)),c=$7(e,o);c&&(e.dom.insertAfter(r,c),qv(e,r),(((f=(u=o.parentElement)==null?void 0:u.childNodes)==null?void 0:f.length)??0)>1&&e.dom.remove(o))},kq=(e,t)=>e.firstChild&&e.firstChild.nodeName===t,L7=e=>{var t;return((t=e.parentNode)==null?void 0:t.firstChild)===e},F7=(e,t)=>{const o=e==null?void 0:e.parentNode;return de(o)&&o.nodeName===t},rk=e=>de(e)&&/^(OL|UL|LI)$/.test(e.nodeName),B5=e=>de(e)&&/^(LI|DT|DD)$/.test(e.nodeName),_q=e=>rk(e)&&rk(e.parentNode),ak=e=>{const t=e.parentNode;return B5(t)?t:e},lw=(e,t,o)=>{let r=e[o?"firstChild":"lastChild"];for(;r&&!it(r);)r=r[o?"nextSibling":"previousSibling"];return r===t},H7=e=>kn(dl(Og(Y.fromDom(e)),(t,o)=>`${o}: ${t};`),(t,o)=>t+o,""),Aq=(e,t,o,r,c)=>{const u=e.dom,f=e.selection.getRng(),b=o.parentNode;if(o===e.getBody()||!b)return;_q(o)&&(c="LI");const v=B5(r)?H7(r):void 0;let w=B5(r)&&v?t(c,{style:H7(r)}):t(c);if(lw(o,r,!0)&&lw(o,r,!1))if(F7(o,"LI")){const _=ak(o);u.insertAfter(w,_),L7(o)?u.remove(_):u.remove(o)}else u.replace(w,o);else if(lw(o,r,!0))F7(o,"LI")?(u.insertAfter(w,ak(o)),w.appendChild(u.doc.createTextNode(" ")),w.appendChild(o)):b.insertBefore(w,o),u.remove(r);else if(lw(o,r,!1))u.insertAfter(w,ak(o)),u.remove(r);else{o=ak(o);const _=f.cloneRange();_.setStartAfter(r),_.setEndAfter(o);const D=_.extractContents();if(c==="LI"&&kq(D,"LI")){const M=ge(Ue(w.children,Y.fromDom),vo(iu("br")));w=D.firstChild,u.insertAfter(D,o),ne(M,L=>uu(Y.fromDom(w),L)),v&&w.setAttribute("style",v)}else u.insertAfter(D,o),u.insertAfter(w,o);u.remove(r)}qv(e,w)},Oq=e=>{ne(M0(Y.fromDom(e),fo),t=>{const o=t.dom;o.nodeValue=Xa(o.data)})},Dq=(e,t)=>{const o=e.dom.getParent(t,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},lQ=(e,t)=>t&&t.nodeName==="A"&&e.isEmpty(t),P5=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,Rq=(e,t)=>e.nodeName===t||e.nextSibling&&e.nextSibling.nodeName===t,$5=(e,t)=>de(t)&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.isEditable(t.parentNode)&&e.getContentEditable(t)!=="false",Mq=(e,t,o)=>{var f;const r=[];if(!o)return;let c=o;for(;c=c.firstChild;){if(e.isBlock(c))return;it(c)&&!t[c.nodeName.toLowerCase()]&&r.push(c)}let u=r.length;for(;u--;)c=r[u],(!c.hasChildNodes()||c.firstChild===c.lastChild&&((f=c.firstChild)==null?void 0:f.nodeValue)===""||lQ(e,c))&&e.remove(c)},I5=(e,t,o)=>Ye(t)?e?o===1&&t.data.charAt(o-1)===fr?0:o:o===t.data.length-1&&t.data.charAt(o)===fr?t.data.length:o:o,z7=e=>{const t=e.cloneRange();return t.setStart(e.startContainer,I5(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,I5(!1,e.endContainer,e.endOffset)),t},Nq=e=>{let t=e;do Ye(t)&&(t.data=t.data.replace(/^[\r\n]+/,"")),t=t.firstChild;while(t)},L5=(e,t,o,r,c)=>{var v;const u=e.dom,f=iw(u,r)??u.getRoot();let b=u.getParent(r,u.isBlock);if(!b||!$5(u,b)){if(b=b||f,!b.hasChildNodes()){const M=u.create(t);return Yv(e,M),b.appendChild(M),o.setStart(M,0),o.setEnd(M,0),M}let w=r;for(;w&&w.parentNode!==b;)w=w.parentNode;let _;for(;w&&!u.isBlock(w);)_=w,w=w.previousSibling;const D=(v=_==null?void 0:_.parentElement)==null?void 0:v.nodeName;if(_&&D&&e.schema.isValidChild(D,t.toLowerCase())){const M=_.parentNode,L=u.create(t);for(Yv(e,L),M.insertBefore(L,_),w=_;w&&!u.isBlock(w);){const W=w.nextSibling;L.appendChild(w),w=W}o.setStart(r,c),o.setEnd(r,c)}}return r},qm=(e,t)=>{t.normalize();const o=t.lastChild;(!o||it(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(t,"br")},V7=(e,t)=>{const o=Ib(e);return Le(t)?!1:U(o)?Ce(Ke.explode(o),t.nodeName.toLowerCase()):o},uw={insert:(e,t)=>{let o,r,c,u,f=!1;const b=e.dom,v=e.schema,w=v.getNonEmptyElements(),_=e.selection.getRng(),D=Ys(e),M=Y.fromDom(_.startContainer),L=Bi(M,_.startOffset),W=L.exists(Oe=>yl(Oe)&&!Fi(Oe)),V=_.collapsed&&W,q=(Oe,dt)=>P7(e,o,ut,Ie,mE(e),Oe,dt),ae=Oe=>{const dt=I5(Oe,o,r);if(Ye(o)&&(Oe?dt>0:dt<o.data.length))return!1;if((o.parentNode===ut||o===ut)&&f&&!Oe||Oe&&it(o)&&o===ut.firstChild)return!0;if(P5(o,"TABLE")||P5(o,"HR"))return Rq(o,"BR")?!Oe:f&&!Oe||!f&&Oe;const en=new _s(o,ut);Ye(o)&&(Oe&&dt===0?en.prev():!Oe&&dt===o.data.length&&en.next());let tn;for(;tn=en.current();){if(it(tn)){if(!tn.getAttribute("data-mce-bogus")){const Wn=tn.nodeName.toLowerCase();if(w[Wn]&&Wn!=="br")return!1}}else if(Ye(tn)&&!Pg(tn.data))return!1;Oe?en.prev():en.next()}return!0},ce=()=>{let Oe;return/^(H[1-6]|PRE|FIGURE)$/.test(c)&&$t!=="HGROUP"?Oe=q(D):Oe=q(),V7(e,u)&&$5(b,u)&&b.isEmpty(ut,void 0,{includeZwsp:!0})?Oe=b.split(u,ut):b.insertAfter(Oe,ut),qv(e,Oe),Oe};c4(b,_).each(Oe=>{_.setStart(Oe.startContainer,Oe.startOffset),_.setEnd(Oe.endContainer,Oe.endOffset)}),o=_.startContainer,r=_.startOffset;const me=!!(t&&t.shiftKey),_e=!!(t&&t.ctrlKey);it(o)&&o.hasChildNodes()&&!V&&(f=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,f&&Ye(o)?r=o.data.length:r=0);const Ie=iw(b,o);if(!Ie||Dq(e,o))return;me||(o=L5(e,D,_,o,r));let ut=b.getParent(o,b.isBlock)||b.getRoot();u=de(ut==null?void 0:ut.parentNode)?b.getParent(ut.parentNode,b.isBlock):null,c=ut?ut.nodeName.toUpperCase():"";const $t=u?u.nodeName.toUpperCase():"";if($t==="LI"&&!_e){const Oe=u;ut=Oe,u=Oe.parentNode,c=$t}if(it(u)&&Eq(e,me,ut))return Tq(e,q,ut);if(/^(LI|DT|DD)$/.test(c)&&it(u)&&b.isEmpty(ut)){Aq(e,q,u,ut,D);return}if(!V&&(ut===e.getBody()||!$5(b,ut)))return;const Ae=ut.parentNode;let ve;if(V)ve=q(D),L.fold(()=>{Qn(M,Y.fromDom(ve))},Oe=>{Qr(Oe,Y.fromDom(ve))}),e.selection.setCursorLocation(ve,0);else if(vd(ut))ve=ji(ut),b.isEmpty(ut)&&Kv(ut),Yv(e,ve),qv(e,ve);else if(ae(!1))ve=ce();else if(ae(!0)&&Ae){const Oe=ke.fromRangeStart(_),dt=RA(Oe),en=Y.fromDom(ut),Wn=v4(en,Oe,e.schema)?SN(en,Oe,e.schema).bind(Ko=>B.from(Ko.getNode())):B.none();ve=Ae.insertBefore(q(),ut);const xo=P5(ut,"HR")||dt?ve:Wn.getOr(ut);qv(e,xo)}else{const Oe=z7(_).cloneRange();Oe.setEndAfter(ut);const dt=Oe.extractContents();Oq(dt),Nq(dt),ve=dt.firstChild,ut===ve?de(Ae)&&b.insertAfter(dt,Ae):b.insertAfter(dt,ut),Mq(b,w,ve),qm(b,ut),b.isEmpty(ut)&&Kv(ut),ve.normalize(),b.isEmpty(ve)?(b.remove(ve),ce()):(Yv(e,ve),qv(e,ve))}b.setAttrib(ve,"id",""),e.dispatch("NewBlock",{newBlock:ve})},fakeEventName:"insertParagraph"},F5=(e,t,o)=>{const r=new _s(t,o);let c;const u=e.getNonEmptyElements();for(;c=r.next();)if(u[c.nodeName.toLowerCase()]||Ye(c)&&c.length>0)return!0;return!1},H5=(e,t,o)=>{const r=e.dom.createRng();o?(r.setStartBefore(t),r.setEndBefore(t)):(r.setStartAfter(t),r.setEndAfter(t)),e.selection.setRng(r),Qi(e,r)},U7=(e,t)=>{const o=e.selection,r=e.dom,c=o.getRng();let u,f=!1;c4(r,c).each(L=>{c.setStart(L.startContainer,L.startOffset),c.setEnd(L.endContainer,L.endOffset)});let b=c.startOffset,v=c.startContainer;if(it(v)&&v.hasChildNodes()){const L=b>v.childNodes.length-1;v=v.childNodes[Math.min(b,v.childNodes.length-1)]||v,L&&Ye(v)?b=v.data.length:b=0}let w=r.getParent(v,r.isBlock);const _=w&&w.parentNode?r.getParent(w.parentNode,r.isBlock):null,D=_?_.nodeName.toUpperCase():"",M=!!(t&&t.ctrlKey);D==="LI"&&!M&&(w=_),Ye(v)&&b>=v.data.length&&(F5(e.schema,v,w||r.getRoot())||(u=r.create("br"),c.insertNode(u),c.setStartAfter(u),c.setEndAfter(u),f=!0)),u=r.create("br"),sh(r,c,u),H5(e,u,f),e.undoManager.add()},Pq=(e,t)=>{const o=Y.fromTag("br");Qr(Y.fromDom(t),o),e.undoManager.add()},$q=(e,t)=>{Lq(e.getBody(),t)||xl(Y.fromDom(t),Y.fromTag("br"));const o=Y.fromTag("br");xl(Y.fromDom(t),o),H5(e,o.dom,!1),e.undoManager.add()},Iq=e=>ds(e.getNode()),Lq=(e,t)=>Iq(ke.after(t))?!0:m(e,ke.after(t)).map(o=>ds(o.getNode())).getOr(!1),Z7=e=>e&&e.nodeName==="A"&&"href"in e,W7=e=>e.fold($e,Z7,Z7,$e),Fq=e=>{const t=ze(b1,e),o=ke.fromRangeStart(e.selection.getRng());return Zd(t,e.getBody(),o).filter(W7)},Hq=(e,t)=>{t.fold(yt,ze(Pq,e),ze($q,e),yt)},G7={insert:(e,t)=>{const o=Fq(e);o.isSome()?o.each(ze(Hq,e)):U7(e,t)},fakeEventName:"insertLineBreak"},q7=(e,t)=>N5(e).filter(o=>t.length>0&&Ic(Y.fromDom(o),t)).isSome(),zq=e=>q7(e,uE(e)),Vq=e=>q7(e,dE(e)),rl=ml.generate([{br:[]},{block:[]},{none:[]}]),Uq=(e,t)=>Vq(e),K7=e=>(t,o)=>xq(t)===e,Y7=(e,t)=>(o,r)=>iQ(o)===e.toUpperCase()===t,ck=e=>{const t=iw(e.dom,e.selection.getStart());return Le(t)},dw=e=>Y7("pre",e),Zq=()=>Y7("summary",!0),Xv=e=>(t,o)=>Pb(t)===e,z5=(e,t)=>zq(e),ik=(e,t)=>t,Wq=e=>{const t=Ys(e),o=iw(e.dom,e.selection.getStart());return de(o)&&e.schema.isValidChild(o.nodeName,t)},X7=e=>{const t=e.selection.getRng(),o=Y.fromDom(t.startContainer),c=Bi(o,t.startOffset).map(u=>yl(u)&&!Fi(u));return t.collapsed&&c.getOr(!0)},ql=(e,t)=>(o,r)=>kn(e,(u,f)=>u&&f(o,r),!0)?B.some(t):B.none(),jq=(e,t)=>R8([ql([Uq],rl.none()),ql([dw(!0),ck],rl.none()),ql([Zq()],rl.br()),ql([dw(!0),Xv(!1),ik],rl.br()),ql([dw(!0),Xv(!1)],rl.block()),ql([dw(!0),Xv(!0),ik],rl.block()),ql([dw(!0),Xv(!0)],rl.br()),ql([K7(!0),ik],rl.br()),ql([K7(!0)],rl.block()),ql([z5],rl.br()),ql([ik],rl.br()),ql([Wq],rl.block()),ql([X7],rl.block())],[e,!!(t&&t.shiftKey)]).getOr(rl.none()),lk=(e,t,o)=>{t.mode.isReadOnly()||(t.selection.isCollapsed()||FN(t),!(de(o)&&cw(t,e.fakeEventName).isDefaultPrevented())&&(e.insert(t,o),de(o)&&aw(t,e.fakeEventName)))},J7=(e,t)=>{if(e.mode.isReadOnly())return;const o=()=>lk(G7,e,t),r=()=>lk(uw,e,t),c=jq(e,t);switch($b(e)){case"linebreak":c.fold(o,o,yt);break;case"block":c.fold(r,r,yt);break;case"invert":c.fold(r,o,yt);break;default:c.fold(o,r,yt);break}},Q7=Oi(),Gq=Q7.os.isiOS()&&Q7.browser.isSafari(),V5=(e,t)=>{t.isDefaultPrevented()||(t.preventDefault(),o$(e.undoManager),e.undoManager.transact(()=>{J7(e,t)}))},uk=e=>{if(!e.collapsed)return!1;const t=e.startContainer;if(Ye(t)){const o=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,r=t.data.charAt(e.startOffset-1);return o.test(r)}else return!1},eL=e=>{let t=B.none();const o=c=>{t=B.some(c.selection.getBookmark()),c.undoManager.add()},r=(c,u)=>{c.undoManager.undo(),t.fold(yt,f=>c.selection.moveToBookmark(f)),V5(c,u),t=B.none()};e.on("keydown",c=>{c.keyCode===vt.ENTER&&(Gq&&uk(e.selection.getRng())?o(e):V5(e,c))}),e.on("keyup",c=>{c.keyCode===vt.ENTER&&t.each(()=>r(e,c))})},tL=(e,t,o)=>{const r=Xn.os.isMacOS()||Xn.os.isiOS();zh([{keyCode:vt.END,action:sn(DI,e,!0)},{keyCode:vt.HOME,action:sn(DI,e,!1)},...r?[]:[{keyCode:vt.HOME,action:sn(WT,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:vt.END,action:sn(WT,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:vt.END,action:sn(l5,e,!0)},{keyCode:vt.HOME,action:sn(l5,e,!1)},{keyCode:vt.END,action:sn(Hh,e,!0,t)},{keyCode:vt.HOME,action:sn(Hh,e,!1,t)}],o).each(c=>{o.preventDefault()})},qq=(e,t)=>{e.on("keydown",o=>{o.isDefaultPrevented()||tL(e,t,o)})},Kq=e=>{e.on("input",t=>{t.isComposing||DN(e)})},dk=Oi(),Yq=(e,t,o)=>{zh([{keyCode:vt.PAGE_UP,action:sn(Hh,e,!1,t)},{keyCode:vt.PAGE_DOWN,action:sn(Hh,e,!0,t)}],o)},U5=e=>e.stopImmediatePropagation(),nL=e=>e.keyCode===vt.PAGE_UP||e.keyCode===vt.PAGE_DOWN,Z5=(e,t,o)=>{o&&!e.get()?t.on("NodeChange",U5,!0):!o&&e.get()&&t.off("NodeChange",U5),e.set(o)},Xq=(e,t)=>{if(dk.os.isMacOS())return;const o=Xt(!1);e.on("keydown",r=>{nL(r)&&Z5(o,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||Yq(e,t,r),nL(r)&&o.get()&&(Z5(o,e,!1),e.nodeChanged())})},oL=(e,t)=>e===t||e.contains(t),Jq=(e,t)=>!oL(e.getBody(),t.startContainer)||!oL(e.getBody(),t.endContainer)?!0:E9(e.dom,t),Qq=e=>{e.on("beforeinput",t=>{(!e.selection.isEditable()||Ge(t.getTargetRanges(),o=>!Jq(e,o)))&&t.preventDefault()})},sL=(e,t)=>{const o=t.container(),r=t.offset();return Ye(o)?(o.insertData(r,e),B.some(ke(o,r+e.length))):m1(t).map(c=>{const u=Y.fromText(e);return t.isAtEnd()?xl(c,u):Qr(c,u),ke(u.dom,e.length)})},j1=ze(sL,Zs),rL=ze(sL," "),eK=(e,t,o)=>K9(e,t,o)?j1(t):rL(t),aL=e=>t=>t.fold(o=>p(e.dom,ke.before(o)),o=>y(o),o=>E(o),o=>m(e.dom,ke.after(o))),tK=(e,t,o)=>r=>K9(e,r,o)?j1(t):rL(t),cL=e=>t=>{e.selection.setRng(t.toRange()),e.nodeChanged()},nK=(e,t)=>e.isEditable(e.getParent(t,"summary")),iL=e=>{const t=ke.fromRangeStart(e.selection.getRng()),o=Y.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=ze(b1,e),c=ke.fromRangeStart(e.selection.getRng());return Zd(r,e.getBody(),c).bind(aL(o)).map(u=>()=>tK(o,t,e.schema)(u).each(cL(e)))}else return B.none()},oK=e=>{const t=()=>{const o=Y.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const r=ke.fromRangeStart(e.selection.getRng());eK(o,r,e.schema).each(cL(e))};return ni(Xn.browser.isFirefox()&&e.selection.isEditable()&&nK(e.dom,e.selection.getRng().startContainer),t)},sK=(e,t)=>{qT([{keyCode:vt.SPACEBAR,action:sn(iL,e)},{keyCode:vt.SPACEBAR,action:sn(oK,e)}],t).each(o=>{t.preventDefault(),cw(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),aw(e,"insertText",{data:" "}))})},dQ=e=>{e.on("keydown",t=>{t.isDefaultPrevented()||sK(e,t)})},mk=e=>OE(e)?[{keyCode:vt.TAB,action:sn(f7,e,!0)},{keyCode:vt.TAB,shiftKey:!0,action:sn(f7,e,!1)}]:[],rK=(e,t)=>{zh([...mk(e)],t).each(o=>{t.preventDefault()})},aK=e=>{e.on("keydown",t=>{t.isDefaultPrevented()||rK(e,t)})},cK=e=>{if(e.addShortcut("Meta+P","","mcePrint"),lq(e),Ld(e))return Xt(null);{const t=Nj(e);return Qq(e),xI(e),WG(e,t),Cq(e,t),eL(e),dQ(e),Kq(e),aK(e),qq(e,t),Xq(e,t),t}},iK=(e,t)=>{const o=zS(e);o===null||eR(e,o)||e.undoManager.transact(()=>{At(t.styles)&&e.dom.setStyles(o,t.styles),At(t.attrs)&&Bn(t.attrs,(r,c)=>e.dom.setAttrib(o,c,r))})},W5=(e,t)=>()=>{const o=zS(e);return de(o)&&o.nodeName===t},lK=e=>{e.addCommand("InsertUnorderedList",(t,o)=>{mR(e,"UL",o)}),e.addCommand("InsertOrderedList",(t,o)=>{mR(e,"OL",o)}),e.addCommand("InsertDefinitionList",(t,o)=>{mR(e,"DL",o)}),e.addCommand("RemoveList",()=>{CT(e)}),e.addCommand("mceListUpdate",(t,o)=>{At(o)&&iK(e,o)}),e.addCommand("mceListBackspaceDelete",(t,o)=>{hR(e,o)}),e.addQueryStateHandler("InsertUnorderedList",W5(e,"UL")),e.addQueryStateHandler("InsertOrderedList",W5(e,"OL")),e.addQueryStateHandler("InsertDefinitionList",W5(e,"DL"))},uK=e=>{e.on("keydown",t=>{t.keyCode===vt.BACKSPACE?hR(e,!1)&&t.preventDefault():t.keyCode===vt.DELETE&&hR(e,!0)&&t.preventDefault()})},lL=e=>e.type===3,uL=e=>e.length===0,dK=e=>{const t=(c,u)=>{const f=Zr.create("li");ne(c,b=>f.append(b)),u?e.insert(f,u,!0):e.append(f)},o=(c,u)=>lL(u)?[...c,u]:!uL(c)&&!lL(u)?(t(c,u),[]):c,r=kn(e.children(),o,[]);uL(r)||t(r)},mK=e=>{e.on("PreInit",()=>{const{parser:t}=e;t.addNodeFilter("ul,ol",o=>ne(o,dK))})},fK=e=>{e.on("keydown",t=>{t.keyCode!==vt.TAB||vt.metaKeyPressed(t)||e.undoManager.transact(()=>{(t.shiftKey?ZS(e):u8(e))&&t.preventDefault()})})},gK=e=>{TC(e)&&fK(e)},No=e=>{uK(e),lK(e),mK(e),gK(e)};class hK{constructor(t){Ze(this,"editor");Ze(this,"lastPath",[]);this.editor=t;let o;const r=this;"onselectionchange"in t.getDoc()||t.on("NodeChange click mouseup keyup focus",c=>{const u=t.selection.getRng(),f={startContainer:u.startContainer,startOffset:u.startOffset,endContainer:u.endContainer,endOffset:u.endOffset};(c.type==="nodechange"||!Vf(f,o))&&t.dispatch("SelectionChange"),o=f}),t.on("contextmenu",()=>{n4(t),t.dispatch("SelectionChange")}),t.on("SelectionChange",()=>{const c=t.selection.getStart(!0);c&&zC(t)&&!r.isSameElementPath(c)&&t.dom.isChildOf(c,t.getBody())&&t.nodeChanged({selectionChange:!0})}),t.on("mouseup",c=>{!c.isDefaultPrevented()&&zC(t)&&(t.selection.getNode().nodeName==="IMG"?Ru.setEditorTimeout(t,()=>{t.nodeChanged()}):t.nodeChanged())})}nodeChanged(t={}){const o=this.editor,r=o.selection;let c;if(o.initialized&&r&&!wE(o)&&!Xi(o)){const u=o.getBody();c=r.getStart(!0)||u,(c.ownerDocument!==o.getDoc()||!o.dom.isChildOf(c,u))&&(c=u);const f=[];o.dom.getParent(c,b=>b===u?!0:(f.push(b),!1)),o.dispatch("NodeChange",{...t,element:c,parents:f})}}isSameElementPath(t){let o;const r=this.editor,c=Cs(r.dom.getParents(t,gt,r.getBody()));if(c.length===this.lastPath.length){for(o=c.length;o>=0&&c[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=c,!0}return this.lastPath=c,!1}}const j5="x-tinymce/html",fk=qe(j5),mw="<!-- "+j5+" -->",dL=e=>mw+e,pK=e=>e.replace(mw,""),mL=e=>e.indexOf(mw)!==-1,bK=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),fL=(e,t)=>{let o="<"+e;const r=dl(t,(c,u)=>u+'="'+Sc.encodeAllRaw(c)+'"');return r.length&&(o+=" "+r.join(" ")),o+">"},gk=(e,t,o)=>{const r=e.split(/\n\n/),c=fL(t,o),u="</"+t+">",f=Ue(r,v=>v.split(/\n/).join("<br />")),b=v=>c+v+u;return f.length===1?f[0]:Ue(f,b).join("")},gL="%MCEPASTEBIN%",vK=(e,t)=>{const{dom:o,selection:r}=e,c=e.getBody();t.set(r.getRng());const u=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},gL);Xn.browser.isFirefox()&&o.setStyle(u,"left",o.getStyle(c,"direction",!0)==="rtl"?65535:-65535),o.bind(u,"beforedeactivate focusin focusout",f=>{f.stopPropagation()}),u.focus(),r.select(u,!0)},G5=(e,t)=>{const o=e.dom;if(q5(e)){let r;const c=t.get();for(;r=q5(e);)o.remove(r),o.unbind(r);c&&e.selection.setRng(c)}t.set(null)},q5=e=>e.dom.get("mcepastebin"),yK=e=>de(e)&&e.id==="mcepastebin",CK=e=>{const t=e.dom,o=(f,b)=>{f.appendChild(b),t.remove(b,!0)},[r,...c]=ge(e.getBody().childNodes,yK);ne(c,f=>{o(r,f)});const u=t.select("div[id=mcepastebin]",r);for(let f=u.length-1;f>=0;f--){const b=t.create("div");r.insertBefore(b,u[f]),o(b,u[f])}return r?r.innerHTML:""},hL=e=>e===gL,pL=e=>{const t=Xt(null);return{create:()=>vK(e,t),remove:()=>G5(e,t),getEl:()=>q5(e),getHtml:()=>CK(e),getLastRng:t.get}},bL=(e,t)=>(Ke.each(t,o=>{Yn(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),SK=e=>{const t=Hr(),o=Sv({},t);let r="";const c=t.getVoidElements(),u=Ke.makeMap("script noscript style textarea video audio iframe object"," "),f=t.getBlockElements(),b=v=>{const w=v.name,_=v;if(w==="br"){r+=`
`;return}if(w!=="wbr"){if(c[w]&&(r+=" "),u[w]){r+=" ";return}if(v.type===3&&(r+=v.value),!(v.name in t.getVoidElements())){let D=v.firstChild;if(D)do b(D);while(D=D.next)}f[w]&&_.next&&(r+=`
`,w==="p"&&(r+=`
`))}};return e=bL(e,[/<!\[[^\]]+\]>/g]),b(o.parse(e)),r},K5=e=>(e=bL(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,c)=>!r&&!c?" ":Zs],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),wK=e=>{let t=0;return()=>e+t++},xK=e=>{const t=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return Ke.hasOwn(o,t)?"image/"+o[t]:"image/"+t},EK=(e,t)=>{const o=Sv({sanitize:qb(e),sandbox_iframes:vh(e),sandbox_iframes_exclusions:Td(e),convert_unsafe_embeds:kd(e)},e.schema);o.addNodeFilter("meta",c=>{Ke.each(c,u=>{u.remove()})});const r=o.parse(t,{forced_root_block:!1,isRootContent:!0});return wh({validate:!0},e.schema).serialize(r)},hk=(e,t)=>({content:e,cancelled:t}),TK=(e,t,o)=>{const r=e.dom.create("div",{style:"display:none"},t),c=nE(e,r,o);return hk(c.node.innerHTML,c.isDefaultPrevented())},vL=(e,t,o)=>{const r=tE(e,t,o),c=EK(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?TK(e,c,o):hk(c,r.isDefaultPrevented())},kK=(e,t,o)=>vL(e,t,o),fw=(e,t)=>(e.insertContent(t,{merge:TE(e),paste:!0}),!0),Y5=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),yL=(e,t)=>Y5(t)&&Ge(EC(e),o=>ga(t.toLowerCase(),`.${o.toLowerCase()}`)),_K=(e,t,o)=>(e.undoManager.extra(()=>{o(e,t)},()=>{e.insertContent('<img src="'+t+'">')}),!0),AK=(e,t,o)=>(e.undoManager.extra(()=>{o(e,t)},()=>{e.execCommand("mceInsertLink",!1,t)}),!0),OK=(e,t,o)=>!e.selection.isCollapsed()&&Y5(t)?AK(e,t,o):!1,DK=(e,t,o)=>yL(e,t)?_K(e,t,o):!1,CL=(e,t)=>{Ke.each([OK,DK,fw],o=>!o(e,t,fw))},RK=(e,t,o)=>{o||!yC(e)?fw(e,t):CL(e,t)},SL=wK("mceclip"),pk=e=>{const t=jv();return QI(t,e),JT(t),t},bk=(e,t,o,r,c)=>{const u=kK(e,t,o);if(!u.cancelled){const f=u.content,b=()=>RK(e,f,r);c?cw(e,"insertFromPaste",{dataTransfer:pk(f)}).isDefaultPrevented()||(b(),aw(e,"insertFromPaste")):b()}},Jv=(e,t,o,r)=>{const c=o||mL(t);bk(e,pK(t),c,!1,r)},X5=(e,t,o)=>{const r=e.dom.encode(t).replace(/\r\n/g,`
`),c=F0(r,z_(e)),u=gk(c,Ys(e),Yi(e));bk(e,u,!1,!0,o)},wL=e=>{const t={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const r=e.types[o];try{t[r]=e.getData(r)}catch{t[r]=""}}return t},Kl=(e,t)=>t in e&&e[t].length>0,xL=e=>Kl(e,"text/html")||Kl(e,"text/plain"),Qv=(e,t)=>{const o=t.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return de(o)?e.dom.encode(o[1]):void 0},gw=(e,t,o,r)=>{const c=SL(),u=fE(e)&&de(o.name),f=u?Qv(e,o.name):c,b=u?o.name:void 0,v=t.create(c,o,r,f,b);return t.add(v),v},MK=(e,t)=>{SO(t.uri).each(({data:o,type:r,base64Encoded:c})=>{const u=c?o:btoa(o),f=t.file,b=e.editorUpload.blobCache,w=b.getByData(u,r)??gw(e,b,f,u);Jv(e,`<img src="${w.blobUri()}">`,!1,!0)})},NK=e=>e.type==="paste",e2=e=>Promise.all(Ue(e,t=>wO(t).then(o=>({file:t,uri:o})))),BK=e=>{const t=EC(e);return o=>pn(o.type,"image/")&&Ge(t,r=>xK(r)===o.type)},J5=(e,t)=>{const o=t.items?mo(Mr(t.items),c=>c.kind==="file"?[c.getAsFile()]:[]):[],r=t.files?Mr(t.files):[];return ge(o.length>0?o:r,BK(e))},EL=(e,t,o)=>{const r=NK(t)?t.clipboardData:t.dataTransfer;if(Gb(e)&&r){const c=J5(e,r);if(c.length>0)return t.preventDefault(),e2(c).then(u=>{o&&e.selection.setRng(o),ne(u,f=>{MK(e,f)})}),!0}return!1},TL=e=>{var t,o;return Xn.os.isAndroid()&&((o=(t=e.clipboardData)==null?void 0:t.items)==null?void 0:o.length)===0},kL=e=>vt.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,hw=(e,t,o,r,c)=>{let u=K5(o);const f=Kl(t,fk())||mL(o),b=!f&&bK(u),v=Y5(u);(hL(u)||!u.length||b&&!v)&&(r=!0),(r||v)&&(Kl(t,"text/plain")&&b?u=t["text/plain"]:u=SK(u)),!hL(u)&&(r?X5(e,u,c):Jv(e,u,f,c))},_L=(e,t,o)=>{let r;const c=()=>t.getLastRng()||e.selection.getRng();e.on("keydown",u=>{kL(u)&&!u.isDefaultPrevented()&&(r=u.shiftKey&&u.keyCode===86)}),e.on("paste",u=>{if(u.isDefaultPrevented()||TL(u))return;const f=o.get()==="text"||r;r=!1;const b=wL(u.clipboardData);!xL(b)&&EL(e,u,c())||(Kl(b,"text/html")?(u.preventDefault(),hw(e,b,b["text/html"],f,!0)):Kl(b,"text/plain")&&Kl(b,"text/uri-list")?(u.preventDefault(),hw(e,b,b["text/plain"],f,!0)):(t.create(),Ru.setEditorTimeout(e,()=>{const v=t.getHtml();t.remove(),hw(e,b,v,f,!1)},0)))})},PK=e=>{const t=c=>pn(c,"webkit-fake-url"),o=c=>pn(c,"data:"),r=c=>{var u;return((u=c.data)==null?void 0:u.paste)===!0};e.parser.addNodeFilter("img",(c,u,f)=>{if(!Gb(e)&&r(f))for(const b of c){const v=b.attr("src");U(v)&&!b.attr("data-mce-object")&&v!==Xn.transparentSrc&&(t(v)||!CC(e)&&o(v))&&b.remove()}})},$K=(e,t,o)=>{_L(e,t,o),PK(e)},AL=(e,t)=>{t.get()==="text"?(t.set("html"),oE(e,!1)):(t.set("text"),oE(e,!0)),e.focus()},IK=(e,t)=>{e.addCommand("mceTogglePlainTextPaste",()=>{AL(e,t)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&Jv(e,r.html,r.internal,!1),r.text&&X5(e,r.text,!1)})},OL=(e,t,o)=>{if(e)try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",o),e.setData(fk(),t),!0}catch{return!1}else return!1},vk=(e,t,o,r)=>{OL(e.clipboardData,t.html,t.text)?(e.preventDefault(),r()):o(t.html,r)},Q5=e=>(t,o)=>{const{dom:r,selection:c}=e,u=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),f=r.create("div",{contenteditable:"true"},t);r.setStyles(u,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),u.appendChild(f),r.add(e.getBody(),u);const b=c.getRng();f.focus();const v=r.createRng();v.selectNodeContents(f),c.setRng(v),Ru.setEditorTimeout(e,()=>{c.setRng(b),r.remove(u),o()},0)},DL=e=>({html:dL(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),LK=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),RL=e=>!e.selection.isCollapsed()||LK(e),ML=(e,t)=>o=>{!o.isDefaultPrevented()&&RL(e)&&e.selection.isEditable()&&vk(o,DL(e),Q5(e),()=>{if(Xn.browser.isChromium()||Xn.browser.isFirefox()){const r=e.selection.getRng();Ru.setEditorTimeout(e,()=>{e.selection.setRng(r),zu(e,t)},0)}else zu(e,t)})},eM=e=>t=>{!t.isDefaultPrevented()&&RL(e)&&vk(t,DL(e),Q5(e),yt)},FK=(e,t)=>{e.on("cut",ML(e,t)),e.on("copy",eM(e))},tM=(e,t)=>Rd.getCaretRangeFromPoint(t.clientX??0,t.clientY??0,e.getDoc()),NL=e=>{const t=e["text/plain"];return t?t.indexOf("file://")===0:!1},BL=(e,t)=>{t&&e.selection.setRng(t),e.focus()},PL=e=>Ge(e.files,t=>/^image\//.test(t.type)),HK=(e,t,o,r)=>{const c=e.getParent(o,f=>ps(t,f));if(!ie(e.getParent(o,"summary")))return!0;if(c&&Sn(r,"text/html")){const f=new DOMParser().parseFromString(r["text/html"],"text/html").body;return!ie(f.querySelector(c.nodeName.toLowerCase()))}else return!1},zK=e=>{e.on("input",t=>{const o=r=>ie(r.querySelector("summary"));if(t.inputType==="deleteByDrag"){const r=ge(e.dom.select("details"),o);ne(r,c=>{ds(c.firstChild)&&c.firstChild.remove();const u=e.dom.create("summary");u.appendChild(ym().dom),c.prepend(u)})}})},yk=(e,t)=>{g6(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),Gb(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&PL(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented())return;const r=tM(e,o);if(Le(r))return;const c=wL(o.dataTransfer),u=Kl(c,fk());if((!xL(c)||NL(c))&&EL(e,o,r))return;const f=c[fk()],b=f||c["text/html"]||c["text/plain"],v=HK(e.dom,e.schema,r.startContainer,c),w=t.get();w&&!v||b&&(o.preventDefault(),Ru.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(f||w&&v)&&e.execCommand("Delete"),BL(e,r);const _=K5(b);c["text/html"]?Jv(e,_,u,!0):X5(e,_,!0)})}))}),e.on("dragstart",o=>{t.set(!0)}),e.on("dragover dragend",o=>{Gb(e)&&!t.get()&&(o.preventDefault(),BL(e,tM(e,o))),o.type==="dragend"&&t.set(!1)}),zK(e)},VK=e=>{const t=c=>u=>{c(e,u)},o=$_(e);X(o)&&e.on("PastePreProcess",t(o));const r=I_(e);X(r)&&e.on("PastePostProcess",t(r))},UK=(e,t)=>{e.on("PastePreProcess",o=>{o.content=t(e,o.content,o.internal)})},$L=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,nM=e=>Ke.trim(e).replace($L,pi).toLowerCase(),ZK=(e,t,o)=>{const r=vC(e);if(o||r==="all"||!F_(e))return t;const c=r?r.split(/[, ]/):[];if(c&&r!=="none"){const u=e.dom,f=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(b,v,w,_)=>{const D=u.parseStyle(u.decode(w)),M={};for(let W=0;W<c.length;W++){const V=D[c[W]];let q=V,ae=u.getStyle(f,c[W],!0);/color/.test(c[W])&&(q=nM(q),ae=nM(ae)),ae!==q&&(M[c[W]]=V)}const L=u.serializeStyle(M,"span");return L?v+' style="'+L+'"'+_:v+_})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(u,f,b,v)=>f+' style="'+b+'"'+v),t},WK=e=>{(Xn.browser.isChromium()||Xn.browser.isSafari())&&UK(e,ZK)},jK=(e,t)=>{const o=Xt(!1),r=Xt(H_(e)?"text":"html"),c=pL(e);WK(e),IK(e,r),VK(e),e.addQueryStateHandler("mceTogglePlainTextPaste",()=>r.get()==="text"),e.on("PreInit",()=>{FK(e,t),yk(e,o),$K(e,c,r)})},GK=e=>{e.on("click",t=>{e.dom.getParent(t.target,"details")&&t.preventDefault()})},qK=e=>{e.parser.addNodeFilter("details",t=>{const o=bh(e);ne(t,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})}),e.serializer.addNodeFilter("details",t=>{const o=Ed(e);ne(t,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})})},IL=e=>{GK(e),qK(e)},KK=ds,LL=Ye,YK=e=>ts(e.dom),XK=e=>vc(e.dom),FL=e=>t=>Ln(Y.fromDom(e),t),JK=(e,t,o)=>Ro(Y.fromDom(e),r=>XK(r)||o.isBlock(An(r)),FL(t)).getOr(Y.fromDom(t)).dom,HL=(e,t)=>Ro(Y.fromDom(e),YK,FL(t)),zL=(e,t,o)=>{const r=new _s(e,t),c=o?r.next.bind(r):r.prev.bind(r);let u=e;for(let f=o?e:c();f&&!KK(f);f=c())ss(f)&&(u=f);return u},VL=(e,t,o)=>{const c=ke.fromRangeStart(e).getNode(),u=JK(c,t,o),f=zL(c,u,!1),b=zL(c,u,!0),v=document.createRange();return HL(f,u).fold(()=>{LL(f)?v.setStart(f,0):v.setStartBefore(f)},w=>v.setStartBefore(w.dom)),HL(b,u).fold(()=>{LL(b)?v.setEnd(b,b.data.length):v.setEndAfter(b)},w=>v.setEndAfter(w.dom)),v},UL=e=>{const t=VL(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(CO(t))},QK=e=>{e.on("mousedown",t=>{t.detail>=3&&(t.preventDefault(),UL(e))})};var t2;(function(e){e.Before="before",e.After="after"})(t2||(t2={}));const eY=(e,t)=>Math.abs(e.left-t),pw=(e,t)=>Math.abs(e.right-t),tY=(e,t)=>e>=t.top&&e<=t.bottom,nY=(e,t)=>e.top<t.bottom&&e.bottom>t.top,ZL=(e,t)=>{const o=Mx(e,t)/Math.min(e.height,t.height);return nY(e,t)&&o>.5},oY=(e,t)=>{const o=ge(e,r=>tY(t,r));return $p(o).fold(()=>[[],e],r=>{const{pass:c,fail:u}=De(e,f=>ZL(f,r));return[c,u]})},sY=(e,t)=>({node:e.node,position:eY(e,t)<pw(e,t)?t2.Before:t2.After}),rY=(e,t,o)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),oM=(e,t,o,r)=>{const c=D=>ss(D.node)?B.some(D):it(D.node)?oM(Mr(D.node.childNodes),t,o,!1):B.none(),u=(D,M,L)=>c(M).filter(W=>Math.abs(L(D,t,o)-L(W,t,o))<2&&Ye(W.node)),f=(D,M)=>{const L=ou(D,(W,V)=>M(W,t,o)-M(V,t,o));return ki(L,c).map(W=>r&&!Ye(W.node)&&L.length>1?u(W,L[1],M).getOr(W):W)},[b,v]=oY(zR(e),o),{pass:w,fail:_}=De(v,D=>D.top<o);return f(b,rY).orThunk(()=>f(_,Py)).orThunk(()=>f(w,Py))},aY=(e,t,o,r)=>{const c=(u,f)=>{const b=w=>it(w)&&w.classList.contains("mce-drag-container"),v=ge(u.dom.childNodes,vo(b));return f.fold(()=>oM(v,o,r,!0),w=>{const _=ge(v,D=>D!==w.dom);return oM(_,o,r,!0)}).orThunk(()=>(Ln(u,e)?B.none():Ni(u)).bind(_=>c(_,B.some(u))))};return c(t,B.none())},Ck=(e,t,o)=>{const r=Y.fromDom(e),c=Cl(r),f=Y.fromPoint(c,t,o).filter(b=>ri(r,b)).getOr(r);return aY(r,f,t,o)},sM=(e,t,o)=>Ck(e,t,o).filter(r=>i1(r.node)).map(r=>sY(r,t)),rM=e=>{const t=e.getBoundingClientRect(),o=e.ownerDocument,r=o.documentElement,c=o.defaultView;return{top:t.top+((c==null?void 0:c.scrollY)??0)-r.clientTop,left:t.left+((c==null?void 0:c.scrollX)??0)-r.clientLeft}},cY=e=>e.inline?rM(e.getBody()):{left:0,top:0},iY=e=>{const t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}},lY=e=>{const t=e.getBody(),o=e.getDoc().documentElement,r={left:t.scrollLeft,top:t.scrollTop},c={left:t.scrollLeft||o.scrollLeft,top:t.scrollTop||o.scrollTop};return e.inline?r:c},mQ=(e,t)=>{if(t.target.ownerDocument!==e.getDoc()){const o=rM(e.getContentAreaContainer()),r=lY(e);return{left:t.pageX-o.left+r.left,top:t.pageY-o.top+r.top}}return{left:t.pageX,top:t.pageY}},uY=(e,t,o)=>({pageX:o.left-e.left+t.left,pageY:o.top-e.top+t.top}),dY=(e,t)=>uY(cY(e),iY(e),mQ(e,t)),Sk=e=>({target:e,srcElement:e}),wk=(e,t,o,r)=>({...t,dataTransfer:r,type:e,...Sk(o)}),mY=(e,t,o)=>{const r=Qs("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:r,initEvent:r,preventDefault:yt,stopImmediatePropagation:yt,stopPropagation:yt,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,layerX:0,layerY:0,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:r,initMouseEvent:r,getModifierState:r,dataTransfer:o,...Sk(t)}},fY=(e,t)=>{const o=DG(e);return t==="dragstart"?(jI(o),b5(o)):t==="drop"?(kG(o),JT(o)):(_G(o),v5(o)),o},gY=(e,t,o,r)=>{const c=fY(o,e);return Je(r)?mY(e,t,c):wk(e,r,t,c)},bw=32,hY=100,n2=8,vw=16,WL=ts,pY=$y(WL,vc),jL=(e,t,o)=>WL(o)&&o!==t&&e.isEditable(o.parentElement),bY=(e,t,o)=>Le(t)||t===o||e.dom.isChildOf(t,o)?!1:e.dom.isEditable(t),fQ=(e,t,o,r)=>{const c=e.dom,u=t.cloneNode(!0);c.setStyles(u,{width:o,height:r}),c.setAttrib(u,"data-mce-selected",null);const f=c.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return c.setStyles(f,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:r}),c.setStyles(u,{margin:0,boxSizing:"border-box"}),f.appendChild(u),f},vY=(e,t)=>{e.parentNode!==t&&t.appendChild(e)},xk=(e,t)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+t,behavior:"smooth"})},GL=xk("left",-bw),aM=xk("left",bw),Ek=xk("top",-bw),yw=xk("top",bw),qL=(e,t,o,r,c,u,f,b,v,w,_,D)=>{let M=0,L=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+o>c&&(M=t.pageX+o-c),t.pageY+r>u&&(L=t.pageY+r-u),e.style.width=o-M+"px",e.style.height=r-L+"px";const W=v.clientHeight,V=v.clientWidth,q=f+v.getBoundingClientRect().top,ae=b+v.getBoundingClientRect().left;_.on(ce=>{ce.intervalId.clear(),ce.dragging&&D&&(f+n2>=W?ce.intervalId.set(yw(w)):f-n2<=0?ce.intervalId.set(Ek(w)):b+n2>=V?ce.intervalId.set(aM(w)):b-n2<=0?ce.intervalId.set(GL(w)):q+vw>=window.innerHeight?ce.intervalId.set(yw(window)):q-vw<=0?ce.intervalId.set(Ek(window)):ae+vw>=window.innerWidth?ce.intervalId.set(aM(window)):ae-vw<=0&&ce.intervalId.set(GL(window)))})},KL=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},yY=(e,t)=>{const o=e.getParent(t.parentNode,e.isBlock);KL(t),o&&o!==e.getRoot()&&e.isEmpty(o)&&Cm(Y.fromDom(o))},CY=e=>e.button===0,SY=(e,t)=>({pageX:t.pageX-e.relX,pageY:t.pageY+5}),YL=(e,t)=>o=>{if(CY(o)){const r=To(t.dom.getParents(o.target),pY).getOr(null);if(de(r)&&jL(t.dom,t.getBody(),r)){const c=t.dom.getPos(r),u=t.getBody(),f=t.getDoc().documentElement;e.set({element:r,dataTransfer:jv(),dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(t.inline?u.scrollWidth:f.offsetWidth)-2,maxY:(t.inline?u.scrollHeight:f.offsetHeight)-2,relX:o.pageX-c.x,relY:o.pageY-c.y,width:r.offsetWidth,height:r.offsetHeight,ghost:fQ(t,r,r.offsetWidth,r.offsetHeight),intervalId:T2(hY)})}}},wY=(e,t,o)=>{e._selectionOverrides.hideFakeCaret(),sM(e.getBody(),t,o).fold(()=>e.selection.placeCaretAt(t,o),r=>{const c=e._selectionOverrides.showCaret(1,r.node,r.position===t2.Before,!1);c?e.selection.setRng(c):e.selection.placeCaretAt(t,o)})},o2=(e,t,o,r,c)=>{t==="dragstart"&&QI(r,e.dom.getOuterHTML(o));const u=gY(t,o,r,c);return e.dispatch(t,u)},xY=(e,t)=>{const o=pt((c,u)=>wY(t,c,u),0);t.on("remove",o.cancel);const r=e;return c=>e.on(u=>{const f=Math.max(Math.abs(c.screenX-u.screenX),Math.abs(c.screenY-u.screenY));if(!u.dragging&&f>10){const b=o2(t,"dragstart",u.element,u.dataTransfer,c);if(de(b.dataTransfer)&&(u.dataTransfer=b.dataTransfer),b.isDefaultPrevented())return;u.dragging=!0,t.focus()}if(u.dragging){const b=c.currentTarget===t.getDoc().documentElement,v=SY(u,dY(t,c));vY(u.ghost,t.getBody()),qL(u.ghost,v,u.width,u.height,u.maxX,u.maxY,c.clientY,c.clientX,t.getContentAreaContainer(),t.getWin(),r,b),o.throttle(c.clientX,c.clientY)}})},EY=e=>{const t=e.getSel();if(de(t)){const r=t.getRangeAt(0).startContainer;return Ye(r)?r.parentNode:r}else return null},cM=(e,t)=>o=>{e.on(r=>{if(r.intervalId.clear(),r.dragging){if(bY(t,EY(t.selection),r.element)){const c=t.getDoc().elementFromPoint(o.clientX,o.clientY)??t.getBody();o2(t,"drop",c,r.dataTransfer,o).isDefaultPrevented()||t.undoManager.transact(()=>{yY(t.dom,r.element),JI(r.dataTransfer).each(f=>t.insertContent(f)),t._selectionOverrides.hideFakeCaret()})}o2(t,"dragend",t.getBody(),r.dataTransfer,o)}}),XL(e)},iM=(e,t,o)=>{e.on(r=>{r.intervalId.clear(),r.dragging&&o.fold(()=>o2(t,"dragend",r.element,r.dataTransfer),c=>o2(t,"dragend",r.element,r.dataTransfer,c))}),XL(e)},gQ=(e,t)=>o=>iM(e,t,B.some(o)),XL=e=>{e.on(t=>{t.intervalId.clear(),KL(t.ghost)}),e.clear()},JL=e=>{const t=oi(),o=Un.DOM,r=document,c=YL(t,e),u=xY(t,e),f=cM(t,e),b=gQ(t,e);e.on("mousedown",c),e.on("mousemove",u),e.on("mouseup",f),o.bind(r,"mousemove",u),o.bind(r,"mouseup",b),e.on("remove",()=>{o.unbind(r,"mousemove",u),o.unbind(r,"mouseup",b)}),e.on("keydown",v=>{v.keyCode===vt.ESC&&iM(t,e,B.none())})},TY=e=>{const t=c=>{if(!c.isDefaultPrevented()){const u=c.dataTransfer;u&&(Ce(u.types,"Files")||u.files.length>0)&&(c.preventDefault(),c.type==="drop"&&uT(e,"Dropped file type is not supported"))}},o=c=>{r4(e,c.target)&&t(c)},r=()=>{const c=Un.DOM,u=e.dom,f=document,b=e.inline?e.getBody():e.getDoc(),v=["drop","dragover"];ne(v,w=>{c.bind(f,w,o),u.bind(b,w,t)}),e.on("remove",()=>{ne(v,w=>{c.unbind(f,w,o),u.unbind(b,w,t)})})};e.on("init",()=>{Ru.setEditorTimeout(e,r,0)})},lM=e=>{JL(e),M_(e)&&TY(e)},kY=e=>{const t=pt(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const r=eg(e,o,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{t.throttle()}),e.on("blur",()=>{t.cancel()})},_Y=e=>{e.on("init",()=>{e.on("focusin",t=>{const o=t.target;if(gi(o)){const r=Md(e.getBody(),o),c=ts(r)?r:o;e.selection.getNode()!==c&&Um(e,c).each(u=>e.selection.setRng(u))}})})},Cw=ts,uM=(e,t)=>Md(e.getBody(),t),Tk=e=>{const t=e.selection,o=e.dom,r=e.getBody(),c=mn(e,r,o.isBlock,()=>fv(e)),u="sel-"+o.uniqueId(),f="data-mce-selected";let b;const v=Ae=>de(Ae)&&o.hasClass(Ae,"mce-offscreen-selection"),w=Ae=>Ae!==r&&(Cw(Ae)||gi(Ae))&&o.isChildOf(Ae,r)&&o.isEditable(Ae.parentNode),_=Ae=>{Ae&&t.setRng(Ae)},D=(Ae,ve,Oe,dt=!0)=>e.dispatch("ShowCaret",{target:ve,direction:Ae,before:Oe}).isDefaultPrevented()?null:(dt&&t.scrollIntoView(ve,Ae===-1),c.show(Oe,ve)),M=Ae=>{Ae.hasAttribute("data-mce-caret")&&(ji(Ae),t.scrollIntoView(Ae))},L=()=>{e.on("click",ve=>{o.isEditable(ve.target)||(ve.preventDefault(),e.focus())}),e.on("blur NewBlock",Ie),e.on("ResizeWindow FullscreenStateChanged",c.reposition),e.on("tap",ve=>{const Oe=ve.target,dt=uM(e,Oe);Cw(dt)?(ve.preventDefault(),Um(e,dt).each(_e)):w(Oe)&&Um(e,Oe).each(_e)},!0),e.on("mousedown",ve=>{const Oe=ve.target;if(Oe!==r&&Oe.nodeName!=="HTML"&&!o.isChildOf(Oe,r)||!mZ(e,ve.clientX,ve.clientY))return;Ie(),$t();const dt=uM(e,Oe);Cw(dt)?(ve.preventDefault(),Um(e,dt).each(_e)):sM(r,ve.clientX,ve.clientY).each(en=>{ve.preventDefault();const tn=D(1,en.node,en.position===t2.Before,!1);_(tn),Wa(dt)?dt.focus():e.getBody().focus()})}),e.on("keypress",ve=>{vt.modifierPressed(ve)||Cw(t.getNode())&&ve.preventDefault()}),e.on("GetSelectionRange",ve=>{let Oe=ve.range;if(b){if(!b.parentNode){b=null;return}Oe=Oe.cloneRange(),Oe.selectNode(b),ve.range=Oe}}),e.on("focusin",ve=>{if(!gi(ve.target)&&e.getBody().contains(ve.target)&&ve.target!==e.getBody()&&!e.dom.isEditable(ve.target.parentNode)){c.isShowing()&&c.hide(),ve.target.contains(e.selection.getNode())||(e.selection.select(ve.target,!0),e.selection.collapse(!0));const Oe=_e(e.selection.getRng(),!0);Oe&&e.selection.setRng(Oe)}}),e.on("SetSelectionRange",ve=>{ve.range=q(ve.range);const Oe=_e(ve.range,ve.forward);Oe&&(ve.range=Oe)});const Ae=ve=>it(ve)&&ve.id==="mcepastebin";e.on("AfterSetSelectionRange",ve=>{const Oe=ve.range,dt=Oe.startContainer.parentElement;!V(Oe)&&!Ae(dt)&&$t(),v(dt)||Ie()}),lM(e),kY(e),_Y(e)},W=Ae=>Zc(Ae)||Ec(Ae)||Sm(Ae),V=Ae=>W(Ae.startContainer)||W(Ae.endContainer),q=Ae=>{const ve=e.schema.getVoidElements(),Oe=o.createRng(),dt=Ae.startContainer,en=Ae.startOffset,tn=Ae.endContainer,Wn=Ae.endOffset;return Sn(ve,dt.nodeName.toLowerCase())?en===0?Oe.setStartBefore(dt):Oe.setStartAfter(dt):Oe.setStart(dt,en),Sn(ve,tn.nodeName.toLowerCase())?Wn===0?Oe.setEndBefore(tn):Oe.setEndAfter(tn):Oe.setEnd(tn,Wn),Oe},ae=(Ae,ve)=>{const Oe=Y.fromDom(e.getBody()),dt=e.getDoc(),en=gu(Oe,"#"+u).getOrThunk(()=>{const xo=Y.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',dt);return hs(xo,"id",u),Qn(Oe,xo),xo}),tn=o.createRng();Ii(en),ii(en,[Y.fromText(Zs,dt),Y.fromDom(ve),Y.fromText(Zs,dt)]),tn.setStart(en.dom.firstChild,1),tn.setEnd(en.dom.lastChild,0),ui(en,{top:o.getPos(Ae,e.getBody()).y+"px"}),T0(en);const Wn=t.getSel();return Wn&&(Wn.removeAllRanges(),Wn.addRange(tn)),tn},ce=Ae=>{const ve=e.getDoc().createElement("div");ve.style.width=Ae.style.width,ve.style.height=Ae.style.height;const Oe=Ae.getAttribute("width");Oe&&ve.setAttribute("width",Oe);const dt=Ae.getAttribute("height");return dt&&ve.setAttribute("height",dt),ve},me=Ae=>{const ve=Cp(Ae)?ce(Ae):Ae.cloneNode(!0),Oe=e.dispatch("ObjectSelected",{target:Ae,targetClone:ve});if(Oe.isDefaultPrevented())return null;const dt=ae(Ae,Oe.targetClone),en=Y.fromDom(Ae);return ne(Fr(Y.fromDom(e.getBody()),`*[${f}]`),tn=>{Ln(en,tn)||sr(tn,f)}),o.getAttrib(Ae,f)||Ae.setAttribute(f,"1"),b=Ae,$t(),dt},_e=(Ae,ve)=>{if(!Ae)return null;if(Ae.collapsed){if(!V(Ae)){const tn=ve?1:-1,Wn=Nm(tn,r,Ae),xo=Wn.getNode(!ve);if(de(xo)){if(i1(xo))return D(tn,xo,ve?!Wn.isAtEnd():!1,!1);if(Rl(xo)&&ts(xo.nextSibling)){const cs=o.createRng();return cs.setStart(xo,0),cs.setEnd(xo,0),cs}}const Ko=Wn.getNode(ve);if(de(Ko)){if(i1(Ko))return D(tn,Ko,ve?!1:!Wn.isAtEnd(),!1);if(Rl(Ko)&&ts(Ko.previousSibling)){const cs=o.createRng();return cs.setStart(Ko,1),cs.setEnd(Ko,1),cs}}}return null}let Oe=Ae.startContainer,dt=Ae.startOffset;const en=Ae.endOffset;if(Ye(Oe)&&dt===0&&Cw(Oe.parentNode)&&(Oe=Oe.parentNode,dt=o.nodeIndex(Oe),Oe=Oe.parentNode),!it(Oe))return null;if(en===dt+1&&Oe===Ae.endContainer){const tn=Oe.childNodes[dt];if(w(tn))return me(tn)}return null},Ie=()=>{b&&b.removeAttribute(f),gu(Y.fromDom(e.getBody()),"#"+u).each(Zo),b=null},ut=()=>{c.destroy(),b=null},$t=()=>{c.hide()};return Ld(e)||L(),{showCaret:D,showBlockCaretContainer:M,hideFakeCaret:$t,destroy:ut}},QL=(e,t)=>{let o=t;for(let r=e.previousSibling;Ye(r);r=r.previousSibling)o+=r.data.length;return o},dM=(e,t,o,r,c)=>{if(Ye(o)&&(r<0||r>o.data.length))return[];const u=c&&Ye(o)?[QL(o,r)]:[r];let f=o;for(;f!==t&&f.parentNode;)u.push(e.nodeIndex(f,c)),f=f.parentNode;return f===t?u.reverse():[]},mM=(e,t,o,r,c,u,f=!1)=>{const b=dM(e,t,o,r,f),v=dM(e,t,c,u,f);return{start:b,end:v}},eF=(e,t)=>{const o=t.slice(),r=o.pop();return Fn(r)?kn(o,(u,f)=>u.bind(b=>B.from(b.childNodes[f])),B.some(e)).bind(u=>Ye(u)&&(r<0||r>u.data.length)?B.none():B.some({node:u,offset:r})):B.none()},fM=(e,t)=>eF(e,t.start).bind(({node:o,offset:r})=>eF(e,t.end).map(({node:c,offset:u})=>{const f=document.createRange();return f.setStart(o,r),f.setEnd(c,u),f})),AY=(e,t,o,r=!1)=>mM(e,t,o.startContainer,o.startOffset,o.endContainer,o.endOffset,r),s2=(e,t,o)=>{if(t&&e.isEmpty(t)&&!o(t)){const r=t.parentNode;e.remove(t,Ye(t.firstChild)&&Pg(t.firstChild.data)),s2(e,r,o)}},kk=(e,t,o,r=!0)=>{const c=t.startContainer.parentNode,u=t.endContainer.parentNode;t.deleteContents(),r&&!o(t.startContainer)&&(Ye(t.startContainer)&&t.startContainer.data.length===0&&e.remove(t.startContainer),Ye(t.endContainer)&&t.endContainer.data.length===0&&e.remove(t.endContainer),s2(e,c,o),c!==u&&s2(e,u,o))},r2=(e,t)=>B.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),gM=(e,t,o)=>{const r=e.dynamicPatternsLookup({text:o,block:t});return{...e,blockPatterns:p_(r).concat(e.blockPatterns),inlinePatterns:Gp(r).concat(e.inlinePatterns)}},hM=(e,t,o,r)=>{const c=e.createRng();return c.setStart(t,0),c.setEnd(o,r),c.toString()},tF=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),_k=(e,t)=>{const o=e.createRng();return o.setStartAfter(t.start),o.setEndBefore(t.end),o},nF=(e,t,o)=>{const r=fM(e.getRoot(),o).getOrDie("Unable to resolve path range"),c=r.startContainer,u=r.endContainer,f=r.endOffset===0?u:u.splitText(r.endOffset),b=r.startOffset===0?c:c.splitText(r.startOffset),v=b.parentNode,w=f.parentNode;return{prefix:t,end:w.insertBefore(tF(e,t+"-end"),f),start:v.insertBefore(tF(e,t+"-start"),b)}},oF=(e,t,o)=>{s2(e,e.get(t.prefix+"-end"),o),s2(e,e.get(t.prefix+"-start"),o)},Sw=e=>e.start.length===0,OY=e=>(t,o)=>{const c=t.data.substring(0,o),u=c.lastIndexOf(e.charAt(e.length-1)),f=c.lastIndexOf(e);return f!==-1?f+e.length:u!==-1?u+1:-1},sF=(e,t,o,r)=>{const c=t.start;return O5(e,r.container,r.offset,OY(c),o).bind(f=>{var w;const b=((w=o.textContent)==null?void 0:w.indexOf(c))??-1;if(b!==-1&&f.offset>=b+c.length){const _=e.createRng();return _.setStart(f.container,f.offset-c.length),_.setEnd(f.container,f.offset),B.some(_)}else{const _=f.offset-c.length;return _5(f.container,_,o).map(D=>{const M=e.createRng();return M.setStart(D.container,D.offset),M.setEnd(f.container,f.offset),M}).filter(D=>D.toString()===c).orThunk(()=>sF(e,t,o,Wd(f.container,0)))}})},DY=(e,t,o,r,c,u=!1)=>{if(t.start.length===0&&!u){const f=e.createRng();return f.setStart(o,r),f.setEnd(o,r),B.some(f)}return T5(o,r,c).bind(f=>sF(e,t,c,f).bind(v=>{var w;if(u){if(v.endContainer===f.container&&v.endOffset===f.offset)return B.none();if(f.offset===0&&((w=v.endContainer.textContent)==null?void 0:w.length)===v.endOffset)return B.none()}return B.some(v)}))},rF=(e,t,o,r)=>{const c=e.dom,u=c.getRoot(),f=o.pattern,b=o.position.container,v=o.position.offset;return _5(b,v-o.pattern.end.length,t).bind(w=>{const _=mM(c,u,w.container,w.offset,b,v,r);if(Sw(f))return B.some({matches:[{pattern:f,startRng:_,endRng:_}],position:w});{const D=Ak(e,o.remainingPatterns,w.container,w.offset,t,r),M=D.getOr({matches:[],position:w}),L=M.position;return DY(c,f,L.container,L.offset,t,D.isNone()).map(V=>{const q=AY(c,u,V,r);return{matches:M.matches.concat([{pattern:f,startRng:q,endRng:_}]),position:Wd(V.startContainer,V.startOffset)}})}})},Ak=(e,t,o,r,c,u)=>{const f=e.dom;return T5(o,r,f.getRoot()).bind(b=>{const v=hM(f,c,o,r);for(let w=0;w<t.length;w++){const _=t[w];if(!ga(v,_.end))continue;const D=t.slice();D.splice(w,1);const M=rF(e,c,{pattern:_,remainingPatterns:D,position:b},u);if(M.isNone()&&r>0)return Ak(e,t,o,r-1,c,u);if(M.isSome())return M}return B.none()})},aF=(e,t,o)=>{e.selection.setRng(o),t.type==="inline-format"?ne(t.format,r=>{e.formatter.apply(r)}):e.execCommand(t.cmd,!1,t.value)},RY=(e,t,o,r)=>{const c=_k(e.dom,o);kk(e.dom,c,r),aF(e,t,c)},MY=(e,t,o,r,c)=>{const u=e.dom,f=_k(u,r),b=_k(u,o);kk(u,b,c),kk(u,f,c);const v={prefix:o.prefix,start:o.end,end:r.start},w=_k(u,v);aF(e,t,w)},NY=(e,t)=>{const o=Xr("mce_textpattern"),r=xn(t,(c,u)=>{const f=nF(e,o+`_end${c.length}`,u.endRng);return c.concat([{...u,endMarker:f}])},[]);return xn(r,(c,u)=>{const f=r.length-c.length-1,b=Sw(u.pattern)?u.endMarker:nF(e,o+`_start${f}`,u.startRng);return c.concat([{...u,startMarker:b}])},[])},BY=e=>ou(e,(t,o)=>o.end.length-t.end.length),PY=(e,t)=>{const o=ul(e,r=>Ge(t,c=>r.pattern.start===c.pattern.start&&r.pattern.end===c.pattern.end));return e.length===t.length?o?e:t:e.length>t.length?e:t},cF=(e,t,o,r,c,u)=>{const f=Ak(e,c.inlinePatterns,o,r,t,u).fold(()=>[],v=>v.matches),b=Ak(e,BY(c.inlinePatterns),o,r,t,u).fold(()=>[],v=>v.matches);return PY(f,b)},pM=(e,t)=>{if(t.length===0)return;const o=e.dom,r=e.selection.getBookmark(),c=NY(o,t);ne(c,u=>{const f=o.getParent(u.startMarker.start,o.isBlock),b=v=>v===f;Sw(u.pattern)?RY(e,u.pattern,u.endMarker,b):MY(e,u.pattern,u.startMarker,u.endMarker,b),oF(o,u.endMarker,b),oF(o,u.startMarker,b)}),e.selection.moveToBookmark(r)},iF=(e,t,o)=>k5(t,0,t).map(r=>{const c=r.container;return A5(c,o.start.length,t).each(u=>{const f=e.createRng();f.setStart(c,0),f.setEnd(u.container,u.offset),kk(e,f,b=>b===t)}),c}),Ok=e=>(t,o)=>{const r=t.dom,c=o.pattern,u=fM(r.getRoot(),o.range).getOrDie("Unable to resolve path range"),f=(b,v)=>{const w=v.get(b);return Yt(w)&&Vs(w).exists(_=>Sn(_,"block"))};return r2(t,u).each(b=>{c.type==="block-format"?f(c.format,t.formatter)&&t.undoManager.transact(()=>{e(t.dom,b,c),t.formatter.apply(c.format)}):c.type==="block-command"&&t.undoManager.transact(()=>{e(t.dom,b,c),t.execCommand(c.cmd,!1,c.value)})}),!0},$Y=e=>ou(e,(t,o)=>o.start.length-t.start.length),lF=e=>(t,o)=>{const r=$Y(t),c=o.replace(Zs," ");return To(r,u=>e(u,o,c))},uF=(e,t)=>(o,r,c,u,f=r.textContent??"")=>{const b=o.dom,v=Ys(o);return b.is(r,v)?e(c.blockPatterns,f).map(w=>t&&Ke.trim(f).length===w.start.length?[]:[{pattern:w,range:mM(b,b.getRoot(),r,0,r,0,u)}]).getOr([]):[]},IY=e=>/^\s[^\s]/.test(e),LY=Ok((e,t,o)=>{iF(e,t,o).each(r=>{const c=Y.fromDom(r),u=ya(c);IY(u)&&Y2(c,u.slice(1))})}),Dk=lF((e,t,o)=>t.indexOf(e.start)===0||o.indexOf(e.start)===0),FY=uF(Dk,!0),HY=(e,t)=>{const o=e.selection.getRng();return r2(e,o).map(r=>{const c=Math.max(0,o.startOffset),u=gM(t,r,r.textContent??""),f=cF(e,r,o.startContainer,c,u,!0),b=FY(e,r,u,!0);return{inlineMatches:f,blockMatches:b}}).filter(({inlineMatches:r,blockMatches:c})=>c.length>0||r.length>0)},zY=(e,t)=>{if(t.length===0)return;const o=e.selection.getBookmark();ne(t,r=>LY(e,r)),e.selection.moveToBookmark(o)},VY=Ok(iF),UY=lF((e,t,o)=>t===e.start||o===e.start),ZY=uF(UY,!1),WY=(e,t)=>{const o=e.selection.getRng();return r2(e,o).map(r=>{const c=Math.max(0,o.startOffset),u=hM(e.dom,r,o.startContainer,c),f=gM(t,r,u);return ZY(e,r,f,!1,u)}).filter(r=>r.length>0)},jY=(e,t)=>{ne(t,o=>VY(e,o))},GY=(e,t)=>HY(e,t).fold($e,({inlineMatches:o,blockMatches:r})=>(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{ub(e),pM(e,o),zY(e,r);const c=e.selection.getRng(),u=T5(c.startContainer,c.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),u.each(f=>{const b=f.container;b.data.charAt(f.offset-1)===of&&(b.deleteData(f.offset-1,1),s2(e.dom,b.parentNode,v=>v===e.dom.getRoot()))})}),!0)),dF=(e,t)=>{const o=e.selection.getRng();r2(e,o).map(r=>{const c=Math.max(0,o.startOffset-1),u=hM(e.dom,r,o.startContainer,c),f=gM(t,r,u),b=cF(e,r,o.startContainer,c,f,!1);b.length>0&&e.undoManager.transact(()=>{pM(e,b)})})},qY=(e,t)=>WY(e,t).fold($e,o=>(e.undoManager.transact(()=>{jY(e,o)}),!0)),bM=(e,t,o)=>{for(let r=0;r<e.length;r++)if(o(e[r],t))return!0;return!1},KY=(e,t)=>bM(e,t,(o,r)=>o===r.keyCode&&!vt.modifierPressed(r)),YY=(e,t)=>bM(e,t,(o,r)=>o.charCodeAt(0)===r.charCode),mF=e=>{const t=[",",".",";",":","!","?"],o=[32],r=()=>b_(kE(e).filter(f=>f.type==="inline-command"||f.type==="block-command"?e.queryCommandSupported(f.cmd):!0),Lt(e)),c=()=>ph(e);e.on("keydown",f=>{if(f.keyCode===13&&!vt.modifierPressed(f)&&e.selection.isCollapsed()&&e.selection.isEditable()){const b=qp(r(),"enter");(b.inlinePatterns.length>0||b.blockPatterns.length>0||c())&&GY(e,b)&&f.preventDefault()}},!0),e.on("keydown",f=>{if(f.keyCode===32&&e.selection.isCollapsed()&&e.selection.isEditable()){const b=qp(r(),"space");(b.blockPatterns.length>0||c())&&qY(e,b)&&f.preventDefault()}},!0);const u=()=>{if(e.selection.isCollapsed()&&e.selection.isEditable()){const f=qp(r(),"space");(f.inlinePatterns.length>0||c())&&dF(e,f)}};e.on("keyup",f=>{KY(o,f)&&u()}),e.on("keypress",f=>{YY(t,f)&&Ru.setEditorTimeout(e,u)})},ww=e=>{mF(e)},XY=e=>{const t=Ke.each,o=vt.BACKSPACE,r=vt.DELETE,c=e.dom,u=e.selection,f=e.parser,b=Xn.browser,v=b.isFirefox(),w=b.isChromium()||b.isSafari(),_=Xn.deviceType.isiPhone()||Xn.deviceType.isiPad(),D=Xn.os.isMacOS()||Xn.os.isiOS(),M=(Be,st)=>{try{e.getDoc().execCommand(Be,!1,String(st))}catch{}},L=Be=>Be.isDefaultPrevented(),W=()=>{const Be=Tt=>{const $n=c.create("body"),yn=Tt.cloneContents();return $n.appendChild(yn),u.serializer.serialize($n,{format:"html"})},st=Tt=>{const $n=Be(Tt),yn=c.createRng();yn.selectNode(e.getBody());const Oo=Be(yn);return $n===Oo};e.on("keydown",Tt=>{const $n=Tt.keyCode;if(!L(Tt)&&($n===r||$n===o)&&e.selection.isEditable()){const yn=e.selection.isCollapsed(),Oo=e.getBody();if(yn&&!Vt(e.schema,Oo)||!yn&&!st(e.selection.getRng()))return;Tt.preventDefault(),e.setContent(""),Oo.firstChild&&c.isBlock(Oo.firstChild)?e.selection.setCursorLocation(Oo.firstChild,0):e.selection.setCursorLocation(Oo,0),e.nodeChanged()}})},V=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},q=()=>{e.inline||c.bind(e.getDoc(),"mousedown mouseup",Be=>{var Tt;let st;if(Be.target===e.getDoc().documentElement)if(st=u.getRng(),((Tt=e.getDoc().getSelection())==null?void 0:Tt.anchorNode)!==null&&e.getBody().focus(),Be.type==="mousedown"){if(Zc(st.startContainer))return;u.placeCaretAt(Be.clientX,Be.clientY)}else u.setRng(st)})},ae=()=>{e.on("keydown",Be=>{if(!L(Be)&&Be.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&u.getRng().startOffset===0){const st=u.getNode(),Tt=st.previousSibling;if(st.nodeName==="HR"){c.remove(st),Be.preventDefault();return}Tt&&Tt.nodeName&&Tt.nodeName.toLowerCase()==="hr"&&(c.remove(Tt),Be.preventDefault())}}})},ce=()=>{Range.prototype.getClientRects||e.on("mousedown",Be=>{if(!L(Be)&&Be.target.nodeName==="HTML"){const st=e.getBody();st.blur(),Ru.setEditorTimeout(e,()=>{st.focus()})}})},me=()=>{const Be=Wb(e);e.on("click",st=>{const Tt=st.target;/^(IMG|HR)$/.test(Tt.nodeName)&&c.isEditable(Tt)&&(st.preventDefault(),e.selection.select(Tt),e.nodeChanged()),Tt.nodeName==="A"&&c.hasClass(Tt,Be)&&Tt.childNodes.length===0&&c.isEditable(Tt.parentNode)&&(st.preventDefault(),u.select(Tt))})},_e=()=>{const Be=st=>st.nodeName==="IMG"&&e.dom.isEditable(st);e.on("mousedown",st=>{tr(B.from(st.clientX),B.from(st.clientY),(Tt,$n)=>{var Jl;const yn=e.getDoc().caretPositionFromPoint(Tt,$n),Oo=((Jl=yn==null?void 0:yn.offsetNode)==null?void 0:Jl.childNodes[yn.offset-(yn.offset>0?1:0)])||(yn==null?void 0:yn.offsetNode);if(de(Oo)&&Be(Oo)){const Dc=Oo.getBoundingClientRect();st.preventDefault(),e.hasFocus()||e.focus(),e.selection.select(Oo),st.clientX<Dc.left||st.clientY<Dc.top?e.selection.collapse(!0):(st.clientX>Dc.right||st.clientY>Dc.bottom)&&e.selection.collapse(!1)}})})},Ie=()=>{const Be=()=>{const Tt=c.getAttribs(u.getStart().cloneNode(!1));return()=>{const $n=u.getStart();$n!==e.getBody()&&(c.setAttrib($n,"style",null),t(Tt,yn=>{$n.setAttributeNode(yn.cloneNode(!0))}))}},st=()=>!u.isCollapsed()&&c.getParent(u.getStart(),c.isBlock)!==c.getParent(u.getEnd(),c.isBlock);e.on("keypress",Tt=>{let $n;return!L(Tt)&&(Tt.keyCode===8||Tt.keyCode===46)&&st()?($n=Be(),e.getDoc().execCommand("delete",!1),$n(),Tt.preventDefault(),!1):!0}),c.bind(e.getDoc(),"cut",Tt=>{if(!L(Tt)&&st()){const $n=Be();Ru.setEditorTimeout(e,()=>{$n()})}})},ut=()=>{e.on("keydown",Be=>{if(!L(Be)&&Be.keyCode===o&&u.isCollapsed()&&u.getRng().startOffset===0){const st=u.getNode().previousSibling;if(st&&st.nodeName&&st.nodeName.toLowerCase()==="table")return Be.preventDefault(),!1}return!0})},$t=()=>{e.on("keydown",Be=>{if(L(Be)||Be.keyCode!==vt.BACKSPACE)return;let st=u.getRng();const Tt=st.startContainer,$n=st.startOffset,yn=c.getRoot();let Oo=Tt;if(!(!st.collapsed||$n!==0)){for(;Oo.parentNode&&Oo.parentNode.firstChild===Oo&&Oo.parentNode!==yn;)Oo=Oo.parentNode;Oo.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,Oo),st=c.createRng(),st.setStart(Tt,0),st.setEnd(Tt,0),u.setRng(st))}})},Ae=()=>{const Be=iu("figcaption");e.on("keydown",st=>{if(st.keyCode===vt.LEFT||st.keyCode===vt.RIGHT){const Tt=Y.fromDom(e.selection.getNode());Be(Tt)&&e.selection.isCollapsed()&&Lc(Tt).bind($n=>{var yn;return e.selection.getRng().startOffset===0&&st.keyCode===vt.LEFT?ci($n):e.selection.getRng().endOffset===((yn=Tt.dom.textContent)==null?void 0:yn.length)&&st.keyCode===vt.RIGHT?lu($n):B.none()}).each($n=>{e.selection.setCursorLocation($n.dom,0)})}})},ve=()=>{const Be=()=>{M("StyleWithCSS",!1),M("enableInlineTableEditing",!1),yE(e)||M("enableObjectResizing",!1)};t1(e)||e.on("BeforeExecCommand mousedown",Be)},Oe=()=>{const Be=()=>{t(c.select("a:not([data-mce-block])"),st=>{var yn;let Tt=st.parentNode;const $n=c.getRoot();if((Tt==null?void 0:Tt.lastChild)===st){for(;Tt&&!c.isBlock(Tt);){if(((yn=Tt.parentNode)==null?void 0:yn.lastChild)!==Tt||Tt===$n)return;Tt=Tt.parentNode}c.add(Tt,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",st=>{(st.type==="setcontent"||st.command==="mceInsertLink")&&Be()})},dt=()=>{e.on("init",()=>{M("DefaultParagraphSeparator",Ys(e))})},en=Be=>{const st=Be.getBody(),Tt=Be.selection.getRng();return Tt.startContainer===Tt.endContainer&&Tt.startContainer===st&&Tt.startOffset===0&&Tt.endOffset===st.childNodes.length},tn=()=>{e.on("keyup focusin mouseup",Be=>{!vt.modifierPressed(Be)&&!en(e)&&u.normalize()},!0)},Wn=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},xo=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},Ko=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",Be=>{let st;Be.target.nodeName==="HTML"&&(st=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(st),e.selection.normalize(),e.nodeChanged())}))},cs=()=>{D&&e.on("keydown",Be=>{vt.metaKeyPressed(Be)&&!Be.shiftKey&&(Be.keyCode===37||Be.keyCode===39)&&(Be.preventDefault(),e.selection.getSel().modify("move",Be.keyCode===37?"backward":"forward","lineboundary"))})},Gr=()=>{e.on("click",Be=>{let st=Be.target;do if(st.tagName==="A"){Be.preventDefault();return}while(st=st.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},xi=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",Be=>{Be.preventDefault()})})},ft=()=>{f.addNodeFilter("br",Be=>{let st=Be.length;for(;st--;)Be[st].attr("class")==="Apple-interchange-newline"&&Be[st].remove()})},Zt=yt,co=()=>{if(!v||e.removed)return!1;const Be=e.selection.getSel();return!Be||!Be.rangeCount||Be.rangeCount===0},no=()=>{w&&(q(),me(),xi(),V(),_&&(xo(),Ko(),Gr())),v&&(ce(),ve(),Wn(),cs())},ua=()=>{$t(),W(),Xn.windowsPhone||tn(),w&&(q(),me(),dt(),xi(),ut(),ft(),_?(xo(),Ko(),Gr()):V()),v&&(Ae(),_e(),ae(),ce(),Ie(),ve(),Oe(),Wn(),cs(),ut())};return Ld(e)?no():ua(),{refreshContentEditable:Zt,isHidden:co}};class vM extends Error{constructor(o,r){super(o);Ze(this,"url");this.url=r}}const yM={},JY=(e,t,o)=>new Promise((r,c)=>{const u=Y.fromTag("script");Ir(u,{type:"text/javascript",src:e,...o});const f=()=>{Zo(u)};G2(u,"load",()=>{f(),r()}),G2(u,"error",()=>{f(),c(new Error(`Failed to load script url: ${e}`))}),Qn(Hw(t),u)}),fF=async(e,t)=>{const o=ro.ScriptLoader.getScriptAttributes(e);return await JY(e,t,o).catch(()=>Promise.reject(new vM(`Failed to load component url: ${e}`,e))),e},QY=e=>dl(e,(t,o)=>Jo(yM,t).getOrThunk(()=>{if(Le(window.customElements.get(o))){const r=fF(t,E0());return yM[t]=r,r}else return Promise.resolve(t)}).catch(r=>(delete yM[t],Promise.reject(r)))),gF=(e,t)=>{const o=_i(ei(e));return Ue(o,r=>fF(r,Y.fromDom(t)))},eX=e=>{const t=e.schema.getComponentUrls();return e.inline?QY(t):gF(t,e.getDoc())},hF=async e=>{const t=eX(e),o=ge(await Promise.allSettled(t),r=>r.status==="rejected");o.length>0&&ne(o,r=>{if(r.reason instanceof vM){const{url:c}=r.reason;pZ(e,c)}})},tX=e=>{hF(e)},CM=Un.DOM,nX=(e,t)=>{const o=Y.fromDom(e.getBody()),r=W2(Br(o)),c=Y.fromTag("style");hs(c,"type","text/css"),Qn(c,Y.fromText(t)),Qn(r,c),e.on("remove",()=>{Zo(c)})},oX=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,SM=e=>nf(e,t=>Je(t)===!1),pF=e=>{const t=e.options.get,o=e.editorUpload.blobCache;return SM({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_html_in_comments:t("allow_html_in_comments"),allow_mathml_annotation_encodings:t("allow_mathml_annotation_encodings"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_unsafe_embeds:t("convert_unsafe_embeds"),convert_fonts_to_spans:t("convert_fonts_to_spans"),extended_mathml_attributes:t("extended_mathml_attributes"),extended_mathml_elements:t("extended_mathml_elements"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),inline_styles:t("inline_styles"),root_name:oX(e),sandbox_iframes:t("sandbox_iframes"),sandbox_iframes_exclusions:Td(e),sanitize:t("xss_sanitization"),validate:!0,blob_cache:o,document:e.getDoc()})},bF=e=>{const t=e.options.get;return SM({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html"),padd_empty_block_inline_children:t("format_empty_lines")})},sX=e=>{const t=e.options.get;return{...pF(e),...bF(e),...SM({remove_trailing_brs:t("remove_trailing_brs"),pad_empty_with_br:t("pad_empty_with_br"),url_converter:t("url_converter"),url_converter_scope:t("url_converter_scope"),element_format:t("element_format"),entities:t("entities"),entity_encoding:t("entity_encoding"),indent:t("indent"),indent_after:t("indent_after"),indent_before:t("indent_before")})}},rX=e=>{const t=Sv(pF(e),e.schema);return t.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const c=e.dom,u="data-mce-"+r;let f=o.length;for(;f--;){const b=o[f];let v=b.attr(r);if(v&&!b.attr(u)){if(v.indexOf("data:")===0||v.indexOf("blob:")===0)continue;r==="style"?(v=c.serializeStyle(c.parseStyle(v),b.name),v.length||(v=null),b.attr(u,v),b.attr(r,v)):r==="tabindex"?(b.attr(u,v),b.attr(r,null)):b.attr(u,e.convertURL(v,r,b.name))}}}),t.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const c=o[r],u=c.attr("type")||"no/type";u.indexOf("mce-")!==0&&c.attr("type","mce-"+u)}}),SC(e)&&t.addNodeFilter("#cdata",o=>{let r=o.length;for(;r--;){const c=o[r];c.type=8,c.name="#comment",c.value="[CDATA["+e.dom.encode(c.value??"")+"]]"}}),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const c=e.schema.getNonEmptyElements();for(;r--;){const u=o[r];u.isEmpty(c)&&u.getAll("br").length===0&&u.append(new Zr("br",1))}}),t},vF=e=>{const t=B_(e);t&&Ru.setEditorTimeout(e,()=>{let o;t===!0?o=e:o=e.editorManager.get(t),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},wM=e=>{const t=e.dom.getRoot();!e.inline&&(!zC(e)||e.selection.getStart(!0)===t)&&y(t).each(o=>{const r=o.getNode(),c=ja(r)?y(r).getOr(o):o;e.selection.setRng(c.toRange())})},yF=e=>{e.bindPendingEventDelegates(),e.initialized=!0,Jx(e),e.focus(!0),wM(e),e.nodeChanged({initial:!0});const t=N_(e);X(t)&&t.call(e,e),vF(e),Yf(e)&&$$(e,!0)},Rk=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,aX=(e,t,o)=>{const{pass:r,fail:c}=De(t,b=>tinymce.Resource.has(Bh(b))),f=[...r.map(b=>{const v=tinymce.Resource.get(Bh(b));return U(v)?Promise.resolve(Rk(e).loadRawCss(b,v)):Promise.resolve()}),Rk(e).loadAll(c)];return e.inline?f:f.concat([e.ui.styleSheetLoader.loadAll(o)])},CF=e=>{const t=Rk(e),o=mC(e),r=e.contentCSS,c=()=>{t.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(o)},u=()=>{e.removed?c():e.on("remove",c)};if(e.contentStyles.length>0){let v="";Ke.each(e.contentStyles,w=>{v+=w+`\r
`}),e.dom.addStyle(v)}const f=Promise.all(aX(e,r,o)).then(u).catch(u),b=Mf(e);return b&&nX(e,b),f},cX=e=>{const t=e.getDoc(),o=e.getBody();Xx(e),EE(e)||(t.body.spellcheck=!1,CM.setAttrib(o,"spellcheck","false")),e.quirks=XY(e),eo(e);const r=E_(e);r!==void 0&&(o.dir=r);const c=P_(e);c&&e.on("BeforeSetContent",u=>{Ke.each(c,f=>{u.content=u.content.replace(f,b=>"<!--mce:protected "+escape(b)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",u=>{e.composing=u.type==="compositionstart"})},SF=e=>{Ld(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},Mk=e=>{e.removed!==!0&&(SF(e),yF(e))},iX=e=>{let t=!1;const o=setTimeout(()=>{t||e.setProgressState(!0)},500);return()=>{clearTimeout(o),t=!0,e.setProgressState(!1)}},wF=e=>{const t=e.getElement();let o=e.getDoc();e.inline&&(CM.addClass(t,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=t,e.contentAreaContainer=t);const r=e.getBody();r.disabled=!0,e.readonly=t1(e),e._editableRoot=Zb(e),!Xi(e)&&e.hasEditableRoot()&&(e.inline&&CM.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=N1(e),e.schema=Hr(bF(e)),e.dom=Un(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:pE(e),referrerPolicy:Fb(e),crossOrigin:Rf(e),onSetAttrib:f=>{e.dispatch("SetAttrib",f)}}),e.parser=rX(e),e.serializer=CD(sX(e),e),e.selection=vD(e.dom,e.getWin(),e.serializer,e),e.annotator=D6(e),e.formatter=V$(e),e.undoManager=HZ(e),e._nodeChangeDispatcher=new hK(e),e._selectionOverrides=Tk(e),No(e),iG(e),IL(e),mG(e),Ld(e)||(QK(e),ww(e));const c=cK(e);o5(e,c),Vu(e),ZZ(e),jK(e,c);const u=WU(e);cX(e),tX(e),u.fold(()=>{const f=iX(e);CF(e).then(()=>{Mk(e),f()})},f=>{e.setProgressState(!0),CF(e).then(()=>{f().then(b=>{e.setProgressState(!1),Mk(e),aT(e)},b=>{e.notificationManager.open({type:"error",text:String(b)}),Mk(e),aT(e)})})})},xw=Un.DOM,Nk=(e,t,o,r)=>{const c=Y.fromTag("iframe");return r.each(u=>hs(c,"tabindex",u)),Ir(c,o),Ir(c,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",...Xn.browser.isFirefox()?{title:t}:{}}),Hc(c,"tox-edit-area__iframe"),c},xF=e=>{let t=cC(e)+"<html><head>";iC(e)!==e.editorManager.documentBaseURL&&(t+='<base href="'+e.documentBaseURI.getURI()+'" />'),t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=cE(e),r=iE(e),c=e.translate(jb(e)),u=Xn.browser.isFirefox()?"":`aria-label="${c}"`;return lE(e)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+lE(e)+'" />'),t+=`</head><body id="${o}" class="mce-content-body ${r}" data-id="${e.id}" ${u}><br></body></html>`,t},EF=(e,t)=>{const o=jb(e),r=e.translate(o),c=$i(Y.fromDom(e.getElement()),"tabindex").bind(k2),u=Nk(e.id,r,aE(e),c).dom;u.onload=()=>{u.onload=null,e.dispatch("load")},e.contentAreaContainer=t.iframeContainer,e.iframeElement=u,e.iframeHTML=xF(e),xw.add(t.iframeContainer,u)},TF=e=>{const t=e.iframeElement,o=()=>{e.contentDocument=t.contentDocument,wF(e)};if(a1(e)||Xn.browser.isFirefox()){const r=e.getDoc();r.open(),r.write(e.iframeHTML),r.close(),o()}else{const r=G2(Y.fromDom(t),"load",()=>{r.unbind(),o()});t.srcdoc=e.iframeHTML}},lX=(e,t)=>{EF(e,t),t.editorContainer&&(t.editorContainer.style.display=e.orgDisplay,e.hidden=xw.isHidden(t.editorContainer)),e.getElement().style.display="none",xw.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,TF(e)},kF=Un.DOM,uX=(e,t,o)=>{const r=Nh.get(o),c=Nh.urls[o]||e.editorManager.documentBaseURL.replace(/\/$/,"");if(o=Ke.trim(o),r&&Ke.inArray(t,o)===-1){if(e.plugins[o])return;try{const u=r(e,c)||{};e.plugins[o]=u,X(u.init)&&(u.init(e,c),t.push(o))}catch(u){bZ(e,o,u)}}},dX=e=>{const t=o=>{o.keyCode===vt.ESC&&!o.defaultPrevented&&rE(e).isDefaultPrevented()&&o.preventDefault()};document.addEventListener("keyup",t),e.inline||e.on("keyup",t),e.on("remove",()=>{document.removeEventListener("keyup",t),e.inline||e.off("keyup",t)})},Km=e=>e.replace(/^\-/,""),_F=e=>{const t=[];ne(n1(e),o=>{uX(e,t,Km(o))})},mX=e=>{const t=Ke.trim(Qp(e)),o=e.ui.registry.getAll().icons,r={...lT.get("default").icons,...lT.get(t).icons};Bn(r,(c,u)=>{Sn(o,u)||e.ui.registry.addIcon(u,c)})},AF=e=>{const t=Eu(e);if(U(t)){const o=_1.get(t);e.theme=o(e,_1.urls[t])||{},X(e.theme.init)&&e.theme.init(e,_1.urls[t]||e.editorManager.documentBaseURL.replace(/\/$/,""))}else e.theme={}},fX=e=>{const t=Vb(e),o=Dv.get(t);e.model=o(e,Dv.urls[t])},gX=e=>{ID.init(e)},xM=e=>{const t=e.theme.renderUI;return t?t():DF(e)},Bk=e=>{const t=e.getElement(),r=Eu(e)(e,t);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:t.offsetHeight,r},OF=(e,t)=>({editorContainer:e,iframeContainer:t,api:{}}),hX=e=>{const t=kF.create("div");return kF.insertAfter(t,e),OF(t,t)},DF=e=>{const t=e.getElement();return e.inline?OF(null):hX(t)},RF=e=>{const t=e.getElement();return e.orgDisplay=t.style.display,U(Eu(e))?xM(e):X(Eu(e))?Bk(e):DF(e)},pX=(e,t)=>{const o={show:B.from(t.show).getOr(yt),hide:B.from(t.hide).getOr(yt),isEnabled:B.from(t.isEnabled).getOr(gt),setEnabled:r=>{r&&(e.mode.get()==="readonly"||Yf(e))||B.from(t.setEnabled).each(u=>u(r))}};e.ui={...e.ui,...o}},MF=async e=>{e.dispatch("ScriptsLoaded"),mX(e),dX(e),AF(e),fX(e),gX(e),_F(e);const t=await RF(e);pX(e,B.from(t.api).getOr({})),e.editorContainer=t.editorContainer,AZ(e),e.inline?wF(e):lX(e,{editorContainer:t.editorContainer,iframeContainer:t.iframeContainer})},G1=Un.DOM,NF=e=>e.charAt(0)==="-",bX=(e,t)=>{const o=bE(t),r=vE(t);if(!xc.hasCode(o)&&o!=="en"){const c=xs(r)?r:`${t.editorManager.baseURL}/langs/${o}.js`;e.add(c).catch(()=>{O1(t,c,o)})}},vX=(e,t)=>{const o=Eu(e);if(U(o)&&!NF(o)&&!Sn(_1.urls,o)){const r=CE(e),c=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${t}.js`;_1.load(o,c).catch(()=>{T$(e,c,o)})}},yX=(e,t)=>{const o=Vb(e);if(o!=="plugin"&&!Sn(Dv.urls,o)){const r=__(e),c=U(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${t}.js`;Dv.load(o,c).catch(()=>{hZ(e,c,o)})}},BF=(e,t)=>{ID.load(e,t)},Pk=e=>B.from(uC(e)).filter(xs).map(t=>({url:t,name:B.none()})),$k=(e,t,o)=>B.from(t).filter(r=>xs(r)&&!lT.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${o}.js`,name:B.some(r)})),CX=(e,t,o)=>{const r=$k(t,"default",o),c=Pk(t).orThunk(()=>$k(t,Qp(t),""));ne(ti([r,c]),u=>{e.add(u.url).catch(()=>{gZ(t,u.url,u.name.getOrUndefined())})})},PF=(e,t)=>{const o=(r,c)=>{r!=="licensekeymanager"&&Nh.load(r,c).catch(()=>{E$(e,c,r)})};Bn(bC(e),(r,c)=>{o(c,r),e.options.set("plugins",n1(e).concat(c))}),ne(n1(e),r=>{r=Ke.trim(r),r&&!Nh.urls[r]&&!NF(r)&&o(r,`plugins/${r}/plugin${t}.js`)})},$F=e=>{const t=Eu(e);return!U(t)||de(_1.get(t))},SX=e=>{const t=Vb(e);return de(Dv.get(t))},IF=(e,t)=>{const o=ro.ScriptLoader,r=()=>{!e.removed&&$F(e)&&SX(e)&&MF(e)};vX(e,t),yX(e,t),BF(e,t),bX(o,e),CX(o,e,t),PF(e,t),o.loadQueue().then(r,r)},wX=(e,t)=>gy.forElement(e,{contentCssCors:pC(t),referrerPolicy:Fb(t)}),xX=e=>{const t=e.id;xc.setCode(bE(e));const o=()=>{G1.unbind(window,"ready",o),e.render()};if(!Xg.Event.domLoaded){G1.bind(window,"ready",o);return}if(!e.getElement())return;const r=Y.fromDom(e.getElement()),c=Nn(r);e.on("remove",()=>{Vn(r.dom.attributes,f=>sr(r,f.name)),Ir(r,c)}),e.ui.styleSheetLoader=wX(r,e),e1(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const u=e.getElement().form||G1.getParent(t,"form");u&&(e.formElement=u,hC(e)&&!mi(e.getElement())&&(G1.insertAfter(G1.create("input",{type:"hidden",name:t}),t),e.hasHiddenInput=!0),e.formEventDelegate=f=>{e.dispatch(f.type,f)},G1.bind(u,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),D_(e)&&!u.submit.nodeType&&!u.submit.length&&!u._mceOldSubmit&&(u._mceOldSubmit=u.submit,u.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),u._mceOldSubmit(u)))),e.windowManager=x$(e),e.notificationManager=BS(e),AE(e)&&e.on("GetContent",f=>{f.save&&(f.content=G1.encode(f.content))}),R_(e)&&e.on("submit",()=>{e.initialized&&e.save()}),Ub(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),IF(e,e.suffix)},LF=["#E41B60","#AD1457","#1939EC","#001CB5","#648000","#465B00","#006CE7","#0054B4","#00838F","#006064","#00866F","#004D40","#51742F","#385021","#CF4900","#A84600","#CC0000","#6A1B9A","#9C27B0","#6A00AB","#3041BA","#0A1877","#774433","#452B24","#607D8B","#455A64"],EX=e=>{var t;return Intl.Segmenter?`${(t=new Intl.Segmenter().segment(e)[Symbol.iterator]().next().value)==null?void 0:t.segment}`:e.trim()[0]},FF=(e,t)=>{let o=5381;for(let r=0;r<e.length;r++)o=(o<<5)+o+e.charCodeAt(r);return(o>>>0)%(t+1)},HF=e=>{const t=FF(e??"",LF.length-1);return LF[t]},zF=(e,t,o)=>{const r=o/2;return`<svg height="${o}" width="${o}" xmlns="http://www.w3.org/2000/svg"><circle cx="${r}" cy="${r}" r="${r}" fill="${t}"/><text x="50%" y="50%" text-anchor="middle" dominant-baseline="central" fill="#FFF" font-family="sans-serif" font-size="${r}">`+e+"</text></svg>"},VF=(e,t,o)=>"data:image/svg+xml,"+encodeURIComponent(zF(e,t,o)),Ik=(e,t={size:36})=>VF(EX(e.name),HF(e.id),t.size),UF=$a([wd("id"),_m("name"),_m("avatar"),Zn("custom")]),EM=e=>{const t={};return Bn(e,(o,r)=>{o.each(c=>{t[r]=c})}),t},ZF=e=>{if(!Array.isArray(e))throw new Error("fetch_users must return an array");const t=Ue(e,c=>mh("Invalid user object",UF,c)),{errors:o,values:r}=dc(t);if(o.length>0){const c=Ue(o,(u,f)=>`User at index ${f}: ${wu(u)}`);console.warn(`User validation errors:
`+c.join(`
`))}return Ue(r,c=>{const{id:u,name:f,avatar:b,...v}=c;return{id:u,name:f.getOr(u),avatar:b.getOr(Ik({id:u,name:f.getOr(u)})),...EM(v)}})},WF=e=>{const t=new Map,o=new Map,r=w=>B.from(t.get(w)),c=(w,_)=>{t.set(_,w)},u=(w,_)=>B.from(o.get(w)).each(({reject:D})=>{D(_),o.delete(w)}),f=(w,_)=>B.from(o.get(w)).each(({resolve:D})=>{D(_),o.delete(w)}),b=w=>{const _=ME(e);if(Array.isArray(w)){if(!_)return tf(w,M=>Promise.resolve({id:M,name:M,avatar:Ik({id:M,name:M})}))}else return{};const D=_i(ge(w,M=>!r(M).isSome()));return ne(D,M=>{const L=new Promise((W,V)=>{o.set(M,{resolve:W,reject:V})});c(L,M)}),D.length>0&&_(D).then(ZF).then(M=>{const L=new Set(Ue(M,W=>W.id));ne(M,W=>f(W.id,W)),ne(D,W=>{L.has(W)||u(W,new Error(`User ${W} not found`))})}).catch(M=>{ne(D,L=>u(L,M instanceof Error?M:new Error("Network error")))}),kn(w,(M,L)=>(M[L]=r(L).getOr(Promise.resolve({id:L,name:L,avatar:Ik({id:L,name:L})})),M),{})},v=RE(e);return Object.freeze({userId:v,fetchUsers:b})},jF=e=>WF(e),TX=(e,t)=>{e._editableRoot!==t&&(e._editableRoot=t,Yf(e)||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),sE(e,t))},kX=e=>e._editableRoot,GF=(e,t)=>({sections:qe(e),options:qe(t)}),TM=Oi().deviceType,kM=TM.isPhone(),qF=TM.isTablet(),q1=e=>{if(Le(e))return[];{const t=Yt(e)?e:e.split(/[ ,]/),o=Ue(t,ws);return ge(o,xs)}},_M=(e,t)=>{const o=c0(t,(r,c)=>Ce(e,c));return GF(o.t,o.f)},Lk=(e,t,o={})=>{const r=e.sections(),c=Jo(r,t).getOr({});return Ke.extend({},o,c)},Fk=(e,t)=>Sn(e.sections(),t),KF=(e,t)=>Fk(e,t)?e.sections()[t]:{},YF=(e,t)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Jo(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...t?{menubar:!1}:{}}),AM=(e,t)=>{const o=t.external_plugins??{};return e&&e.external_plugins?Ke.extend({},e.external_plugins,o):o},XF=(e,t)=>[...q1(e),...q1(t)],JF=(e,t,o,r)=>e&&Fk(t,"mobile")?r:o,_X=(e,t,o,r)=>{const c=q1(o.forced_plugins),u=q1(r.plugins),f=KF(t,"mobile"),b=f.plugins?q1(f.plugins):u,v=JF(e,t,u,b),w=XF(c,v);return Ke.extend(r,{forced_plugins:c,plugins:w})},QF=(e,t)=>e&&Fk(t,"mobile"),AX=(e,t,o,r,c)=>{const u=e?{mobile:YF(c.mobile??{},t)}:{},f=_M(["mobile"],mg(u,c)),b=Ke.extend(o,r,f.options(),QF(e,f)?Lk(f,"mobile"):{},{external_plugins:AM(r,f.options())});return _X(e,f,r,b)},OX=(e,t)=>{const o=fg(t);return AX(kM||qF,kM,o,e,o)},DX=(e,t)=>m$(e,t),eH=e=>{const t=(r,c)=>{e.formatter.toggle(r,c),e.nodeChanged()},o=r=>()=>{ne("left,center,right,justify".split(","),c=>{r!==c&&e.formatter.remove("align"+c)}),r!=="none"&&t("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},RX=e=>{const t=o=>()=>{const r=e.selection,c=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return Ge(c,u=>de(e.formatter.matchNode(u,o)))};e.editorCommands.addCommands({JustifyLeft:t("alignleft"),JustifyCenter:t("aligncenter"),JustifyRight:t("alignright"),JustifyFull:t("alignjustify")},"state")},tH=e=>{eH(e),RX(e)},Hk=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":t=>{const o=e.getDoc();let r;try{o.execCommand(t)}catch{r=!0}if(t==="paste"&&!o.queryCommandEnabled(t)&&(r=!0),r||!o.queryCommandSupported(t)){let c=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Xn.os.isMacOS()||Xn.os.isiOS())&&(c=c.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:c,type:"error"})}}})},MX=(e,t,o,r)=>{const c=Y.fromDom(e.getRoot());return oS(c,ke.fromRangeStart(t),r)?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),Fa(c,ke.fromRangeEnd(t),r)?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},nH=e=>{if(typeof e!="string"){const t=Ke.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:t}}return{content:e,details:{}}},NX=(e,t)=>{const o=e.selection,r=e.dom;return/^ | $/.test(t)?MX(r,o.getRng(),t,e.schema):t},Ew=(e,t)=>{if(e.selection.isEditable()){const{content:o,details:r}=nH(t);CS(e,{...r,content:NX(e,o),format:"html",set:!1,selection:!0}).each(c=>{const u=qf(e,c.content,r);zO(e,u,c),e.addVisual()})}},OM=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const t=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(t)},insertImage:(t,o,r)=>{Ew(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(t,o,r)=>{Ew(e,e.dom.encode(r))},insertHTML:(t,o,r)=>{Ew(e,r)},mceInsertContent:(t,o,r)=>{Ew(e,r)},mceSetContent:(t,o,r)=>{e.setContent(r)},mceReplaceContent:(t,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(L_(e))}})},BX={"font-size":"size","font-family":"face"},PX=iu("font"),oH=(e,t,o)=>{const r=u=>lr(u,e).orThunk(()=>PX(u)?Jo(BX,e).bind(f=>$i(u,f)):B.none()),c=u=>Ln(Y.fromDom(t),u);return B0(Y.fromDom(o),u=>r(u),c)},$X=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),IX=(e,t)=>B.from(Un.DOM.getStyle(t,e,!0)),sH=e=>(t,o)=>B.from(o).map(Y.fromDom).filter(Ts).bind(r=>oH(e,t,r.dom).or(IX(e,r.dom))).getOr(""),LX=sH("font-size"),FX=T($X,sH("font-family")),rH=e=>y(e.getBody()).bind(t=>{const o=t.container();return B.from(Ye(o)?o.parentNode:o)}),aH=e=>B.from(e.selection.getRng()).bind(t=>{const o=e.getBody();return t.startContainer===o&&t.startOffset===0?B.none():B.from(e.selection.getStart(!0))}),HX=(e,t)=>aH(e).orThunk(ze(rH,e)).map(Y.fromDom).filter(Ts).bind(t),DM=(e,t)=>HX(e,bo(B.some,t)),cH=(e,t)=>{if(/^[0-9.]+$/.test(t)){const o=parseInt(t,10);if(o>=1&&o<=7){const r=wC(e),c=xC(e);return c.length>0?c[o-1]||t:r[o-1]||t}else return t}else return t},zX=e=>{const t=e.split(/\s*,\s*/);return Ue(t,o=>o.indexOf(" ")!==-1&&!(pn(o,'"')||pn(o,"'"))?`'${o}'`:o).join(",")},Uu=(e,t)=>{const o=cH(e,t);e.formatter.toggle("fontname",{value:zX(o)}),e.nodeChanged()},n=e=>DM(e,t=>FX(e.getBody(),t.dom)).getOr(""),s=(e,t)=>{e.formatter.toggle("fontsize",{value:cH(e,t)}),e.nodeChanged()},a=e=>DM(e,t=>LX(e.getBody(),t.dom)).getOr(""),i=e=>DM(e,t=>{const o=Y.fromDom(e.getBody()),r=B0(t,u=>lr(u,"line-height"),ze(Ln,o)),c=()=>{const u=parseFloat(Ns(t,"line-height")),f=parseFloat(Ns(t,"font-size"));return String(u/f)};return r.getOrThunk(c)}).getOr(""),d=(e,t)=>{e.formatter.toggle("lineheight",{value:String(t)}),e.nodeChanged()},g=e=>{const t=(o,r)=>{e.formatter.toggle(o,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{t(o)},"ForeColor,HiliteColor":(o,r,c)=>{t(o,{value:c})},BackColor:(o,r,c)=>{t("hilitecolor",{value:c})},FontName:(o,r,c)=>{Uu(e,c)},FontSize:(o,r,c)=>{s(e,c)},LineHeight:(o,r,c)=>{d(e,c)},Lang:(o,r,c)=>{t(o,{value:c.code,customValue:c.customCode??null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{t("blockquote")},FormatBlock:(o,r,c)=>{t(U(c)?c:"p")},mceToggleFormat:(o,r,c)=>{t(c)}})},h=e=>{const t=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>t(o),mceBlockQuote:()=>t("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>n(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>a(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>i(e))},C=e=>{g(e),h(e)},S=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},x=e=>{e.editorCommands.addCommands({Indent:()=>{gI(e)},Outdent:()=>{tg(e)}}),e.editorCommands.addCommands({Outdent:()=>dI(e),Indent:()=>rG(e)},"state")},A=e=>{const t=(o,r,c)=>{if(e.mode.isReadOnly())return;const u=U(c)?{href:c}:c,f=e.dom.getParent(e.selection.getNode(),"a");At(u)&&U(u.href)&&(u.href=u.href.replace(/ /g,"%20").replace(/&amp;/g,"&"),(!f||!u.href)&&e.formatter.remove("link"),u.href&&e.formatter.apply("link",u,f))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")}},mceInsertLink:t,createLink:t})},R=(e,t,o,r)=>{const c=e.dom,u=b=>c.isBlock(b)&&b.parentElement===o,f=u(t)?t:c.getParent(r,u,o);return B.from(f).map(Y.fromDom)},P=(e,t)=>{if(e.mode.isReadOnly())return;const o=e.dom,r=e.selection.getRng(),c=t?e.selection.getStart():e.selection.getEnd(),u=t?r.startContainer:r.endContainer,f=iw(o,u);if(!f||!f.isContentEditable)return;const b=t?Qr:xl,v=Ys(e);R(e,c,f,u).each(w=>{const _=P7(e,u,w.dom,f,!1,v);b(w,Y.fromDom(_)),e.selection.setCursorLocation(_,0),e.dispatch("NewBlock",{newBlock:_}),aw(e,"insertParagraph")})},z=e=>P(e,!0),Z=e=>P(e,!1),K=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{z(e)},InsertNewBlockAfter:()=>{Z(e)}})},ee=e=>{e.editorCommands.addCommands({insertParagraph:()=>{lk(uw,e)},mceInsertNewLine:(t,o,r)=>{J7(e,r)},InsertLineBreak:(t,o,r)=>{lk(G7,e)}})},G=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(t,o,r)=>{let c=0;e.dom.getParent(e.selection.getNode(),u=>it(u)&&c++===r?(e.selection.select(u),!1):!0,e.getBody())},mceSelectNode:(t,o,r)=>{e.selection.select(r)},selectAll:()=>{const t=e.dom.getParent(e.selection.getStart(),vc);if(t){const o=e.dom.createRng();o.selectNodeContents(t),e.selection.setRng(o)}}})},oe=e=>{e.editorCommands.addCommands({mceRemoveNode:(t,o,r)=>{const c=r??e.selection.getNode();if(c!==e.getBody()){const u=e.selection.getBookmark();e.dom.remove(c,!0),e.selection.moveToBookmark(u)}},mcePrint:()=>{e.getWin().print()},mceFocus:(t,o,r)=>{F6(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},le=e=>{tH(e),Hk(e),S(e),G(e),OM(e),A(e),x(e),K(e),ee(e),C(e),oe(e)},Se=["toggleview"],Te=e=>Ce(Se,e.toLowerCase());class ct{constructor(t){Ze(this,"editor");Ze(this,"commands",{state:{},exec:{},value:{}});this.editor=t}execCommand(t,o=!1,r,c){const u=this.editor,f=t.toLowerCase(),b=c==null?void 0:c.skip_focus;if(u.removed||(f!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(f)&&!b?u.focus():XH(u)),u.dispatch("BeforeExecCommand",{command:t,ui:o,value:r}).isDefaultPrevented()))return!1;const w=this.commands.exec[f];return X(w)?(w(f,o,r,c),u.dispatch("ExecCommand",{command:t,ui:o,value:r,args:c}),!0):!1}queryCommandState(t){if(!Te(t)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=t.toLowerCase(),r=this.commands.state[o];return X(r)?r(o):!1}queryCommandValue(t){if(!Te(t)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const o=t.toLowerCase(),r=this.commands.value[o];return X(r)?r(o):""}addCommands(t,o="exec"){const r=this.commands;Bn(t,(c,u)=>{ne(u.toLowerCase().split(","),f=>{r[o][f]=c})})}addCommand(t,o,r){const c=t.toLowerCase();this.commands.exec[c]=(u,f,b,v)=>o.call(r??this.editor,f,b,v)}removeCommand(t,o){const r=t.toLowerCase();o?delete this.commands[o][r]:(delete this.commands.exec[r],delete this.commands.state[r],delete this.commands.value[r])}queryCommandSupported(t){const o=t.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(t,o,r){this.commands.state[t.toLowerCase()]=()=>o.call(r??this.editor)}addQueryValueHandler(t,o,r){this.commands.value[t.toLowerCase()]=()=>o.call(r??this.editor)}}const lt=Ke.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class Ne{constructor(t){Ze(this,"settings");Ze(this,"scope");Ze(this,"toggleEvent");Ze(this,"bindings",{});this.settings=t||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||$e}static isNative(t){return!!lt[t.toLowerCase()]}fire(t,o){return this.dispatch(t,o)}dispatch(t,o){const r=t.toLowerCase(),c=J0(r,o??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(c);const u=this.bindings[r];if(u)for(let f=0,b=u.length;f<b;f++){const v=u[f];if(!v.removed){if(v.once&&this.off(r,v.func),c.isImmediatePropagationStopped())return c;if(v.func.call(this.scope,c)===!1)return c.preventDefault(),c}}return c}on(t,o,r,c){if(o===!1&&(o=$e),o){const u={func:o,removed:!1};c&&Ke.extend(u,c);const f=t.toLowerCase().split(" ");let b=f.length;for(;b--;){const v=f[b];let w=this.bindings[v];w||(w=[],this.toggleEvent(v,!0)),r?w=[u,...w]:w=[...w,u],this.bindings[v]=w}}return this}off(t,o){if(t){const r=t.toLowerCase().split(" ");let c=r.length;for(;c--;){const u=r[c];let f=this.bindings[u];if(!u)return Bn(this.bindings,(b,v)=>{this.toggleEvent(v,!1),delete this.bindings[v]}),this;if(f){if(!o)f.length=0;else{const b=De(f,v=>v.func===o);f=b.fail,this.bindings[u]=f,ne(b.pass,v=>{v.removed=!0})}f.length||(this.toggleEvent(t,!1),delete this.bindings[u])}}}else Bn(this.bindings,(r,c)=>{this.toggleEvent(c,!1)}),this.bindings={};return this}once(t,o,r){return this.on(t,o,r,{once:!0})}has(t){t=t.toLowerCase();const o=this.bindings[t];return!(!o||o.length===0)}}const Fe=e=>(e._eventDispatcher||(e._eventDispatcher=new Ne({scope:e,toggleEvent:(t,o)=>{Ne.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,o)}})),e._eventDispatcher),Ft={fire(e,t,o){return SS("fire"),this.dispatch(e,t,o)},dispatch(e,t,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return J0(e.toLowerCase(),t??{},r);const c=Fe(r).dispatch(e,t);if(o!==!1&&r.parent){let u=r.parent();for(;u&&!c.isPropagationStopped();)u.dispatch(e,c,!1),u=u.parent?u.parent():void 0}return c},on(e,t,o){return Fe(this).on(e,t,o)},off(e,t){return Fe(this).off(e,t)},once(e,t){return Fe(this).once(e,t)},hasEventListeners(e){return Fe(this).has(e)}},Ot=Un.DOM;let En;const Ut=(e,t)=>{if(t==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(t))return e.getDoc().documentElement;const o=zb(e);return o?(e.eventRoot||(e.eventRoot=Ot.select(o)[0]),e.eventRoot):e.getBody()},gn=e=>!e.hidden&&!Yf(e),Mt=(e,t,o)=>{gn(e)?e.dispatch(t,o):Yf(e)&&xZ(e,o)},Pe=(e,t)=>{if(e.delegates||(e.delegates={}),e.delegates[t]||e.removed)return;const o=Ut(e,t);if(zb(e)){if(En||(En={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||En&&(Bn(En,(c,u)=>{e.dom.unbind(Ut(e,u))}),En=null)})),En[t])return;const r=c=>{const u=c.target,f=e.editorManager.get();let b=f.length;for(;b--;){const v=f[b].getBody();(v===u||Ot.isChildOf(u,v))&&Mt(f[b],t,c)}};En[t]=r,Ot.bind(o,t,r)}else{const r=c=>{Mt(e,t,c)};Ot.bind(o,t,r),e.delegates[t]=r}},tt={...Ft,bindPendingEventDelegates(){const e=this;Ke.each(e._pendingNativeEvents,t=>{Pe(e,t)})},toggleNativeEvent(e,t){const o=this;e==="focus"||e==="blur"||o.removed||(t?o.initialized?Pe(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind(Ut(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,t=e.getBody(),o=e.dom;e.delegates&&(Bn(e.delegates,(r,c)=>{e.dom.unbind(Ut(e,c),c,r)}),delete e.delegates),!e.inline&&t&&o&&(t.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(t),o.unbind(e.getContainer()))}},Kt=e=>U(e)?{value:e.split(/[ ,]/),valid:!0}:Cn(e,U)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},bn=e=>{const t=(()=>{switch(e){case"array":return Yt;case"boolean":return Et;case"function":return X;case"number":return Fn;case"object":return At;case"string":return U;case"string[]":return Kt;case"object[]":return o=>Cn(o,At);case"regexp":return o=>Yn(o,RegExp);default:return gt}})();return o=>Kn(o,t,`The value must be a ${e}.`)},Pt=e=>U(e.processor),hn=(e,t)=>{const o=pg(t.message)?"":`. ${t.message}`;return e+o},yo=e=>e.valid,Kn=(e,t,o="")=>{const r=t(e);return Et(r)?r?{value:e,valid:!0}:{valid:!1,message:o}:r},oc=(e,t,o)=>{if(!Je(t)){const r=Kn(t,o);if(yo(r))return r.value;console.error(hn(`Invalid default value passed for the "${e}" option`,r))}},as=(e,t,o=t)=>{const r={},c={},u=(L,W,V)=>{const q=Kn(W,V);return yo(q)?(c[L]=q.value,!0):(console.warn(hn(`Invalid value passed for the ${L} option`,q)),!1)},f=(L,W)=>{const V=Pt(W)?bn(W.processor):W.processor,q=oc(L,W.default,V);r[L]={...W,default:q,processor:V},Jo(c,L).orThunk(()=>Jo(t,L)).each(ce=>u(L,ce,V))},b=L=>Sn(r,L);return{register:f,isRegistered:b,get:L=>Jo(c,L).orThunk(()=>Jo(r,L).map(W=>W.default)).getOrUndefined(),set:(L,W)=>{if(b(L)){const V=r[L];return V.immutable?(console.error(`"${L}" is an immutable option and cannot be updated`),!1):u(L,W,V.processor)}else return console.warn(`"${L}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:L=>{const W=b(L);return W&&delete c[L],W},isSet:L=>Sn(c,L),debug:()=>{try{console.log(JSON.parse(JSON.stringify(o,(L,W)=>Et(W)||Fn(W)||U(W)||ie(W)||Yt(W)||wn(W)?W:Object.prototype.toString.call(W))))}catch(L){console.error(L)}}}},Yc=(e,t)=>{e.dom.contentEditable="true"},jr=(e,t)=>{const o=Y.fromDom(e.getBody());t?(e.readonly=!0,e.hasEditableRoot()&&Yc(o),HD(e)):(e.readonly=!1,P$(e))},za=e=>e.readonly,Xc=e=>{const t=e.undoManager.add();de(t)&&(e.undoManager.undo(),e.undoManager.reset())},Yl=e=>Ge(e,t=>t.type==="characterData"||t.type==="childList"),Zh=e=>{const t=r=>{za(e)&&Yl(r)&&Xc(e)},o=new MutationObserver(t);e.on("beforeinput paste cut dragend dragover draggesture dragdrop drop drag",r=>{za(e)&&r.preventDefault()}),e.on("BeforeExecCommand",r=>{(r.command==="Undo"||r.command==="Redo")&&za(e)&&r.preventDefault()}),e.on("compositionstart",()=>{za(e)&&o.observe(e.getBody(),{characterData:!0,childList:!0,subtree:!0})}),e.on("compositionend",()=>{if(za(e)){const r=o.takeRecords();t(r)}o.disconnect()})},Ym=["design","readonly"],K1=(e,t,o,r)=>{const c=o[t.get()],u=o[r];try{u.activate()}catch(f){console.error(`problem while activating editor mode ${r}:`,f);return}c.deactivate(),c.editorReadOnly!==u.editorReadOnly&&jr(e,u.editorReadOnly),t.set(r),y_(e,r)},sg=(e,t,o,r)=>{if(!(r===o.get()||e.initialized&&Yf(e))){if(!Sn(t,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?K1(e,o,t,r):e.on("init",()=>K1(e,o,t,r))}},Tw=(e,t,o)=>{if(Ce(Ym,t))throw new Error(`Cannot override default mode ${t}`);return{...e,[t]:{...o,deactivate:()=>{try{o.deactivate()}catch(r){console.error(`problem while deactivating editor mode ${t}:`,r)}}}}},RM=e=>{const t=Xt("design"),o=Xt({design:{activate:yt,deactivate:yt,editorReadOnly:!1},readonly:{activate:yt,deactivate:yt,editorReadOnly:!0}});return Zh(e),EZ(e),{isReadOnly:()=>za(e),set:r=>sg(e,o.get(),t,r),get:()=>t.get(),register:(r,c)=>{o.set(Tw(o.get(),r,c))}}},Wh=Ke.each,a2=Ke.explode,zk={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},MM=Ke.makeMap("alt,ctrl,shift,meta,access"),iH=e=>e in MM,VX=e=>{const t={},o=Xn.os.isMacOS()||Xn.os.isiOS();Wh(a2(e.toLowerCase(),"+"),u=>{iH(u)?t[u]=!0:/^[0-9]{2,}$/.test(u)?t.keyCode=parseInt(u,10):(t.charCode=u.charCodeAt(0),t.keyCode=zk[u]||u.toUpperCase().charCodeAt(0))});const r=[t.keyCode];let c;for(c in MM)t[c]?r.push(c):t[c]=!1;return t.id=r.join(","),t.access&&(t.alt=!0,o?t.ctrl=!0:t.shift=!0),t.meta&&(o?t.meta=!0:(t.ctrl=!0,t.meta=!1)),t};class Vk{constructor(t){Ze(this,"editor");Ze(this,"shortcuts",{});Ze(this,"pendingPatterns",[]);this.editor=t;const o=this;t.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&(Wh(o.shortcuts,c=>{o.matchShortcut(r,c)&&(o.pendingPatterns=c.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(c))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(t,o,r,c){const u=this,f=u.normalizeCommandFunc(r);return Wh(a2(Ke.trim(t)),b=>{const v=u.createShortcut(b,o,f,c);u.shortcuts[v.id]=v}),!0}remove(t){const o=this.createShortcut(t);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(t){const o=this,r=t;return typeof r=="string"?()=>{o.editor.execCommand(r,!1,null)}:Ke.isArray(r)?()=>{o.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(t,o,r,c){const u=Ke.map(a2(t,">"),VX);return u[u.length-1]=Ke.extend(u[u.length-1],{func:r,scope:c||this.editor}),Ke.extend(u[0],{desc:this.editor.translate(o),subpatterns:u.slice(1)})}hasModifier(t){return t.altKey||t.ctrlKey||t.metaKey}isFunctionKey(t){return t.type==="keydown"&&t.keyCode>=112&&t.keyCode<=123}matchShortcut(t,o){return!o||o.ctrl!==t.ctrlKey||o.meta!==t.metaKey||o.alt!==t.altKey||o.shift!==t.shiftKey?!1:t.keyCode===o.keyCode||t.charCode&&t.charCode===o.charCode?(t.preventDefault(),!0):!1}executeShortcutAction(t){return t.func?t.func.call(t.scope):null}}const kw=()=>{const e=aq();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,addContext:e.addContext,getAll:e.getAll}},Zu=Un.DOM,Y1=Ke.extend,lH=Ke.each;class _w{constructor(t,o,r){Ze(this,"baseUri");Ze(this,"id");Ze(this,"editorUid");Ze(this,"plugins",{});Ze(this,"documentBaseURI");Ze(this,"baseURI");Ze(this,"contentCSS",[]);Ze(this,"contentStyles",[]);Ze(this,"ui");Ze(this,"mode");Ze(this,"options");Ze(this,"editorUpload");Ze(this,"userLookup");Ze(this,"shortcuts");Ze(this,"loadedCSS",{});Ze(this,"editorCommands");Ze(this,"suffix");Ze(this,"editorManager");Ze(this,"hidden");Ze(this,"inline");Ze(this,"hasVisual");Ze(this,"isNotDirty",!1);Ze(this,"annotator");Ze(this,"bodyElement");Ze(this,"bookmark");Ze(this,"composing",!1);Ze(this,"container");Ze(this,"contentAreaContainer");Ze(this,"contentDocument");Ze(this,"contentWindow");Ze(this,"delegates");Ze(this,"destroyed",!1);Ze(this,"dom");Ze(this,"editorContainer");Ze(this,"eventRoot");Ze(this,"formatter");Ze(this,"formElement");Ze(this,"formEventDelegate");Ze(this,"hasHiddenInput",!1);Ze(this,"iframeElement",null);Ze(this,"iframeHTML");Ze(this,"initialized",!1);Ze(this,"notificationManager");Ze(this,"orgDisplay");Ze(this,"orgVisibility");Ze(this,"parser");Ze(this,"quirks");Ze(this,"readonly",!1);Ze(this,"removed",!1);Ze(this,"schema");Ze(this,"selection");Ze(this,"serializer");Ze(this,"startContent","");Ze(this,"targetElm");Ze(this,"theme");Ze(this,"model");Ze(this,"undoManager");Ze(this,"windowManager");Ze(this,"licenseKeyManager");Ze(this,"_beforeUnload");Ze(this,"_eventDispatcher");Ze(this,"_nodeChangeDispatcher");Ze(this,"_pendingNativeEvents",[]);Ze(this,"_selectionOverrides");Ze(this,"_skinLoaded",!1);Ze(this,"_editableRoot",!0);Ze(this,"bindPendingEventDelegates");Ze(this,"toggleNativeEvent");Ze(this,"unbindAllNativeEvents");Ze(this,"fire");Ze(this,"dispatch");Ze(this,"on");Ze(this,"off");Ze(this,"once");Ze(this,"hasEventListeners");this.editorManager=r,Y1(this,tt);const c=this;this.id=t,this.editorUid=tp(),this.hidden=!1;const u=OX(r.defaultOptions,o);this.options=as(c,u,o),Jp(c),this.userLookup=jF(this);const f=this.options.get;f("deprecation_warnings")&&XV(o,u);const b=f("suffix");b&&(r.suffix=b),this.suffix=r.suffix;const v=f("base_url");v&&r._setBaseUrl(v),this.baseUri=r.baseURI;const w=Fb(c);w&&(ro.ScriptLoader._setReferrerPolicy(w),Un.DOM.styleSheetLoader._setReferrerPolicy(w)),ro.ScriptLoader._setCrossOrigin(L=>Rf(c)(L,"script")),Un.DOM.styleSheetLoader._setCrossOrigin(L=>Rf(c)(L,"stylesheet"));const _=pC(c);de(_)&&Un.DOM.styleSheetLoader._setContentCssCors(_),mr.languageLoad=f("language_load"),mr.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new $u(iC(c),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=e1(c),this.hasVisual=o1(c),this.shortcuts=new Vk(this),this.editorCommands=new ct(this),le(this);const D=f("cache_suffix");D&&(Xn.cacheSuffix=D.replace(/^[\?\&]+/,"")),this.ui={registry:kw(),styleSheetLoader:void 0,show:yt,hide:yt,setEnabled:yt,isEnabled:gt},this.mode=RM(c),Object.defineProperty(this,"editorUid",{writable:!1,configurable:!1,enumerable:!0}),r.dispatch("SetupEditor",{editor:this});const M=Nf(c);X(M)&&M.call(c,c)}render(){xX(this)}focus(t){this.execCommand("mceFocus",!1,t)}hasFocus(){return fv(this)}translate(t){return xc.translate(t)}getParam(t,o,r){const c=this.options;return c.isRegistered(t)||(de(r)?c.register(t,{processor:r,default:o}):c.register(t,{processor:gt,default:o})),!c.isSet(t)&&!Je(o)?o:c.get(t)}hasPlugin(t,o){return Ce(n1(this),t)?o?Nh.get(t)!==void 0:!0:!1}nodeChanged(t){this._nodeChangeDispatcher.nodeChanged(t)}addCommand(t,o,r){this.editorCommands.addCommand(t,o,r)}addQueryStateHandler(t,o,r){this.editorCommands.addQueryStateHandler(t,o,r)}addQueryValueHandler(t,o,r){this.editorCommands.addQueryValueHandler(t,o,r)}addShortcut(t,o,r,c){this.shortcuts.add(t,o,r,c)}execCommand(t,o,r,c){return this.editorCommands.execCommand(t,o,r,c)}queryCommandState(t){return this.editorCommands.queryCommandState(t)}queryCommandValue(t){return this.editorCommands.queryCommandValue(t)}queryCommandSupported(t){return this.editorCommands.queryCommandSupported(t)}show(){const t=this;t.hidden&&(t.hidden=!1,t.inline?t.getBody().contentEditable="true":(Zu.show(t.getContainer()),Zu.hide(t.id)),t.load(),t.dispatch("show"))}hide(){const t=this;t.hidden||(t.save(),t.inline?(t.getBody().contentEditable="false",t===t.editorManager.focusedEditor&&(t.editorManager.focusedEditor=null)):(Zu.hide(t.getContainer()),Zu.setStyle(t.id,"display",t.orgDisplay)),t.hidden=!0,t.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(t,o){this.dispatch("ProgressState",{state:t,time:o})}load(t={}){const o=this,r=o.getElement();if(!o.removed&&r){const c={...t,load:!0},u=mi(r)?r.value:r.innerHTML;o.setContent(u,c),c.no_events||o.dispatch("LoadContent",{...c,element:r})}}save(t={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const c={...t,save:!0,element:r};let u=o.getContent(c);const f={...c,content:u};if(f.no_events||o.dispatch("SaveContent",f),f.format==="raw"&&o.dispatch("RawSaveContent",f),u=f.content,mi(r))r.value=u;else{(t.is_removing||!o.inline)&&(r.innerHTML=u);const b=Zu.getParent(o.id,"form");b&&lH(b.elements,v=>v.name===o.id?(v.value=u,!1):!0)}return f.element=c.element=r=null,f.set_dirty!==!1&&o.setDirty(!1),u}setContent(t,o){SD(this,t,o)}getContent(t){return cZ(this,t)}insertContent(t,o){o&&(t=Y1({content:t},o)),this.execCommand("mceInsertContent",!1,t)}resetContent(t){t===void 0?SD(this,this.startContent,{initial:!0,format:"raw"}):SD(this,t,{initial:!0}),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(t){const o=!this.isNotDirty;this.isNotDirty=!t,t&&t!==o&&this.dispatch("dirty")}getContainer(){const t=this;return t.container||(t.container=t.editorContainer||Zu.get(t.id+"_parent")),t.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Zu.get(this.id)),this.targetElm}getWin(){const t=this;if(!t.contentWindow){const o=t.iframeElement;o&&(t.contentWindow=o.contentWindow)}return t.contentWindow}getDoc(){const t=this;if(!t.contentDocument){const o=t.getWin();o&&(t.contentDocument=o.document)}return t.contentDocument}getBody(){const t=this.getDoc();return this.bodyElement??(t==null?void 0:t.body)??null}convertURL(t,o,r){const c=this,u=c.options.get,f=Tu(c);if(X(f))return f.call(c,t,r,!0,o);if(!u("convert_urls")||r==="link"||At(r)&&r.nodeName==="LINK"||t.indexOf("file:")===0||t.length===0)return t;const b=new $u(t);return b.protocol!=="http"&&b.protocol!=="https"&&b.protocol!==""?t:u("relative_urls")?c.documentBaseURI.toRelative(t):(t=c.documentBaseURI.toAbsolute(t,u("remove_script_host")),t)}addVisual(t){DX(this,t)}setEditableRoot(t){TX(this,t)}hasEditableRoot(){return kX(this)}remove(){xD(this)}destroy(t){w$(this,t)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const X1=Un.DOM,c2=Ke.each;let NM=!1,J1,Va=[];const Wu=e=>{const t=e.type;c2(jd.get(),o=>{switch(t){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},Q1=e=>{if(e!==NM){const t=Un.DOM;e?(t.bind(window,"resize",Wu),t.bind(window,"scroll",Wu)):(t.unbind(window,"resize",Wu),t.unbind(window,"scroll",Wu)),NM=e}},Uk=e=>{const t=Va;return Va=ge(Va,o=>e!==o),jd.activeEditor===e&&(jd.activeEditor=Va.length>0?Va[0]:null),jd.focusedEditor===e&&(jd.focusedEditor=null),t.length!==Va.length},BM=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(Uk(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},UX=document.compatMode!=="CSS1Compat",jd={...Ft,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,pageUid:tp(),majorVersion:"8",minorVersion:"3.1",releaseDate:"2025-12-17",i18n:xc,activeEditor:null,focusedEditor:null,setup(){const e=this;let t="",o="",r=$u.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const c=window.tinymce||window.tinyMCEPreInit;if(c)t=c.base||c.baseURL,o=c.suffix;else{const u=document.getElementsByTagName("script");for(let f=0;f<u.length;f++){const b=u[f].src||"";if(b==="")continue;const v=b.substring(b.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(b)){v.indexOf(".min")!==-1&&(o=".min"),t=b.substring(0,b.lastIndexOf("/"));break}}if(!t&&document.currentScript){const f=document.currentScript.src;f.indexOf(".min")!==-1&&(o=".min"),t=f.substring(0,f.lastIndexOf("/"))}}e.baseURL=new $u(r).toAbsolute(t),e.documentBaseURL=r,e.baseURI=new $u(e.baseURL),e.suffix=o,P6(e),ne(["majorVersion","minorVersion","releaseDate","pageUid","_addLicenseKeyManager"],u=>Object.defineProperty(e,u,{writable:!1,configurable:!1,enumerable:!0}))},overrideDefaults(e){const t=e.base_url;t&&this._setBaseUrl(t);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&Bn(r,(c,u)=>{mr.PluginManager.urls[u]=c})},init(e){const t=this;let o;const r=Ke.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),c=(_,D)=>_.inline&&D.tagName.toLowerCase()in r,u=_=>{let D=_.id;return D||(D=Jo(_,"name").filter(M=>!X1.get(M)).getOrThunk(X1.uniqueId),_.setAttribute("id",D)),D},f=_=>{const D=e[_];if(D)return D.apply(t,[])},b=_=>Xn.browser.isIE()||Xn.browser.isEdge()?(dT("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/8/support/#supportedwebbrowsers"),[]):UX?(dT("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):U(_.selector)?X1.select(_.selector):de(_.target)?[_.target]:[];let v=_=>{o=_};const w=()=>{let _=0;const D=[];let M;const L=(W,V,q)=>{const ae=new _w(W,V,t);D.push(ae),ae.on("init",()=>{++_===M.length&&v(D)}),ae.targetElm=ae.targetElm||q,ae.render()};X1.unbind(window,"ready",w),f("onpageload"),M=_i(b(e)),Ke.each(M,W=>{BM(t.get(W.id))}),M=Ke.grep(M,W=>!t.get(W.id)),M.length===0?v([]):c2(M,W=>{c(e,W)?dT("Could not initialize inline editor on invalid inline target element",W):L(u(W),e,W)})};return X1.bind(window,"ready",w),new Promise(_=>{o?_(o):v=D=>{_(D)}})},get(e){return arguments.length===0?Va.slice(0):U(e)?To(Va,t=>t.id===e).getOr(null):Fn(e)&&Va[e]?Va[e]:null},add(e){const t=this,o=t.get(e.id);return o===e||(o===null&&Va.push(e),Q1(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),J1||(J1=r=>{const c=t.dispatch("BeforeUnload");if(c.returnValue)return r.preventDefault(),r.returnValue=c.returnValue,c.returnValue},window.addEventListener("beforeunload",J1))),e},createEditor(e,t){return this.add(new _w(e,t,this))},remove(e){const t=this;let o;if(!e){for(let r=Va.length-1;r>=0;r--)t.remove(Va[r]);return}if(U(e)){c2(X1.select(e),r=>{o=t.get(r.id),o&&t.remove(o)});return}return o=e,ie(t.get(o.id))?null:(Uk(o)&&t.dispatch("RemoveEditor",{editor:o}),Va.length===0&&window.removeEventListener("beforeunload",J1),o.remove(),Q1(Va.length>0),o)},execCommand(e,t,o){const r=this,c=At(o)?o.id??o.index:o;switch(e){case"mceAddEditor":{if(!r.get(c)){const u=o.options;new _w(c,u,r).render()}return!0}case"mceRemoveEditor":{const u=r.get(c);return u&&u.remove(),!0}case"mceToggleEditor":{const u=r.get(c);return u?(u.isHidden()?u.show():u.hide(),!0):(r.execCommand("mceAddEditor",!1,o),!0)}}return r.activeEditor?r.activeEditor.execCommand(e,t,o):!1},triggerSave:()=>{c2(Va,e=>{e.save()})},addI18n:(e,t)=>{xc.add(e,t)},translate:e=>xc.translate(e),setActive(e){const t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new $u(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new $u(this.baseURL)},_addLicenseKeyManager:e=>ID.add(e)};jd.setup();const ZX=(()=>{const e=oi(),t=u=>({items:u,types:It(u),getType:f=>Jo(u,f).getOrUndefined()}),o=u=>{e.set(u)},r=()=>e.get().getOrUndefined(),c=e.clear;return{FakeClipboardItem:t,write:o,read:r,clear:c}})(),i2=Math.min,l2=Math.max,Zk=Math.round,Ua=(e,t,o)=>{let r=t.x,c=t.y;const u=e.w,f=e.h,b=t.w,v=t.h,w=(o||"").split("");return w[0]==="b"&&(c+=v),w[1]==="r"&&(r+=b),w[0]==="c"&&(c+=Zk(v/2)),w[1]==="c"&&(r+=Zk(b/2)),w[3]==="b"&&(c-=f),w[4]==="r"&&(r-=u),w[3]==="c"&&(c-=Zk(f/2)),w[4]==="c"&&(r-=Zk(u/2)),e0(r,c,u,f)},u2=(e,t,o,r)=>{for(let c=0;c<r.length;c++){const u=Ua(e,t,r[c]);if(u.x>=o.x&&u.x+u.w<=o.w+o.x&&u.y>=o.y&&u.y+u.h<=o.h+o.y)return r[c]}return null},WX=(e,t,o)=>e0(e.x-t,e.y-o,e.w+t*2,e.h+o*2),uH=(e,t)=>{const o=l2(e.x,t.x),r=l2(e.y,t.y),c=i2(e.x+e.w,t.x+t.w),u=i2(e.y+e.h,t.y+t.h);return c-o<0||u-r<0?null:e0(o,r,c-o,u-r)},$M=(e,t,o)=>{let r=e.x,c=e.y,u=e.x+e.w,f=e.y+e.h;const b=t.x+t.w,v=t.y+t.h,w=l2(0,t.x-r),_=l2(0,t.y-c),D=l2(0,u-b),M=l2(0,f-v);return r+=w,c+=_,o&&(u+=w,f+=_,r-=D,c-=M),u-=D,f-=M,e0(r,c,u-r,f-c)},e0=(e,t,o,r)=>({x:e,y:t,w:o,h:r}),GX={inflate:WX,relativePosition:Ua,findBestRelativePosition:u2,intersect:uH,clamp:$M,create:e0,fromClientRect:e=>e0(e.left,e.top,e.width,e.height)},Xm=(e,t,o=1e3)=>{let r=!1,c=null;const u=w=>(..._)=>{r||(r=!0,c!==null&&(window.clearTimeout(c),c=null),w.apply(null,_))},f=u(e),b=u(t);return{start:(...w)=>{!r&&c===null&&(c=window.setTimeout(()=>b.apply(null,w),o))},resolve:f,reject:b}},dH=(()=>{const e={},t={},o={};return{load:(v,w)=>{const _=`Script at URL "${w}" failed to load`,D=`Script at URL "${w}" did not call \`tinymce.Resource.add('${v}', data)\` within 1 second`;if(e[v]!==void 0)return e[v];{const M=new Promise((L,W)=>{const V=Xm(L,W);t[v]=V.resolve,ro.ScriptLoader.loadScript(w).then(()=>V.start(D),()=>V.reject(_))});return e[v]=M,M}},add:(v,w)=>{t[v]!==void 0&&(t[v](w),delete t[v]),e[v]=Promise.resolve(w),o[v]=w},has:v=>v in o,get:v=>o[v],unload:v=>{delete e[v],delete o[v]}}})(),mH=()=>(()=>{let e={},t=[];const o={getItem:r=>{const c=e[r];return c||null},setItem:(r,c)=>{t.push(r),e[r]=String(c)},key:r=>t[r],removeItem:r=>{t=t.filter(c=>c===r),delete e[r]},clear:()=>{t=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>t.length,configurable:!1,enumerable:!1}),o})();let t0;try{const e="__storage_test__";t0=window.localStorage,t0.setItem(e,e),t0.removeItem(e)}catch{t0=mH()}var fH=t0;const rg={geom:{Rect:GX},util:{Delay:Ru,Tools:Ke,VK:vt,URI:$u,EventDispatcher:Ne,Observable:Ft,I18n:xc,LocalStorage:fH,ImageUploader:F$},dom:{EventUtils:Xg,TreeWalker:_s,TextSeeker:vu,DOMUtils:Un,ScriptLoader:ro,RangeUtils:Rd,Serializer:CD,StyleSheetLoader:Vg,ControlSelection:d9,BookmarkManager:dv,Selection:vD,Event:Xg.Event},html:{Styles:pd,Entities:Sc,Node:Zr,Schema:Hr,DomParser:Sv,Writer:kA,Serializer:wh},Env:Xn,AddOnManager:mr,Annotator:D6,Formatter:V$,UndoManager:HZ,EditorCommands:ct,WindowManager:x$,NotificationManager:BS,EditorObservable:tt,Shortcuts:Vk,Editor:_w,FocusManager:N6,EditorManager:jd,DOM:Un.DOM,ScriptLoader:ro.ScriptLoader,PluginManager:Nh,ThemeManager:_1,ModelManager:Dv,IconManager:lT,Resource:dH,FakeClipboard:ZX,trim:Ke.trim,isArray:Ke.isArray,is:Ke.is,toArray:Ke.toArray,makeMap:Ke.makeMap,each:Ke.each,map:Ke.map,grep:Ke.grep,inArray:Ke.inArray,extend:Ke.extend,walk:Ke.walk,resolve:Ke.resolve,explode:Ke.explode,_addCacheSuffix:Ke._addCacheSuffix},IM=Ke.extend(jd,rg),gH=e=>{try{k.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(IM),gH(IM)})()})(Nne);tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',"add-file":'<svg height="24" width="24"><path d="M2 7h2V4h3V2H4a2 2 0 0 0-2 2zm20 0h-2V4h-3V2h3a2 2 0 0 1 2 2zm0 2h-2v6h2zm0 8h-2v3h-3v2h3a2 2 0 0 0 2-2zM2 9h2v6H2zm0 8h2v3h3v2H4a2 2 0 0 1-2-2zm7 5v-2h6v2zm6-20v2H9V2zM6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M2 7h2V4h3V2H4a2 2 0 0 0-2 2zm20 0h-2V4h-3V2h3a2 2 0 0 1 2 2zm0 2h-2v6h2zm0 8h-2v3h-3v2h3a2 2 0 0 0 2-2zM2 9h2v6H2zm0 8h2v3h3v2H4a2 2 0 0 1-2-2zm7 5v-2h6v2zm6-20v2H9V2zM6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',adjustments:'<svg width="24" height="24"><path d="M16 11a3 3 0 1 1 2.8-4H21v2h-2.2a3 3 0 0 1-2.8 2Zm0-2a1 1 0 1 1 0-2 1 1 0 0 1 0 2ZM3 9h8V7H3v2Zm5 10a3 3 0 1 0-2.8-4H3v2h2.2A3 3 0 0 0 8 19Zm0-2a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm13 0h-8v-2h8v2Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"alt-text":'<svg width="24" height="24"><path d="M3 20a2 2 0 0 1-1.4-.6A2 2 0 0 1 1 18V6c0-.6.2-1 .6-1.4A2 2 0 0 1 3 4h18c.6 0 1 .2 1.4.6.4.4.6.9.6 1.4v12c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6H3Zm0-2h18V6H3v12Zm1.5-3H6v-1.5h1.5V15H9v-5a1 1 0 0 0-.3-.7A1 1 0 0 0 8 9H5.5a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v5ZM6 12v-1.5h1.5V12H6Z"/><path d="M11 15V9h1.3v4.5h2V15H11Zm5.8-4.5V15h1.4v-4.5h1.3V9h-4v1.5h1.3Z"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',"auto-image-enhancement":'<svg width="24" height="24"><path d="M7.7 10.6a5.8 5.8 0 0 0 5.7 5.7A5.8 5.8 0 0 0 7.7 22 5.8 5.8 0 0 0 2 16.3a5.8 5.8 0 0 0 5.7-5.7ZM15.5 2c.3 3 3.3 6 6.5 6.4-3.2.5-6.2 3.4-6.5 6.5-.3-3.4-3-6-6.4-6.5 3.3-.5 6.1-3 6.4-6.4Z"/></svg>',blur:'<svg width="24" height="24"><path d="M19.3 9.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7A1 1 0 0 0 20 9a1 1 0 0 0-.7.3Zm-16 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3A1 1 0 0 0 5 10a1 1 0 0 0-.3-.7A1 1 0 0 0 4 9a1 1 0 0 0-.7.3Zm16 6a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3Zm-16 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3A1 1 0 0 0 5 16a1 1 0 0 0-.3-.7A1 1 0 0 0 4 15a1 1 0 0 0-.7.3Zm5-11A1 1 0 0 0 8 5a1 1 0 0 0 1 1c.3 0 .5-.1.7-.3A1 1 0 0 0 10 5a1 1 0 0 0-.3-.7A1 1 0 0 0 9 4a1 1 0 0 0-.7.3Zm6 0a1 1 0 0 0-.3.7 1 1 0 0 0 1 1c.3 0 .5-.1.7-.3A1 1 0 0 0 16 5a1 1 0 0 0-.3-.7A1 1 0 0 0 15 4a1 1 0 0 0-.7.3Zm-6 16a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7A1 1 0 0 0 9 20a1 1 0 0 0-.7.3Zm6 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3ZM7.6 8.6A2 2 0 0 0 7 10c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 9 8a2 2 0 0 0-1.4.6Zm0 6A2 2 0 0 0 7 16c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 9 14a2 2 0 0 0-1.4.6Zm6-6A2 2 0 0 0 13 10c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 15 8a2 2 0 0 0-1.4.6Zm0 6A2 2 0 0 0 13 16c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 15 14a2 2 0 0 0-1.4.6Z"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',box:'<svg width="24" height="24"><path d="M3.8 7a1 1 0 0 0-.7.6l-.1 3V13.8a3.5 3.5 0 0 0 4 2.7c.8-.2 1.4-.5 2-1l.3-.3.3.2c.7.7 1.4 1 2.4 1.1 1.2 0 2.4-.6 3-1.6.9-1.2.8-2.8 0-4a3.7 3.7 0 0 0-2-1.2c-.4-.1-1.2-.1-1.6 0a3.4 3.4 0 0 0-1.7 1l-.3.2-.2-.1c-.4-.5-1.2-1-2-1.1-.6-.2-1.5 0-2 .2H5V9c0-1.3 0-1.3-.3-1.6a1 1 0 0 0-1-.3Zm12 2.6c-.3.2-.5.4-.6.8v.6l.9 1 .7 1v.1l-.8 1-.7 1a1 1 0 0 0 0 .7 1 1 0 0 0 1.3.6c.2 0 .3-.2 1-1l.5-.7.6.8.7.8c.4.3 1 .3 1.3 0l.2-.3a1 1 0 0 0 0-.8l-.8-1.2-.7-1a26 26 0 0 0 1.5-2 .8.8 0 0 0 .1-.4c0-.4-.1-.7-.5-.9H20c-.4 0-.5 0-1.2.8l-.7.8-.6-.7-.7-.9a1 1 0 0 0-1 0Zm-9 2 .4.1c.3.1.6.5.7.8l.1.6v.6c-.6 1-2 1.2-2.7.3-.3-.3-.3-.5-.3-1v-.5c.3-.5.7-.8 1.1-1a1.5 1.5 0 0 1 .7 0Zm5.7 0c.4 0 .8.4 1 .8l.2.6-.1.7c-.5.9-1.6 1.1-2.4.6a1.4 1.4 0 0 1-.6-1.1 1.4 1.4 0 0 1 .5-1.2 1.5 1.5 0 0 1 1.4-.4Z"/></svg>',brightness:'<svg width="24" height="24"><path d="M12.7 18.3a1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v1a1 1 0 0 0 .3.7 1 1 0 0 0 .7.3 1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7v-1a1 1 0 0 0-.3-.7ZM11.3 5.7a1 1 0 0 0 .7.3 1 1 0 0 0 .7-.3A1 1 0 0 0 13 5V4a1 1 0 0 0-.3-.7A1 1 0 0 0 12 3a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v1a1 1 0 0 0 .3.7Zm9.4 5.6a1 1 0 0 0-.7-.3h-1a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.7 1 1 0 0 0 .7.3h1a1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7Zm-15 1.4A1 1 0 0 0 6 12a1 1 0 0 0-.3-.7A1 1 0 0 0 5 11H4a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.7 1 1 0 0 0 .7.3h1a1 1 0 0 0 .7-.3Zm13 4.6-.7-.8a1 1 0 0 0-.8-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.8l.7.7a1 1 0 0 0 .7.3 1 1 0 0 0 .8-.3 1 1 0 0 0 .3-.8 1 1 0 0 0-.3-.7ZM5.3 6.7l.7.8a1 1 0 0 0 .8.3 1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.8l-.7-.7A1 1 0 0 0 6 5a1 1 0 0 0-.8.3 1 1 0 0 0-.3.8 1 1 0 0 0 .3.6Zm12 1a1 1 0 0 0 .7-.2l.7-.7A1 1 0 0 0 19 6a1 1 0 0 0-.3-.8 1 1 0 0 0-.8-.3 1 1 0 0 0-.7.3l-.7.7a1 1 0 0 0-.3.8 1 1 0 0 0 .3.7 1 1 0 0 0 .7.2ZM6.7 16.4a1 1 0 0 0-.8.2l-.7.7a1 1 0 0 0-.3.7 1 1 0 0 0 .3.8 1 1 0 0 0 .8.3 1 1 0 0 0 .7-.3l.7-.7a1 1 0 0 0 .3-.8 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3Z"/><path fill-rule="evenodd" d="M13.6 8.3A4 4 0 0 0 12 8a4 4 0 0 0-1.6.3A4 4 0 0 0 9 9.5a4 4 0 0 0-.6 1A4 4 0 0 0 8 12c0 .6.1 1 .3 1.6a4 4 0 0 0 2.1 2 4 4 0 0 0 1.6.4 4 4 0 0 0 1.6-.3 4 4 0 0 0 2-2.1A4 4 0 0 0 16 12a4 4 0 0 0-.3-1.6 4 4 0 0 0-2.1-2ZM14 12a2 2 0 1 1-4 0 2 2 0 0 1 4 0Z"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',camera:'<svg height="24" width="24"><g clip-rule="evenodd" fill-rule="evenodd"><path d="M10 5.4a1 1 0 0 1 .8-.4h4.4a1 1 0 0 1 .8.4l1.2 1.8h2.3A2.5 2.5 0 0 1 22 9.6v8a2.5 2.5 0 0 1-2.5 2.5h-13A2.5 2.5 0 0 1 4 17.6v-8a2.5 2.5 0 0 1 2.5-2.4h2.3zM11.4 7l-1.2 1.7a1 1 0 0 1-.8.5h-3a.5.5 0 0 0-.4.4v8a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-8a.5.5 0 0 0-.5-.4h-2.9a1 1 0 0 1-.8-.5L14.6 7z"/><path d="M13 11.4a2 2 0 1 0 0 3.8 2 2 0 0 0 0-3.8zm-4 1.9a4 4 0 1 1 8 0 4 4 0 0 1-8 0z"/></g></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',caption:'<svg height="24" width="24"><path d="M6 16h8v-2H6zm10 0h2v-2h-2zM4 20a2 2 0 0 1-1.5-.6A2 2 0 0 1 2 18V6c0-.6.2-1 .6-1.4A2 2 0 0 1 4 4h16c.6 0 1 .2 1.4.6.4.4.6.9.6 1.4v12c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6zm0-2h16V6H4z"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',"checkmark-filled":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 2a10 10 0 1 1 0 20 10 10 0 0 1 0-20Zm4.8 5a1 1 0 0 0-1.4.3l-5.4 8-2-2.1a1 1 0 1 0-1.5 1.4l3 3a1 1 0 0 0 1.5-.2l6-9a1 1 0 0 0-.2-1.4Z"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',"close-filled":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 2a10 10 0 1 1 0 20 10 10 0 0 1 0-20Zm4.7 5.3a1 1 0 0 0-1.3 0L12 10.6 8.6 7.3a1 1 0 0 0-1.3 1.3l3.3 3.4-3.3 3.4a1 1 0 0 0 1.3 1.3l3.4-3.3 3.4 3.3a1 1 0 0 0 1.3-1.3L13.4 12l3.3-3.4a1 1 0 0 0 0-1.3Z"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24" class="color-swatch-remove-color"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 0 1 19.4 9c.4 1 .6 2 .6 3.1s-.2 2.1-.6 3.1a8 8 0 0 1-1.7 2.6 8 8 0 0 1-2.6 1.7 7.8 7.8 0 0 1-3.1.6 7.8 7.8 0 0 1-3.1-.6 8 8 0 0 1-2.6-1.7A8 8 0 0 1 4.6 15 7.8 7.8 0 0 1 4 12c0-1.1.2-2.1.6-3.1a8 8 0 0 1 1.7-2.6A8 8 0 0 1 9 4.6 7.8 7.8 0 0 1 12 4Zm-6 8a6 6 0 0 0 1.8 4.2 6 6 0 0 0 1.9 1.3 5.8 5.8 0 0 0 2.3.5V6c-.8 0-1.6.2-2.3.5a6 6 0 0 0-2 1.3 6 6 0 0 0-1.2 1.9A5.8 5.8 0 0 0 6 12Z"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-gear-properties":'<svg height="24" width="24"><path d="M17.3 14.5a7.1 7.1 0 0 1 1.2.6l1.5-.5 1 1.8-1.2 1V18.7l1.2 1-1 1.6-1.5-.4a4.5 4.5 0 0 1-.6.3 7.1 7.1 0 0 1-.6.3L17 23h-2l-.3-1.5a7.4 7.4 0 0 1-.6-.3 4.5 4.5 0 0 1-.6-.3l-1.5.5-1-1.8 1.2-1a3.9 3.9 0 0 1 0-.6v-.7l-1.2-1 1-1.6 1.5.4a4.5 4.5 0 0 1 1.2-.6L15 13h2zM16 16a2 2 0 0 0-1.5.6A1.9 1.9 0 0 0 14 18c0 .6.2 1 .6 1.4s1 .6 1.5.6 1-.2 1.5-.6.6-.8.6-1.4-.2-1-.6-1.4A2 2 0 0 0 16 16z" fill-rule="evenodd"/><path d="M19 7.6V12h-2V9h-4V5H7v14h3v2H7a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h7.4z"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',dropbox:'<svg height="24" width="24"><path clip-rule="evenodd" d="m6.4 9.3-3-2a1 1 0 0 1 0-1.6l4-2.5a1 1 0 0 1 1 0L12 5.5l3.6-2.3a1 1 0 0 1 1 0l4 2.5a1 1 0 0 1 0 1.7l-3 1.9 3 1.9a1 1 0 0 1 0 1.6l-2.9 1.9V16c0 .3-.1.6-.4.8l-4.5 3a1 1 0 0 1-1.2 0l-4.4-3a1 1 0 0 1-.5-.9v-1l-3.2-2.2a1 1 0 0 1 0-1.6zm3 0L12 7.5l2.6 1.8L12 11zM8.9 15v.4l3.3 2.3 3.4-2.3v-.2L12 13l-3.1 2zm-1-10-2 1.4 2 1.3 2-1.3zm8.2 0-2 1.4 2 1.3 2-1.3zm-2 6.9 2-1.3 2 1.3-2 1.3-2-1.3zm-8.3 0 2-1.3L10 12l-2 1.3-2-1.3z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',evernote:'<svg width="24" height="24"><path fill-rule="evenodd" d="m9.5 3-.3.1-2.6 2.6C3.8 8.5 4 8.2 4 8.7c0 1.3.3 3 .6 4.3.5 2 1.1 3.2 2 3.7l1.2.3c1 .2 1.5.2 2.2.2 1.3 0 1.7 0 2.2-.4.3-.2.3-.4.4-1a38.4 38.4 0 0 1 .3-.4l.3.1 1.8.1h1.6v-1.8H14l-.1-.2a6.8 6.8 0 0 1-.5-1c-.2-.4-.3-.6-.5-.7a.8.8 0 0 0-.5-.1.9.9 0 0 0-.8.5l-.4 1.6-.3 1.5H9.4l-2-.3a1 1 0 0 1-.1-.2A10.1 10.1 0 0 1 6 9.7v-.2h4l.5-.5V5H12c.4.2.7.7.8 1.1a1 1 0 0 0 .2.6c.2.2.3.2 1 .3 1.2 0 2 .2 2.5.6.4.2.8.7 1 1.2.3 1.2.5 4 .3 6.4 0 1.8-.4 3.4-.8 4h-.7a8 8 0 0 1-.8 0c-.2 0-.3-.3-.2-.5a.5.5 0 0 1 .4-.3h.9v-1.8H16c-.7 0-.9 0-1.2.2-.9.4-1.4 1.2-1.4 2.1l.1.4.1.2a1 1 0 0 1 .1.2c.3.7.8 1.2 1.4 1.3l1.2.1h1.2a2 2 0 0 0 1-.8 9 9 0 0 0 1.1-4.3c.2-3 0-6.3-.4-7.7A4.3 4.3 0 0 0 16 5.3a7 7 0 0 0-1.3-.2 7.2 7.2 0 0 1-.4 0 5.5 5.5 0 0 1 0-.3c-.2-.5-.6-1-1.2-1.4a3 3 0 0 0-.5-.2c-.4-.2-.5-.2-1.8-.2a26.5 26.5 0 0 0-1.3 0Zm-.8 4v.7H7.2l.7-.8.8-.7v.7Zm7 3.5c-.4 0-.7.5-.9 1v.7h.3c.7 0 1.1.2 1.5.6l.3.2.3-.6V11a1 1 0 0 0-.6-.4 2 2 0 0 0-.8 0Z" clip-rule="evenodd"/></svg>',"export-pdf":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H7v3H5V5c0-1.1.9-2 2-2Z"/><path d="M2.6 15.2v-1.9h1c.6 0 1-.2 1.4-.5.3-.3.5-.7.5-1.2s-.2-.9-.5-1.2a2 2 0 0 0-1.3-.4H1v5.2h1.6Zm.4-3h-.4v-1.1h.5l.6.1.2.5c0 .1 0 .3-.2.4l-.7.1Zm5.7 3 1-.1c.3 0 .5-.2.7-.4l.5-.8c.2-.3.2-.7.2-1.3v-1l-.5-.8c-.2-.3-.4-.5-.7-.6L8.7 10H6.3v5.2h2.4Zm-.4-1.1H8v-3h.4c.5 0 .8.2 1 .4l.2 1.1-.1 1-.3.3-.8.2Zm5.3 1.2V13h2v-1h-2v-1H16V10h-4v5.2h1.6Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"export-word":'<svg width="24" height="24"><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H5c0-1.1.9-2 2-2ZM15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',exposure:'<svg width="24" height="24"><path d="M5 21a2 2 0 0 1-1.4-.6A2 2 0 0 1 3 19V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5 3h14c.6 0 1 .2 1.4.6.4.4.6.8.6 1.4v14c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6H5Zm0-2h14V5L5 19Zm9.5-1v-2h-2v-1.5h2v-2H16v2h2V16h-2v2h-1.5ZM6 8.5h5V7H6v1.5Z"/></svg>',fb:'<svg width="24" height="24"><path fill-rule="evenodd" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-11 6.7V14H8.1v-2.5h2v-1C10 8.2 11.5 7 12.8 7H16v2.5h-2.4c-.8 0-1 .7-1 1.3v.7h3.2l-1 2.5h-2v5a7 7 0 1 0-2.8-.2Z" clip-rule="evenodd"/></svg>',feedback:'<svg width="24" height="24"><path fill-rule="evenodd" d="M16 6c1 0 2 1 2 2v5c0 1-1 2-2 2h-3l-4 3v-3H8c-1 0-2-1-2-2V8c0-1 1-2 2-2h8Zm-7 5v1h4v-1H9Zm0-2v1h6V9H9Z"/></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',flickr:'<svg width="24" height="24"><path d="M8.2 15.3c1.7 0 3.1-1.4 3.1-3.1A3.2 3.2 0 0 0 8.1 9 3.2 3.2 0 0 0 5 12.2c0 1.7 1.4 3 3.2 3Zm7.6 0c1.7 0 3.2-1.4 3.2-3.1a3.2 3.2 0 0 0-6.3 0c0 1.7 1.4 3 3.1 3Z"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',folder:'<svg width="24" height="24"><path fill-rule="evenodd" d="M5.6 6a.6.6 0 0 0-.6.6v11.2a.6.6 0 0 0 .6.6h12.8a.6.6 0 0 0 .6-.6V9a.6.6 0 0 0-.6-.6h-7.2a1 1 0 0 1-.8-.4L9 6H5.6ZM3.8 4.8A2.6 2.6 0 0 1 5.6 4h4a1 1 0 0 1 .8.4l1.3 2h6.7A2.6 2.6 0 0 1 21 9v8.8a2.6 2.6 0 0 1-2.6 2.6H5.6A2.6 2.6 0 0 1 3 17.8V6.6c0-.7.3-1.4.8-1.8Z" clip-rule="evenodd"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-code":'<svg width="24" height="24"><path d="m10 22 2-7H6l9-13h2l-2 8h7L12 22h-2ZM6 2h7l-1.4 2H6V2Zm4.2 4H4v2h4.8l1.4-2Zm-2.7 4H2v2h4l1.5-2Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg height="24" width="24"><path d="M11.5 16.3a.7.7 0 1 0 1.4 0V14l2.7-6a.7.7 0 1 0-1.2-.6l-2.2 5-2.3-4.9C9.6 7 8.7 7 8 7.2v1.1c.8-.2.9 0 1.2 1l2.3 4.7z"/><path d="M4 3h16a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1zm1 2h14v14H5z" fill-rule="evenodd"/></svg>',"google-drive":'<svg height="24" width="24"><path clip-rule="evenodd" d="M8.7 4.5a1 1 0 0 1 .9-.5h4.8a1 1 0 0 1 .9.5l5.6 9.7a1 1 0 0 1 0 1l-2.4 4.2a1 1 0 0 1-.9.5H6.4a1 1 0 0 1-.9-.5l-2.4-4.2a1 1 0 0 1 0-1zM10.2 6l-4.5 7.7h2.5L12.7 6h-2.5zm4.2 1 4.4 7.7-1.2 2.2-4.4-7.7zM12 11.2l-1.5 2.5h3zm2.6 4.5H5.7L7 17.9h8.9l-1.3-2.2z" fill-rule="evenodd"/></svg>',"google-photos":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12.4 3c-.8 0-1.4.7-1.4 1.4v3.2a5 5 0 0 0-8 4c0 .8.6 1.4 1.4 1.4h3.2a5 5 0 0 0-1 3 5 5 0 0 0 5 5c.8 0 1.4-.6 1.4-1.4v-3.2a5 5 0 0 0 8-4c0-.8-.7-1.4-1.4-1.4h-3.2a5 5 0 0 0-4-8Zm.6 8V5a3 3 0 0 1 2.4 3 3 3 0 0 1-2.4 3Zm-2 0H5a3 3 0 0 1 3-2.4 3 3 0 0 1 3 2.4Zm2 2a3 3 0 0 0 3 2.4 3 3 0 0 0 3-2.4h-6Zm-4.4 3a3 3 0 0 1 2.4-3v6a3 3 0 0 1-2.4-3Z" clip-rule="evenodd"/></svg>',grayscale:'<svg height="24" width="24"><path d="M3 5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2zm12.4 0H19v3.6zm-2.8 0h-2.2l8.6 8.6v-2.2zm-5 0H5l14 14v-2.6z" fill-rule="evenodd"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',huddle:'<svg height="24" width="24"><path d="M10.3 5.6V8h.8v-2l3.5 2 4.3-2.5L14.6 3l-4.3 2.6zM14.6 8v5.2l4.3-2.6V5.6L14.6 8zM6 13.3v2.5h.9v-2l3.4 2 4.3-2.5-4.3-2.6zm4.3 2.6V21l4.3-2.6v-5.1l-4.3 2.6z"/></svg>',"image-decorative":'<svg width="24" height="24"><path d="M12 10c.3 0 .5-.1.7-.3A1 1 0 0 0 13 9a1 1 0 0 0-.3-.7A1 1 0 0 0 12 8a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 1 1Zm0 6a3 3 0 0 1-1.8-.5A3 3 0 0 1 9.1 14a2 2 0 0 0-.2 0 3 3 0 0 1-2.5-1 3 3 0 0 1-.9-2.2A3 3 0 0 1 6.2 9a3.4 3.4 0 0 1-.5-1 3 3 0 0 1-.2-1 3 3 0 0 1 1-2.2A3 3 0 0 1 8.8 4H9a3 3 0 0 1 1.1-1.4A3 3 0 0 1 12 2a3 3 0 0 1 1.8.5c.5.4.9.9 1.1 1.5h.2a3 3 0 0 1 2.5.8 3 3 0 0 1 .9 2.3c0 .3 0 .7-.2 1a2.8 2.8 0 0 1-.5.9l.5 1 .2 1a3 3 0 0 1-1 2.2 3 3 0 0 1-2.4.9 1.8 1.8 0 0 0-.2 0 3 3 0 0 1-1.1 1.4 3 3 0 0 1-1.8.5Zm0 7a8.7 8.7 0 0 1 .7-3.5 9.2 9.2 0 0 1 2-2.8 9.2 9.2 0 0 1 2.8-2A8.6 8.6 0 0 1 21 14a8.6 8.6 0 0 1-.7 3.5 9.2 9.2 0 0 1-2 2.8 9.2 9.2 0 0 1-2.8 2 8.6 8.6 0 0 1-3.5.7Zm2.5-2.5a6.8 6.8 0 0 0 2.4-1.5 6.8 6.8 0 0 0 1.7-2.6c-1 .4-1.8 1-2.6 1.7a6.8 6.8 0 0 0-1.5 2.4ZM12 23a8.6 8.6 0 0 0-.7-3.5 9.2 9.2 0 0 0-2-2.9 9.2 9.2 0 0 0-2.8-1.9A8.6 8.6 0 0 0 3 14a8.7 8.7 0 0 0 .7 3.5 9.2 9.2 0 0 0 2 2.9 9.2 9.2 0 0 0 2.8 1.9 8.6 8.6 0 0 0 3.5.7Zm-2.5-2.5A6.8 6.8 0 0 1 7.2 19a6.8 6.8 0 0 1-1.6-2.6c.9.4 1.7 1 2.5 1.7a6.8 6.8 0 0 1 1.6 2.4Zm5.9-8.4c.3 0 .5-.1.8-.4.2-.2.3-.5.3-.8 0-.2 0-.4-.2-.6a1.3 1.3 0 0 0-.5-.4l-.8-.4a3 3 0 0 1-.2.5 3.8 3.8 0 0 1-.2.5 2.5 2.5 0 0 1-.3.4 4 4 0 0 1-.4.4l.8.6a.8.8 0 0 0 .3.1h.4ZM15 8.5l.8-.4.5-.4.2-.6a1.1 1.1 0 0 0-.3-.8 1 1 0 0 0-.8-.4 1.1 1.1 0 0 0-.7.2l-.8.6.4.4.3.4a3.9 3.9 0 0 1 .4 1Zm-4-2.3a2.7 2.7 0 0 1 1-.2 2.7 2.7 0 0 1 1 .2l.2-1.1c0-.3-.1-.6-.4-.8A1.2 1.2 0 0 0 12 4c-.3 0-.6.1-.8.3-.3.2-.4.5-.3.8v1.1Zm1 7.8c.3 0 .6-.1.8-.3.3-.2.4-.5.3-.8v-1.1a2.7 2.7 0 0 1-1.1.2 2.7 2.7 0 0 1-1-.2l-.2 1.1c0 .3.1.6.4.8.2.2.5.3.8.3ZM9 8.5a3 3 0 0 1 .4-1l.3-.4.4-.4-.8-.6A.9.9 0 0 0 9 6a1.2 1.2 0 0 0-.3 0c-.4 0-.6 0-.9.3a1.1 1.1 0 0 0-.3.8c0 .2 0 .4.2.6l.5.4.9.4Zm-.3 3.6H9l.3-.2.8-.6a5.5 5.5 0 0 1-.4-.4 2.1 2.1 0 0 1-.3-.4 3.8 3.8 0 0 1-.2-.5 3 3 0 0 1-.1-.5l-1 .4-.4.4a1.1 1.1 0 0 0-.2.6c0 .3.2.6.4.8.2.2.4.4.7.4Z"/></svg>',"image-enhancements":'<svg height="24" width="24"><path d="M5.3 21a2 2 0 0 1-1.5-.6 2 2 0 0 1-.6-1.4V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5.2 3H13v2H5.2v14h14v-8h2v8c0 .6-.1 1-.5 1.4a2 2 0 0 1-1.4.6z"/><path d="M11 9a4 4 0 0 0 4 4 4 4 0 0 0-4 4 4 4 0 0 0-4-4 4 4 0 0 0 4-4zm5.5-6c.2 2.1 2.2 4.1 4.5 4.5-2.3.4-4.3 2.4-4.5 4.5A5.2 5.2 0 0 0 12 7.5 5.2 5.2 0 0 0 16.5 3z"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',"import-word":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V15h-2V9h-4V5H5c0-1.1.9-2 2-2Z"/><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.4 18.2a1 1 0 0 0 1.2 1.6l1.4-1V22a1 1 0 1 0 2 0v-3.1l1.4 1a1 1 0 0 0 1.2-1.7L15 15.8l-3.6 2.4Z"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',instagram:'<svg height="24" width="24"><path clip-rule="evenodd" d="M10.1 9a4 4 0 1 1 4.4 6.6A4 4 0 0 1 10.1 9zm2.2 1.3a2 2 0 1 0 0 4 2 2 0 0 0 0-4z" fill-rule="evenodd"/><path d="M16 9.3a1.3 1.3 0 1 0 0-2.6 1.3 1.3 0 0 0 0 2.6z"/><path clip-rule="evenodd" d="M3 6a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v12a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3zm3-1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1z" fill-rule="evenodd"/></svg>',invert:'<svg height="24" width="24"><path d="M5 4 3.6 5.4l3.9 4C6.6 10.7 6 12.3 6 14a6 6 0 0 0 10.3 4.2l1.9 1.8 1.4-1.4z" fill-rule="evenodd"/><path d="M13.4 8.4c.9 1 1.6 2.1 2 3.2l2.6 2.6V14c0-5-6-10-6-10s-1 .8-2.1 2l1.4 1.5.7-.7 1.4 1.6z"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg height="48" width="48"><path d="M8 14a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM8 24a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM8 34a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0z" fill-rule="evenodd"/><path d="M18 12h22v4H18zm0 10h22v4H18zm0 10h22v4H18z" opacity=".2"/></svg>',"list-bull-default":'<svg height="48" width="48"><path d="M14 14a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/><path d="M12 24a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0z" fill-rule="evenodd"/><path d="M16 31h6v6h-6z"/><path d="M16 31h6v6h-6z"/><path d="M18 12h22v4H18zm4 10h18v4H22zm4 10h14v4H26z" opacity=".2"/></svg>',"list-bull-disc":'<svg height="48" width="48"><path d="M14 14a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm0 10a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm0 10a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/><path d="M18 12h22v4H18zm0 10h22v4H18zm0 10h22v4H18z" opacity=".2"/></svg>',"list-bull-square":'<svg height="48" width="48"><path d="M8 21h6v6H8zm0 10h6v6H8zm0-20h6v6H8z"/><path d="M18 12h22v4H18zm0 10h22v4H18zm0 10h22v4H18z" opacity=".2"/></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',"math-equation":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 4.8c.1-.5.5-.8 1-.8h10a1 1 0 1 1 0 2h-9.2L8.3 19.2a1 1 0 0 1-1.7.4l-3.4-4.2a1 1 0 0 1 1.6-1.2l2 2.5L9 4.8Zm9.7 5.5c.4.4.4 1 0 1.4L17 13.5l1.8 1.8a1 1 0 1 1-1.4 1.4L15.5 15l-1.8 1.8a1 1 0 0 1-1.4-1.4l1.8-1.8-1.8-1.8a1 1 0 0 1 1.4-1.4l1.8 1.8 1.8-1.8a1 1 0 0 1 1.4 0Z"/></svg>',mentions:'<svg height="24" width="24"><path d="M12 21a8.8 8.8 0 0 1-3.5-.7 9 9 0 0 1-2.9-2 9 9 0 0 1-1.9-2.8A8.8 8.8 0 0 1 3 12c0-1.3.2-2.4.7-3.5a9 9 0 0 1 4.8-4.8A8.8 8.8 0 0 1 12 3c1.3 0 2.4.2 3.5.7a9.1 9.1 0 0 1 4.8 4.8A8.7 8.7 0 0 1 21 12v1.4a3 3 0 0 1-.9 2.2 3 3 0 0 1-2.2.9c-.5 0-1-.1-1.5-.4a3.8 3.8 0 0 1-1.1-1 4.8 4.8 0 0 1-1.5 1 4.3 4.3 0 0 1-1.8.4c-1.2 0-2.3-.4-3.2-1.3-.9-.9-1.3-2-1.3-3.2s.4-2.3 1.3-3.2c.9-.9 2-1.3 3.2-1.3s2.3.4 3.2 1.3c.9.9 1.3 2 1.3 3.2v1.4c0 .4.1.7.4 1 .3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1V12c0-2-.7-3.8-2.1-5.2S14 4.7 12 4.7s-3.8.7-5.2 2.1S4.7 10 4.7 12s.7 3.8 2.1 5.2 3.2 2.1 5.2 2.1h4.5V21zm0-6.2c.8 0 1.4-.3 2-.8a2.7 2.7 0 0 0 .8-2c0-.8-.3-1.4-.8-2a2.7 2.7 0 0 0-2-.8c-.8 0-1.4.3-2 .8a2.7 2.7 0 0 0-.8 2c0 .8.3 1.4.8 2a2.7 2.7 0 0 0 2 .8z"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',onedrive:'<svg height="24" width="24"><path d="M4 13.7h1zm16 .7h-1zm-11.7-4A4.4 4.4 0 0 1 12.1 8V6a6.4 6.4 0 0 0-5.6 3.4l1.8 1zM12.1 8c2 0 3.6 1.4 4 2.8l2-.5A6.3 6.3 0 0 0 12 6v2zm8.1 6.8-9.8-5.5-1 1.8 9.8 5.5 1-1.8zm-9.8-5.5A5 5 0 0 0 3 13.7h2A3 3 0 0 1 9.5 11l1-1.8zM3 13.7a5 5 0 0 0 1 2.8l1.5-1.1a3 3 0 0 1-.5-1.7zm15.8 1.6a2.3 2.3 0 0 1-2 1.4v2a4.3 4.3 0 0 0 3.9-2.6zm-2 1.4H8v2h8.7zm-8.8 0a3 3 0 0 1-2.5-1.3L4 16.5a5 5 0 0 0 4 2.2v-2zm12.7-.6c.2-.6.3-1.1.3-1.7h-2c0 .3 0 .6-.2.9zm.3-1.7c0-3-3.1-5.1-6-4l.8 1.9a2.3 2.3 0 0 1 3.2 2h2zm-6-4L4.4 15l.8 1.9 10.7-4.6-.7-1.8z"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',"photo-filter":'<svg height="24" width="24"><path d="M4.4 21c-.3 0-.6-.2-.9-.5-.3-.3-.4-.6-.5-.9L19.6 3c.3 0 .6.3.9.5l.5.9zM3 14.7v-2.8L11.9 3h2.8zM3 7V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5 3h2zm14 14 4-4v2c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6zm-7.7 0L21 9.3v2.8L12 21z"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"revert-changes":'<svg height="24" width="24"><path d="m8.9 18.8.4 3.2H13v-2h-2v-2.6a4.6 4.6 0 0 1-1.6-.6 5.9 5.9 0 0 1-1.3-1l-2.5 1-1-1.7 2.2-1.6a4 4 0 0 1-.2-.7 5.9 5.9 0 0 1 0-.8v-.8l.2-.8-2.2-1.6 1-1.7 2.5 1a6 6 0 0 1 1.2-.9l1.4-.6.4-2.6h2l.3 2.6A5.6 5.6 0 0 1 16 8.2l2.5-1 1 1.6-2.2 1.7.2.7v.8a5 5 0 0 1 0 1h2a2.6 2.6 0 0 0 0-.5V11.3l2.6-2-2.8-4.7-3 1.3a8.2 8.2 0 0 0-.5-.4 3.8 3.8 0 0 0-.6-.3L14.8 2H9.3l-.4 3.2a5 5 0 0 0-1.2.7l-3-1.3L2 9.4l2.6 2V12.6l-2.6 2 2.7 4.7 3-1.3a8 8 0 0 0 1.2.7z"/><path d="m14.5 20.3 2.1-2-2.1-2.2 1.4-1.4 2.1 2.1 2.1-2 1.4 1.3-2 2.1 2 2.1-1.4 1.4-2.1-2-2.1 2zM12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/></svg>',"revision-history":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',saturation:'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 20.5a6 6 0 1 1-5.9-10.2 6 6 0 1 1 11.8 0A6 6 0 1 1 12 20.5Zm-1.1-7.7a6 6 0 0 0-.2.3 4.3 4.3 0 0 1-2-1.3c.9.1 1.6.5 2.2 1Zm2.4.3a6 6 0 0 0-.2-.3 4.3 4.3 0 0 1 2.2-1 4.3 4.3 0 0 1-2 1.3ZM12.2 15a6.3 6.3 0 0 1-.4 0 4.3 4.3 0 0 0 .2 2.5 4.3 4.3 0 0 0 .2-2.5Zm.9 4.2a6 6 0 0 0 .8-4.5 6 6 0 0 0 3.4-2.8 4.3 4.3 0 0 1-1.3 8.4 4.3 4.3 0 0 1-2.9-1.1Zm-2.2 0a4.3 4.3 0 1 1-4.2-7.3 6 6 0 0 0 3.4 2.8 6 6 0 0 0 .8 4.5Zm-3-9.2a4.3 4.3 0 1 1 8.3 0 6 6 0 0 0-4.2 1.5A6 6 0 0 0 7.8 10Z"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path fill-rule="evenodd" d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',"suggestededits-badge":'<svg height="24" width="24"><path d="M11 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V9.7a6 6 0 0 1-2 .3v9H7V5h4a6 6 0 0 1 0-2z"/><path d="M15 13v-2h-4v2zm-3 2H9v2h3zm-1-8H9v2h2zm4 10v-2h-2v2z"/><path d="M21 4a4 4 0 1 1-8 0 4 4 0 0 1 8 0z" class="tox-icon--badge"/></svg>',suggestededits:'<svg width="24" height="24"><path d="M7 3h7.4L19 7.6V19a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2Zm0 16h10V9h-3V5H7v14Z" clip-rule="evenodd"/><path d="M9 7h2v2H9V7Zm2 4h4v2h-4v-2Zm-2 4h3v2H9v-2Z"/><path d="M9 7h2v2H9V7Zm4 8h2v2h-2v-2Z"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"transform-image":'<svg height="24" width="24"><path d="M3 21v-6h2V9H3V3h6v2h6V3h6v6h-2v6h2v6h-6v-2H9v2zm6-4h6v-2h2V9h-2V7H9v2H7v6h2zM5 7h2V5H5zm12 0h2V5h-2zm0 12h2v-2h-2zM5 19h2v-2H5z"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',"upload-from-device":'<svg width="24" height="25"><path d="M11 19a1 1 0 1 0 2 0v-3.2l1.5 1a1 1 0 1 0 1-1.7L12 12.8l-3.5 2.3a1 1 0 0 0 1 1.7l1.5-1V19Z"/><path d="M9.6 4c.3 0 .6.2.8.5l1.3 2h6.7c.7 0 1.4.2 1.8.7.5.5.8 1.2.8 1.9v8.3c0 .7-.3 1.3-.8 1.8a2.6 2.6 0 0 1-1.8.8H16v-2h2.4a.6.6 0 0 0 .4-.2.6.6 0 0 0 .2-.4V9a.6.6 0 0 0-.2-.5.6.6 0 0 0-.4-.1h-7.2a1 1 0 0 1-.8-.5L9 6H5.6a.6.6 0 0 0-.4.2.6.6 0 0 0-.2.4v10.8c0 .1 0 .3.2.4a.6.6 0 0 0 .4.2H8v2H5.6a2.6 2.6 0 0 1-1.8-.8 2.7 2.7 0 0 1-.8-1.8V6.6c0-.7.3-1.3.8-1.8A2.6 2.6 0 0 1 5.6 4h4Z"/></svg>',"upload-from-link":'<svg height="25" width="24"><path d="M11.5 11.8a1 1 0 0 1 1.9-.5 5 5 0 0 1-1.3 4.8l-2.4 2.3A4 4 0 1 1 4 13L5 12a1 1 0 0 1 1.4 1.4l-.7.8A2 2 0 1 0 8.3 17l2.4-2.4a3 3 0 0 0 .8-2.8z"/><path d="M10.1 11.8a1 1 0 0 1-2 .5 5 5 0 0 1 1.4-4.8L12 5.1a4 4 0 0 1 5.5 5.6l-.7.8a1 1 0 0 1-1.5-1.4l.8-.8a2 2 0 1 0-2.7-2.7l-2.4 2.3a3 3 0 0 0-.8 3zm5.7 7.2a1 1 0 1 0 2 0v-3l1.4 1.1a1 1 0 0 0 1.2-1.5l-3.6-2.9-3.6 2.9a1 1 0 0 0 1.2 1.5l1.4-1z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',vibrance:'<svg height="24" width="24"><path d="M12 20 22 4H2zm2.6-8 1.3-2H8l1.3 2h5.2zm-1.2 2h-2.8l1.4 2.2zm5-8L17 8H7L5.6 6h12.8z" fill-rule="evenodd"/></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',vk:'<svg width="24" height="24"><path fill-rule="evenodd" d="M14.8 17.4a2 2 0 0 1-1.3.7 8 8 0 0 1-7.7-3.6c-1.4-2-2.2-4.4-2.6-5.7L3 8.6A2 2 0 0 1 5 6h2.5c.4 0 .8.1 1.2.4A2 2 0 0 1 9.8 6h3.5a2 2 0 0 1 1.4.6 2 2 0 0 1 1.5-.6h2.4a2 2 0 0 1 2 2.5c-.5 1.5-1.2 2.6-1.8 3.6a12.5 12.5 0 0 1 2 3.2A2 2 0 0 1 19 18h-2.6a2 2 0 0 1-1.3-.5 6.9 6.9 0 0 1-.3-.2Zm.5-2.5-1.2-1a3 3 0 0 0-.8-.2v2.4h-1.7a5.6 5.6 0 0 1-.3 0c-3-.7-4.7-3.7-5.6-6.1A38.1 38.1 0 0 1 5 8.1V8h2.5a80.5 80.5 0 0 1 1.2 2.5c.6 1.2 1.2 2 2 2.1V9l-.9-1h3.5v4.1a5 5 0 0 0 .4-.3c.7-.7 1.2-1.4 1.6-2.2l.2-.3.7-1.3h2.4a8.5 8.5 0 0 1-.8 2l-1.3 2-.3.3a10.5 10.5 0 0 1 2.8 3.8h-2.6l-.8-.9a20.6 20.6 0 0 0-.3-.3Z" clip-rule="evenodd"/></svg>',warmth:'<svg height="24" width="24"><path d="M12 21.1c-1.4 0-2.6-.5-3.6-1.5s-1.5-2.1-1.5-3.5c0-.8.2-1.6.6-2.2A5 5 0 0 1 8.9 12v-6c0-.8.3-1.5 1-2.1a2.9 2.9 0 0 1 2-.9c.9 0 1.6.3 2.2.9.5.6.8 1.3.8 2.1v6a5 5 0 0 1 1.5 1.8A4.9 4.9 0 0 1 17 16c0 1.4-.5 2.6-1.4 3.5s-2.2 1.5-3.6 1.5zm-3-5h6c0-.5-.2-1-.4-1.4a3 3 0 0 0-.9-1l-.8-.6v-7a1 1 0 0 0-.3-.7A1 1 0 0 0 12 5a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v7l-.8.6a2.9 2.9 0 0 0-.9 1 3 3 0 0 0-.3 1.4z"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});(function(){const k=Object.getPrototypeOf,F=(n,s,a)=>{var i;return a(n,s.prototype)?!0:((i=n.constructor)==null?void 0:i.name)===s.name},$=n=>{const s=typeof n;return n===null?"null":s==="object"&&Array.isArray(n)?"array":s==="object"&&F(n,String,(a,i)=>i.isPrototypeOf(a))?"string":s},Q=n=>s=>$(s)===n,ue=n=>s=>typeof s===n,ye=n=>s=>n===s,re=(n,s)=>we(n)&&F(n,s,(a,i)=>k(a)===i),be=Q("string"),we=Q("object"),nt=n=>re(n,Object),xt=Q("array"),_t=ye(null),rn=ue("boolean"),zt=ye(void 0),In=n=>n==null,jt=n=>!In(n),et=ue("function"),dn=ue("number"),Yn=(n,s)=>{if(xt(n)){for(let a=0,i=n.length;a<i;++a)if(!s(n[a]))return!1;return!0}return!1},U=()=>{},At=n=>()=>n(),wn=(n,s)=>(...a)=>n(s.apply(null,a)),Yt=(n,s)=>a=>n(s(a)),ie=n=>()=>n,Et=n=>n,Je=(n,s)=>n===s;function Le(n,...s){return(...a)=>{const i=s.concat(a);return n.apply(null,i)}}const de=n=>s=>!n(s),X=n=>()=>{throw new Error(n)},Fn=n=>n(),Cn=ie(!1),yt=ie(!0),Uu=class Uu{constructor(s,a){Ze(this,"tag");Ze(this,"value");this.tag=s,this.value=a}static some(s){return new Uu(!0,s)}static none(){return Uu.singletonNone}fold(s,a){return this.tag?a(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?Uu.some(s(this.value)):Uu.none()}bind(s){return this.tag?s(this.value):Uu.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:Uu.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s??"Called getOrDie on None")}static from(s){return jt(s)?Uu.some(s):Uu.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}};Ze(Uu,"singletonNone",new Uu(!1));let T=Uu;const bo=Array.prototype.slice,qe=Array.prototype.indexOf,Fo=Array.prototype.push,an=(n,s)=>qe.call(n,s),ze=(n,s)=>{const a=an(n,s);return a===-1?T.none():T.some(a)},vo=(n,s)=>an(n,s)>-1,Qs=(n,s)=>{for(let a=0,i=n.length;a<i;a++){const d=n[a];if(s(d,a))return!0}return!1},Xo=(n,s)=>{const a=[];for(let i=0;i<n;i++)a.push(s(i));return a},er=(n,s)=>{const a=[];for(let i=0;i<n.length;i+=s){const d=bo.call(n,i,i+s);a.push(d)}return a},$e=(n,s)=>{const a=n.length,i=new Array(a);for(let d=0;d<a;d++){const g=n[d];i[d]=s(g,d)}return i},gt=(n,s)=>{for(let a=0,i=n.length;a<i;a++){const d=n[a];s(d,a)}},B=(n,s)=>{for(let a=n.length-1;a>=0;a--){const i=n[a];s(i,a)}},Qc=(n,s)=>{const a=[],i=[];for(let d=0,g=n.length;d<g;d++){const h=n[d];(s(h,d)?a:i).push(h)}return{pass:a,fail:i}},Co=(n,s)=>{const a=[];for(let i=0,d=n.length;i<d;i++){const g=n[i];s(g,i)&&a.push(g)}return a},gs=(n,s,a)=>(B(n,(i,d)=>{a=s(a,i,d)}),a),Po=(n,s,a)=>(gt(n,(i,d)=>{a=s(a,i,d)}),a),Yr=(n,s,a)=>{for(let i=0,d=n.length;i<d;i++){const g=n[i];if(s(g,i))return T.some(g);if(a(g,i))break}return T.none()},Ce=(n,s)=>Yr(n,s,Cn),Ge=(n,s)=>{for(let a=0,i=n.length;a<i;a++){const d=n[a];if(s(d,a))return T.some(a)}return T.none()},Ue=n=>{const s=[];for(let a=0,i=n.length;a<i;++a){if(!xt(n[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+n);Fo.apply(s,n[a])}return s},ne=(n,s)=>Ue($e(n,s)),Vn=(n,s)=>{for(let a=0,i=n.length;a<i;++a){const d=n[a];if(s(d,a)!==!0)return!1}return!0},De=n=>{const s=bo.call(n,0);return s.reverse(),s},ge=(n,s)=>Co(n,a=>!vo(s,a)),Qt=(n,s)=>{const a={};for(let i=0,d=n.length;i<d;i++){const g=n[i];a[String(g)]=s(g,i)}return a},xn=n=>[n],kn=(n,s)=>{const a=bo.call(n,0);return a.sort(s),a},pr=(n,s)=>s>=0&&s<n.length?T.some(n[s]):T.none(),To=n=>pr(n,0),qu=n=>pr(n,n.length-1),S2=et(Array.from)?Array.from:n=>bo.call(n),ic=(n,s)=>{for(let a=0;a<n.length;a++){const i=s(n[a],a);if(i.isSome())return i}return T.none()},mo=Object.keys,ul=Object.hasOwnProperty,Cs=(n,s)=>{const a=mo(n);for(let i=0,d=a.length;i<d;i++){const g=a[i],h=n[g];s(h,g)}},Ds=(n,s)=>tf(n,(a,i)=>({k:i,v:s(a,i)})),tf=(n,s)=>{const a={};return Cs(n,(i,d)=>{const g=s(i,d);a[g.k]=g.v}),a},ou=n=>(s,a)=>{n[a]=s},Ea=(n,s,a,i)=>{Cs(n,(d,g)=>{(s(d,g)?a:i)(d,g)})},Vs=(n,s)=>{const a={},i={};return Ea(n,s,ou(a),ou(i)),{t:a,f:i}},Tr=(n,s)=>{const a={};return Ea(n,s,ou(a),U),a},Mr=(n,s)=>{const a=[];return Cs(n,(i,d)=>{a.push(s(i,d))}),a},ki=(n,s)=>{const a=mo(n);for(let i=0,d=a.length;i<d;i++){const g=a[i],h=n[g];if(s(h,g,n))return T.some(h)}return T.none()},_i=n=>Mr(n,Et),It=(n,s)=>So(n,s)?T.from(n[s]):T.none(),So=(n,s)=>ul.call(n,s),Bn=(n,s)=>So(n,s)&&n[s]!==void 0&&n[s]!==null,lc={generate:n=>{if(!xt(n))throw new Error("cases must be an array");if(n.length===0)throw new Error("there must be at least one case");const s=[],a={};return gt(n,(i,d)=>{const g=mo(i);if(g.length!==1)throw new Error("one and only one name per case");const h=g[0],C=i[h];if(a[h]!==void 0)throw new Error("duplicate key detected:"+h);if(h==="cata")throw new Error("cannot have a case named cata (sorry)");if(!xt(C))throw new Error("case arguments must be an array");s.push(h),a[h]=(...S)=>{const x=S.length;if(x!==C.length)throw new Error("Wrong number of arguments to case "+h+". Expected "+C.length+" ("+C+"), got "+x);return{fold:(...R)=>{if(R.length!==n.length)throw new Error("Wrong number of arguments to fold. Expected "+n.length+", got "+R.length);return R[d].apply(null,S)},match:R=>{const P=mo(R);if(s.length!==P.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+P.join(","));if(!Vn(s,Z=>vo(P,Z)))throw new Error("Not all branches were specified when using match. Specified: "+P.join(", ")+`
Required: `+s.join(", "));return R[h].apply(null,S)},log:R=>{console.log(R,{constructors:s,constructor:h,params:S})}}}}),a}},Bt=n=>{let s=n;return{get:()=>s,set:d=>{s=d}}},Ku=n=>{let s=T.none(),a=[];const i=x=>Ku(A=>{d(R=>{A(x(R))})}),d=x=>{h()?S(x):a.push(x)},g=x=>{h()||(s=T.some(x),C(a),a=[])},h=()=>s.isSome(),C=x=>{gt(x,S)},S=x=>{s.each(A=>{setTimeout(()=>{x(A)},0)})};return n(g),{get:d,map:i,isReady:h}},nf={nu:Ku,pure:n=>Ku(s=>{s(n)})},dl=n=>{setTimeout(()=>{throw n},0)},ei=n=>{const s=S=>{n().then(S,dl)};return{map:S=>ei(()=>n().then(S)),bind:S=>ei(()=>n().then(x=>S(x).toPromise())),anonBind:S=>ei(()=>n().then(()=>S.toPromise())),toLazy:()=>nf.nu(s),toCached:()=>{let S=null;return ei(()=>(S===null&&(S=n()),S))},toPromise:n,get:s}},Ss={nu:n=>ei(()=>new Promise(n)),pure:n=>ei(()=>Promise.resolve(n))},i0=n=>{const s=g=>g(n),a=ie(n),i=()=>d,d={tag:!0,inner:n,fold:(g,h)=>h(n),isValue:yt,isError:Cn,map:g=>Xt.value(g(n)),mapError:i,bind:s,exists:s,forall:s,getOr:a,or:i,getOrThunk:a,orThunk:i,getOrDie:a,each:g=>{g(n)},toOptional:()=>T.some(n)};return d},Jh=n=>{const s=()=>a,a={tag:!1,inner:n,fold:(i,d)=>i(n),isValue:Cn,isError:yt,map:s,mapError:i=>Xt.error(i(n)),bind:s,exists:Cn,forall:yt,getOr:Et,or:Et,getOrThunk:Fn,orThunk:Fn,getOrDie:X(String(n)),each:U,toOptional:T.none};return a},Xt={value:i0,error:Jh,fromOption:(n,s)=>n.fold(()=>Jh(s),i0)},uc=n=>({...n,toCached:()=>uc(n.toCached()),bindFuture:S=>uc(n.bind(x=>x.fold(A=>Ss.pure(Xt.error(A)),A=>S(A)))),bindResult:S=>uc(n.map(x=>x.bind(S))),mapResult:S=>uc(n.map(x=>x.map(S))),mapError:S=>uc(n.map(x=>x.mapError(S))),foldResult:(S,x)=>n.map(A=>A.fold(S,x)),withTimeout:(S,x)=>uc(Ss.nu(A=>{let R=!1;const P=setTimeout(()=>{R=!0,A(Xt.error(x()))},S);n.get(z=>{R||(clearTimeout(P),A(z))})}))}),Xd=n=>uc(Ss.nu(n)),w2=n=>uc(Ss.pure(Xt.value(n))),dg={nu:Xd,wrap:uc,pure:w2,value:w2,error:n=>uc(Ss.pure(Xt.error(n))),fromResult:n=>uc(Ss.pure(n)),fromFuture:n=>uc(n.map(Xt.value)),fromPromise:n=>Xd(s=>{n.then(a=>{s(Xt.value(a))},a=>{s(Xt.error(a))})})},ep=typeof window<"u"?window:Function("return this;")(),Yu=(n,s,a,i)=>{const d=n+s;return d>i?a:d<a?i:d},Xr=(n,s,a)=>Math.min(Math.max(n,s),a),tp=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let E2=0;const Ct=n=>{const a=new Date().getTime(),i=Math.floor(tp()*1e9);return E2++,n+"_"+i+E2+String(a)},Bc=(n,s)=>s,mg=(n,s)=>nt(n)&&nt(s)?$o(n,s):s,fg=n=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const a={};for(let i=0;i<s.length;i++){const d=s[i];for(const g in d)So(d,g)&&(a[g]=n(a[g],d[g]))}return a},$o=fg(mg),gg=fg(Bc),ti=(n,s,a=Je)=>n.exists(i=>a(i,s)),tr=(n,s,a=Je)=>ni(n,s,a).getOr(n.isNone()&&s.isNone()),Xu=n=>{const s=[],a=i=>{s.push(i)};for(let i=0;i<n.length;i++)n[i].each(a);return s},np=n=>{const s=[];for(let a=0;a<n.length;a++){const i=n[a];if(i.isSome())s.push(i.getOrDie());else return T.none()}return T.some(s)},ni=(n,s,a)=>n.isSome()&&s.isSome()?T.some(a(n.getOrDie(),s.getOrDie())):T.none(),Ta=(n,s,a,i)=>n.isSome()&&s.isSome()&&a.isSome()?T.some(i(n.getOrDie(),s.getOrDie(),a.getOrDie())):T.none(),su=(n,s)=>n!=null?T.some(s(n)):T.none(),dc=(n,s)=>n?T.some(s):T.none(),Pw=n=>n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),T2=(n,s)=>{let a=s??ep;for(let i=0;i<n.length&&a!==void 0&&a!==null;++i)a=a[n[i]];return a},oi=(n,s)=>{const a=n.split(".");return T2(a,s)};lc.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const l0=n=>{const s=[],a=[];return gt(n,i=>{i.fold(d=>{s.push(d)},d=>{a.push(d)})}),{errors:s,values:a}},ru=n=>{const s=Bt(T.none()),a=()=>s.get().each(n);return{clear:()=>{a(),s.set(T.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:C=>{a(),s.set(T.some(C))}}},u0=()=>ru(n=>n.destroy()),Us=()=>ru(n=>n.unbind()),pn=()=>{const n=ru(U);return{...n,on:a=>n.get().each(a)}},ga=(n,s)=>n+s,ka=(n,s)=>n.substring(s),ws=(n,s,a)=>s===""||n.length>=s.length&&n.substr(a,a+s.length)===s,op=(n,s)=>pg(n,s)?ka(n,s.length):n,hg=(n,s)=>fl(n,s)?n:ga(n,s),xs=(n,s,a=0,i)=>{const d=n.indexOf(s,a);return d!==-1?zt(i)?!0:d+s.length<=i:!1},pg=(n,s)=>ws(n,s,0),fl=(n,s)=>ws(n,s,n.length-s.length),pt=(n=>s=>s.replace(n,""))(/^\s+|\s+$/g),Jd=n=>n.length>0,mc=n=>!Jd(n),of=n=>{const s=parseFloat(n);return isNaN(s)?T.none():T.some(s)},Zs=(n,s)=>{let a=null,i=null;return{cancel:()=>{_t(a)||(clearTimeout(a),a=null,i=null)},throttle:(...h)=>{i=h,_t(a)&&(a=setTimeout(()=>{const C=i;a=null,i=null,n.apply(null,C)},s))}}},_2=(n,s)=>{let a=null;return{cancel:()=>{_t(a)||(clearTimeout(a),a=null)},throttle:(...g)=>{_t(a)&&(a=setTimeout(()=>{a=null,n.apply(null,g)},s))}}},gl=(n,s)=>{let a=null;const i=()=>{_t(a)||(clearTimeout(a),a=null)};return{cancel:i,throttle:(...g)=>{i(),a=setTimeout(()=>{a=null,n.apply(null,g)},s)}}},Ai=n=>{let s=!1,a;return(...i)=>(s||(s=!0,a=n.apply(null,i)),a)},d0="\uFEFF",m0=" ",Ju=(n,s)=>{const i=(s||document).createElement("div");if(i.innerHTML=n,!i.hasChildNodes()||i.childNodes.length>1){const d="HTML does not have a single root node";throw console.error(d,n),new Error(d)}return Qu(i.childNodes[0])},f0=(n,s)=>{const i=(s||document).createElement(n);return Qu(i)},bg=(n,s)=>{const i=(s||document).createTextNode(n);return Qu(i)},Qu=n=>{if(n==null)throw new Error("Node cannot be null or undefined");return{dom:n}},at={fromHtml:Ju,fromTag:f0,fromText:bg,fromDom:Qu,fromPoint:(n,s,a)=>T.from(n.dom.elementFromPoint(s,a)).map(Qu)},vg=(n,s)=>{s.fold(a=>{n.setStartBefore(a.dom)},(a,i)=>{n.setStart(a.dom,i)},a=>{n.setStartAfter(a.dom)})},sp=(n,s)=>{s.fold(a=>{n.setEndBefore(a.dom)},(a,i)=>{n.setEnd(a.dom,i)},a=>{n.setEndAfter(a.dom)})},hl=(n,s,a)=>{const i=n.document.createRange();return vg(i,s),sp(i,a),i},yg=(n,s,a,i,d)=>{const g=n.document.createRange();return g.setStart(s.dom,a),g.setEnd(i.dom,d),g},Cg=n=>({left:n.left,top:n.top,right:n.right,bottom:n.bottom,width:n.width,height:n.height}),fc=n=>{const s=n.getClientRects(),a=s.length>0?s[0]:n.getBoundingClientRect();return a.width>0||a.height>0?T.some(a).map(Cg):T.none()},Sg=n=>{const s=n.getBoundingClientRect();return s.width>0||s.height>0?T.some(s).map(Cg):T.none()},Qd=lc.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),em=(n,s,a)=>s(at.fromDom(a.startContainer),a.startOffset,at.fromDom(a.endContainer),a.endOffset),Io=(n,s)=>s.match({domRange:a=>({ltr:ie(a),rtl:T.none}),relative:(a,i)=>({ltr:Ai(()=>hl(n,a,i)),rtl:Ai(()=>T.some(hl(n,i,a)))}),exact:(a,i,d,g)=>({ltr:Ai(()=>yg(n,a,i,d,g)),rtl:Ai(()=>T.some(yg(n,d,g,a,i)))})}),wg=(n,s)=>{const a=s.ltr();return a.collapsed?s.rtl().filter(d=>d.collapsed===!1).map(d=>Qd.rtl(at.fromDom(d.endContainer),d.endOffset,at.fromDom(d.startContainer),d.startOffset)).getOrThunk(()=>em(n,Qd.ltr,a)):em(n,Qd.ltr,a)},xg=(n,s)=>{const a=Io(n,s);return wg(n,a)},Eg=(n,s)=>xg(n,s).match({ltr:(i,d,g,h)=>{const C=n.document.createRange();return C.setStart(i.dom,d),C.setEnd(g.dom,h),C},rtl:(i,d,g,h)=>{const C=n.document.createRange();return C.setStart(g.dom,h),C.setEnd(i.dom,d),C}});Qd.ltr,Qd.rtl;const g0=9,ed=11,si=1,h0=3,au=(n,s)=>{const a=n.dom;if(a.nodeType!==si)return!1;{const i=a;if(i.matches!==void 0)return i.matches(s);if(i.msMatchesSelector!==void 0)return i.msMatchesSelector(s);if(i.webkitMatchesSelector!==void 0)return i.webkitMatchesSelector(s);if(i.mozMatchesSelector!==void 0)return i.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},td=n=>n.nodeType!==si&&n.nodeType!==g0&&n.nodeType!==ed||n.childElementCount===0,p0=(n,s)=>{const a=s===void 0?document:s.dom;return td(a)?[]:$e(a.querySelectorAll(n),at.fromDom)},Tg=(n,s)=>{const a=s===void 0?document:s.dom;return td(a)?T.none():T.from(a.querySelector(n)).map(at.fromDom)},Hn=(n,s)=>n.dom===s.dom,I=(n,s)=>{const a=n.dom,i=s.dom;return a===i?!1:a.contains(i)},J=(n,s,a,i)=>{const d=n.isiOS()&&/ipad/i.test(a)===!0,g=n.isiOS()&&!d,h=n.isiOS()||n.isAndroid(),C=h||i("(pointer:coarse)"),S=d||!g&&h&&i("(min-device-width:768px)"),x=g||h&&!S,A=s.isSafari()&&n.isiOS()&&/safari/i.test(a)===!1,R=!x&&!S&&!A;return{isiPad:ie(d),isiPhone:ie(g),isTablet:ie(S),isPhone:ie(x),isTouch:ie(C),isAndroid:n.isAndroid,isiOS:n.isiOS,isWebView:ie(A),isDesktop:ie(R)}},se=(n,s)=>{for(let a=0;a<n.length;a++){const i=n[a];if(i.test(s))return i}},Re=(n,s)=>{const a=se(n,s);if(!a)return{major:0,minor:0};const i=d=>Number(s.replace(a,"$"+d));return _n(i(1),i(2))},Qe=(n,s)=>{const a=String(s).toLowerCase();return n.length===0?Dt():Re(n,a)},Dt=()=>_n(0,0),_n=(n,s)=>({major:n,minor:s}),uo={nu:_n,detect:Qe,unknown:Dt},so=(n,s)=>ic(s.brands,a=>{const i=a.brand.toLowerCase();return Ce(n,d=>{var g;return i===((g=d.brand)==null?void 0:g.toLowerCase())}).map(d=>({current:d.name,version:uo.nu(parseInt(a.version,10),0)}))}),Rs=(n,s)=>{const a=String(s).toLowerCase();return Ce(n,i=>i.search(a))},Es=(n,s)=>Rs(n,s).map(a=>{const i=uo.detect(a.versionRegexes,s);return{current:a.name,version:i}}),nd=(n,s)=>Rs(n,s).map(a=>{const i=uo.detect(a.versionRegexes,s);return{current:a.name,version:i}}),tm=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Pc=n=>s=>xs(s,n),b0=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:n=>xs(n,"edge/")&&xs(n,"chrome")&&xs(n,"safari")&&xs(n,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,tm],search:n=>xs(n,"chrome")&&!xs(n,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:n=>xs(n,"msie")||xs(n,"trident")},{name:"Opera",versionRegexes:[tm,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Pc("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Pc("firefox")},{name:"Safari",versionRegexes:[tm,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:n=>(xs(n,"safari")||xs(n,"mobile/"))&&xs(n,"applewebkit")}],A2=[{name:"Windows",search:Pc("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:n=>xs(n,"iphone")||xs(n,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Pc("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Pc("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Pc("linux"),versionRegexes:[]},{name:"Solaris",search:Pc("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Pc("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Pc("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],v0={browsers:ie(b0),oses:ie(A2)},$w="Edge",O2="Chromium",D2="IE",R2="Opera",Oi="Firefox",M2="Safari",a3=()=>N2({current:void 0,version:uo.unknown()}),N2=n=>{const s=n.current,a=n.version,i=d=>()=>s===d;return{current:s,version:a,isEdge:i($w),isChromium:i(O2),isIE:i(D2),isOpera:i(R2),isFirefox:i(Oi),isSafari:i(M2)}},B2={unknown:a3,nu:N2,edge:ie($w),chromium:ie(O2),ie:ie(D2),opera:ie(R2),firefox:ie(Oi),safari:ie(M2)},c3="Windows",Iw="iOS",y0="Android",pl="Linux",Di="macOS",nm="Solaris",Lw="FreeBSD",Xn="ChromeOS",i3=()=>P2({current:void 0,version:uo.unknown()}),P2=n=>{const s=n.current,a=n.version,i=d=>()=>s===d;return{current:s,version:a,isWindows:i(c3),isiOS:i(Iw),isAndroid:i(y0),isMacOS:i(Di),isLinux:i(pl),isSolaris:i(nm),isFreeBSD:i(Lw),isChromeOS:i(Xn)}},Ms={unknown:i3,nu:P2,windows:ie(c3),ios:ie(Iw),android:ie(y0),linux:ie(pl),macos:ie(Di),solaris:ie(nm),freebsd:ie(Lw),chromeos:ie(Xn)},C0={detect:(n,s,a)=>{const i=v0.browsers(),d=v0.oses(),g=s.bind(S=>so(i,S)).orThunk(()=>Es(i,n)).fold(B2.unknown,B2.nu),h=nd(d,n).fold(Ms.unknown,Ms.nu),C=J(h,g,n,a);return{browser:g,os:h,deviceType:C}}},u3=n=>window.matchMedia(n).matches;let $2=Ai(()=>C0.detect(window.navigator.userAgent,T.from(window.navigator.userAgentData),u3));const Jr=()=>$2(),kg=(n,s)=>oi(n,s),d3=(n,s)=>{const a=kg(n,s);if(a==null)throw new Error(n+" not available on this browser");return a},Ke=Object.getPrototypeOf,$c=n=>d3("HTMLElement",n),S0=n=>{const s=oi("ownerDocument.defaultView",n);return we(n)&&($c(s).prototype.isPrototypeOf(n)||/^HTML\w*Element$/.test(Ke(n).constructor.name))},Ri=n=>n.dom.nodeName.toLowerCase(),rp=n=>n.dom.nodeType,I2=n=>s=>rp(s)===n,Y=n=>gc(n)&&S0(n.dom),gc=I2(si),om=I2(h0),L2=I2(g0),_g=I2(ed),ha=n=>s=>gc(s)&&Ri(s)===n,hc=n=>at.fromDom(n.dom.ownerDocument),F2=n=>L2(n)?n:hc(n),H2=n=>at.fromDom(F2(n).dom.documentElement),ap=n=>at.fromDom(F2(n).dom.defaultView),Za=n=>T.from(n.dom.parentNode).map(at.fromDom),z2=n=>Za(n),cu=n=>T.from(n.dom.parentElement).map(at.fromDom),cp=(n,s)=>{const a=et(s)?s:Cn;let i=n.dom;const d=[];for(;i.parentNode!==null&&i.parentNode!==void 0;){const g=i.parentNode,h=at.fromDom(g);if(d.push(h),a(h)===!0)break;i=g}return d},V2=n=>T.from(n.dom.offsetParent).map(at.fromDom),Ic=n=>T.from(n.dom.previousSibling).map(at.fromDom),U2=n=>T.from(n.dom.nextSibling).map(at.fromDom),bl=n=>$e(n.dom.childNodes,at.fromDom),sm=(n,s)=>{const a=n.dom.childNodes;return T.from(a[s]).map(at.fromDom)},Ln=n=>sm(n,0),ri=(n,s)=>({element:n,offset:s}),w0=(n,s)=>{const a=bl(n);return a.length>0&&s<a.length?ri(a[s],0):ri(n,s)},Fw=(n,s,a,i)=>{const g=hc(n).dom.createRange();return g.setStart(n.dom,s),g.setEnd(a.dom,i),g},An=(n,s,a,i)=>{const d=Fw(n,s,a,i),g=Hn(n,a)&&s===i;return d.collapsed&&!g},od=n=>_g(n)&&jt(n.dom.host),nr=n=>at.fromDom(n.dom.getRootNode()),vl=n=>od(n)?n:at.fromDom(F2(n).dom.body),yl=n=>Ts(n).isSome(),Ts=n=>{const s=nr(n);return od(s)?T.some(s):T.none()},fo=n=>at.fromDom(n.dom.host),m3=n=>{if(jt(n.target)){const s=at.fromDom(n.target);if(gc(s)&&f3(s)&&n.composed&&n.composedPath){const a=n.composedPath();if(a)return To(a)}}return T.from(n.target)},f3=n=>jt(n.dom.shadowRoot),iu=(n,s,a,i,d,g,h)=>({target:n,x:s,y:a,stop:i,prevent:d,kill:g,raw:h}),Mi=n=>{const s=at.fromDom(m3(n).getOr(n.target)),a=()=>n.stopPropagation(),i=()=>n.preventDefault(),d=wn(i,a);return iu(s,n.clientX,n.clientY,a,i,d,n)},Cl=(n,s)=>a=>{n(a)&&s(Mi(a))},ir=(n,s,a,i,d)=>{const g=Cl(a,i);return n.dom.addEventListener(s,g,d),{unbind:Le(Ni,n,s,g,d)}},sd=(n,s,a,i)=>ir(n,s,a,i,!1),Lc=(n,s,a,i)=>ir(n,s,a,i,!0),Ni=(n,s,a,i)=>{n.dom.removeEventListener(s,a,i)},ai=yt,go=(n,s,a)=>sd(n,s,ai,a),ci=(n,s,a)=>Lc(n,s,ai,a),lu=Mi,pa=()=>at.fromDom(document),kr=(n,s=!1)=>n.dom.focus({preventScroll:s}),ks=n=>n.dom.blur(),Bi=n=>{const s=nr(n).dom;return n.dom===s.activeElement},Nr=(n=pa())=>T.from(n.dom.activeElement).map(at.fromDom),or=n=>Nr(nr(n)).filter(s=>n.dom.contains(s.dom)),rf=(n,s)=>{Za(n).each(i=>{i.dom.insertBefore(s.dom,n.dom)})},Hw=(n,s)=>{U2(n).fold(()=>{Za(n).each(d=>{Br(d,s)})},i=>{rf(i,s)})},Z2=(n,s)=>{Ln(n).fold(()=>{Br(n,s)},i=>{n.dom.insertBefore(s.dom,i.dom)})},Br=(n,s)=>{n.dom.appendChild(s.dom)},W2=(n,s,a)=>{sm(n,a).fold(()=>{Br(n,s)},i=>{rf(i,s)})},zw=(n,s)=>{gt(s,a=>{Br(n,a)})},af=(n,s,a)=>{if(be(a)||rn(a)||dn(a))n.setAttribute(s,a+"");else throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",a,":: Element ",n),new Error("Attribute value was not simple")},qt=(n,s,a)=>{af(n.dom,s,a)},j2=(n,s)=>{const a=n.dom;Cs(s,(i,d)=>{af(a,d,i)})},br=(n,s)=>{const a=n.dom.getAttribute(s);return a===null?void 0:a},Pr=(n,s)=>T.from(br(n,s)),$r=(n,s)=>{const a=n.dom;return a&&a.hasAttribute?a.hasAttribute(s):!1},Qo=(n,s)=>{n.dom.removeAttribute(s)},cf=n=>Po(n.dom.attributes,(s,a)=>(s[a.name]=a.value,s),{}),x0=n=>{n.dom.textContent="",gt(bl(n),s=>{Pi(s)})},Pi=n=>{const s=n.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},Sl=(n,s)=>at.fromDom(n.dom.cloneNode(s)),G2=n=>Sl(n,!1),E0=n=>Sl(n,!0),T0=(n,s)=>{const i=(s||document).createElement("div");return i.innerHTML=n,bl(at.fromDom(i))},rd=n=>n.dom.innerHTML,wl=(n,s)=>{const i=hc(n).dom,d=at.fromDom(i.createDocumentFragment()),g=T0(s,i);zw(d,g),x0(n),Br(n,d)},g3=n=>{const s=at.fromTag("div"),a=at.fromDom(n.dom.cloneNode(!0));return Br(s,a),rd(s)},Qr=n=>{if(od(n))return"#shadow-root";{const s=G2(n);return g3(s)}},xl=n=>new Promise((s,a)=>{const i=()=>{g(),s(n)},d=[go(n,"load",i),go(n,"error",()=>{g(),a("Unable to load data from image: "+n.dom.src)})],g=()=>gt(d,h=>h.unbind());n.dom.complete&&i()}),uu=n=>n.style!==void 0&&et(n.style.getPropertyValue),Qn=n=>{const s=om(n)?n.dom.parentNode:n.dom;if(s==null||s.ownerDocument===null)return!1;const a=s.ownerDocument;return Ts(at.fromDom(s)).fold(()=>a.body.contains(s),Yt(Qn,fo))},Fc=()=>Vw(at.fromDom(document)),Vw=n=>{const s=n.dom.body;if(s==null)throw new Error("Body is not available yet");return at.fromDom(s)},k0=(n,s,a)=>{if(!be(a))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",a,":: Element ",n),new Error("CSS value must be a string: "+a);uu(n)&&n.style.setProperty(s,a)},ii=(n,s)=>{uu(n)&&n.style.removeProperty(s)},on=(n,s,a)=>{const i=n.dom;k0(i,s,a)},hs=(n,s)=>{const a=n.dom;Cs(s,(i,d)=>{k0(a,d,i)})},Ir=(n,s)=>{const a=n.dom;Cs(s,(i,d)=>{i.fold(()=>{ii(a,d)},g=>{k0(a,d,g)})})},es=(n,s)=>{const a=n.dom,d=window.getComputedStyle(a).getPropertyValue(s);return d===""&&!Qn(n)?$i(a,s):d},$i=(n,s)=>uu(n)?n.style.getPropertyValue(s):"",is=(n,s)=>{const a=n.dom,i=$i(a,s);return T.from(i).filter(d=>d.length>0)},sr=n=>{const s={},a=n.dom;if(uu(a))for(let i=0;i<a.style.length;i++){const d=a.style.item(i);s[d]=a.style[d]}return s},Ag=(n,s,a)=>{const i=at.fromTag(n);return on(i,s,a),is(i,s).isSome()},Nn=(n,s)=>{const a=n.dom;ii(a,s),ti(Pr(n,"style").map(pt),"")&&Qo(n,"style")},Ii=n=>n.dom.offsetWidth,Zo=(n,s)=>{const a=(C,S)=>{if(!dn(S)&&!S.match(/^[0-9]+$/))throw new Error(n+".set accepts only positive integer values. Value was "+S);const x=C.dom;uu(x)&&(x.style[n]=S+"px")},i=C=>{const S=s(C);if(S<=0||S===null){const x=es(C,n);return parseFloat(x)||0}return S},d=i,g=(C,S)=>Po(S,(x,A)=>{const R=es(C,A),P=R===void 0?0:parseInt(R,10);return isNaN(P)?x:x+P},0);return{set:a,get:i,getOuter:d,aggregate:g,max:(C,S,x)=>{const A=g(C,x);return S>A?S-A:0}}},li=Zo("height",n=>{const s=n.dom;return Qn(n)?s.getBoundingClientRect().height:s.offsetHeight}),vr=n=>li.get(n),ba=n=>li.getOuter(n),ip=(n,s)=>{const a=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],i=li.max(n,s,a);on(n,"max-height",i+"px")},Uw=n=>n.offsetWidth<=0&&n.offsetHeight<=0,lp=n=>!Uw(n.dom),up=Zo("width",n=>{const s=n.dom;return Qn(n)?s.getBoundingClientRect().width:s.offsetWidth}),lf=(n,s)=>up.set(n,s),va=n=>up.get(n),ad=n=>up.getOuter(n),h3=(n,s)=>{const a=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],i=up.max(n,s,a);on(n,"max-width",i+"px")},uf=(n,s)=>({left:n,top:s,translate:(i,d)=>uf(n+i,s+d)}),ko=uf,_0=n=>{const s=n.getBoundingClientRect();return ko(s.left,s.top)},A0=(n,s)=>n!==void 0?n:s!==void 0?s:0,pc=n=>{const s=n.dom.ownerDocument,a=s.body,i=s.defaultView,d=s.documentElement;if(a===n.dom)return ko(a.offsetLeft,a.offsetTop);const g=A0(i==null?void 0:i.pageYOffset,d.scrollTop),h=A0(i==null?void 0:i.pageXOffset,d.scrollLeft),C=A0(d.clientTop,a.clientTop),S=A0(d.clientLeft,a.clientLeft);return ui(n).translate(h-S,g-C)},ui=n=>{const s=n.dom,i=s.ownerDocument.body;return i===s?ko(i.offsetLeft,i.offsetTop):Qn(n)?_0(s):ko(0,0)},Ns=n=>{const s=n!==void 0?n.dom:document,a=s.body.scrollLeft||s.documentElement.scrollLeft,i=s.body.scrollTop||s.documentElement.scrollTop;return ko(a,i)},rm=(n,s,a)=>{const d=(a!==void 0?a.dom:document).defaultView;d&&d.scrollTo(n,s)},Og=((n,s)=>{const a=g=>{if(!n(g))throw new Error("Can only get "+s+" value of a "+s+" node");return i(g).getOr("")},i=g=>n(g)?T.from(g.dom.nodeValue):T.none();return{get:a,getOption:i,set:(g,h)=>{if(!n(g))throw new Error("Can only set raw "+s+" value of a "+s+" node");g.dom.nodeValue=h}}})(om,"text"),O0=n=>Og.get(n),q2=(n,s)=>a=>s6(a)==="rtl"?s:n,s6=n=>es(n,"direction")==="rtl"?"rtl":"ltr",El=(n,s)=>{const a=br(n,s);return a===void 0||a===""?[]:a.split(" ")},p3=(n,s,a)=>{const d=El(n,s).concat([a]);return qt(n,s,d.join(" ")),!0},Zw=(n,s,a)=>{const i=Co(El(n,s),d=>d!==a);return i.length>0?qt(n,s,i.join(" ")):Qo(n,s),!1};var Tl=(n,s,a,i,d)=>n(a,i)?T.some(a):et(d)&&d(a)?T.none():s(a,i,d);const Ww=(n,s,a)=>{let i=n.dom;const d=et(a)?a:Cn;for(;i.parentNode;){i=i.parentNode;const g=at.fromDom(i);if(s(g))return T.some(g);if(d(g))break}return T.none()},Dg=(n,s,a)=>Tl((d,g)=>g(d),Ww,n,s,a),dp=(n,s)=>{const a=n.dom;return a.parentNode?mp(at.fromDom(a.parentNode),i=>!Hn(n,i)&&s(i)):T.none()},mp=(n,s)=>{const a=d=>s(at.fromDom(d));return Ce(n.dom.childNodes,a).map(at.fromDom)},K2=(n,s)=>{const a=i=>{for(let d=0;d<i.childNodes.length;d++){const g=at.fromDom(i.childNodes[d]);if(s(g))return T.some(g);const h=a(i.childNodes[d]);if(h.isSome())return h}return T.none()};return a(n.dom)},jw=n=>Tg(n),Li=(n,s,a)=>Ww(n,i=>au(i,s),a),b3=(n,s)=>dp(n,a=>au(a,s)),am=(n,s)=>mp(n,a=>au(a,s)),wo=(n,s)=>Tg(s,n),ya=(n,s,a)=>Tl((d,g)=>au(d,g),Li,n,s,a),du=(n,s)=>{n.dom.checked=s},Y2=n=>n.dom.checked,cm=n=>n.dom.classList!==void 0,X2=n=>El(n,"class"),Gw=(n,s)=>p3(n,"class",s),mu=(n,s)=>Zw(n,"class",s),fu=(n,s)=>vo(X2(n),s)?mu(n,s):Gw(n,s),Ro=(n,s)=>{cm(n)?n.dom.classList.add(s):Gw(n,s)},qw=n=>{(cm(n)?n.dom.classList:X2(n)).length===0&&Qo(n,"class")},us=(n,s)=>{cm(n)?n.dom.classList.remove(s):mu(n,s),qw(n)},fp=(n,s)=>{const a=cm(n)?n.dom.classList.toggle(s):fu(n,s);return qw(n),a},Ws=(n,s)=>cm(n)&&n.dom.classList.contains(s),gu=(n,s)=>{gt(s,a=>{Ro(n,a)})},ea=(n,s)=>{gt(s,a=>{us(n,a)})},cd=(n,s)=>{gt(s,a=>{fp(n,a)})},D0=(n,s)=>Vn(s,a=>Ws(n,a)),Kw=n=>{const s=n.dom.classList,a=new Array(s.length);for(let i=0;i<s.length;i++){const d=s.item(i);d!==null&&(a[i]=d)}return a},J2=n=>cm(n)?Kw(n):X2(n),v3=n=>n.dom.textContent,Hc=n=>n.dom.value,im=(n,s)=>{if(s===void 0)throw new Error("Value.set was undefined");n.dom.value=s},yr=(n,s,a)=>Co(cp(n,a),s),Lr=(n,s)=>p0(s,n),R0=(n,s,a)=>Dg(n,s,a).isSome(),gp=(n,s,a)=>ya(n,s,a).isSome(),Yw=n=>et(n)?n:Cn,Xw=(n,s,a)=>{let i=n.dom;const d=Yw(a);for(;i.parentNode;){i=i.parentNode;const g=at.fromDom(i),h=s(g);if(h.isSome())return h;if(d(g))break}return T.none()},Fi=(n,s,a)=>{const i=s(n),d=Yw(a);return i.orThunk(()=>d(n)?T.none():Xw(n,s,d))},df={create:(n,s,a,i)=>({start:n,soffset:s,finish:a,foffset:i})},id=lc.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),y3=(n,s,a,i)=>n.fold(s,a,i),M0=n=>n.fold(Et,Et,Et),C3=id.before,Fr=id.on,Rg=id.after,S3={before:C3,on:Fr,after:Rg,cata:y3,getStart:M0},Mg=lc.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),N0=n=>Mg.exact(n.start,n.soffset,n.finish,n.foffset),Jw=n=>n.match({domRange:s=>at.fromDom(s.startContainer),relative:(s,a)=>S3.getStart(s),exact:(s,a,i,d)=>s}),Q2=Mg.domRange,Qw=Mg.relative,ex=Mg.exact,B0=n=>{const s=Jw(n);return ap(s)},tx=df.create,Ng={domRange:Q2,relative:Qw,exact:ex,exactFromRange:N0,getWin:B0,range:tx},w3=n=>T.from(n.getSelection()),ey=n=>{if(n.rangeCount>0){const s=n.getRangeAt(0),a=n.getRangeAt(n.rangeCount-1);return T.some(df.create(at.fromDom(s.startContainer),s.startOffset,at.fromDom(a.endContainer),a.endOffset))}else return T.none()},x3=n=>{if(n.anchorNode===null||n.focusNode===null)return ey(n);{const s=at.fromDom(n.anchorNode),a=at.fromDom(n.focusNode);return An(s,n.anchorOffset,a,n.focusOffset)?T.some(df.create(s,n.anchorOffset,a,n.focusOffset)):ey(n)}},E3=n=>w3(n).filter(s=>s.rangeCount>0).bind(x3),ty=(n,s)=>{const a=Eg(n,s);return fc(a)},ny=(n,s)=>{const a=Eg(n,s);return Sg(a)},T3={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},k3=(()=>{const n="[0-9]+",a="[eE]"+("[+-]?"+n),i="\\.",d=C=>`(?:${C})?`,h=`[+-]?(?:${["Infinity",n+i+d(n)+d(a),i+n+d(a),n+d(a)].join("|")})`;return new RegExp(`^(${h})(.*)$`)})(),_3=(n,s)=>Qs(s,a=>Qs(T3[a],i=>n===i)),P0=(n,s)=>T.from(k3.exec(n)).bind(i=>{const d=Number(i[1]),g=i[2];return _3(g,s)?T.some({value:d,unit:g}):T.none()}),A3=(n,s)=>P0(n,s).map(({value:a,unit:i})=>a+i),Hi=n=>{const s=n===void 0?window:n;return Jr().browser.isFirefox()?T.none():T.from(s.visualViewport)},Bg=(n,s,a,i)=>({x:n,y:s,width:a,height:i,right:n+a,bottom:s+i}),$0=n=>{const s=n===void 0?window:n,a=s.document,i=Ns(at.fromDom(a));return Hi(s).fold(()=>{const d=s.document.documentElement,g=d.clientWidth,h=d.clientHeight;return Bg(i.left,i.top,g,h)},d=>Bg(Math.max(d.pageLeft,i.left),Math.max(d.pageTop,i.top),d.width,d.height))},hp=(n,s)=>n.view(s).fold(ie([]),i=>{const d=n.owner(i),g=hp(n,d);return[i].concat(g)}),O3=(n,s)=>{const a=s.owner(n),i=hp(s,a);return T.some(i)};var ld=Object.freeze({__proto__:null,view:n=>{var a;return(n.dom===document?T.none():T.from((a=n.dom.defaultView)==null?void 0:a.frameElement)).map(at.fromDom)},owner:n=>hc(n)});const pp=n=>{const s=pa(),a=Ns(s);return O3(n,ld).fold(Le(pc,n),d=>{const g=ui(n),h=gs(d,(C,S)=>{const x=ui(S);return{left:C.left+x.left,top:C.top+x.top}},{left:0,top:0});return ko(h.left+g.left+a.left,h.top+g.top+a.top)})},lm=(n,s,a)=>({point:n,width:s,height:a}),R3=(n,s,a,i)=>({x:n,y:s,width:a,height:i}),rr=(n,s,a,i)=>({x:n,y:s,width:a,height:i,right:n+a,bottom:s+i}),js=n=>{const s=pc(n),a=ad(n),i=ba(n);return rr(s.left,s.top,a,i)},um=n=>{const s=pp(n),a=ad(n),i=ba(n);return rr(s.left,s.top,a,i)},ud=(n,s)=>{const a=Math.max(n.x,s.x),i=Math.max(n.y,s.y),d=Math.min(n.right,s.right),g=Math.min(n.bottom,s.bottom),h=d-a,C=g-i;return rr(a,i,h,C)},oy=(n,s)=>Po(s,(a,i)=>ud(a,i),n),ta=()=>$0(window),sy=(n,s)=>Hn(n.element,s.event.target),dm=n=>(ti(is(n,"position"),"fixed")?T.none():V2(n)).orThunk(()=>{const i=at.fromTag("span");return Za(n).bind(d=>{Br(d,i);const g=V2(i);return Pi(i),g})}),I0=n=>dm(n).map(pc).getOrThunk(()=>ko(0,0)),zc=(n,s)=>{const a=T.from(br(n,"id")).getOrThunk(()=>{const i=Ct("aria");return qt(s,"id",i),i});qt(n,"aria-describedby",a)},ry=n=>{Qo(n,"aria-describedby")};var bc;(function(n){n[n.Error=0]="Error",n[n.Value=1]="Value"})(bc||(bc={}));const _s=(n,s,a)=>n.stype===bc.Error?s(n.serror):a(n.svalue),L0=n=>{const s=[],a=[];return gt(n,i=>{_s(i,d=>a.push(d),d=>s.push(d))}),{values:s,errors:a}},Pg=(n,s)=>n.stype===bc.Error?{stype:bc.Error,serror:s(n.serror)}:n,ox=(n,s)=>n.stype===bc.Value?{stype:bc.Value,svalue:s(n.svalue)}:n,ay=(n,s)=>n.stype===bc.Value?s(n.svalue):n,sx=(n,s)=>n.stype===bc.Error?s(n.serror):n,rx=n=>({stype:bc.Value,svalue:n}),F0=n=>({stype:bc.Error,serror:n}),it={fromResult:n=>n.fold(F0,rx),toResult:n=>_s(n,Xt.error,Xt.value),svalue:rx,partition:L0,serror:F0,bind:ay,bindError:sx,map:ox,mapError:Pg,fold:_s},Wa=n=>we(n)&&mo(n).length>100?" removed due to size":JSON.stringify(n,null,2),M3=n=>{const s=n.length>10?n.slice(0,10).concat([{path:[],getErrorInfo:ie("... (only showing first ten failures)")}]):n;return $e(s,a=>"Failed path: ("+a.path.join(" > ")+`)
`+a.getErrorInfo())},_a=(n,s)=>it.serror([{path:n,getErrorInfo:s}]),di=(n,s,a)=>_a(n,()=>'Could not find valid *required* value for "'+s+'" in '+Wa(a)),z0=(n,s)=>_a(n,()=>'Choice schema did not contain choice key: "'+s+'"'),N3=(n,s,a)=>_a(n,()=>'The chosen schema: "'+a+'" did not exist in branches: '+Wa(s)),mm=(n,s)=>_a(n,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),B3=(n,s)=>_a(n,ie(s)),ja=n=>{const s=(i,d)=>it.bindError(n(d),g=>B3(i,g)),a=ie("val");return{extract:s,toString:a}},ax=ja(it.svalue),mi=ie(ax),Ye=(n,s)=>ja(a=>{const i=typeof a;return n(a)?it.svalue(a):it.serror(`Expected type: ${s} but got: ${i}`)}),cy=Ye(dn,"number"),ur=Ye(be,"string"),Tn=Ye(rn,"boolean"),dd=Ye(et,"function"),Ig=n=>{if(Object(n)!==n)return!0;switch({}.toString.call(n).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(n).every(s=>Ig(n[s]));default:return!1}},ds=ja(n=>Ig(n)?it.svalue(n):it.serror("Expected value to be acceptable for sending via postMessage")),fi=()=>({tag:"required",process:{}}),bp=n=>({tag:"defaultedThunk",process:n}),vc=n=>bp(ie(n)),ts=()=>({tag:"option",process:{}}),md=n=>({tag:"mergeWithThunk",process:n}),Lg=n=>md(ie(n)),iy=(n,s,a,i)=>({tag:"field",key:n,newKey:s,presence:a,prop:i}),ly=(n,s)=>({tag:"custom",newKey:n,instantiator:s}),gi=(n,s,a)=>{switch(n.tag){case"field":return s(n.key,n.newKey,n.presence,n.prop);case"custom":return a(n.newKey,n.instantiator)}},vp=(n,s)=>it.svalue($o(s,gg.apply(void 0,n))),yp=n=>wn(it.serror,Ue)(n),Cp={consolidateObj:(n,s)=>{const a=it.partition(n);return a.errors.length>0?yp(a.errors):vp(a.values,s)},consolidateArr:n=>{const s=it.partition(n);return s.errors.length>0?yp(s.errors):it.svalue(s.values)}},uy=(n,s,a,i)=>It(s,a).fold(()=>di(n,a,s),i),V0=(n,s,a,i)=>{const d=It(n,s).getOrThunk(()=>a(n));return i(d)},$3=(n,s,a)=>a(It(n,s)),I3=(n,s,a,i)=>{const d=It(n,s).map(g=>g===!0?a(n):g);return i(d)},dy=(n,s,a,i,d)=>{const g=C=>d.extract(s.concat([i]),C),h=C=>C.fold(()=>it.svalue(T.none()),S=>{const x=d.extract(s.concat([i]),S);return it.map(x,T.some)});switch(n.tag){case"required":return uy(s,a,i,g);case"defaultedThunk":return V0(a,i,n.process,g);case"option":return $3(a,i,h);case"defaultedOptionThunk":return I3(a,i,n.process,h);case"mergeWithThunk":return V0(a,i,ie({}),C=>{const S=$o(n.process(a),C);return g(S)})}},L3=(n,s,a)=>{const i={},d=[];for(const g of a)gi(g,(h,C,S,x)=>{const A=dy(S,n,s,h,x);it.fold(A,R=>{d.push(...R)},R=>{i[C]=R})},(h,C)=>{i[h]=C(s)});return d.length>0?it.serror(d):it.svalue(i)},Sp=n=>({extract:(i,d)=>n().extract(i,d),toString:()=>n().toString()}),a6=n=>mo(Tr(n,jt)),yc=n=>{const s=Vt(n),a=gs(n,(d,g)=>gi(g,h=>$o(d,{[h]:!0}),ie(d)),{});return{extract:(d,g)=>{const h=rn(g)?[]:a6(g),C=Co(h,S=>!Bn(a,S));return C.length===0?s.extract(d,g):mm(d,C)},toString:s.toString}},Vt=n=>({extract:(i,d)=>L3(i,d,n),toString:()=>`obj{
`+$e(n,d=>gi(d,(g,h,C,S)=>g+" -> "+S.toString(),(g,h)=>"state("+g+")")).join(`
`)+"}"}),As=n=>({extract:(i,d)=>{const g=$e(d,(h,C)=>n.extract(i.concat(["["+C+"]"]),h));return Cp.consolidateArr(g)},toString:()=>"array("+n.toString()+")"}),Fg=(n,s)=>{const a=s!==void 0?s:Et;return{extract:(g,h)=>{const C=[];for(const S of n){const x=S.extract(g,h);if(x.stype===bc.Value)return{stype:bc.Value,svalue:a(x.svalue)};C.push(x)}return Cp.consolidateArr(C)},toString:()=>"oneOf("+$e(n,g=>g.toString()).join(", ")+")"}},ix=(n,s)=>{const a=(g,h)=>As(ja(n)).extract(g,h);return{extract:(g,h)=>{const C=mo(h),S=a(g,C);return it.bind(S,x=>{const A=$e(x,R=>iy(R,R,fi(),s));return Vt(A).extract(g,h)})},toString:()=>"setOf("+s.toString()+")"}},mf=(n,s)=>{const a=Ai(s);return{extract:(g,h)=>a().extract(g,h),toString:()=>a().toString()}},Hg=wn(As,Vt),my=(n,s,a,i)=>It(a,i).fold(()=>N3(n,a,i),g=>g.extract(n.concat(["branch: "+i]),s)),ff=(n,s)=>({extract:(d,g)=>It(g,n).fold(()=>z0(d,n),C=>my(d,g,s,C)),toString:()=>"chooseOn("+n+"). Possible values: "+mo(s)}),lx=()=>As(ax),hu=n=>ja(s=>n(s).fold(it.serror,it.svalue)),ux=(n,s)=>ix(a=>it.fromResult(n(a)),s),fy=(n,s,a)=>{const i=s.extract([n],a);return it.mapError(i,d=>({input:a,errors:d}))},ls=(n,s,a)=>it.toResult(fy(n,s,a)),hi=n=>n.fold(s=>{throw new Error(zg(s))},Et),Aa=(n,s,a)=>hi(ls(n,s,a)),zg=n=>`Errors: 
`+M3(n.errors).join(`
`)+`

Input object: `+Wa(n.input),Oa=(n,s)=>ff(n,Ds(s,Vt)),gf=(n,s)=>mf(n,s),Cr=iy,Da=ly,U0=n=>hu(s=>vo(n,s)?Xt.value(s):Xt.error(`Unsupported value: "${s}", choose one of "${n.join(", ")}".`)),He=n=>Cr(n,n,fi(),mi()),Ga=(n,s)=>Cr(n,n,fi(),s),wp=n=>Ga(n,cy),ps=n=>Ga(n,ur),zi=(n,s)=>Cr(n,n,fi(),U0(s)),Cc=n=>Ga(n,dd),F3=(n,s)=>Cr(n,n,ts(),ja(a=>it.serror("The field: "+n+" is forbidden. "+s))),pu=(n,s)=>Cr(n,n,fi(),Vt(s)),dx=(n,s)=>Cr(n,n,fi(),Hg(s)),qa=(n,s)=>Cr(n,n,fi(),As(s)),ho=n=>Cr(n,n,ts(),mi()),kl=(n,s)=>Cr(n,n,ts(),s),Vg=n=>kl(n,cy),bs=n=>kl(n,ur),gy=(n,s)=>kl(n,U0(s)),hy=n=>kl(n,Tn),Vi=n=>kl(n,dd),Z0=(n,s)=>kl(n,As(s)),Ka=(n,s)=>kl(n,Vt(s)),H3=(n,s)=>kl(n,yc(s)),pe=(n,s)=>Cr(n,n,vc(s),mi()),Vc=(n,s,a)=>Cr(n,n,vc(s),a),xp=(n,s)=>Vc(n,s,cy),ms=(n,s)=>Vc(n,s,ur),Ra=(n,s,a)=>Vc(n,s,U0(a)),dr=(n,s)=>Vc(n,s,Tn),Ho=(n,s)=>Vc(n,s,dd),mx=(n,s)=>Vc(n,s,ds),fm=(n,s,a)=>Vc(n,s,As(a)),gm=(n,s,a)=>Vc(n,s,Vt(a)),Ug=(n,s)=>{const a={};return Cs(n,(i,d)=>{vo(s,d)||(a[d]=i)}),a},Ep=(n,s)=>({[n]:s}),py=n=>{const s={};return gt(n,a=>{s[a.key]=a.value}),s},by=(n,s)=>Ug(n,s),hm=(n,s)=>Ep(n,s),Zg=n=>py(n),fx=(n,s)=>n.length===0?Xt.value(s):Xt.value($o(s,gg.apply(void 0,n))),vy=n=>Xt.error(Ue(n)),z3=(n,s)=>{const a=l0(n);return a.errors.length>0?vy(a.errors):fx(a.values,s)},na=ie,Sc=na("touchstart"),Bs=na("touchmove"),pm=na("touchend"),Tp=na("touchcancel"),Ya=na("mousedown"),Wg=na("mousemove"),ar=na("mouseout"),W0=na("mouseup"),Uc=na("mouseover"),Ui=na("focusin"),yy=na("focusout"),Sr=na("keydown"),jg=na("keyup"),_l=na("input"),hf=na("change"),pf=na("click"),V3=na("transitioncancel"),j0=na("transitionend"),fd=na("transitionstart"),kp=na("selectstart"),zo=n=>ie("alloy."+n),gx={tap:zo("tap")},gd=zo("focus"),Gg=zo("blur.post"),G0=zo("paste.post"),hd=zo("receive"),Hr=zo("execute"),bf=zo("focus.item"),qg=gx.tap,q0=zo("longpress"),K0=zo("sandbox.close"),Y0=zo("typeahead.cancel"),_p=zo("system.init"),hx=zo("system.touchmove"),Cy=zo("system.touchend"),Sy=zo("system.scroll"),Kg=zo("system.resize"),Al=zo("system.attached"),pi=zo("system.detached"),pd=zo("system.dismissRequested"),px=zo("system.repositionRequested"),X0=zo("focusmanager.shifted"),wy=zo("slotcontainer.visibility"),bx=zo("system.external.element.scroll"),xy=zo("change.tab"),J0=zo("dismiss.tab"),Q0=zo("highlight"),eb=zo("dehighlight"),Ol=n=>Qr(n),Ap="unknown";var Yg;(function(n){n[n.STOP=0]="STOP",n[n.NORMAL=1]="NORMAL",n[n.LOGGING=2]="LOGGING"})(Yg||(Yg={}));const vf=Bt({}),vx=(n,s)=>{const a=[],i=new Date().getTime();return{logEventCut:(d,g,h)=>{a.push({outcome:"cut",target:g,purpose:h})},logEventStopped:(d,g,h)=>{a.push({outcome:"stopped",target:g,purpose:h})},logNoParent:(d,g,h)=>{a.push({outcome:"no-parent",target:g,purpose:h})},logEventNoHandlers:(d,g)=>{a.push({outcome:"no-handlers-left",target:g})},logEventResponse:(d,g,h)=>{a.push({outcome:"response",purpose:h,target:g})},write:()=>{const d=new Date().getTime();vo(["mousemove","mouseover","mouseout",_p()],n)||console.log(n,{event:n,time:d-i,target:s.dom,sequence:$e(a,g=>vo(["cut","stopped","response"],g.outcome)?"{"+g.purpose+"} "+g.outcome+" at ("+Ol(g.target)+")":g.outcome)})}}},Xg=(n,s,a)=>{switch(It(vf.get(),n).orThunk(()=>{const d=mo(vf.get());return ic(d,g=>n.indexOf(g)>-1?T.some(vf.get()[g]):T.none())}).getOr(Yg.NORMAL)){case Yg.NORMAL:return a(tb());case Yg.LOGGING:{const d=vx(n,s),g=a(d);return d.write(),g}case Yg.STOP:return!0}},Ma=["alloy/data/Fields","alloy/debugging/Debugging"],U3=()=>{const n=new Error;if(n.stack!==void 0){const s=n.stack.split(`
`);return Ce(s,a=>a.indexOf("alloy")>0&&!Qs(Ma,i=>a.indexOf(i)>-1)).getOr(Ap)}else return Ap},Ey={logEventCut:U,logEventStopped:U,logNoParent:U,logEventNoHandlers:U,logEventResponse:U,write:U},Ty=(n,s,a)=>Xg(n,s,a),tb=ie(Ey),yx=ie([He("menu"),He("selectedMenu")]),yf=ie([He("item"),He("selectedItem")]);ie(Vt(yf().concat(yx())));const Cx=ie(Vt(yf())),Op=pu("initSize",[He("numColumns"),He("numRows")]),ky=()=>Ga("markers",Cx()),Sx=()=>pu("markers",[He("backgroundMenu")].concat(yx()).concat(yf())),Un=n=>pu("markers",$e(n,He)),nb=(n,s,a)=>(U3(),Cr(s,s,a,hu(i=>Xt.value((...d)=>i.apply(void 0,d))))),qn=n=>nb("onHandler",n,vc(U)),wc=n=>nb("onKeyboardHandler",n,vc(T.none)),bm=n=>nb("onHandler",n,fi()),Dp=n=>nb("onKeyboardHandler",n,fi()),ro=(n,s)=>Da(n,ie(s)),wx=n=>Da(n,Et),xx=ie(Op),Z3=(n,s,a)=>{const i=a.toString(),d=i.indexOf(")")+1,g=i.indexOf("("),h=i.substring(g+1,d-1).split(/,\s*/);return n.toFunctionAnnotation=()=>({name:s,parameters:Cf(h.slice(0,1).concat(h.slice(3)))}),n},Cf=n=>$e(n,s=>fl(s,"/*")?s.substring(0,s.length-2):s),Rp=(n,s)=>{const a=n.toString(),i=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,i-1).split(/,\s*/);return n.toFunctionAnnotation=()=>({name:s,parameters:Cf(g)}),n},Ex=(n,s)=>{const a=s.toString(),i=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,i-1).split(/,\s*/);return n.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:Cf(g.slice(1))}),n},W3=(n,s)=>{let a=null;return{cancel:()=>{a!==null&&(clearTimeout(a),a=null)},schedule:(...g)=>{a=setTimeout(()=>{n.apply(null,g),a=null},s)}}},j3=5,Tx=400,kx=n=>{const s=n.raw;return s.touches===void 0||s.touches.length!==1?T.none():T.some(s.touches[0])},G3=(n,s)=>{const a=Math.abs(n.clientX-s.x),i=Math.abs(n.clientY-s.y);return a>j3||i>j3},q3=n=>{const s=pn(),a=Bt(!1),i=W3(x=>{n.triggerEvent(q0(),x),a.set(!0)},Tx),d=x=>(kx(x).each(A=>{i.cancel();const R={x:A.clientX,y:A.clientY,target:x.target};i.schedule(x),a.set(!1),s.set(R)}),T.none()),g=x=>(i.cancel(),kx(x).each(A=>{s.on(R=>{G3(A,R)&&s.clear()})}),T.none()),h=x=>{i.cancel();const A=R=>Hn(R.target,x.target);return s.get().filter(A).map(R=>a.get()?(x.prevent(),!1):n.triggerEvent(qg(),x))},C=Zg([{key:Sc(),value:d},{key:Bs(),value:g},{key:pm(),value:h}]);return{fireIfReady:(x,A)=>It(C,A).bind(R=>R(x))}};var Sf;(function(n){n.OnFocusMode="onFocus",n.OnEnterOrSpaceMode="onEnterOrSpace",n.OnApiMode="onApi"})(Sf||(Sf={}));const xc="placeholder",mr=lc.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),vm=n=>So(n,"uiType"),Zi=(n,s,a,i)=>n.exists(d=>d!==a.owner)?mr.single(!0,ie(a)):It(i,a.name).fold(()=>{throw new Error("Unknown placeholder component: "+a.name+`
Known: [`+mo(i)+`]
Namespace: `+n.getOr("none")+`
Spec: `+JSON.stringify(a,null,2))},d=>d.replace()),bu=(n,s,a,i)=>vm(a)&&a.uiType===xc?Zi(n,s,a,i):mr.single(!1,ie(a)),Jg=(n,s,a,i)=>bu(n,s,a,i).fold((g,h)=>{const C=vm(a)?h(s,a.config,a.validated):h(s),S=It(C,"components").getOr([]),x=ne(S,A=>Jg(n,s,A,i));return[{...C,components:x}]},(g,h)=>{if(vm(a)){const C=h(s,a.config,a.validated);return a.validated.preprocess.getOr(Et)(C)}else return h(s)}),Qg=(n,s,a,i)=>ne(a,d=>Jg(n,s,d,i)),ob=(n,s)=>{let a=!1;const i=()=>a,d=()=>{if(a)throw new Error("Trying to use the same placeholder more than once: "+n);return a=!0,s},g=()=>s.fold((h,C)=>h,(h,C)=>h);return{name:ie(n),required:g,used:i,replace:d}},K3=(n,s,a,i)=>{const d=Ds(i,(h,C)=>ob(C,h)),g=Qg(n,s,a,d);return Cs(d,h=>{if(h.used()===!1&&h.required())throw new Error("Placeholder: "+h.name()+` was not found in components list
Namespace: `+n.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),g},sb=mr.single,_y=mr.multiple,Ay=ie(xc),Mp=lc.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),bd=pe("factory",{sketch:Et}),rb=pe("schema",[]),Np=He("name"),ab=Cr("pname","pname",bp(n=>"<alloy."+Ct(n.name)+">"),mi()),_x=Da("schema",()=>[ho("preprocess")]),vu=pe("defaults",ie({})),cb=pe("overrides",ie({})),Ax=Vt([bd,rb,Np,ab,vu,cb]),Y3=Vt([bd,rb,Np,vu,cb]),X3=Vt([bd,rb,Np,ab,vu,cb]),Ox=Vt([bd,_x,Np,He("unit"),ab,vu,cb]),Oy=n=>n.fold(T.some,T.none,T.some,T.some),yu=n=>{const s=a=>a.name;return n.fold(s,s,s,s)},Dx=n=>n.fold(Et,Et,Et,Et),Wi=(n,s)=>a=>{const i=Aa("Converting part type",s,a);return n(i)},Ca=Wi(Mp.required,Ax),bi=Wi(Mp.external,Y3),Na=Wi(Mp.optional,X3),ib=Wi(Mp.group,Ox),wf=ie("entirety");var lb=Object.freeze({__proto__:null,required:Ca,external:bi,optional:Na,group:ib,asNamedPart:Oy,name:yu,asCommon:Dx,original:wf});const Dy=(n,s,a,i)=>$o(s.defaults(n,a,i),a,{uid:n.partUids[s.name]},s.overrides(n,a,i)),J3=(n,s,a)=>{const i={},d={};return gt(a,g=>{g.fold(h=>{i[h.pname]=sb(!0,(C,S,x)=>h.factory.sketch(Dy(C,h,S,x)))},h=>{const C=s.parts[h.name];d[h.name]=ie(h.factory.sketch(Dy(s,h,C[wf()]),C))},h=>{i[h.pname]=sb(!1,(C,S,x)=>h.factory.sketch(Dy(C,h,S,x)))},h=>{i[h.pname]=_y(!0,(C,S,x)=>{const A=C[h.name];return $e(A,R=>h.factory.sketch($o(h.defaults(C,R,x),R,h.overrides(C,R))))})})}),{internals:ie(i),externals:ie(d)}},ym=(n,s)=>{const a={};return gt(s,i=>{Oy(i).each(d=>{const g=Cm(n,d.pname);a[d.name]=h=>{const C=Aa("Part: "+d.name+" in "+n,Vt(d.schema),h);return{...g,config:h,validated:C}}})}),a},Cm=(n,s)=>({uiType:Ay(),owner:n,name:s}),Ry=(n,s,a)=>({uiType:Ay(),owner:n,name:s,config:a,validated:{}}),fr=n=>ne(n,s=>s.fold(T.none,T.some,T.none,T.none).map(a=>pu(a.name,a.schema.concat([wx(wf())]))).toArray()),Bp=n=>$e(n,yu),Xa=(n,s,a)=>J3(n,s,a),ub=(n,s,a)=>K3(T.some(n),s,s.components,a),Mo=(n,s,a)=>{const i=s.partUids[a];return n.getSystem().getByUid(i).toOptional()},Dl=(n,s,a)=>Mo(n,s,a).getOrDie("Could not find part: "+a),vd=(n,s,a)=>{const i={},d=s.partUids,g=n.getSystem();return gt(a,h=>{i[h]=ie(g.getByUid(d[h]))}),i},Rl=(n,s)=>{const a=n.getSystem();return Ds(s.partUids,(i,d)=>ie(a.getByUid(i)))},Zc=n=>mo(n.partUids),db=(n,s,a)=>{const i={},d=s.partUids,g=n.getSystem();return gt(a,h=>{i[h]=ie(g.getByUid(d[h]).getOrDie())}),i},Rx=(n,s)=>{const a=Bp(s);return Zg($e(a,i=>({key:i,value:n+"-"+i})))},yd=n=>Cr("partUids","partUids",md(s=>Rx(s.uid,n)),mi());var xf=Object.freeze({__proto__:null,generate:ym,generateOne:Ry,schemas:fr,names:Bp,substitutes:Xa,components:ub,defaultUids:Rx,defaultUidsSchema:yd,getAllParts:Rl,getAllPartNames:Zc,getPart:Mo,getPartOrDie:Dl,getParts:vd,getPartsOrDie:db});const My=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],Ec=(n,s,a,i=1)=>{const d=n*i,g=s*i,h=S=>It(a,S).getOr([]),C=(S,x,A)=>{const R=ge(My,A);return{offset:ko(S,x),classesOn:ne(A,h),classesOff:ne(R,h)}};return{southeast:()=>C(-n,s,["top","alignLeft"]),southwest:()=>C(n,s,["top","alignRight"]),south:()=>C(-n/2,s,["top","alignCentre"]),northeast:()=>C(-n,-s,["bottom","alignLeft"]),northwest:()=>C(n,-s,["bottom","alignRight"]),north:()=>C(-n/2,-s,["bottom","alignCentre"]),east:()=>C(n,-s/2,["valignCentre","left"]),west:()=>C(-n,-s/2,["valignCentre","right"]),insetNortheast:()=>C(d,g,["top","alignLeft","inset"]),insetNorthwest:()=>C(-d,g,["top","alignRight","inset"]),insetNorth:()=>C(-d/2,g,["top","alignCentre","inset"]),insetSoutheast:()=>C(d,-g,["bottom","alignLeft","inset"]),insetSouthwest:()=>C(-d,-g,["bottom","alignRight","inset"]),insetSouth:()=>C(-d/2,-g,["bottom","alignCentre","inset"]),insetEast:()=>C(-d,-g/2,["valignCentre","right","inset"]),insetWest:()=>C(d,-g/2,["valignCentre","left","inset"])}},Sm=()=>Ec(0,0,{}),zr=(n,s,a,i,d,g,h,C=!1)=>({x:n,y:s,bubble:a,direction:i,placement:d,restriction:g,label:`${h}-${d}`,alwaysFit:C}),ji=lc.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),mb=(n,s,a,i,d,g,h,C,S)=>n.fold(s,a,i,d,g,h,C,S),Ef=(n,s,a,i)=>n.fold(s,s,i,i,s,i,a,a),wm=(n,s,a,i)=>n.fold(s,i,s,i,a,a,s,i),Pp=ji.southeast,Ny=ji.southwest,fb=ji.northeast,Tf=ji.northwest,xm=ji.south,By=ji.north,$p=ji.east,Py=ji.west,Mx=(n,s)=>{switch(s){case 1:return n.x;case 0:return n.x+n.width;case 2:return n.y;case 3:return n.y+n.height}},gr=(n,s)=>Qt(["left","right","top","bottom"],a=>It(s,a).map(i=>Mx(n,i))),Em=(n,s,a)=>{const i=(S,x)=>s[S].map(A=>{const R=S==="top"||S==="bottom",P=R?a.top:a.left,Z=(S==="left"||S==="top"?Math.max:Math.min)(A,x)+P;return R?Xr(Z,n.y,n.bottom):Xr(Z,n.x,n.right)}).getOr(x),d=i("left",n.x),g=i("top",n.y),h=i("right",n.right),C=i("bottom",n.bottom);return rr(d,g,h-d,C-g)},Tm="layout",Nx=n=>n.x,gb=(n,s)=>n.x+n.width/2-s.width/2,$y=(n,s)=>n.x+n.width-s.width,Ip=(n,s)=>n.y-s.height,hb=n=>n.y+n.height,Bx=(n,s)=>n.y+n.height/2-s.height/2,Q3=n=>n.x+n.width,Lp=(n,s)=>n.x-s.width,cr=(n,s,a)=>zr(Nx(n),hb(n),a.southeast(),Pp(),"southeast",gr(n,{left:1,top:3}),Tm),Gs=(n,s,a)=>zr($y(n,s),hb(n),a.southwest(),Ny(),"southwest",gr(n,{right:0,top:3}),Tm),Vr=(n,s,a)=>zr(Nx(n),Ip(n,s),a.northeast(),fb(),"northeast",gr(n,{left:1,bottom:2}),Tm),_r=(n,s,a)=>zr($y(n,s),Ip(n,s),a.northwest(),Tf(),"northwest",gr(n,{right:0,bottom:2}),Tm),ss=(n,s,a)=>zr(gb(n,s),Ip(n,s),a.north(),By(),"north",gr(n,{bottom:2}),Tm),qs=(n,s,a)=>zr(gb(n,s),hb(n),a.south(),xm(),"south",gr(n,{top:3}),Tm),eh=(n,s,a)=>zr(Q3(n),Bx(n,s),a.east(),$p(),"east",gr(n,{left:0}),Tm),Iy=(n,s,a)=>zr(Lp(n,s),Bx(n,s),a.west(),Py(),"west",gr(n,{right:1}),Tm),Ly=()=>[cr,Gs,Vr,_r,qs,ss,eh,Iy],Px=()=>[Gs,cr,_r,Vr,qs,ss,eh,Iy],pb=()=>[Vr,_r,cr,Gs,ss,qs],Fy=()=>[_r,Vr,Gs,cr,ss,qs],Hy=()=>[cr,Gs,Vr,_r,qs,ss],bb=()=>[Gs,cr,_r,Vr,qs,ss],zy="data-alloy-placement",th=(n,s)=>{qt(n,zy,s)},$x=n=>Pr(n,zy),Fp=n=>Qo(n,zy),Ml="layout-inset",vb=n=>n.x,Hp=(n,s)=>n.x+n.width/2-s.width/2,nh=(n,s)=>n.x+n.width-s.width,kf=n=>n.y,zp=(n,s)=>n.y+n.height-s.height,yb=(n,s)=>n.y+n.height/2-s.height/2,Vp=(n,s,a)=>zr(nh(n,s),zp(n,s),a.insetSouthwest(),Tf(),"southwest",gr(n,{right:0,bottom:3}),Ml),Cb=(n,s,a)=>zr(vb(n),zp(n,s),a.insetSoutheast(),fb(),"southeast",gr(n,{left:1,bottom:3}),Ml),_f=(n,s,a)=>zr(nh(n,s),kf(n),a.insetNorthwest(),Ny(),"northwest",gr(n,{right:0,top:2}),Ml),Ba=(n,s,a)=>zr(vb(n),kf(n),a.insetNortheast(),Pp(),"northeast",gr(n,{left:1,top:2}),Ml),oa=(n,s,a)=>zr(Hp(n,s),kf(n),a.insetNorth(),xm(),"north",gr(n,{top:2}),Ml),oh=(n,s,a)=>zr(Hp(n,s),zp(n,s),a.insetSouth(),By(),"south",gr(n,{bottom:3}),Ml),ke=(n,s,a)=>zr(nh(n,s),yb(n,s),a.insetEast(),Py(),"east",gr(n,{right:0}),Ml),Up=(n,s,a)=>zr(vb(n),yb(n,s),a.insetWest(),$p(),"west",gr(n,{left:1}),Ml),e_=n=>{switch(n){case"north":return oa;case"northeast":return Ba;case"northwest":return _f;case"south":return oh;case"southeast":return Cb;case"southwest":return Vp;case"east":return ke;case"west":return Up}},Pa=(n,s,a,i,d)=>$x(i).map(e_).getOr(oa)(n,s,a,i,d),sh=n=>{switch(n){case"north":return oh;case"northeast":return Cb;case"northwest":return Vp;case"south":return oa;case"southeast":return Ba;case"southwest":return _f;case"east":return Up;case"west":return ke}},Nl=(n,s,a,i,d)=>$x(i).map(sh).getOr(oa)(n,s,a,i,d),Vy=(n,s)=>{ip(n,Math.floor(s))},Uy=ie((n,s)=>{Vy(n,s),hs(n,{"overflow-x":"hidden","overflow-y":"auto"})}),Af=ie((n,s)=>{Vy(n,s)}),Zp=ie((n,s)=>{h3(n,Math.floor(s))});var Cd;(function(n){n.TopToBottom="toptobottom",n.BottomToTop="bottomtotop"})(Cd||(Cd={}));const Sb="data-alloy-vertical-dir",t_=n=>R0(n,s=>gc(s)&&br(s,"data-alloy-vertical-dir")===Cd.BottomToTop);var sa;(function(n){n[n.HighlightMenuAndItem=0]="HighlightMenuAndItem",n[n.HighlightJustMenu=1]="HighlightJustMenu",n[n.HighlightNone=2]="HighlightNone"})(sa||(sa={}));const Bl={init:()=>Tc({readState:ie("No State required")})},Tc=n=>n,n_={can:yt,abort:Cn,run:U},rh=n=>{if(!Bn(n,"can")&&!Bn(n,"abort")&&!Bn(n,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(n,null,2)+" does not have can, abort, or run!");return{...n_,...n}},Ix=(n,s)=>(...a)=>Po(n,(i,d)=>i&&s(d).apply(void 0,a),!0),wb=(n,s)=>(...a)=>Po(n,(i,d)=>i||s(d).apply(void 0,a),!1),o_=n=>et(n)?{can:yt,abort:Cn,run:n}:n,Lx=n=>{const s=Ix(n,d=>d.can),a=wb(n,d=>d.abort);return{can:s,abort:a,run:(...d)=>{gt(n,g=>{g.run.apply(void 0,d)})}}},On=(n,s)=>{Eb(n,n.element,s,{})},Ht=(n,s,a)=>{Eb(n,n.element,s,a)},ah=n=>{On(n,Hr())},xb=(n,s,a)=>{Eb(n,s,a,{})},Eb=(n,s,a,i)=>{const d={target:s,...i};n.getSystem().triggerEvent(a,s,d)},s_=(n,s,a,i)=>{const d={...i,target:s};n.getSystem().triggerEvent(a,s,d)},Zy=(n,s,a,i)=>{n.getSystem().triggerEvent(a,s,i.event)},ns=n=>Zg(n),Tb=(n,s)=>({key:n,value:rh({abort:s})}),kb=(n,s)=>({key:n,value:rh({can:s})}),Wy=n=>({key:n,value:rh({run:(s,a)=>{a.event.prevent()}})}),Me=(n,s)=>({key:n,value:rh({run:s})}),ch=(n,s,a)=>({key:n,value:rh({run:(i,d)=>{s.apply(void 0,[i,d].concat(a))}})}),Of=n=>s=>Me(n,s),Cu=n=>s=>({key:n,value:rh({run:(a,i)=>{sy(a,i)&&s(a,i)}})}),Gi=(n,s)=>Me(n,(a,i)=>{a.getSystem().getByUid(s).each(d=>{Zy(d,d.element,n,i)})}),Su=(n,s,a)=>{const i=s.partUids[a];return Gi(n,i)},ih=(n,s)=>Me(n,(a,i)=>{const d=i.event,g=a.getSystem().getByDom(d.target).getOrThunk(()=>Fi(d.target,C=>a.getSystem().getByDom(C).toOptional(),Cn).getOr(a));s(a,g,i)}),Df=n=>Me(n,(s,a)=>{a.cut()}),r_=n=>Me(n,(s,a)=>{a.stop()}),lh=(n,s)=>Cu(n)(s),Wo=Cu(Al()),qi=Cu(pi()),jy=Cu(_p()),km=Of(Hr()),Pl=n=>({classes:zt(n.classes)?[]:n.classes,attributes:zt(n.attributes)?{}:n.attributes,styles:zt(n.styles)?{}:n.styles}),ra=(n,s)=>({...n,attributes:{...n.attributes,...s.attributes},styles:{...n.styles,...s.styles},classes:n.classes.concat(s.classes)}),Fx=(n,s,a)=>km(i=>{a(i,n,s)}),Gy=(n,s,a)=>jy((i,d)=>{a(i,n,s)}),Hx=(n,s,a,i,d,g)=>{const h=yc(n),C=Ka(s,[H3("config",n)]);return zx(h,C,s,a,i,d,g)},a_=(n,s,a,i,d,g)=>{const h=n,C=Ka(s,[kl("config",n)]);return zx(h,C,s,a,i,d,g)},c_=(n,s,a)=>Z3((d,...g)=>{const h=[d].concat(g);return d.config({name:ie(n)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+n+". Using API: "+a)},C=>{const S=Array.prototype.slice.call(h,1);return s.apply(void 0,[d,C.config,C.state].concat(S))})},a,s),qy=n=>({key:n,value:void 0}),zx=(n,s,a,i,d,g,h)=>{const C=R=>Bn(R,a)?R[a]():T.none(),S=Ds(d,(R,P)=>c_(a,R,P)),A={...Ds(g,(R,P)=>Rp(R,P)),...S,revoke:Le(qy,a),config:R=>{const P=Aa(a+"-config",n,R);return{key:a,value:{config:P,me:A,configAsRaw:Ai(()=>Aa(a+"-config",n,R)),initialConfig:R,state:h}}},schema:ie(s),exhibit:(R,P)=>ni(C(R),It(i,"exhibit"),(z,Z)=>Z(P,z.config,z.state)).getOrThunk(()=>Pl({})),name:ie(a),handlers:R=>C(R).map(P=>It(i,"events").getOr(()=>({}))(P.config,P.state)).getOr({})};return A},Xe=n=>Zg(n),Ky=yc([He("fields"),He("name"),pe("active",{}),pe("apis",{}),pe("state",Bl),pe("extra",{})]),Ar=n=>{const s=Aa("Creating behaviour: "+n.name,Ky,n);return Hx(s.fields,s.name,s.active,s.apis,s.extra,s.state)},Yy=yc([He("branchKey"),He("branches"),He("name"),pe("active",{}),pe("apis",{}),pe("state",Bl),pe("extra",{})]),Xy=n=>{const s=Aa("Creating behaviour: "+n.name,Yy,n);return a_(Oa(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},Jy=ie(void 0),i_=(n,s)=>{const a=ns(s);return Ar({fields:[He("enabled")],name:n,active:{events:ie(a)}})},cn=(n,s)=>{const a=i_(n,s);return{key:n,value:{config:{},me:a,configAsRaw:ie({}),initialConfig:{},state:Bl}}},Vx=n=>({init:()=>{const a=Bt(n);return{get:()=>a.get(),set:C=>a.set(C),clear:()=>a.set(n),readState:()=>a.get()}}}),Ux=(n,s)=>{s.ignore||(kr(n.element),s.onFocus(n))};var Zx=Object.freeze({__proto__:null,focus:Ux,blur:(n,s)=>{s.ignore||ks(n.element)},isFocused:n=>Bi(n.element)}),Wx=Object.freeze({__proto__:null,exhibit:(n,s)=>{const a=s.ignore?{}:{attributes:{tabindex:"-1"}};return Pl(a)},events:n=>ns([Me(gd(),(s,a)=>{Ux(s,n),a.stop()})].concat(n.stopMousedown?[Me(Ya(),(s,a)=>{a.event.prevent()})]:[]))}),d_=[qn("onFocus"),pe("stopMousedown",!1),pe("ignore",!1)];const ln=Ar({fields:d_,name:"focusing",active:Wx,apis:Zx}),Qy=[8],Sd=[9],vi=[13],_b=[27],$a=[32],uh=[37],Wp=[38],Ab=[39],dh=[40],mh=ie("tooltipping.close.all"),wu=ie("dismiss.popups"),Ks=ie("reposition.popups"),wd=ie("mouse.released"),jx=(n,s,a)=>{const i=De(n.slice(0,s)),d=De(n.slice(s+1));return Ce(i.concat(d),a)},eC=(n,s,a)=>{const i=De(n.slice(0,s));return Ce(i,a)},Gx=(n,s,a)=>{const i=n.slice(0,s),d=n.slice(s+1);return Ce(d.concat(i),a)},m_=(n,s,a)=>{const i=n.slice(s+1);return Ce(i,a)},Zn=n=>s=>{const a=s.raw;return vo(n,a.which)},Ki=n=>s=>Vn(n,a=>a(s)),_m=n=>n.raw.shiftKey===!0,i6=n=>n.raw.ctrlKey===!0,fh=de(_m),jn=(n,s)=>({matches:n,classification:s}),f_=(n,s)=>Ce(n,i=>i.matches(s)).map(i=>i.classification),g_=(n,s,a,i)=>{const d=Lr(n.element,"."+s.highlightClass);gt(d,g=>{Qs(i,C=>Hn(C.element,g))||(us(g,s.highlightClass),n.getSystem().getByDom(g).each(C=>{s.onDehighlight(n,C),On(C,eb())}))})},l6=(n,s,a)=>g_(n,s,a,[]),u6=(n,s,a,i)=>{qp(n,s,a,i)&&(us(i.element,s.highlightClass),s.onDehighlight(n,i),On(i,eb()))},jp=(n,s,a,i)=>{g_(n,s,a,[i]),qp(n,s,a,i)||(Ro(i.element,s.highlightClass),s.onHighlight(n,i),On(i,Q0()))},h_=(n,s,a)=>{Ob(n,s).each(i=>{jp(n,s,a,i)})},p_=(n,s,a)=>{tC(n,s).each(i=>{jp(n,s,a,i)})},Gp=(n,s,a,i)=>{v_(n,s,a,i).fold(d=>{throw d},d=>{jp(n,s,a,d)})},b_=(n,s,a,i)=>{const d=Yx(n,s);Ce(d,i).each(h=>{jp(n,s,a,h)})},qp=(n,s,a,i)=>Ws(i.element,s.highlightClass),qx=(n,s,a)=>wo(n.element,"."+s.highlightClass).bind(i=>n.getSystem().getByDom(i).toOptional()),v_=(n,s,a,i)=>{const d=Lr(n.element,"."+s.itemClass);return T.from(d[i]).fold(()=>Xt.error(new Error("No element found with index "+i)),n.getSystem().getByDom)},Ob=(n,s,a)=>wo(n.element,"."+s.itemClass).bind(i=>n.getSystem().getByDom(i).toOptional()),tC=(n,s,a)=>{const i=Lr(n.element,"."+s.itemClass);return(i.length>0?T.some(i[i.length-1]):T.none()).bind(g=>n.getSystem().getByDom(g).toOptional())},nC=(n,s,a,i)=>{const d=Lr(n.element,"."+s.itemClass);return Ge(d,h=>Ws(h,s.highlightClass)).bind(h=>{const C=Yu(h,i,0,d.length-1);return n.getSystem().getByDom(d[C]).toOptional()})},Kx=(n,s,a)=>nC(n,s,a,-1),y_=(n,s,a)=>nC(n,s,a,1),Yx=(n,s,a)=>{const i=Lr(n.element,"."+s.itemClass);return Xu($e(i,d=>n.getSystem().getByDom(d).toOptional()))};var oC=Object.freeze({__proto__:null,dehighlightAll:l6,dehighlight:u6,highlight:jp,highlightFirst:h_,highlightLast:p_,highlightAt:Gp,highlightBy:b_,isHighlighted:qp,getHighlighted:qx,getFirst:Ob,getLast:tC,getPrevious:Kx,getNext:y_,getCandidates:Yx}),Xx=[He("highlightClass"),He("itemClass"),qn("onHighlight"),qn("onDehighlight")];const eo=Ar({fields:Xx,name:"highlighting",apis:oC}),Jx=(n,s,a)=>{s.exists(d=>a.exists(g=>Hn(g,d)))||Ht(n,X0(),{prevFocus:s,newFocus:a})},sC=()=>{const n=a=>or(a.element);return{get:n,set:(a,i)=>{const d=n(a);a.getSystem().triggerFocus(i,a.element);const g=n(a);Jx(a,d,g)}}},Db=()=>{const n=a=>eo.getHighlighted(a).map(i=>i.element);return{get:n,set:(a,i)=>{const d=n(a);a.getSystem().getByDom(i).fold(U,h=>{eo.highlight(a,h)});const g=n(a);Jx(a,d,g)}}},xd=(n,s,a,i,d)=>{const g=()=>n.concat([pe("focusManager",sC()),Vc("focusInside","onFocus",hu(x=>vo(["onFocus","onEnterOrSpace","onApi"],x)?Xt.value(x):Xt.error("Invalid value for focusInside"))),ro("handler",S),ro("state",s),ro("sendFocusIn",d)]),h=(x,A,R,P,z)=>{const Z=R(x,A,P,z);return f_(Z,A.event).bind(K=>K(x,A,P,z))},S={schema:g,processKey:h,toEvents:(x,A)=>{const R=x.focusInside!==Sf.OnFocusMode?T.none():d(x).map(Z=>Me(gd(),(K,ee)=>{Z(K,x,A),ee.stop()})),P=(Z,K)=>{const ee=Zn($a.concat(vi))(K.event);x.focusInside===Sf.OnEnterOrSpaceMode&&ee&&sy(Z,K)&&d(x).each(G=>{G(Z,x,A),K.stop()})},z=[Me(Sr(),(Z,K)=>{h(Z,K,a,x,A).fold(()=>{P(Z,K)},ee=>{K.stop()})}),Me(jg(),(Z,K)=>{h(Z,K,i,x,A).each(ee=>{K.stop()})})];return ns(R.toArray().concat(z))}};return S},rC=n=>{const s=[ho("onEscape"),ho("onEnter"),pe("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),pe("firstTabstop",0),pe("useTabstopAt",yt),ho("visibilitySelector")].concat([n]),a=(G,oe)=>{const le=G.visibilitySelector.bind(Se=>ya(oe,Se)).getOr(oe);return vr(le)>0},i=(G,oe)=>{const le=Lr(G.element,oe.selector),Se=Co(le,Te=>a(oe,Te));return T.from(Se[oe.firstTabstop])},d=(G,oe)=>oe.focusManager.get(G).bind(le=>ya(le,oe.selector)),g=(G,oe)=>a(G,oe)&&G.useTabstopAt(oe),h=(G,oe,le)=>{i(G,oe).each(Se=>{oe.focusManager.set(G,Se)})},C=(G,oe,le,Se,Te)=>Te(oe,le,ct=>g(Se,ct)).fold(()=>Se.cyclic?T.some(!0):T.none(),ct=>(Se.focusManager.set(G,ct),T.some(!0))),S=(G,oe,le,Se)=>{const Te=Co(Lr(G.element,le.selector),ct=>a(le,ct));return d(G,le).bind(ct=>Ge(Te,Le(Hn,ct)).bind(Ne=>C(G,Te,Ne,le,Se)))},x=(G,oe,le)=>{const Se=le.cyclic?jx:eC;return S(G,oe,le,Se)},A=(G,oe,le)=>{const Se=le.cyclic?Gx:m_;return S(G,oe,le,Se)},R=G=>z2(G).bind(Ln).exists(oe=>Hn(oe,G)),P=(G,oe,le)=>d(G,le).filter(Se=>!le.useTabstopAt(Se)).bind(Se=>(R(Se)?x:A)(G,oe,le)),z=(G,oe,le)=>le.onEnter.bind(Se=>Se(G,oe)),Z=(G,oe,le)=>(G.getSystem().broadcastOn([mh()],{closedTooltip:()=>{oe.stop()}}),oe.isStopped()?T.none():le.onEscape.bind(Se=>Se(G,oe))),K=ie([jn(Ki([_m,Zn(Sd)]),x),jn(Zn(Sd),A),jn(Ki([fh,Zn(vi)]),z)]),ee=ie([jn(Zn(_b),Z),jn(Zn(Sd),P)]);return xd(s,Bl.init,K,ee,()=>T.some(h))};var C_=rC(Da("cyclic",Cn)),Qx=rC(Da("cyclic",yt));const gh=n=>ha("input")(n)&&br(n,"type")!=="radio"||ha("textarea")(n),eE=(n,s,a)=>(xb(n,a,Hr()),T.some(!0)),Kp=(n,s,a)=>gh(a)&&Zn($a)(s.event)?T.none():eE(n,s,a),Yp=(n,s)=>T.some(!0),aC=[pe("execute",Kp),pe("useSpace",!1),pe("useEnter",!0),pe("useControlEnter",!1),pe("useDown",!1)],Am=(n,s,a)=>a.execute(n,s,n.element),tE=(n,s,a,i)=>{const d=a.useSpace&&!gh(n.element)?$a:[],g=a.useEnter?vi:[],h=a.useDown?dh:[],C=d.concat(g).concat(h);return[jn(Zn(C),Am)].concat(a.useControlEnter?[jn(Ki([i6,Zn(vi)]),Am)]:[])},nE=(n,s,a,i)=>a.useSpace&&!gh(n.element)?[jn(Zn($a),Yp)]:[];var oE=xd(aC,Bl.init,tE,nE,()=>T.none());const sE=()=>{const n=pn();return Tc({readState:()=>n.get().map(d=>({numRows:String(d.numRows),numColumns:String(d.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(d,g)=>{n.set({numRows:d,numColumns:g})},getNumRows:()=>n.get().map(d=>d.numRows),getNumColumns:()=>n.get().map(d=>d.numColumns)})};var rE=Object.freeze({__proto__:null,flatgrid:sE,init:n=>n.state(n)});const Rb=n=>(s,a,i,d)=>{const g=n(s.element);return Bb(g,s,a,i,d)},Mb=(n,s)=>{const a=q2(n,s);return Rb(a)},Xp=(n,s)=>{const a=q2(s,n);return Rb(a)},Nb=n=>(s,a,i,d)=>Bb(n,s,a,i,d),Bb=(n,s,a,i,d)=>i.focusManager.get(s).bind(h=>n(s.element,h,i,d)).map(h=>(i.focusManager.set(s,h),!0)),wt=Nb,Om=Nb,xu=Nb,Jp=(n,s)=>Ge(n,s).map(a=>({index:a,candidates:n})),aE=(n,s,a)=>{const i=h=>Hn(h,s),d=Lr(n,a),g=Co(d,lp);return Jp(g,i)},cC=(n,s)=>Ge(n,a=>Hn(s,a)),iC=(n,s,a,i)=>{const d=Math.floor(s/a),g=s%a;return i(d,g).bind(h=>{const C=h.row*a+h.column;return C>=0&&C<n.length?T.some(n[C]):T.none()})},cE=(n,s,a,i,d)=>iC(n,s,i,(g,h)=>{const S=g===a-1?n.length-g*i:i,x=Yu(h,d,0,S-1);return T.some({row:g,column:x})}),iE=(n,s,a,i,d)=>iC(n,s,i,(g,h)=>{const C=Yu(g,d,0,a-1),x=C===a-1?n.length-C*i:i,A=Xr(h,0,x-1);return T.some({row:C,column:A})}),lE=(n,s,a,i)=>cE(n,s,a,i,1),Pb=(n,s,a,i)=>cE(n,s,a,i,-1),Ys=(n,s,a,i)=>iE(n,s,a,i,-1),Yi=(n,s,a,i)=>iE(n,s,a,i,1),$b=[He("selector"),pe("execute",Kp),wc("onEscape"),pe("captureTab",!1),xx()],uE=(n,s,a)=>{wo(n.element,s.selector).each(i=>{s.focusManager.set(n,i)})},dE=(n,s)=>s.focusManager.get(n).bind(a=>ya(a,s.selector)),mE=(n,s,a,i)=>dE(n,a).bind(d=>a.execute(n,s,d)),Ib=n=>(s,a,i,d)=>aE(s,a,i.selector).bind(g=>n(g.candidates,g.index,d.getNumRows().getOr(i.initSize.numRows),d.getNumColumns().getOr(i.initSize.numColumns))),lC=(n,s,a)=>a.captureTab?T.some(!0):T.none(),fE=(n,s,a)=>a.onEscape(n,s),gE=Ib(Pb),Qp=Ib(lE),uC=Ib(Ys),Lb=Ib(Yi),dC=ie([jn(Zn(uh),Mb(gE,Qp)),jn(Zn(Ab),Xp(gE,Qp)),jn(Zn(Wp),wt(uC)),jn(Zn(dh),Om(Lb)),jn(Ki([_m,Zn(Sd)]),lC),jn(Ki([fh,Zn(Sd)]),lC),jn(Zn($a.concat(vi)),mE)]),S_=ie([jn(Zn(_b),fE),jn(Zn($a),Yp)]);var hE=xd($b,sE,dC,S_,()=>T.some(uE));const pE=(n,s,a,i,d)=>{const g=C=>Ri(C)==="button"&&br(C,"disabled")==="disabled",h=(C,S,x)=>d(C,S,i,0,x.length-1,x[S],A=>g(x[A])?h(C,A,x):T.from(x[A]));return aE(n,a,s).bind(C=>{const S=C.index,x=C.candidates;return h(S,S,x)})},Fb=(n,s,a,i)=>pE(n,s,a,i,(d,g,h,C,S,x,A)=>{const R=Xr(g+h,C,S);return R===d?T.from(x):A(R)}),Rf=(n,s,a,i)=>pE(n,s,a,i,(d,g,h,C,S,x,A)=>{const R=Yu(g,h,C,S);return R===d?T.none():A(R)}),bE=[He("selector"),pe("getInitial",T.none),pe("execute",Kp),wc("onEscape"),pe("executeOnMove",!1),pe("allowVertical",!0),pe("allowHorizontal",!0),pe("cycles",!0)],vE=(n,s)=>s.focusManager.get(n).bind(a=>ya(a,s.selector)),Hb=(n,s,a)=>vE(n,a).bind(i=>a.execute(n,s,i)),w_=(n,s,a)=>{s.getInitial(n).orThunk(()=>wo(n.element,s.selector)).each(i=>{s.focusManager.set(n,i)})},x_=(n,s,a)=>(a.cycles?Rf:Fb)(n,a.selector,s,-1),Mf=(n,s,a)=>(a.cycles?Rf:Fb)(n,a.selector,s,1),mC=n=>(s,a,i,d)=>n(s,a,i,d).bind(()=>i.executeOnMove?Hb(s,a,i):T.some(!0)),E_=(n,s,a)=>a.onEscape(n,s),T_=(n,s,a,i)=>{const d=[...a.allowHorizontal?uh:[]].concat(a.allowVertical?Wp:[]),g=[...a.allowHorizontal?Ab:[]].concat(a.allowVertical?dh:[]);return[jn(Zn(d),mC(Mb(x_,Mf))),jn(Zn(g),mC(Xp(x_,Mf))),jn(Zn(vi),Hb),jn(Zn($a),Hb)]},yE=ie([jn(Zn($a),Yp),jn(Zn(_b),E_)]);var k_=xd(bE,Bl.init,T_,yE,()=>T.some(w_));const fC=(n,s,a)=>T.from(n[s]).bind(i=>T.from(i[a]).map(d=>({rowIndex:s,columnIndex:a,cell:d}))),zb=(n,s,a,i)=>{const g=n[s].length,h=Yu(a,i,0,g-1);return fC(n,s,h)},gC=(n,s,a,i)=>{const d=Yu(a,i,0,n.length-1),g=n[d].length,h=Xr(s,0,g-1);return fC(n,d,h)},Eu=(n,s,a,i)=>{const g=n[s].length,h=Xr(a+i,0,g-1);return fC(n,s,h)},CE=(n,s,a,i)=>{const d=Xr(a+i,0,n.length-1),g=n[d].length,h=Xr(s,0,g-1);return fC(n,d,h)},Vb=(n,s,a)=>zb(n,s,a,1),__=(n,s,a)=>zb(n,s,a,-1),Dm=(n,s,a)=>gC(n,a,s,-1),A_=(n,s,a)=>gC(n,a,s,1),O_=(n,s,a)=>Eu(n,s,a,-1),m6=(n,s,a)=>Eu(n,s,a,1),f6=(n,s,a)=>CE(n,a,s,-1),hh=(n,s,a)=>CE(n,a,s,1),e1=[pu("selectors",[He("row"),He("cell")]),pe("cycles",!0),pe("previousSelector",T.none),pe("execute",Kp)],hC=(n,s,a)=>{s.previousSelector(n).orThunk(()=>{const d=s.selectors;return wo(n.element,d.cell)}).each(d=>{s.focusManager.set(n,d)})},D_=(n,s,a)=>or(n.element).bind(i=>a.execute(n,s,i)),R_=(n,s)=>$e(n,a=>Lr(a,s.selectors.cell)),Ub=(n,s)=>(a,i,d)=>{const g=d.cycles?n:s;return ya(i,d.selectors.row).bind(h=>{const C=Lr(h,d.selectors.cell);return cC(C,i).bind(S=>{const x=Lr(a,d.selectors.row);return cC(x,h).bind(A=>{const R=R_(x,d);return g(R,A,S).map(P=>P.cell)})})})},SE=Ub(__,O_),wE=Ub(Vb,m6),t1=Ub(Dm,f6),Zb=Ub(A_,hh),pC=ie([jn(Zn(uh),Mb(SE,wE)),jn(Zn(Ab),Xp(SE,wE)),jn(Zn(Wp),wt(t1)),jn(Zn(dh),Om(Zb)),jn(Zn($a.concat(vi)),D_)]),n1=ie([jn(Zn($a),Yp)]);var bC=xd(e1,Bl.init,pC,n1,()=>T.some(hC));const M_=[He("selector"),pe("execute",Kp),pe("moveOnTab",!1)],o1=(n,s,a)=>a.focusManager.get(n).bind(i=>a.execute(n,s,i)),xE=(n,s,a)=>{wo(n.element,s.selector).each(i=>{s.focusManager.set(n,i)})},Wb=(n,s,a)=>Rf(n,a.selector,s,-1),jb=(n,s,a)=>Rf(n,a.selector,s,1),Nf=(n,s,a,i)=>a.moveOnTab?xu(Wb)(n,s,a,i):T.none(),N_=(n,s,a,i)=>a.moveOnTab?xu(jb)(n,s,a,i):T.none(),Tu=ie([jn(Zn(Wp),xu(Wb)),jn(Zn(dh),xu(jb)),jn(Ki([_m,Zn(Sd)]),Nf),jn(Ki([fh,Zn(Sd)]),N_),jn(Zn(vi),o1),jn(Zn($a),o1)]),B_=ie([jn(Zn($a),Yp)]);var EE=xd(M_,Bl.init,Tu,B_,()=>T.some(xE));const P_=[wc("onSpace"),wc("onEnter"),wc("onShiftEnter"),wc("onLeft"),wc("onRight"),wc("onTab"),wc("onShiftTab"),wc("onUp"),wc("onDown"),wc("onEscape"),pe("stopSpaceKeyup",!1),ho("focusIn")],g6=(n,s,a)=>[jn(Zn($a),a.onSpace),jn(Ki([fh,Zn(vi)]),a.onEnter),jn(Ki([_m,Zn(vi)]),a.onShiftEnter),jn(Ki([_m,Zn(Sd)]),a.onShiftTab),jn(Ki([fh,Zn(Sd)]),a.onTab),jn(Zn(Wp),a.onUp),jn(Zn(dh),a.onDown),jn(Zn(uh),a.onLeft),jn(Zn(Ab),a.onRight),jn(Zn($a),a.onSpace)],Gb=(n,s,a)=>[...a.stopSpaceKeyup?[jn(Zn($a),Yp)]:[],jn(Zn(_b),a.onEscape)];var $_=xd(P_,Bl.init,g6,Gb,n=>n.focusIn);const I_=C_.schema(),L_=Qx.schema(),vC=k_.schema(),F_=hE.schema(),TE=bC.schema(),yC=oE.schema(),H_=EE.schema(),z_=$_.schema();var CC=Object.freeze({__proto__:null,acyclic:I_,cyclic:L_,flow:vC,flatgrid:F_,matrix:TE,execution:yC,menu:H_,special:z_});const kE=n=>Bn(n,"setGridSize"),Lt=Xy({branchKey:"mode",branches:CC,name:"keying",active:{events:(n,s)=>n.handler.toEvents(n,s)},apis:{focusIn:(n,s,a)=>{s.sendFocusIn(s).fold(()=>{n.getSystem().triggerFocus(n.element,n.element)},i=>{i(n,s,a)})},setGridSize:(n,s,a,i,d)=>{kE(a)?a.setGridSize(i,d):console.error("Layout does not support setGridSize")}},state:rE}),s1=Ct("alloy-premade"),_E=n=>(Object.defineProperty(n.element.dom,s1,{value:n.uid,writable:!0}),hm(s1,n)),V_=n=>So(n.dom,s1),SC=n=>It(n,s1),r1=n=>Ex((s,...a)=>n(s.getApis(),s,...a),n),qb=n=>n.getSystem().isConnected(),a1=n=>{On(n,pi());const s=n.components();gt(s,a1)},ph=n=>{const s=n.components();gt(s,ph),On(n,Al())},wC=(n,s)=>{n.getSystem().addToWorld(s),Qn(n.element)&&ph(s)},xC=n=>{a1(n),n.getSystem().removeFromWorld(n)},AE=(n,s)=>{Br(n.element,s.element)},EC=n=>{gt(n.components(),s=>Pi(s.element)),x0(n.element),n.syncComponents()},OE=(n,s,a)=>{const i=n.components();EC(n);const d=a(s),g=ge(i,d);gt(g,h=>{a1(h),n.getSystem().removeFromWorld(h)}),gt(d,h=>{qb(h)?AE(n,h):(n.getSystem().addToWorld(h),AE(n,h),Qn(n.element)&&ph(h))}),n.syncComponents()},bh=(n,s,a)=>{const i=n.components(),d=ne(s,C=>SC(C).toArray());gt(i,C=>{vo(d,C)||xC(C)});const g=a(s),h=ge(i,g);gt(h,C=>{qb(C)&&xC(C)}),gt(g,C=>{qb(C)||wC(n,C)}),n.syncComponents()},Ed=(n,s)=>{vh(n,s,Br)},vh=(n,s,a)=>{n.getSystem().addToWorld(s),a(n.element,s.element),Qn(n.element)&&ph(s),n.syncComponents()},Td=n=>{a1(n),Pi(n.element),n.getSystem().removeFromWorld(n)},kd=n=>{const s=Za(n.element).bind(a=>n.getSystem().getByDom(a).toOptional());Td(n),s.each(a=>{a.syncComponents()})},DE=n=>{const s=n.components();gt(s,Td),x0(n.element),n.syncComponents()},c1=(n,s)=>{RE(n,s,Br)},Xi=(n,s)=>{RE(n,s,Hw)},RE=(n,s,a)=>{a(n,s.element);const i=bl(s.element);gt(i,d=>{s.getByDom(d).each(ph)})},ME=n=>{const s=bl(n.element);gt(s,a=>{n.getByDom(a).each(a1)}),Pi(n.element)},TC=(n,s,a)=>sm(n,s).map(d=>{if(a.exists(h=>!Hn(h,d))){const h=a.map(Ri).getOr("span"),C=at.fromTag(h);return rf(d,C),C}else return d}),kC=(n,s,a)=>{a.fold(()=>Br(n,s),i=>{Hn(i,s)||(rf(i,s),Pi(i))})},NE=(n,s,a)=>{const i=$e(s,a),d=bl(n);return gt(d.slice(i.length),Pi),i},BE=(n,s,a,i)=>{const d=sm(n,s),g=i(a,d),h=TC(n,s,d);return kC(n,g.element,h),g},U_=(n,s,a)=>NE(n,s,(i,d)=>BE(n,d,i,a)),PE=(n,s)=>NE(n,s,(a,i)=>{const d=sm(n,i);return kC(n,a,d),a}),Bf=(n,s)=>{const a=nr(s),i=Nr(a).bind(g=>{const h=C=>Hn(g,C);return h(s)?T.some(s):K2(s,h)}),d=n(s);return i.each(g=>{Nr(a).filter(h=>Hn(h,g)).fold(()=>{kr(g)},U)}),d},_C=(n,s)=>{Bf(()=>{OE(n,s,()=>$e(s,n.getSystem().build))},n.element)},$E=(n,s)=>{Bf(()=>{bh(n,s,()=>U_(n.element,s,n.getSystem().buildOrPatch))},n.element)},AC=(n,s,a,i)=>{xC(s);const d=BE(n.element,a,i,n.getSystem().buildOrPatch);wC(n,d),n.syncComponents()},OC=(n,s,a)=>{const i=n.getSystem().build(a);vh(n,i,s)},DC=(n,s,a,i)=>{kd(s),OC(n,(d,g)=>W2(d,g,a),i)},Z_=(n,s,a,i)=>(s.reuseDom?$E:_C)(n,i),Pf=(n,s,a,i)=>{OC(n,Br,i)},$f=(n,s,a,i)=>{OC(n,Z2,i)},Kb=(n,s,a,i)=>{const d=Yb(n);Ce(d,h=>Hn(i.element,h.element)).each(kd)},Yb=(n,s)=>n.components(),IE=(n,s,a,i,d)=>{const g=Yb(n);return T.from(g[i]).map(h=>(d.fold(()=>kd(h),C=>{(s.reuseDom?AC:DC)(n,h,i,C)}),h))};var LE=Object.freeze({__proto__:null,append:Pf,prepend:$f,remove:Kb,replaceAt:IE,replaceBy:(n,s,a,i,d)=>{const g=Yb(n);return Ge(g,i).bind(h=>IE(n,s,a,h,d))},set:Z_,contents:Yb});const mn=Ar({fields:[dr("reuseDom",!0)],name:"replacing",apis:LE}),Xb=(n,s,a)=>Hn(s,n.element)&&!Hn(s,a),Wc=ns([kb(gd(),(n,s)=>{const a=s.event,i=a.originator,d=a.target;return Xb(n,i,d)?(console.warn(gd()+` did not get interpreted by the desired target. 
Originator: `+Ol(i)+`
Target: `+Ol(d)+`
Check the `+gd()+" event handlers"),!1):!0})]);var i1=Object.freeze({__proto__:null,events:Wc});const j_=ie("alloy-id-"),Jb=ie("data-alloy-id"),G_=j_(),RC=Jb(),MC=(n,s)=>{const a=Ct(G_+n);return l1(s,a),a},l1=(n,s)=>{Object.defineProperty(n.dom,RC,{value:s,writable:!0})},$l=n=>{const s=gc(n)?n.dom[RC]:null;return T.from(s)},yh=n=>Ct(n),q_=Et,If=n=>{const s=d=>`The component must be in a context to execute: ${d}`+(n?`
`+Ol(n().element)+" is not in context.":""),a=d=>()=>{throw new Error(s(d))},i=d=>()=>{console.warn(s(d))};return{debugInfo:ie("fake"),triggerEvent:i("triggerEvent"),triggerFocus:i("triggerFocus"),triggerEscape:i("triggerEscape"),broadcast:i("broadcast"),broadcastOn:i("broadcastOn"),broadcastEvent:i("broadcastEvent"),build:a("build"),buildOrPatch:a("buildOrPatch"),addToWorld:a("addToWorld"),removeFromWorld:a("removeFromWorld"),addToGui:a("addToGui"),removeFromGui:a("removeFromGui"),getByUid:a("getByUid"),getByDom:a("getByDom"),isConnected:Cn}},u1=If(),Qb=(n,s)=>{const a=$e(s,d=>Ka(d.name(),[He("config"),pe("state",Bl)])),i=ls("component.behaviours",Vt(a),n.behaviours).fold(d=>{throw new Error(zg(d)+`
Complete spec:
`+JSON.stringify(n,null,2))},Et);return{list:s,data:Ds(i,d=>{const g=d.map(h=>({config:h.config,state:h.state.init(h.config)}));return ie(g)})}},hr=n=>n.list,K_=n=>n.data,NC=(n,s)=>{const a={};return Cs(n,(i,d)=>{Cs(i,(g,h)=>{const C=It(a,h).getOr([]);a[h]=C.concat([s(d,g)])})}),a},Rm=(n,s,a,i)=>{const d={...s};gt(a,A=>{d[A.name()]=A.exhibit(n,i)});const g=NC(d,(A,R)=>({name:A,modification:R})),h=A=>gs(A,(R,P)=>({...P.modification,...R}),{}),C=gs(g.classes,(A,R)=>R.modification.concat(A),[]),S=h(g.attributes),x=h(g.styles);return Pl({classes:C,attributes:S,styles:x})},ku=(n,s,a,i)=>{try{const d=kn(a,(g,h)=>{const C=g[s],S=h[s],x=i.indexOf(C),A=i.indexOf(S);if(x===-1)throw new Error("The ordering for "+n+" does not have an entry for "+C+`.
Order specified: `+JSON.stringify(i,null,2));if(A===-1)throw new Error("The ordering for "+n+" does not have an entry for "+S+`.
Order specified: `+JSON.stringify(i,null,2));return x<A?-1:A<x?1:0});return Xt.value(d)}catch(d){return Xt.error([d])}},BC=(n,s)=>({handler:n,purpose:s}),FE=(n,s)=>({cHandler:n,purpose:s}),Y_=(n,s)=>FE(Le.apply(void 0,[n.handler].concat(s)),n.purpose),ev=n=>n.cHandler,d1=(n,s)=>({name:n,handler:s}),Mm=(n,s)=>{const a={};return gt(n,i=>{a[i.name()]=i.handlers(s)}),a},tv=(n,s,a)=>{const i={...a,...Mm(s,n)};return NC(i,d1)},nv=(n,s,a,i)=>{const d=tv(n,a,i);return ov(d,s)},Nm=n=>{const s=o_(n);return(a,i,...d)=>{const g=[a,i].concat(d);s.abort.apply(void 0,g)?i.stop():s.can.apply(void 0,g)&&s.run.apply(void 0,g)}},m1=(n,s)=>Xt.error(["The event ("+n+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify($e(s,a=>a.name),null,2)]),PC=(n,s,a)=>{const i=s[a];return i?ku("Event: "+a,"name",n,i).map(d=>{const g=$e(d,h=>h.handler);return Lx(g)}):m1(a,n)},ov=(n,s)=>{const a=Mr(n,(i,d)=>(i.length===1?Xt.value(i[0].handler):PC(i,s,d)).map(h=>{const C=Nm(h),S=i.length>1?Co(s[d],x=>Qs(i,A=>A.name===x)).join(" > "):i[0].name;return hm(d,BC(C,S))}));return z3(a,{})},Il="alloy.base.behaviour",HE=Vt([Cr("dom","dom",fi(),Vt([He("tag"),pe("styles",{}),pe("classes",[]),pe("attributes",{}),ho("value"),ho("innerHtml")])),He("components"),He("uid"),pe("events",{}),pe("apis",{}),Cr("eventOrder","eventOrder",Lg({[Hr()]:["disabling",Il,"toggling","typeaheadevents"],[gd()]:[Il,"focusing","keying"],[_p()]:[Il,"disabling","toggling","representing","tooltipping"],[_l()]:[Il,"representing","streaming","invalidating"],[pi()]:[Il,"representing","item-events","toolbar-button-events","tooltipping"],[Ya()]:["focusing",Il,"item-type-events"],[Sc()]:["focusing",Il,"item-type-events"],[Uc()]:["item-type-events","tooltipping"],[hd()]:["receiving","reflecting","tooltipping"]}),mi()),ho("domModification")]),_u=n=>ls("custom.definition",HE,n),$C=n=>({...n.dom,uid:n.uid,domChildren:$e(n.components,s=>s.element)}),sv=n=>n.domModification.fold(()=>Pl({}),Pl),Ch=n=>n.events,f1=(n,s)=>{const a=mo(n),i=mo(s),d=ge(i,a),g=Vs(n,(h,C)=>!So(s,C)||h!==s[C]).t;return{toRemove:d,toSet:g}},rv=(n,s)=>{const{class:a,style:i,...d}=cf(s),{toSet:g,toRemove:h}=f1(n.attributes,d),C=()=>{gt(h,le=>Qo(s,le)),j2(s,g)},S=sr(s),{toSet:x,toRemove:A}=f1(n.styles,S),R=()=>{gt(A,le=>Nn(s,le)),hs(s,x)},P=J2(s),z=ge(P,n.classes),Z=ge(n.classes,P),K=()=>{gu(s,Z),ea(s,z)},ee=le=>{wl(s,le)},G=()=>{const le=n.domChildren;PE(s,le)},oe=()=>{const le=s,Se=n.value.getOrUndefined();Se!==Hc(le)&&im(le,Se??"")};return C(),K(),R(),n.innerHtml.fold(G,ee),oe(),s},X_=n=>{const s=at.fromTag(n.tag);j2(s,n.attributes),gu(s,n.classes),hs(s,n.styles),n.innerHtml.each(i=>wl(s,i));const a=n.domChildren;return zw(s,a),n.value.each(i=>{im(s,i)}),s},zE=(n,s)=>{try{const a=rv(n,s);return T.some(a)}catch{return T.none()}},av=n=>n.innerHtml.isSome()&&n.domChildren.length>0,J_=(n,s)=>{const a=d=>Ri(d)===n.tag&&!av(n)&&!V_(d),i=s.filter(a).bind(d=>zE(n,d)).getOrThunk(()=>X_(n));return l1(i,n.uid),i},IC=n=>{const s=It(n,"behaviours").getOr({});return ne(mo(s),a=>{const i=s[a];return jt(i)?[i.me]:[]})},Ll=(n,s)=>Qb(n,s),LC=n=>{const s=IC(n);return Ll(n,s)},Q_=(n,s,a)=>{const i=$C(n),d=sv(n),g={"alloy.base.modification":d},h=s.length>0?Rm(a,g,s,i):d;return ra(i,h)},VE=(n,s,a)=>{const i={"alloy.base.behaviour":Ch(n)};return nv(a,n.eventOrder,s,i).getOrDie()},UE=(n,s)=>{const a=()=>le,i=Bt(u1),d=hi(_u(n)),g=LC(n),h=hr(g),C=K_(g),S=Q_(d,h,C),x=J_(S,s),A=VE(d,h,C),R=Bt(d.components),P=Se=>{i.set(Se)},z=()=>{i.set(If(a))},Z=()=>{const Se=bl(x),Te=ne(Se,ct=>i.get().getByDom(ct).fold(()=>[],xn));R.set(Te)},K=Se=>{const Te=C;return(et(Te[Se.name()])?Te[Se.name()]:()=>{throw new Error("Could not find "+Se.name()+" in "+JSON.stringify(n,null,2))})()},ee=Se=>et(C[Se.name()]),G=()=>d.apis,oe=Se=>C[Se]().map(Te=>Te.state.readState()).getOr("not enabled"),le={uid:n.uid,getSystem:i.get,config:K,hasConfigured:ee,spec:n,readState:oe,getApis:G,connect:P,disconnect:z,element:x,syncComponents:Z,components:R.get,events:A};return le},ZE=(n,s)=>{const a=It(n,"components").getOr([]);return s.fold(()=>$e(a,m),i=>$e(a,(d,g)=>l(d,sm(i,g))))},eA=(n,s)=>{const{events:a,...i}=q_(n),d=ZE(i,s),g={...i,events:{...i1,...a},components:d};return Xt.value(UE(g,s))},Yo=n=>{const s=at.fromText(n);return jc({element:s})},jc=n=>{const s=Aa("external.component",yc([He("element"),ho("uid")]),n),a=Bt(If()),i=C=>{a.set(C)},d=()=>{a.set(If(()=>h))},g=s.uid.getOrThunk(()=>yh("external"));l1(s.element,g);const h={uid:g,getSystem:a.get,config:T.none,hasConfigured:Cn,connect:i,disconnect:d,getApis:()=>({}),element:s.element,spec:n,readState:ie("No state"),syncComponents:U,components:ie([]),events:{}};return _E(h)},Sh=yh,yi=n=>So(n,"uid"),l=(n,s)=>SC(n).getOrThunk(()=>{const a=yi(n)?n:{uid:Sh(""),...n};return eA(a,s).getOrDie()}),m=n=>l(n,T.none()),p=_E;var N=Object.freeze({__proto__:null,block:(n,s,a,i)=>{qt(n.element,"aria-busy",!0);const d=s.getRoot(n).getOr(n),g=Xe([Lt.config({mode:"special",onTab:()=>T.some(!0),onShiftTab:()=>T.some(!0)}),ln.config({})]),h=i(d,g),C=d.getSystem().build(h);mn.append(d,p(C)),C.hasConfigured(Lt)&&s.focus&&Lt.focusIn(C),a.isBlocked()||s.onBlock(n),a.blockWith(()=>mn.remove(d,C))},unblock:(n,s,a)=>{Qo(n.element,"aria-busy"),a.isBlocked()&&s.onUnblock(n),a.clear()},isBlocked:(n,s,a)=>a.isBlocked()}),H=[Ho("getRoot",T.none),dr("focus",!0),qn("onBlock"),qn("onUnblock")],te=Object.freeze({__proto__:null,init:()=>{const n=u0(),s=a=>{n.set({destroy:a})};return Tc({readState:n.isSet,blockWith:s,clear:n.clear,isBlocked:n.isSet})}});const fe=Ar({fields:H,name:"blocking",apis:N,state:te});var bt=Object.freeze({__proto__:null,getCurrent:(n,s,a)=>s.find(n)});const mt=[He("find")],We=Ar({fields:mt,name:"composing",apis:bt});var Gt=Object.freeze({__proto__:null,getCoupled:(n,s,a,i)=>a.getOrCreate(n,s,i),getExistingCoupled:(n,s,a,i)=>a.getExisting(n,s,i)}),vn=[Ga("others",ux(Xt.value,mi()))],ao=Object.freeze({__proto__:null,init:()=>{const n={},s=(g,h)=>{if(mo(g.others).length===0)throw new Error("Cannot find any known coupled components");return It(n,h)},a=(g,h,C)=>s(h,C).getOrThunk(()=>{const x=It(h.others,C).getOrDie("No information found for coupled component: "+C)(g),A=g.getSystem().build(x);return n[C]=A,A}),i=(g,h,C)=>s(h,C).orThunk(()=>(It(h.others,C).getOrDie("No information found for coupled component: "+C),T.none())),d=ie({});return Tc({readState:d,getExisting:i,getOrCreate:a})}});const fn=Ar({fields:vn,name:"coupling",apis:Gt,state:ao}),po=["input","button","textarea","select"],Is=(n,s,a)=>{(s.disabled()?Ia:Or)(n,s)},Gc=(n,s)=>s.useNative===!0&&vo(po,Ri(n.element)),Lf=n=>$r(n.element,"disabled"),Bm=n=>{qt(n.element,"disabled","disabled")},Ff=n=>{Qo(n.element,"disabled")},_o=n=>br(n.element,"aria-disabled")==="true",vs=n=>{qt(n.element,"aria-disabled","true")},Ja=n=>{qt(n.element,"aria-disabled","false")},Ia=(n,s,a)=>{s.disableClass.each(d=>{Ro(n.element,d)}),(Gc(n,s)?Bm:vs)(n),s.onDisabled(n)},Or=(n,s,a)=>{s.disableClass.each(d=>{us(n.element,d)}),(Gc(n,s)?Ff:Ja)(n),s.onEnabled(n)},_d=(n,s)=>Gc(n,s)?Lf(n):_o(n);var FC=Object.freeze({__proto__:null,enable:Or,disable:Ia,isDisabled:_d,onLoad:Is,set:(n,s,a,i)=>{(i?Ia:Or)(n,s)}}),aa=Object.freeze({__proto__:null,exhibit:(n,s)=>Pl({classes:s.disabled()?s.disableClass.toArray():[]}),events:(n,s)=>ns([Tb(Hr(),(a,i)=>_d(a,n)),Gy(n,s,Is)])}),WE=[Ho("disabled",Cn),pe("useNative",!0),ho("disableClass"),qn("onDisabled"),qn("onEnabled")];const Rt=Ar({fields:WE,name:"disabling",active:aa,apis:FC}),Qa=(n,s,a,i,d)=>{const g=h=>h+"px";return{position:n,left:s.map(g),top:a.map(g),right:i.map(g),bottom:d.map(g)}},tA=n=>({...n,position:T.some(n.position)}),jE=(n,s)=>{Ir(n,tA(s))},iv=(n,s)=>{const a=n.element;Ro(a,s.transitionClass),us(a,s.fadeOutClass),Ro(a,s.fadeInClass),s.onShow(n)},HC=(n,s)=>{const a=n.element;Ro(a,s.transitionClass),us(a,s.fadeInClass),Ro(a,s.fadeOutClass),s.onHide(n)},Hf=(n,s)=>n.y<s.bottom&&n.bottom>s.y,GE=(n,s)=>n.y>=s.y,zC=(n,s)=>n.bottom<=s.bottom,VC=(n,s,a)=>({location:"top",leftX:s,topY:a.bounds.y-n.y}),qE=(n,s,a)=>({location:"bottom",leftX:s,bottomY:n.bottom-a.bounds.bottom}),UC=n=>n.box.x-n.win.x,$H=(n,s,a)=>{const i=s.win,d=s.box,g=UC(s);return ic(n,h=>{switch(h){case"bottom":return zC(d,a.bounds)?T.none():T.some(qE(i,g,a));case"top":return GE(d,a.bounds)?T.none():T.some(VC(i,g,a));default:return T.none()}}).getOr({location:"no-dock"})},IH=(n,s,a)=>Vn(n,i=>{switch(i){case"bottom":return zC(s,a.bounds);case"top":return GE(s,a.bounds)}}),LH=(n,s)=>{const a=s.optScrollEnv.fold(ie(n.bounds.y),i=>i.scrollElmTop+(n.bounds.y-i.currentScrollTop));return ko(n.bounds.x,a)},ZC=(n,s)=>{const a=s.optScrollEnv.fold(ie(n.y),i=>n.y+i.currentScrollTop-i.scrollElmTop);return ko(n.x,a)},WC=(n,s,a)=>a.getInitialPos().map(i=>{const d=LH(i,s);return{box:rr(d.left,d.top,va(n),vr(n)),location:i.location}}),h6=(n,s,a,i,d)=>{const g=ZC(s,a),h=rr(g.left,g.top,s.width,s.height);i.setInitialPos({style:sr(n),position:es(n,"position")||"static",bounds:h,location:d.location})},p6=(n,s,a,i,d)=>{i.getInitialPos().fold(()=>h6(n,s,a,i,d),()=>U)},b6=(n,s,a)=>a.getInitialPos().bind(i=>{switch(a.clearInitialPos(),i.position){case"static":return T.some({morph:"static"});case"absolute":const d=dm(n).getOr(Fc()),g=js(d),h=d.dom.scrollTop??0;return T.some({morph:"absolute",positionCss:Qa("absolute",It(i.style,"left").map(C=>s.x-g.x),It(i.style,"top").map(C=>s.y-g.y+h),It(i.style,"right").map(C=>g.right-s.right),It(i.style,"bottom").map(C=>g.bottom-s.bottom))});default:return T.none()}}),v6=(n,s,a)=>WC(n,s,a).filter(({box:i})=>IH(a.getModes(),i,s)).bind(({box:i})=>b6(n,i,a)),jC=n=>{switch(n.location){case"top":return T.some({morph:"fixed",positionCss:Qa("fixed",T.some(n.leftX),T.some(n.topY),T.none(),T.none())});case"bottom":return T.some({morph:"fixed",positionCss:Qa("fixed",T.some(n.leftX),T.none(),T.none(),T.some(n.bottomY))});default:return T.none()}},lv=(n,s,a)=>{const i=js(n),d=ta(),g=$H(a.getModes(),{win:d,box:i},s);return g.location==="top"||g.location==="bottom"?(h6(n,i,s,a,g),jC(g)):T.none()},nA=(n,s,a)=>v6(n,s,a).orThunk(()=>s.optScrollEnv.bind(i=>WC(n,s,a)).bind(({box:i,location:d})=>{const g=ta(),h=UC({win:g,box:i}),C=d==="top"?VC(g,h,s):qE(g,h,s);return jC(C)})),FH=(n,s,a)=>{const i=n.element;return ti(is(i,"position"),"fixed")?nA(i,s,a):lv(i,s,a)},HH=(n,s,a)=>{const i=n.element;return WC(i,s,a).bind(({box:d})=>b6(i,d,a))},y6=(n,s,a,i)=>{const d=js(n),g=ta(),h=UC({win:g,box:d}),C=i(g,h,s);return C.location==="bottom"||C.location==="top"?(p6(n,d,s,a,C),jC(C)):T.none()},zf=(n,s,a)=>{a.setDocked(!1),gt(["left","right","top","bottom","position"],i=>Nn(n.element,i)),s.onUndocked(n)},GC=(n,s,a,i)=>{const d=i.position==="fixed";a.setDocked(d),jE(n.element,i),(d?s.onDocked:s.onUndocked)(n)},KE=(n,s,a,i,d=!1)=>{s.contextual.each(g=>{g.lazyContext(n).each(h=>{const C=Hf(h,i.bounds);C!==a.isVisible()&&(a.setVisible(C),d&&!C?(gu(n.element,[g.fadeOutClass]),g.onHide(n)):(C?iv:HC)(n,g))})})},qC=(n,s,a,i,d)=>{KE(n,s,a,i,!0),GC(n,s,a,d.positionCss)},C6=(n,s,a,i,d)=>{switch(d.morph){case"static":return zf(n,s,a);case"absolute":return GC(n,s,a,d.positionCss);case"fixed":return qC(n,s,a,i,d)}},YE=(n,s,a)=>{const i=s.lazyViewport(n);KE(n,s,a,i),FH(n,i,a).each(d=>{C6(n,s,a,i,d)})},oA=(n,s,a)=>{const i=n.element;a.setDocked(!1);const d=s.lazyViewport(n);HH(n,d,a).each(g=>{switch(g.morph){case"static":{zf(n,s,a);break}case"absolute":{GC(n,s,a,g.positionCss);break}}}),a.setVisible(!0),s.contextual.each(g=>{ea(i,[g.fadeInClass,g.fadeOutClass,g.transitionClass]),g.onShow(n)}),XE(n,s,a)},XE=(n,s,a)=>{n.getSystem().isConnected()&&YE(n,s,a)},S6=(n,s,a)=>{a.isDocked()&&oA(n,s,a)},Od=n=>(s,a,i)=>{const d=a.lazyViewport(s);y6(s.element,d,i,n).each(h=>{qC(s,a,i,d,h)})},zH=Od(VC),VH=Od(qE);var sA=Object.freeze({__proto__:null,refresh:XE,reset:S6,isDocked:(n,s,a)=>a.isDocked(),getModes:(n,s,a)=>a.getModes(),setModes:(n,s,a,i)=>a.setModes(i),forceDockToTop:zH,forceDockToBottom:VH}),w6=Object.freeze({__proto__:null,events:(n,s)=>ns([lh(j0(),(a,i)=>{n.contextual.each(d=>{Ws(a.element,d.transitionClass)&&(ea(a.element,[d.transitionClass,d.fadeInClass]),(s.isVisible()?d.onShown:d.onHidden)(a)),i.stop()})}),Me(Sy(),(a,i)=>{XE(a,n,s)}),Me(bx(),(a,i)=>{XE(a,n,s)}),Me(Kg(),(a,i)=>{S6(a,n,s)})])}),rA=[Ka("contextual",[ps("fadeInClass"),ps("fadeOutClass"),ps("transitionClass"),Cc("lazyContext"),qn("onShow"),qn("onShown"),qn("onHide"),qn("onHidden")]),Ho("lazyViewport",()=>({bounds:ta(),optScrollEnv:T.none()})),fm("modes",["top","bottom"],ur),qn("onDocked"),qn("onUndocked")],x6=Object.freeze({__proto__:null,init:n=>{const s=Bt(!1),a=Bt(!0),i=pn(),d=Bt(n.modes),g=()=>`docked:  ${s.get()}, visible: ${a.get()}, modes: ${d.get().join(",")}`;return Tc({isDocked:s.get,setDocked:s.set,getInitialPos:i.get,setInitialPos:i.set,clearInitialPos:i.clear,isVisible:a.get,setVisible:a.set,getModes:d.get,setModes:d.set,readState:g})}});const rs=Ar({fields:rA,name:"docking",active:w6,apis:sA,state:x6}),aA=lc.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),JE=n=>s=>s.translate(-n.left,-n.top),YC=n=>s=>s.translate(n.left,n.top),Pm=n=>(s,a)=>Po(n,(i,d)=>d(i),ko(s,a)),QE=(n,s,a)=>n.fold(Pm([YC(a),JE(s)]),Pm([JE(s)]),Pm([])),uv=(n,s,a)=>n.fold(Pm([YC(a)]),Pm([]),Pm([YC(s)])),cA=(n,s,a)=>n.fold(Pm([]),Pm([JE(a)]),Pm([YC(s),JE(a)])),E6=(n,s,a,i,d,g)=>{const h=uv(n,d,g),C=uv(s,d,g);return Math.abs(h.left-C.left)<=a&&Math.abs(h.top-C.top)<=i},T6=(n,s,a,i,d,g)=>{const h=uv(n,d,g),C=uv(s,d,g),S=Math.abs(h.left-C.left),x=Math.abs(h.top-C.top);return ko(S,x)},iA=(n,s,a)=>{const i=n.fold((d,g)=>({position:T.some("absolute"),left:T.some(d+"px"),top:T.some(g+"px")}),(d,g)=>({position:T.some("absolute"),left:T.some(d-a.left+"px"),top:T.some(g-a.top+"px")}),(d,g)=>({position:T.some("fixed"),left:T.some(d+"px"),top:T.some(g+"px")}));return{right:T.none(),bottom:T.none(),...i}},e4=(n,s,a)=>n.fold((i,d)=>$m(i+s,d+a),(i,d)=>Ou(i+s,d+a),(i,d)=>g1(i+s,d+a)),t4=(n,s,a,i)=>{const d=(g,h)=>(C,S)=>{const x=g(s,a,i);return h(C.getOr(x.left),S.getOr(x.top))};return n.fold(d(cA,$m),d(uv,Ou),d(QE,g1))},$m=aA.offset,Ou=aA.absolute,g1=aA.fixed,k6=(n,s)=>{const a=br(n,s);return zt(a)?NaN:parseInt(a,10)},UH=(n,s)=>{const a=n.element,i=k6(a,s.leftAttr),d=k6(a,s.topAttr);return isNaN(i)||isNaN(d)?T.none():T.some(ko(i,d))},ZH=(n,s,a)=>{const i=n.element;qt(i,s.leftAttr,a.left+"px"),qt(i,s.topAttr,a.top+"px")},_6=(n,s)=>{const a=n.element;Qo(a,s.leftAttr),Qo(a,s.topAttr)},WH=(n,s,a,i)=>UH(n,s).fold(()=>a,d=>g1(d.left+i.left,d.top+i.top)),A6=(n,s,a,i,d,g)=>{const h=WH(n,s,a,i),C=s.mustSnap?D6(n,s,h,d,g):dv(n,s,h,d,g),S=QE(h,d,g);return ZH(n,s,S),C.fold(()=>({coord:g1(S.left,S.top),extra:T.none()}),x=>({coord:x.output,extra:x.extra}))},jH=(n,s)=>{_6(n,s)},O6=(n,s,a,i)=>ic(n,d=>{const g=d.sensor;return E6(s,g,d.range.left,d.range.top,a,i)?T.some({output:t4(d.output,s,a,i),extra:d.extra}):T.none()}),D6=(n,s,a,i,d)=>{const g=s.getSnapPoints(n);return O6(g,a,i,d).orThunk(()=>Po(g,(S,x)=>{const A=x.sensor,R=T6(a,A,x.range.left,x.range.top,i,d);return S.deltas.fold(()=>({deltas:T.some(R),snap:T.some(x)}),P=>{const z=(R.left+R.top)/2,Z=(P.left+P.top)/2;return z<=Z?{deltas:T.some(R),snap:T.some(x)}:S})},{deltas:T.none(),snap:T.none()}).snap.map(S=>({output:t4(S.output,a,i,d),extra:S.extra})))},dv=(n,s,a,i,d)=>{const g=s.getSnapPoints(n);return O6(g,a,i,d)},R6=(n,s,a)=>({coord:t4(n.output,n.output,s,a),extra:n.extra});var qH=Object.freeze({__proto__:null,snapTo:(n,s,a,i)=>{const d=s.getTarget(n.element);if(s.repositionTarget){const g=hc(n.element),h=Ns(g),C=I0(d),S=R6(i,h,C),x=iA(S.coord,h,C);Ir(d,x)}}});const Ur=(n,s)=>gm(n,{},$e(s,a=>F3(a.name(),"Cannot configure "+a.name()+" for "+n)).concat([Da("dump",Et)])),XC=n=>n.dump,wa=(n,s)=>({...Xe(s),...n.dump}),Du={field:Ur,augment:wa,get:XC},KH=(n,s)=>(n.length>0?[pu("parts",n)]:[]).concat([He("uid"),pe("dom",{}),pe("components",[]),wx("originalSpec"),pe("debug.sketcher",{})]).concat(s),M6=(n,s,a,i,d)=>{const g=KH(i,d);return Aa(n+" [SpecSchema]",yc(g.concat(s)),a)},YH=(n,s,a,i)=>{const d=o4(i),g=M6(n,s,d,[],[]);return a(g,d)},lA=(n,s,a,i,d)=>{const g=o4(d),h=fr(a),C=yd(a),S=M6(n,s,g,h,[C]),x=Xa(n,S,a),A=ub(n,S,x.internals());return i(S,A,g,x.externals())},n4=n=>So(n,"uid"),o4=n=>n4(n)?n:{...n,uid:yh("uid")},XH=n=>n.uid!==void 0,TJ=yc([He("name"),He("factory"),He("configFields"),pe("apis",{}),pe("extraApis",{})]),N6=yc([He("name"),He("factory"),He("configFields"),He("partFields"),pe("apis",{}),pe("extraApis",{})]),Ji=n=>{const s=Aa("Sketcher for "+n.name,TJ,n),a=g=>YH(s.name,s.configFields,s.factory,g),i=Ds(s.apis,r1),d=Ds(s.extraApis,(g,h)=>Rp(g,h));return{name:s.name,configFields:s.configFields,sketch:a,...i,...d}},kc=n=>{const s=Aa("Sketcher for "+n.name,N6,n),a=h=>lA(s.name,s.configFields,s.partFields,s.factory,h),i=ym(s.name,s.partFields),d=Ds(s.apis,r1),g=Ds(s.extraApis,(h,C)=>Rp(h,C));return{name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:a,parts:i,...d,...g}},Dd=Ji({name:"Container",factory:n=>{const{attributes:s,...a}=n.dom;return{uid:n.uid,dom:{tag:"div",attributes:{role:"presentation",...s},...a},components:n.components,behaviours:XC(n.containerBehaviours),events:n.events,domModification:n.domModification,eventOrder:n.eventOrder}},configFields:[pe("components",[]),Ur("containerBehaviours",[]),pe("events",{}),pe("domModification",{}),pe("eventOrder",{})]}),uA="data-initial-z-index",JH=n=>{Za(n.element).filter(gc).each(s=>{Pr(s,uA).fold(()=>Nn(s,"z-index"),a=>on(s,"z-index",a)),Qo(s,uA)})},QH=n=>{Za(n.element).filter(gc).each(s=>{is(s,"z-index").each(a=>{qt(s,uA,a)}),on(s,"z-index",es(n.element,"z-index"))})},B6=(n,s)=>{n.getSystem().addToGui(s),QH(s)},mv=n=>{JH(n),n.getSystem().removeFromGui(n)},s4=(n,s,a)=>n.getSystem().build(Dd.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:a}));var e9=Ka("snaps",[He("getSnapPoints"),qn("onSensor"),He("leftAttr"),He("topAttr"),pe("lazyViewport",ta),pe("mustSnap",!1)]);const JC=[pe("useFixed",Cn),He("blockerClass"),pe("getTarget",Et),pe("onDrag",U),pe("repositionTarget",!0),pe("onDrop",U),Ho("getBounds",ta),e9],r4=n=>Ta(is(n,"left"),is(n,"top"),is(n,"position"),(s,a,i)=>(i==="fixed"?g1:$m)(parseInt(s,10),parseInt(a,10))).getOrThunk(()=>{const s=pc(n);return Ou(s.left,s.top)}),dA=(n,s,a,i,d)=>{const g=d.bounds,h=uv(s,a,i),C=Xr(h.left,g.x,g.x+g.width-d.width),S=Xr(h.top,g.y,g.y+g.height-d.height),x=Ou(C,S);return s.fold(()=>{const A=cA(x,a,i);return $m(A.left,A.top)},ie(x),()=>{const A=QE(x,a,i);return g1(A.left,A.top)})},t9=(n,s,a,i,d,g,h)=>{const C=s.fold(()=>{const S=e4(a,g.left,g.top),x=QE(S,i,d);return g1(x.left,x.top)},S=>{const x=A6(n,S,a,g,i,d);return x.extra.each(A=>{S.onSensor(n,A)}),x.coord});return dA(n,C,i,d,h)},n9=(n,s,a,i)=>{const d=s.getTarget(n.element);if(s.repositionTarget){const g=hc(n.element),h=Ns(g),C=I0(d),S=r4(d),x=t9(n,s.snaps,S,h,C,i,a),A=iA(x,h,C);Ir(d,A)}s.onDrag(n,d,i)},P6=(n,s)=>({bounds:n.getBounds(),height:ba(s.element),width:ad(s.element)}),mA=(n,s,a,i,d)=>{const g=a.update(i,d),h=a.getStartData().getOrThunk(()=>P6(s,n));g.each(C=>{n9(n,s,h,C)})},$6=(n,s,a,i)=>{s.each(mv),a.snaps.each(g=>{jH(n,g)});const d=a.getTarget(n.element);i.reset(),a.onDrop(n,d)},fA=n=>(s,a)=>{const i=d=>{a.setStartData(P6(s,d))};return ns([Me(Sy(),d=>{a.getStartData().each(()=>i(d))}),...n(s,a,i)])},o9=n=>ns([Me(Ya(),n.forceDrop),Me(W0(),n.drop),Me(Wg(),(s,a)=>{n.move(a.event)}),Me(ar(),n.delayDrop)]);var r9=Object.freeze({__proto__:null,getData:n=>T.from(ko(n.x,n.y)),getDelta:(n,s)=>ko(s.left-n.left,s.top-n.top)});const I6=(n,s,a)=>[Me(Ya(),(i,d)=>{if(d.event.raw.button!==0)return;d.stop();const h=()=>$6(i,T.some(x),n,s),C=W3(h,200),S={drop:h,delayDrop:C.schedule,forceDrop:h,move:R=>{C.cancel(),mA(i,n,s,r9,R)}},x=s4(i,n.blockerClass,o9(S));(()=>{a(i),B6(i,x)})()})],a9=[...JC,ro("dragger",{handlers:fA(I6)})],c9=n=>ns([Me(Sc(),n.forceDrop),Me(pm(),n.drop),Me(Tp(),n.drop),Me(Bs(),(s,a)=>{n.move(a.event)})]),fv=n=>{const s=n[0];return T.some(ko(s.clientX,s.clientY))};var a4=Object.freeze({__proto__:null,getData:n=>{const a=n.raw.touches;return a.length===1?fv(a):T.none()},getDelta:(n,s)=>ko(s.left-n.left,s.top-n.top)});const F6=(n,s,a)=>{const i=pn(),d=g=>{$6(g,i.get(),n,s),i.clear()};return[Me(Sc(),(g,h)=>{h.stop();const C=()=>d(g),S={drop:C,delayDrop:U,forceDrop:C,move:R=>{mA(g,n,s,a4,R)}},x=s4(g,n.blockerClass,c9(S));i.set(x),(()=>{a(g),B6(g,x)})()}),Me(Bs(),(g,h)=>{h.stop(),mA(g,n,s,a4,h.event)}),Me(pm(),(g,h)=>{h.stop(),d(g)}),Me(Tp(),d)]},vt=[...JC,ro("dragger",{handlers:fA(F6)})],h1=(n,s,a)=>[...I6(n,s,a),...F6(n,s,a)],i9=[...JC,ro("dragger",{handlers:fA(h1)})];var u9=Object.freeze({__proto__:null,mouse:a9,touch:vt,mouseOrTouch:i9}),z6=Object.freeze({__proto__:null,init:()=>{let n=T.none(),s=T.none();const a=()=>{n=T.none(),s=T.none()},i=(S,x)=>{const A=n.map(R=>S.getDelta(R,x));return n=T.some(x),A},d=(S,x)=>S.getData(x).bind(A=>i(S,A)),g=S=>{s=T.some(S)},h=()=>s,C=ie({});return Tc({readState:C,reset:a,update:d,getStartData:h,setStartData:g})}});const Vf=Xy({branchKey:"mode",branches:u9,name:"dragging",active:{events:(n,s)=>n.dragger.handlers(n,s)},extra:{snap:n=>({sensor:n.sensor,range:n.range,output:n.output,extra:T.from(n.extra)})},state:z6,apis:qH}),m9=["input","textarea"],pA=n=>{const s=Ri(n);return vo(m9,s)},V6=(n,s)=>{const a=s.getRoot(n).getOr(n.element);us(a,s.invalidClass),s.notify.each(i=>{pA(n.element)&&qt(n.element,"aria-invalid",!1),i.getContainer(n).each(d=>{wl(d,i.validHtml)}),i.onValid(n)})},U6=(n,s,a,i)=>{const d=s.getRoot(n).getOr(n.element);Ro(d,s.invalidClass),s.notify.each(g=>{pA(n.element)&&qt(n.element,"aria-invalid",!0),g.getContainer(n).each(h=>{wl(h,i)}),g.onInvalid(n,i)})},bA=(n,s,a)=>s.validator.fold(()=>Ss.pure(Xt.value(!0)),i=>i.validate(n)),vA=(n,s,a)=>(s.notify.each(i=>{i.onValidate(n)}),bA(n,s).map(i=>n.getSystem().isConnected()?i.fold(d=>(U6(n,s,a,d),Xt.error(d)),d=>(V6(n,s),Xt.value(d))):Xt.error("No longer in system")));var yA=Object.freeze({__proto__:null,markValid:V6,markInvalid:U6,query:bA,run:vA,isInvalid:(n,s)=>{const a=s.getRoot(n).getOr(n.element);return Ws(a,s.invalidClass)}}),c4=Object.freeze({__proto__:null,events:(n,s)=>n.validator.map(a=>ns([Me(a.onEvent,i=>{vA(i,n,s).get(Et)})].concat(a.validateOnLoad?[Wo(i=>{vA(i,n,s).get(U)})]:[]))).getOr({})}),i4=[He("invalidClass"),pe("getRoot",T.none),Ka("notify",[pe("aria","alert"),pe("getContainer",T.none),pe("validHtml",""),qn("onValid"),qn("onInvalid"),qn("onValidate")]),Ka("validator",[He("validate"),pe("onEvent","input"),pe("validateOnLoad",!0)])];const gv=(n,s,a)=>{s.store.manager.onLoad(n,s,a)},Rd=(n,s,a)=>{s.store.manager.onUnload(n,s,a)};var OJ=Object.freeze({__proto__:null,onLoad:gv,onUnload:Rd,setValue:(n,s,a,i)=>{s.store.manager.setValue(n,s,a,i)},getValue:(n,s,a)=>s.store.manager.getValue(n,s,a),getState:(n,s,a)=>a}),h9=Object.freeze({__proto__:null,events:(n,s)=>{const a=n.resetOnDom?[Wo((i,d)=>{gv(i,n,s)}),qi((i,d)=>{Rd(i,n,s)})]:[Gy(n,s,gv)];return ns(a)}});const l4=()=>{const n=Bt(null),s=()=>({mode:"memory",value:n.get()}),a=()=>n.get()===null,i=()=>{n.set(null)};return Tc({set:n.set,get:n.get,isNotSet:a,clear:i,readState:s})},p9=()=>Tc({readState:U}),Z6=()=>{const n=Bt({}),s=Bt({});return Tc({readState:()=>({mode:"dataset",dataByValue:n.get(),dataByText:s.get()}),lookup:h=>It(n.get(),h).orThunk(()=>It(s.get(),h)),update:h=>{const C=n.get(),S=s.get(),x={},A={};gt(h,R=>{x[R.value]=R,It(R,"meta").each(P=>{It(P,"text").each(z=>{A[z]=R})})}),n.set({...C,...x}),s.set({...S,...A})},clear:()=>{n.set({}),s.set({})}})};var W6=Object.freeze({__proto__:null,memory:l4,dataset:Z6,manual:p9,init:n=>n.store.manager.state(n)});const j6=(n,s,a,i)=>{const d=s.store;a.update([i]),d.setValue(n,i),s.onSetValue(n,i)},b9=(n,s,a)=>{const i=s.store,d=i.getDataKey(n);return a.lookup(d).getOrThunk(()=>i.getFallbackEntry(d))},G6=(n,s,a)=>{s.store.initialValue.each(d=>{j6(n,s,a,d)})},q6=(n,s,a)=>{a.clear()};var v9=[ho("initialValue"),He("getFallbackEntry"),He("getDataKey"),He("setValue"),ro("manager",{setValue:j6,getValue:b9,onLoad:G6,onUnload:q6,state:Z6})];const K6=(n,s,a)=>s.store.getValue(n),y9=(n,s,a,i)=>{s.store.setValue(n,i),s.onSetValue(n,i)},CA=(n,s,a)=>{s.store.initialValue.each(i=>{s.store.setValue(n,i)})};var Y6=[He("getValue"),pe("setValue",U),ho("initialValue"),ro("manager",{setValue:y9,getValue:K6,onLoad:CA,onUnload:U,state:Bl.init})];const X6=(n,s,a,i)=>{a.set(i),s.onSetValue(n,i)},J6=(n,s,a)=>a.get(),C9=(n,s,a)=>{s.store.initialValue.each(i=>{a.isNotSet()&&a.set(i)})},S9=(n,s,a)=>{a.clear()};var w9=[ho("initialValue"),ro("manager",{setValue:X6,getValue:J6,onLoad:C9,onUnload:S9,state:l4})],x9=[Vc("store",{mode:"memory"},Oa("mode",{memory:w9,manual:Y6,dataset:v9})),qn("onSetValue"),pe("resetOnDom",!1)];const St=Ar({fields:x9,name:"representing",active:h9,apis:OJ,extra:{setValueFrom:(n,s)=>{const a=St.getValue(s);St.setValue(n,a)}},state:W6}),Qi=Ar({fields:i4,name:"invalidating",active:c4,apis:yA,extra:{validation:n=>s=>{const a=St.getValue(s);return Ss.pure(n(a))}}});var Q6=Object.freeze({__proto__:null,exhibit:(n,s)=>Pl({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const u4=lc.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),SA=(n,s,a,i,d,g)=>{const h=s.rect,C=h.x-a,S=h.y-i,x=h.width,A=h.height,R=d-(C+x),P=g-(S+A),z=T.some(C),Z=T.some(S),K=T.some(R),ee=T.some(P),G=T.none();return mb(s.direction,()=>Qa(n,z,Z,G,G),()=>Qa(n,G,Z,K,G),()=>Qa(n,z,G,G,ee),()=>Qa(n,G,G,K,ee),()=>Qa(n,z,Z,G,G),()=>Qa(n,z,G,G,ee),()=>Qa(n,z,Z,G,G),()=>Qa(n,G,Z,K,G))},wA=(n,s)=>n.fold(()=>{const a=s.rect;return Qa("absolute",T.some(a.x),T.some(a.y),T.none(),T.none())},(a,i,d,g)=>SA("absolute",s,a,i,d,g),(a,i,d,g)=>SA("fixed",s,a,i,d,g)),xA=(n,s)=>{const a=Le(pp,s),i=n.fold(a,a,()=>{const h=Ns();return pp(s).translate(-h.left,-h.top)}),d=ad(s),g=ba(s);return rr(i.left,i.top,d,g)},T9=(n,s)=>s.fold(()=>n.fold(ta,ta,rr),a=>n.fold(ie(a),ie(a),()=>{const i=eN(n,a.x,a.y);return rr(i.left,i.top,a.width,a.height)})),eN=(n,s,a)=>{const i=ko(s,a),d=()=>{const g=Ns();return i.translate(-g.left,-g.top)};return n.fold(ie(i),ie(i),d)},EA=(n,s,a,i)=>n.fold(s,a,i);u4.none;const k9=u4.relative,d4=u4.fixed,_9=(n,s)=>({anchorBox:n,origin:s}),tN=(n,s)=>_9(n,s),Zr=lc.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),A9=(n,s)=>{const{x:a,y:i,right:d,bottom:g}=s,{x:h,y:C,right:S,bottom:x,width:A,height:R}=n,P=h>=a&&h<=d,z=C>=i&&C<=g,Z=P&&z,K=S<=d&&S>=a,ee=x<=g&&x>=i,G=K&&ee,oe=Math.min(A,h>=a?d-h:S-a),le=Math.min(R,C>=i?g-C:x-i);return{originInBounds:Z,sizeInBounds:G,visibleW:oe,visibleH:le}},nN=(n,s)=>{const{x:a,y:i,right:d,bottom:g}=s,{x:h,y:C,width:S,height:x}=n,A=Math.max(a,d-S),R=Math.max(i,g-x),P=Xr(h,a,A),z=Xr(C,i,R),Z=Math.min(P+S,d)-P,K=Math.min(z+x,g)-z;return rr(P,z,Z,K)},oN=(n,s,a)=>{const i=ie(s.bottom-a.y),d=ie(a.bottom-s.y),g=Ef(n,d,d,i),h=ie(s.right-a.x),C=ie(a.right-s.x);return{maxWidth:wm(n,C,C,h),maxHeight:g}},O9=(n,s,a,i)=>{const d=n.bubble,g=d.offset,h=Em(i,n.restriction,g),C=n.x+g.left,S=n.y+g.top,x=rr(C,S,s,a),{originInBounds:A,sizeInBounds:R,visibleW:P,visibleH:z}=A9(x,h),Z=A&&R,K=Z?x:nN(x,h),ee=K.width>0&&K.height>0,{maxWidth:G,maxHeight:oe}=oN(n.direction,K,i),le={rect:K,maxHeight:oe,maxWidth:G,direction:n.direction,placement:n.placement,classes:{on:d.classesOn,off:d.classesOff},layout:n.label,testY:S};return Z||n.alwaysFit?Zr.fit(le):Zr.nofit(le,P,z,ee)},sN=(n,s,a,i,d,g)=>{const h=i.width,C=i.height,S=(A,R,P,z,Z)=>{const K=A(a,i,d,n,g),ee=O9(K,h,C,g);return ee.fold(ie(ee),(G,oe,le,Se)=>(Z===Se?le>z||oe>P:!Z&&Se)?ee:Zr.nofit(R,P,z,Z))};return Po(s,(A,R)=>{const P=Le(S,R);return A.fold(ie(A),P)},Zr.nofit({rect:a,maxHeight:i.height,maxWidth:i.width,direction:Pp(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:a.y},-1,-1,!1)).fold(Et,Et)},TA=["top","bottom","right","left"],m4="data-alloy-transition-timer",D9=(n,s)=>D0(n,s.classes),R9=(n,s,a)=>a.exists(i=>{const d=n.mode;return d==="all"?!0:i[d]!==s[d]}),M9=(n,s)=>{const a=i=>parseFloat(i).toFixed(3);return ki(s,(i,d)=>{const g=n[d].map(a),h=i.map(a);return!tr(g,h)}).isSome()},rN=n=>{const s=g=>{const C=es(n,g).split(/\s*,\s*/);return Co(C,Jd)},a=g=>{if(be(g)&&/^[\d.]+/.test(g)){const h=parseFloat(g);return fl(g,"ms")?h:h*1e3}else return 0},i=s("transition-delay"),d=s("transition-duration");return Po(d,(g,h,C)=>{const S=a(i[C])+a(h);return Math.max(g,S)},0)},N9=(n,s)=>{const a=Us(),i=Us();let d;const g=x=>{const A=x.raw.pseudoElement??"";return Hn(x.target,n)&&mc(A)&&vo(TA,x.raw.propertyName)},h=x=>{if(In(x)||g(x)){a.clear(),i.clear();const A=x==null?void 0:x.raw.type;(In(A)||A===j0())&&(clearTimeout(d),Qo(n,m4),ea(n,s.classes))}},C=go(n,fd(),x=>{g(x)&&(C.unbind(),a.set(go(n,j0(),h)),i.set(go(n,V3(),h)))}),S=rN(n);window.requestAnimationFrame(()=>{d=setTimeout(h,S+17),qt(n,m4,d)})},B9=(n,s)=>{gu(n,s.classes),Pr(n,m4).each(a=>{clearTimeout(parseInt(a,10)),Qo(n,m4)}),N9(n,s)},aN=(n,s,a,i,d,g)=>{const h=R9(i,d,g);if(h||D9(n,i)){on(n,"position",a.position);const C=xA(s,n),S=wA(s,{...d,rect:C}),x=Qt(TA,A=>S[A]);M9(a,x)&&(Ir(n,x),h&&B9(n,i),Ii(n))}else ea(n,i.classes)},cN=n=>({width:Math.ceil(ad(n)),height:ba(n)}),iN=(n,s,a,i)=>{Nn(s,"max-height"),Nn(s,"max-width");const d=cN(s);return sN(s,i.preference,n,d,a,i.bounds)},P9=(n,s)=>{const a=s.classes;ea(n,a.off),gu(n,a.on)},$9=(n,s,a)=>{const i=a.maxHeightFunction;i(n,s.maxHeight)},I9=(n,s,a)=>{const i=a.maxWidthFunction;i(n,s.maxWidth)},L9=(n,s,a)=>{const i=wA(a.origin,s);a.transition.each(d=>{aN(n,a.origin,i,d,s,a.lastPlacement)}),jE(n,i)},lN=(n,s)=>{th(n,s.placement)},kA=(n,s,a)=>n[s]===void 0?a:n[s],wh=(n,s,a,i,d,g,h,C)=>{const S=kA(h,"maxHeightFunction",Uy()),x=kA(h,"maxWidthFunction",U),A=n.anchorBox,R=n.origin,P={bounds:T9(R,g),origin:R,preference:i,maxHeightFunction:S,maxWidthFunction:x,lastPlacement:d,transition:C};return uN(A,s,a,P)},uN=(n,s,a,i)=>{const d=iN(n,s,a,i);return L9(s,d,i),lN(s,d),P9(s,d),$9(s,d,i),I9(s,d,i),{layout:d.layout,placement:d.placement}},QC=Et,xh=()=>Ka("layouts",[He("onLtr"),He("onRtl"),ho("onBottomLtr"),ho("onBottomRtl")]),f4=(n,s,a,i,d,g,h)=>{const C=h.map(t_).getOr(!1),S=s.layouts.map(z=>z.onLtr(n)),x=s.layouts.map(z=>z.onRtl(n)),A=C?s.layouts.bind(z=>z.onBottomLtr.map(Z=>Z(n))).or(S).getOr(d):S.getOr(a),R=C?s.layouts.bind(z=>z.onBottomRtl.map(Z=>Z(n))).or(x).getOr(g):x.getOr(i);return q2(A,R)(n)},hv=(n,s,a)=>{const i=s.hotspot,d=xA(a,i.element),g=f4(n.element,s,Hy(),bb(),pb(),Fy(),T.some(s.hotspot.element));return T.some(QC({anchorBox:d,bubble:s.bubble.getOr(Sm()),overrides:s.overrides,layouts:g}))};var F9=[He("hotspot"),ho("bubble"),pe("overrides",{}),xh(),ro("placement",hv)];const H9=(n,s,a)=>{const i=eN(a,s.x,s.y),d=rr(i.left,i.top,s.width,s.height),g=f4(n.element,s,Ly(),Px(),Ly(),Px(),T.none());return T.some(QC({anchorBox:d,bubble:s.bubble,overrides:s.overrides,layouts:g}))};var dN=[He("x"),He("y"),pe("height",0),pe("width",0),pe("bubble",Sm()),pe("overrides",{}),xh(),ro("placement",H9)];const mN=lc.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),z9=n=>n.fold(Et,(s,a,i)=>s.translate(-a,-i)),V9=n=>n.fold(Et,Et),_A=n=>Po(n,(s,a)=>s.translate(a.left,a.top),ko(0,0)),AA=n=>{const s=$e(n,z9);return _A(s)},g4=n=>{const s=$e(n,V9);return _A(s)},U9=mN.screen,Eh=mN.absolute,fN=(n,s,a)=>{const i=ap(a.root).dom,d=g=>{const h=hc(g),C=hc(n.element);return Hn(h,C)};return T.from(i.frameElement).map(at.fromDom).filter(d).map(pc)},OA=(n,s,a)=>{const i=hc(n.element),d=Ns(i),g=fN(n,s,a).getOr(d);return Eh(g,d.left,d.top)},DA=(n,s,a,i)=>{const d=U9(ko(n,s));return T.some(lm(d,a,i))},gN=(n,s,a,i,d)=>n.map(g=>{const h=[s,g.point],C=EA(i,()=>g4(h),()=>g4(h),()=>AA(h)),S=R3(C.left,C.top,g.width,g.height),x=a.showAbove?pb():Hy(),A=a.showAbove?Fy():bb(),R=f4(d,a,x,A,x,A,T.none());return QC({anchorBox:S,bubble:a.bubble.getOr(Sm()),overrides:a.overrides,layouts:R})}),eS=(n,s,a)=>{const i=OA(n,a,s);return s.node.filter(Qn).bind(d=>{const g=d.dom.getBoundingClientRect(),h=DA(g.left,g.top,g.width,g.height),C=s.node.getOr(n.element);return gN(h,i,s,a,C)})};var tS=[He("node"),He("root"),ho("bubble"),xh(),pe("overrides",{}),pe("showAbove",!1),ro("placement",eS)];const nS=(n,s)=>({element:n,offset:s}),RA=(n,s)=>{const a=bl(n);if(a.length===0)return nS(n,s);if(s<a.length)return nS(a[s],0);{const i=a[a.length-1],d=om(i)?O0(i).length:bl(i).length;return nS(i,d)}},Uf=(n,s)=>om(n)?nS(n,s):RA(n,s),Im=n=>n.foffset!==void 0,hN=(n,s)=>s.getSelection.getOrThunk(()=>()=>E3(n))().map(i=>{if(Im(i)){const d=Uf(i.start,i.soffset),g=Uf(i.finish,i.foffset);return Ng.range(d.element,d.offset,g.element,g.offset)}else return i}),Z9=(n,s,a)=>{const i=ap(s.root).dom,d=OA(n,a,s),g=hN(i,s).bind(S=>{if(Im(S))return ny(i,Ng.exactFromRange(S)).orThunk(()=>{const A=at.fromText(d0);rf(S.start,A);const R=ty(i,Ng.exact(A,0,A,1));return Pi(A),R}).bind(A=>DA(A.left,A.top,A.width,A.height));{const x=Ds(S,R=>R.dom.getBoundingClientRect()),A={left:Math.min(x.firstCell.left,x.lastCell.left),right:Math.max(x.firstCell.right,x.lastCell.right),top:Math.min(x.firstCell.top,x.lastCell.top),bottom:Math.max(x.firstCell.bottom,x.lastCell.bottom)};return DA(A.left,A.top,A.right-A.left,A.bottom-A.top)}}),C=hN(i,s).bind(S=>Im(S)?gc(S.start)?T.some(S.start):cu(S.start):T.some(S.firstCell)).getOr(n.element);return gN(g,d,s,a,C)};var pN=[ho("getSelection"),He("root"),ho("bubble"),xh(),pe("overrides",{}),pe("showAbove",!1),ro("placement",Z9)];const Mu="link-layout",h4=n=>n.x+n.width,bN=(n,s)=>n.x-s.width,MA=(n,s)=>n.y-s.height+n.height,NA=n=>n.y,BA=(n,s,a)=>zr(h4(n),NA(n),a.southeast(),Pp(),"southeast",gr(n,{left:0,top:2}),Mu),p4=(n,s,a)=>zr(bN(n,s),NA(n),a.southwest(),Ny(),"southwest",gr(n,{right:1,top:2}),Mu),PA=(n,s,a)=>zr(h4(n),MA(n,s),a.northeast(),fb(),"northeast",gr(n,{left:0,bottom:3}),Mu),vN=(n,s,a)=>zr(bN(n,s),MA(n,s),a.northwest(),Tf(),"northwest",gr(n,{right:1,bottom:3}),Mu),yN=()=>[BA,p4,PA,vN],CN=()=>[p4,BA,vN,PA],b4=(n,s,a)=>{const i=xA(a,s.item.element),d=f4(n.element,s,yN(),CN(),yN(),CN(),T.none());return T.some(QC({anchorBox:i,bubble:Sm(),overrides:s.overrides,layouts:d}))};var $A=[He("item"),xh(),pe("overrides",{}),ro("placement",b4)],v4=Oa("type",{selection:pN,node:tS,hotspot:F9,submenu:$A,makeshift:dN});const SN=[qa("classes",ur),Ra("mode","all",["all","layout","placement"])],W9=[pe("useFixed",Cn),ho("getBounds")],wN=[Ga("anchor",v4),Ka("transition",SN)],xN=()=>{const n=document.documentElement;return d4(0,0,n.clientWidth,n.clientHeight)},EN=n=>{const s=pc(n.element),a=n.element.dom.getBoundingClientRect();return k9(s.left,s.top,a.width,a.height)},TN=(n,s,a,i,d,g)=>{const h=tN(s.anchorBox,n);return wh(h,i.element,s.bubble,s.layouts,d,a,s.overrides,g)},j9=(n,s,a,i,d)=>{const g=T.none();y4(n,s,a,i,d,g)},y4=(n,s,a,i,d,g)=>{const h=Aa("placement.info",Vt(wN),d),C=h.anchor,S=i.element,x=a.get(i.uid);Bf(()=>{on(S,"position","fixed");const A=is(S,"visibility");on(S,"visibility","hidden");const R=s.useFixed()?xN():EN(n);C.placement(n,C,R).each(P=>{const z=g.orThunk(()=>s.getBounds.map(Fn)),Z=TN(R,P,z,i,x,h.transition);a.set(i.uid,Z)}),A.fold(()=>{Nn(S,"visibility")},P=>{on(S,"visibility",P)}),is(S,"left").isNone()&&is(S,"top").isNone()&&is(S,"right").isNone()&&is(S,"bottom").isNone()&&ti(is(S,"position"),"fixed")&&Nn(S,"position")},S)};var G9=Object.freeze({__proto__:null,position:j9,positionWithinBounds:y4,getMode:(n,s,a)=>s.useFixed()?"fixed":"absolute",reset:(n,s,a,i)=>{const d=i.element;gt(["position","left","right","top","bottom"],g=>Nn(d,g)),Fp(d),a.clear(i.uid)}}),kN=Object.freeze({__proto__:null,init:()=>{let n={};return Tc({readState:()=>n,clear:d=>{jt(d)?delete n[d]:n={}},set:(d,g)=>{n[d]=g},get:d=>It(n,d)})}});const La=Ar({fields:W9,name:"positioning",active:Q6,apis:G9,state:kN}),q9=(n,s)=>s.universal?n:Co(n,a=>vo(s.channels,a));var oS=Object.freeze({__proto__:null,events:n=>ns([Me(hd(),(s,a)=>{const i=n.channels,d=mo(i),g=a,h=q9(d,g);gt(h,C=>{const S=i[C],x=S.schema,A=Aa("channel["+C+`] data
Receiver: `+Ol(s.element),x,g.data);S.onReceive(s,A)})})])}),Y9=[Ga("channels",ux(Xt.value,yc([bm("onReceive"),pe("schema",mi())])))];const Fa=Ar({fields:Y9,name:"receiving",active:oS});var AN=Object.freeze({__proto__:null,events:(n,s)=>{const a=(i,d)=>{n.updateState.each(g=>{const h=g(i,d);s.set(h)}),n.renderComponents.each(g=>{const h=g(d,s.get());(n.reuseDom?$E:_C)(i,h)})};return ns([Me(hd(),(i,d)=>{const g=d;if(!g.universal){const h=n.channel;vo(g.channels,h)&&a(i,g.data)}}),Wo((i,d)=>{n.initialData.each(g=>{a(i,g)})})])}}),J9=Object.freeze({__proto__:null,getState:(n,s,a)=>a}),Q9=[He("channel"),ho("renderComponents"),ho("updateState"),ho("initialData"),dr("reuseDom",!0)],tz=Object.freeze({__proto__:null,init:()=>{const n=Bt(T.none()),s=()=>n.set(T.none());return{readState:()=>n.get().getOr("none"),get:n.get,set:n.set,clear:s}}});const qc=Ar({fields:Q9,name:"reflecting",active:AN,apis:J9,state:tz}),ON=(n,s,a,i)=>{a.get().each(h=>{DE(n)});const d=s.getAttachPoint(n);Ed(d,n);const g=n.getSystem().build(i);return Ed(n,g),a.set(g),g},DN=(n,s,a,i)=>{const d=ON(n,s,a,i);return s.onOpen(n,d),d},RN=(n,s,a,i)=>a.get().map(()=>ON(n,s,a,i)),C4=(n,s,a,i,d)=>{IA(n,s),DN(n,s,a,i),d(),NN(n,s)},S4=(n,s,a)=>{a.get().each(i=>{DE(n),kd(n),s.onClose(n,i),a.clear()})},w4=(n,s,a)=>a.isOpen(),nz=(n,s,a,i)=>w4(n,s,a)&&a.get().exists(d=>s.isPartOf(n,d,i)),oz=(n,s,a)=>a.get(),sz=(n,s,a,i)=>{is(n.element,s).fold(()=>{Qo(n.element,a)},d=>{qt(n.element,a,d)}),on(n.element,s,i)},rz=(n,s,a)=>{Pr(n.element,a).fold(()=>Nn(n.element,s),i=>on(n.element,s,i))},IA=(n,s,a)=>{const i=s.getAttachPoint(n);on(n.element,"position",La.getMode(i)),sz(n,"visibility",s.cloakVisibilityAttr,"hidden")},MN=n=>Qs(["top","left","right","bottom"],s=>is(n,s).isSome()),NN=(n,s,a)=>{MN(n.element)||Nn(n.element,"position"),rz(n,"visibility",s.cloakVisibilityAttr)};var az=Object.freeze({__proto__:null,cloak:IA,decloak:NN,open:DN,openWhileCloaked:C4,close:S4,isOpen:w4,isPartOf:nz,getState:oz,setContent:RN}),cz=Object.freeze({__proto__:null,events:(n,s)=>ns([Me(K0(),(a,i)=>{S4(a,n,s)})])}),iz=[qn("onOpen"),qn("onClose"),He("isPartOf"),He("getAttachPoint"),pe("cloakVisibilityAttr","data-precloak-visibility")],BN=Object.freeze({__proto__:null,init:()=>{const n=pn(),s=ie("not-implemented");return Tc({readState:s,isOpen:n.isSet,clear:n.clear,set:n.set,get:n.get})}});const Jn=Ar({fields:iz,name:"sandboxing",active:cz,apis:az,state:BN}),sS=(n,s)=>s.getAnimationRoot.fold(()=>n.element,a=>a(n)),Zf=n=>n.dimension.property,p1=(n,s)=>n.dimension.getDimension(s),x4=(n,s)=>{const a=sS(n,s);ea(a,[s.shrinkingClass,s.growingClass])},Lm=(n,s)=>{us(n.element,s.openClass),Ro(n.element,s.closedClass),on(n.element,Zf(s),"0px"),Ii(n.element)},LA=(n,s)=>{us(n.element,s.closedClass),Ro(n.element,s.openClass),Nn(n.element,Zf(s))},PN=(n,s,a,i)=>{a.setCollapsed(),on(n.element,Zf(s),p1(s,n.element)),x4(n,s),Lm(n,s),s.onStartShrink(n),s.onShrunk(n)},b1=(n,s,a,i)=>{const d=i.getOrThunk(()=>p1(s,n.element));a.setCollapsed(),on(n.element,Zf(s),d),Ii(n.element);const g=sS(n,s);us(g,s.growingClass),Ro(g,s.shrinkingClass),Lm(n,s),s.onStartShrink(n)},FA=(n,s,a)=>{const i=p1(s,n.element);(i==="0px"?PN:b1)(n,s,a,T.some(i))},$N=(n,s,a)=>{const i=sS(n,s),d=Ws(i,s.shrinkingClass),g=p1(s,n.element);LA(n,s);const h=p1(s,n.element);(d?()=>{on(n.element,Zf(s),g),Ii(n.element)}:()=>{Lm(n,s)})(),us(i,s.shrinkingClass),Ro(i,s.growingClass),LA(n,s),on(n.element,Zf(s),h),a.setExpanded(),s.onStartGrow(n)},Th=(n,s,a)=>{if(a.isExpanded()){Nn(n.element,Zf(s));const i=p1(s,n.element);on(n.element,Zf(s),i)}},lz=(n,s,a)=>{a.isExpanded()||$N(n,s,a)},uz=(n,s,a)=>{a.isExpanded()&&FA(n,s,a)},Fl=(n,s,a)=>{a.isExpanded()&&PN(n,s,a)},IN=(n,s,a)=>a.isExpanded(),LN=(n,s,a)=>a.isCollapsed(),HA=(n,s,a)=>{const i=sS(n,s);return Ws(i,s.growingClass)===!0},FN=(n,s,a)=>{const i=sS(n,s);return Ws(i,s.shrinkingClass)===!0};var mz=Object.freeze({__proto__:null,refresh:Th,grow:lz,shrink:uz,immediateShrink:Fl,hasGrown:IN,hasShrunk:LN,isGrowing:HA,isShrinking:FN,isTransitioning:(n,s,a)=>HA(n,s)||FN(n,s),toggleGrow:(n,s,a)=>{(a.isExpanded()?FA:$N)(n,s,a)},disableTransitions:x4,immediateGrow:(n,s,a)=>{a.isExpanded()||(LA(n,s),on(n.element,Zf(s),p1(s,n.element)),x4(n,s),a.setExpanded(),s.onStartGrow(n),s.onGrown(n))}}),zN=Object.freeze({__proto__:null,exhibit:(n,s,a)=>{const i=s.expanded;return Pl(i?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:hm(s.dimension.property,"0px")})},events:(n,s)=>ns([lh(j0(),(a,i)=>{i.event.raw.propertyName===n.dimension.property&&(x4(a,n),s.isExpanded()&&Nn(a.element,n.dimension.property),(s.isExpanded()?n.onGrown:n.onShrunk)(a))})])}),VN=[He("closedClass"),He("openClass"),He("shrinkingClass"),He("growingClass"),ho("getAnimationRoot"),qn("onShrunk"),qn("onStartShrink"),qn("onGrown"),qn("onStartGrow"),pe("expanded",!1),Ga("dimension",Oa("property",{width:[ro("property","width"),ro("getDimension",n=>va(n)+"px")],height:[ro("property","height"),ro("getDimension",n=>vr(n)+"px")]}))],gz=Object.freeze({__proto__:null,init:n=>{const s=Bt(n.expanded),a=()=>"expanded: "+s.get();return Tc({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:Le(s.set,!1),setExpanded:Le(s.set,!0),readState:a})}});const ec=Ar({fields:VN,name:"sliding",active:zN,apis:mz,state:gz});var pz=Object.freeze({__proto__:null,events:(n,s)=>{const i=n.stream.streams.setup(n,s);return ns([Me(n.event,i),qi(()=>s.cancel())].concat(n.cancelEvent.map(d=>[Me(d,()=>s.cancel())]).getOr([])))}});const UN=n=>{const s=Bt(null);return Tc({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:g=>{s.set(g)},cancel:()=>{const g=s.get();g!==null&&g.cancel()}})};var UA=Object.freeze({__proto__:null,throttle:UN,init:n=>n.stream.streams.state(n)});const bz=(n,s)=>{const a=n.stream,i=gl(n.onStream,a.delay);return s.setTimer(i),(d,g)=>{i.throttle(d,g),a.stopEvent&&g.stop()}};var rS=[Ga("stream",Oa("mode",{throttle:[He("delay"),pe("stopEvent",!0),ro("streams",{setup:bz,state:UN})]})),pe("event","input"),ho("cancelEvent"),bm("onStream")];const pv=Ar({fields:rS,name:"streaming",active:pz,state:UA});var ZN=Object.freeze({__proto__:null,exhibit:(n,s)=>Pl({attributes:Zg([{key:s.tabAttr,value:"true"}])})}),yz=[pe("tabAttr","data-alloy-tabstop")];const Vo=Ar({fields:yz,name:"tabstopping",active:ZN}),Cz=(n,s,a)=>{const i=s.aria;i.update(n,i,a.get())},Sz=(n,s,a)=>{s.toggleClass.each(i=>{a.get()?Ro(n.element,i):us(n.element,i)})},v1=(n,s,a,i)=>{const d=a.get();a.set(i),Sz(n,s,a),Cz(n,s,a),d!==i&&s.onToggled(n,i)},ZA=(n,s,a)=>{v1(n,s,a,!a.get())},WN=(n,s,a)=>{v1(n,s,a,!0)},WA=(n,s,a)=>{v1(n,s,a,!1)},wz=(n,s,a)=>a.get(),jA=(n,s,a)=>{v1(n,s,a,s.selected)};var xz=Object.freeze({__proto__:null,onLoad:jA,toggle:ZA,isOn:wz,on:WN,off:WA,set:v1}),jN=Object.freeze({__proto__:null,exhibit:()=>Pl({}),events:(n,s)=>{const a=Fx(n,s,ZA),i=Gy(n,s,jA);return ns(Ue([n.toggleOnExecute?[a]:[],[i]]))}});const Ez=(n,s,a)=>{qt(n.element,"aria-pressed",a),s.syncWithExpanded&&qA(n,s,a)},Tz=(n,s,a)=>{qt(n.element,"aria-selected",a)},GA=(n,s,a)=>{qt(n.element,"aria-checked",a)},qA=(n,s,a)=>{qt(n.element,"aria-expanded",a)};var GN=[pe("selected",!1),ho("toggleClass"),pe("toggleOnExecute",!0),qn("onToggled"),Vc("aria",{mode:"none"},Oa("mode",{pressed:[pe("syncWithExpanded",!1),ro("update",Ez)],checked:[ro("update",GA)],expanded:[ro("update",qA)],selected:[ro("update",Tz)],none:[ro("update",U)]}))];const Pn=Ar({fields:GN,name:"toggling",active:jN,apis:xz,state:Vx(!1)}),E4=Ct("tooltip.exclusive"),aS=Ct("tooltip.show"),cS=Ct("tooltip.hide"),iS=Ct("tooltip.immediateHide"),lS=Ct("tooltip.immediateShow"),qN=(n,s,a)=>{n.getSystem().broadcastOn([E4],{})};var _z=Object.freeze({__proto__:null,hideAllExclusive:qN,immediateOpenClose:(n,s,a,i)=>On(n,i?lS:iS),isEnabled:(n,s,a)=>a.isEnabled(),setComponents:(n,s,a,i)=>{a.getTooltip().each(d=>{d.getSystem().isConnected()&&mn.set(d,i)})},setEnabled:(n,s,a,i)=>a.setEnabled(i)}),Az=Object.freeze({__proto__:null,events:(n,s)=>{const a=h=>{s.getTooltip().each(C=>{C.getSystem().isConnected()&&(kd(C),n.onHide(h,C),s.clearTooltip())}),s.clearTimer()},i=h=>{if(!s.isShowing()&&s.isEnabled()){qN(h);const C=n.lazySink(h).getOrDie(),S=h.getSystem().build({dom:n.tooltipDom,components:n.tooltipComponents,events:ns(n.mode==="normal"?[Me(Uc(),x=>{On(h,aS)}),Me(ar(),x=>{On(h,cS)})]:[]),behaviours:Xe([mn.config({})])});s.setTooltip(S),Ed(C,S),n.onShow(h,S),La.position(C,S,{anchor:n.anchor(h)})}},d=h=>{s.getTooltip().each(C=>{const S=n.lazySink(h).getOrDie();La.position(S,C,{anchor:n.anchor(h)})})},g=()=>{switch(n.mode){case"normal":return[Me(Ui(),h=>{On(h,lS)}),Me(Gg(),h=>{On(h,iS)}),Me(Uc(),h=>{On(h,aS)}),Me(ar(),h=>{On(h,cS)})];case"follow-highlight":return[Me(Q0(),(h,C)=>{On(h,aS)}),Me(eb(),h=>{On(h,cS)})];case"children-normal":return[Me(Ui(),(h,C)=>{or(h.element).each(S=>{au(C.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{On(h,lS)},x=>{s.isShowing()&&(n.onShow(h,x),d(h))})})}),Me(Gg(),h=>{or(h.element).fold(()=>{On(h,iS)},U)}),Me(Uc(),h=>{wo(h.element,"[data-mce-tooltip]:hover").each(C=>{s.getTooltip().fold(()=>{On(h,aS)},S=>{s.isShowing()&&(n.onShow(h,S),d(h))})})}),Me(ar(),h=>{wo(h.element,"[data-mce-tooltip]:hover").fold(()=>{On(h,cS)},U)})];default:return[Me(Ui(),(h,C)=>{or(h.element).each(S=>{au(C.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{On(h,lS)},x=>{s.isShowing()&&(n.onShow(h,x),d(h))})})}),Me(Gg(),h=>{or(h.element).fold(()=>{On(h,iS)},U)})]}};return ns(Ue([[jy(h=>{n.onSetup(h)}),Me(aS,h=>{s.resetTimer(()=>{i(h)},n.delayForShow())}),Me(cS,h=>{s.resetTimer(()=>{a(h)},n.delayForHide())}),Me(lS,h=>{s.resetTimer(()=>{i(h)},0)}),Me(iS,h=>{s.resetTimer(()=>{a(h)},0)}),Me(hd(),(h,C)=>{const S=C;S.universal||(vo(S.channels,E4)||vo(S.channels,mh()))&&(S.data.closedTooltip&&s.isShowing()&&S.data.closedTooltip(),a(h))}),qi(h=>{a(h)})],g()]))}}),Oz=[He("lazySink"),He("tooltipDom"),pe("exclusive",!0),pe("tooltipComponents",[]),Ho("delayForShow",ie(300)),Ho("delayForHide",ie(100)),Ho("onSetup",U),Ra("mode","normal",["normal","follow-highlight","children-keyboard-focus","children-normal"]),pe("anchor",n=>({type:"hotspot",hotspot:n,layouts:{onLtr:ie([qs,ss,cr,Vr,Gs,_r]),onRtl:ie([qs,ss,cr,Vr,Gs,_r])},bubble:Ec(0,-2,{})})),qn("onHide"),qn("onShow")],Dz=Object.freeze({__proto__:null,init:()=>{const n=Bt(!0),s=pn(),a=pn(),i=()=>{s.on(clearTimeout)},d=(h,C)=>{i(),s.set(setTimeout(h,C))},g=ie("not-implemented");return Tc({getTooltip:a.get,isShowing:a.isSet,setTooltip:a.set,clearTooltip:a.clear,clearTimer:i,resetTimer:d,readState:g,isEnabled:()=>n.get(),setEnabled:h=>n.set(h)})}});const jo=Ar({fields:Oz,name:"tooltipping",active:Az,state:Dz,apis:_z});var YA=Object.freeze({__proto__:null,events:()=>ns([Tb(kp(),yt)]),exhibit:()=>Pl({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const Md=Ar({fields:[],name:"unselecting",active:YA}),Rz=n=>{const s=n.dom.attributes!==void 0?n.dom.attributes:[];return Po(s,(a,i)=>i.name==="class"?a:{...a,[i.name]:i.value},{})},Mz=n=>Array.prototype.slice.call(n.dom.classList,0),Nd=n=>{const s=at.fromHtml(n),a=bl(s),i=Rz(s),d=Mz(s),g=a.length===0?{}:{innerHtml:rd(s)};return{tag:Ri(s),classes:d,attributes:i,...g}},to=n=>{const s=XH(n)&&Bn(n,"uid")?n.uid:yh("memento");return{get:g=>g.getSystem().getByUid(s).getOrDie(),getOpt:g=>g.getSystem().getByUid(s).toOptional(),asSpec:()=>({...n,uid:s})}},Dr=xf,el=lb,Nz=(n,s)=>{const a=Bt(!1),i=Bt(!1);return{stop:()=>{a.set(!0)},cut:()=>{i.set(!0)},isStopped:a.get,isCut:i.get,event:n,setSource:s.set,getSource:s.get}},YN=n=>{const s=Bt(!1);return{stop:()=>{s.set(!0)},cut:U,isStopped:s.get,isCut:Cn,event:n,setSource:X("Cannot set source of a broadcasted event"),getSource:X("Cannot get source of a broadcasted event")}},XN=n=>n.raw.which===Qy[0]&&!vo(["input","textarea"],Ri(n.target))&&!gp(n.target,'[contenteditable="true"]'),JN=(n,s)=>{const a={stopBackspace:!0,...s},i=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],d=q3(a),g=$e(i.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),z=>go(n,z,Z=>{d.fireIfReady(Z,z).each(ee=>{ee&&Z.kill()}),a.triggerEvent(z,Z)&&Z.kill()})),h=pn(),C=go(n,"paste",z=>{d.fireIfReady(z,"paste").each(K=>{K&&z.kill()}),a.triggerEvent("paste",z)&&z.kill(),h.set(setTimeout(()=>{a.triggerEvent(G0(),z)},0))}),S=go(n,"keydown",z=>{a.triggerEvent("keydown",z)?z.kill():a.stopBackspace&&XN(z)&&z.prevent()}),x=go(n,"focusin",z=>{a.triggerEvent("focusin",z)&&z.kill()}),A=pn(),R=go(n,"focusout",z=>{a.triggerEvent("focusout",z)&&z.kill(),A.set(setTimeout(()=>{a.triggerEvent(Gg(),z)},0))});return{unbind:()=>{gt(g,z=>{z.unbind()}),S.unbind(),x.unbind(),R.unbind(),C.unbind(),h.on(clearTimeout),A.on(clearTimeout)}}},Fm=(n,s)=>{const a=It(n,"target").getOr(s);return Bt(a)},Hl=lc.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),XA=(n,s,a,i,d,g)=>{const h=n(s,i),C=Nz(a,d);return h.fold(()=>(g.logEventNoHandlers(s,i),Hl.complete()),S=>{const x=S.descHandler;return ev(x)(C),C.isStopped()?(g.logEventStopped(s,S.element,x.purpose),Hl.stopped()):C.isCut()?(g.logEventCut(s,S.element,x.purpose),Hl.complete()):Za(S.element).fold(()=>(g.logNoParent(s,S.element,x.purpose),Hl.complete()),R=>(g.logEventResponse(s,S.element,x.purpose),Hl.resume(R)))})},y1=(n,s,a,i,d,g)=>XA(n,s,a,i,d,g).fold(yt,h=>y1(n,s,a,h,d,g),Cn),Bz=(n,s,a,i,d)=>{const g=Fm(a,i);return XA(n,s,a,i,g,d)},JA=(n,s,a)=>{const i=YN(s);return gt(n,d=>{const g=d.descHandler;ev(g)(i)}),i.isStopped()},QN=(n,s,a,i)=>T4(n,s,a,a.target,i),T4=(n,s,a,i,d)=>{const g=Fm(a,i);return y1(n,s,a,i,g,d)},k4=(n,s)=>({element:n,descHandler:s}),eB=(n,s)=>({id:n,descHandler:s}),zl=()=>{const n={},s=(h,C,S)=>{Cs(S,(x,A)=>{const R=n[A]!==void 0?n[A]:{};R[C]=Y_(x,h),n[A]=R})},a=(h,C)=>$l(C).bind(S=>It(h,S)).map(S=>k4(C,S));return{registerId:s,unregisterId:h=>{Cs(n,(C,S)=>{So(C,h)&&delete C[h]})},filterByType:h=>It(n,h).map(C=>Mr(C,(S,x)=>eB(x,S))).getOr([]),find:(h,C,S)=>It(n,C).bind(x=>Fi(S,A=>a(x,A),h))}},QA=()=>{const n=zl(),s={},a=x=>{const A=x.element;return $l(A).getOrThunk(()=>MC("uid-",x.element))},i=(x,A)=>{const R=s[A];if(R===x)g(x);else throw new Error('The tagId "'+A+'" is already used by: '+Ol(R.element)+`
Cannot use it for: `+Ol(x.element)+`
The conflicting element is`+(Qn(R.element)?" ":" not ")+"already in the DOM")},d=x=>{const A=a(x);Bn(s,A)&&i(x,A);const R=[x];n.registerId(R,A,x.events),s[A]=x},g=x=>{$l(x.element).each(A=>{delete s[A],n.unregisterId(A)})};return{find:(x,A,R)=>n.find(x,A,R),filter:x=>n.filterByType(x),register:d,unregister:g,getById:x=>It(s,x)}},eO=n=>{const s=G=>Za(n.element).fold(yt,oe=>Hn(G,oe)),a=QA(),i=(G,oe)=>a.find(s,G,oe),d=JN(n.element,{triggerEvent:(G,oe)=>Ty(G,oe.target,le=>QN(i,G,oe,le))}),g={debugInfo:ie("real"),triggerEvent:(G,oe,le)=>{Ty(G,oe,Se=>T4(i,G,le,oe,Se))},triggerFocus:(G,oe)=>{$l(G).fold(()=>{kr(G)},le=>{Ty(gd(),G,Se=>(Bz(i,gd(),{originator:oe,kill:U,prevent:U,target:G},G,Se),!1))})},triggerEscape:(G,oe)=>{g.triggerEvent("keydown",G.element,oe.event)},getByUid:G=>K(G),getByDom:G=>ee(G),build:m,buildOrPatch:l,addToGui:G=>{S(G)},removeFromGui:G=>{x(G)},addToWorld:G=>{h(G)},removeFromWorld:G=>{C(G)},broadcast:G=>{P(G)},broadcastOn:(G,oe)=>{z(G,oe)},broadcastEvent:(G,oe)=>{Z(G,oe)},isConnected:yt},h=G=>{G.connect(g),om(G.element)||(a.register(G),gt(G.components(),h),g.triggerEvent(_p(),G.element,{target:G.element}))},C=G=>{om(G.element)||(gt(G.components(),C),a.unregister(G)),G.disconnect()},S=G=>{Ed(n,G)},x=G=>{kd(G)},A=()=>{d.unbind(),Pi(n.element)},R=G=>{const oe=a.filter(hd());gt(oe,le=>{const Se=le.descHandler;ev(Se)(G)})},P=G=>{R({universal:!0,data:G})},z=(G,oe)=>{R({universal:!1,channels:G,data:oe})},Z=(G,oe)=>{const le=a.filter(G);return JA(le,oe)},K=G=>a.getById(G).fold(()=>Xt.error(new Error('Could not find component with uid: "'+G+'" in system.')),Xt.value),ee=G=>{const oe=$l(G).getOr("not found");return K(oe)};return h(n),{root:n,element:n.element,destroy:A,add:S,remove:x,getByUid:K,getByDom:ee,addToWorld:h,removeFromWorld:C,broadcast:P,broadcastOn:z,broadcastEvent:Z}},tB=()=>{const n=(s,a)=>{a.stop(),ah(s)};return[Me(pf(),n),Me(qg(),n),Df(Sc()),Df(Ya())]},tO=n=>{const s=a=>km((i,d)=>{a(i),d.stop()});return ns(Ue([n.map(s).toArray(),tB()]))},wr=Ji({name:"Button",factory:n=>{const s=tO(n.action),a=n.dom.tag,i=g=>It(n.dom,"attributes").bind(h=>It(h,g)),d=()=>{if(a==="button"){const g=i("type").getOr("button"),h=i("role").map(C=>({role:C})).getOr({});return{type:g,...h}}else return{role:n.role.getOr(i("role").getOr("button"))}};return{uid:n.uid,dom:n.dom,components:n.components,events:s,behaviours:Du.augment(n.buttonBehaviours,[ln.config({}),Lt.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:d()},eventOrder:n.eventOrder}},configFields:[pe("uid",void 0),He("dom"),pe("components",[]),Du.field("buttonBehaviours",[ln,Lt]),ho("action"),ho("role"),pe("eventOrder",{})]}),Pz=ie([pe("shell",!1),He("makeItem"),pe("setupItem",U),Du.field("listBehaviours",[mn])]),nO=Na({name:"items",overrides:()=>({behaviours:Xe([mn.config({})])})}),Iz=ie([nO]),oO=ie("CustomList"),sO=(n,s,a,i)=>{const d=(C,S)=>{h(C).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},x=>{const A=mn.contents(x),R=S.length,P=R-A.length,z=P>0?Xo(P,()=>n.makeItem()):[],Z=A.slice(R);gt(Z,ee=>mn.remove(x,ee)),gt(z,ee=>mn.append(x,ee));const K=mn.contents(x);gt(K,(ee,G)=>{n.setupItem(C,ee,S[G],G)})})},g=n.shell?{behaviours:[mn.config({})],components:[]}:{behaviours:[],components:s},h=C=>n.shell?T.some(C):Mo(C,n,"items");return{uid:n.uid,dom:n.dom,components:g.components,behaviours:wa(n.listBehaviours,g.behaviours),apis:{setItems:d}}},nB=kc({name:oO(),configFields:Pz(),partFields:Iz(),factory:sO,apis:{setItems:(n,s,a)=>{n.setItems(s,a)}}}),bv="aria-controls",oB=n=>Dg(n,a=>{if(!gc(a))return!1;const i=br(a,"id");return i!==void 0&&i.indexOf(bv)>-1}).bind(a=>{const i=br(a,"id"),d=nr(a);return wo(d,`[${bv}="${i}"]`)}),sB=()=>{const n=Ct(bv);return{id:n,link:i=>{qt(i,bv,n)},unlink:i=>{Qo(i,bv)}}},rB=(n,s)=>oB(s).exists(a=>kh(n,a)),kh=(n,s)=>R0(s,a=>Hn(a,n.element),Cn)||rB(n,s),aB="alloy.item-hover",cB="alloy.item-focus",iB="alloy.item-toggled",lB=n=>{(or(n.element).isNone()||ln.isFocused(n))&&(ln.isFocused(n)||ln.focus(n),Ht(n,aB,{item:n}))},uB=n=>{Ht(n,cB,{item:n})},dB=(n,s)=>{Ht(n,iB,{item:n,state:s})},rO=ie(aB),Lz=ie(cB),mB=ie(iB),fB=n=>n.role.fold(()=>n.toggling.map(s=>s.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),Et),Fz=(n,s)=>({aria:{mode:s?"selected":"checked"},...Tr(n,(a,i)=>i!=="exclusive"),onToggled:(a,i)=>{et(n.onToggled)&&n.onToggled(a,i),dB(a,i)}}),Hz=n=>({dom:n.dom,domModification:{...n.domModification,attributes:{role:fB(n),...n.domModification.attributes,"aria-haspopup":n.hasSubmenu,...n.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:Du.augment(n.itemBehaviours,[n.toggling.fold(Pn.revoke,s=>Pn.config(Fz(s,n.role.exists(a=>a==="option")))),ln.config({ignore:n.ignoreFocus,stopMousedown:n.ignoreFocus,onFocus:s=>{uB(s)}}),Lt.config({mode:"execution"}),St.config({store:{mode:"memory",initialValue:n.data}}),cn("item-type-events",[...tB(),Me(Uc(),lB),Me(bf(),ln.focus)])]),components:n.components,eventOrder:n.eventOrder});var aO=[He("data"),He("components"),He("dom"),pe("hasSubmenu",!1),ho("toggling"),ho("role"),Du.field("itemBehaviours",[Pn,ln,Lt,St]),pe("ignoreFocus",!1),pe("domModification",{}),ro("builder",Hz),pe("eventOrder",{})];const gB=n=>({dom:n.dom,components:n.components,events:ns([r_(bf())])});var hB=[He("dom"),He("components"),ro("builder",gB)];const cO=ie("item-widget"),iO=ie([Ca({name:"widget",overrides:n=>({behaviours:Xe([St.config({store:{mode:"manual",getValue:s=>n.data,setValue:U}})])})})]),pB=n=>{const s=Xa(cO(),n,iO()),a=ub(cO(),n,s.internals()),i=g=>Mo(g,n,"widget").map(h=>(Lt.focusIn(h),h)),d=(g,h)=>gh(h.event.target)?T.none():(n.autofocus&&h.setSource(g.element),T.none());return{dom:n.dom,components:a,domModification:n.domModification,events:ns([km((g,h)=>{i(g).each(C=>{h.stop()})}),Me(Uc(),lB),Me(bf(),(g,h)=>{n.autofocus?i(g):ln.focus(g)})]),behaviours:Du.augment(n.widgetBehaviours,[St.config({store:{mode:"memory",initialValue:n.data}}),ln.config({ignore:n.ignoreFocus,onFocus:g=>{uB(g)}}),Lt.config({mode:"special",focusIn:n.autofocus?g=>{i(g)}:Jy(),onLeft:d,onRight:d,onEscape:(g,h)=>!ln.isFocused(g)&&!n.autofocus?(ln.focus(g),T.some(!0)):(n.autofocus&&h.setSource(g.element),T.none())})])}};var lO=[He("uid"),He("data"),He("components"),He("dom"),pe("autofocus",!1),pe("ignoreFocus",!1),Du.field("widgetBehaviours",[St,ln,Lt]),pe("domModification",{}),yd(iO()),ro("builder",pB)];const vB=Oa("type",{widget:lO,item:aO,separator:hB}),yB=(n,s)=>({mode:"flatgrid",selector:"."+n.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:n.focusManager}),CB=(n,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+n.markers.item},previousSelector:s.previousSelector,focusManager:n.focusManager}),Uz=(n,s)=>({mode:"menu",selector:"."+n.markers.item,moveOnTab:s.moveOnTab,focusManager:n.focusManager}),uO=ie([ib({factory:{sketch:n=>{const s=Aa("menu.spec item",vB,n);return s.builder(s)}},name:"items",unit:"item",defaults:(n,s)=>So(s,"uid")?s:{...s,uid:yh("item")},overrides:(n,s)=>({type:s.type,ignoreFocus:n.fakeFocus,domModification:{classes:[n.markers.item]}})})]),Zz=ie([bs("role"),He("value"),He("items"),He("dom"),He("components"),pe("eventOrder",{}),Ur("menuBehaviours",[eo,St,We,Lt]),Vc("movement",{mode:"menu",moveOnTab:!0},Oa("mode",{grid:[xx(),ro("config",yB)],matrix:[ro("config",CB),He("rowSelector"),pe("previousSelector",T.none)],menu:[pe("moveOnTab",!0),ro("config",Uz)]})),ky(),pe("fakeFocus",!1),pe("focusManager",sC()),qn("onHighlight"),qn("onDehighlight"),pe("showMenuRole",!0)]),dO=ie("alloy.menu-focus"),SB=(n,s)=>{const a=Lr(n.element,'[role="menuitemradio"][aria-checked="true"]');gt(a,i=>{Hn(i,s.element)||n.getSystem().getByDom(i).each(d=>{Pn.off(d)})})},C1=(n,s,a,i)=>({uid:n.uid,dom:n.dom,markers:n.markers,behaviours:wa(n.menuBehaviours,[eo.config({highlightClass:n.markers.selectedItem,itemClass:n.markers.item,onHighlight:n.onHighlight,onDehighlight:n.onDehighlight}),St.config({store:{mode:"memory",initialValue:n.value}}),We.config({find:T.some}),Lt.config(n.movement.config(n,n.movement))]),events:ns([Me(Lz(),(d,g)=>{const h=g.event;d.getSystem().getByDom(h.target).each(C=>{eo.highlight(d,C),g.stop(),Ht(d,dO(),{menu:d,item:C})})}),Me(rO(),(d,g)=>{const h=g.event.item;eo.highlight(d,h)}),Me(mB(),(d,g)=>{const{item:h,state:C}=g.event;C&&br(h.element,"role")==="menuitemradio"&&SB(d,h)})]),components:s,eventOrder:n.eventOrder,...n.showMenuRole?{domModification:{attributes:{role:n.role.getOr("menu")}}}:{}}),Wf=kc({name:"Menu",configFields:Zz(),partFields:uO(),factory:C1}),mO=n=>tf(n,(s,a)=>({k:s,v:a})),uS=(n,s,a,i)=>It(a,i).bind(d=>It(n,d).bind(g=>{const h=uS(n,s,a,g);return T.some([g].concat(h))})).getOr([]),Wz=(n,s)=>{const a={};Cs(n,(h,C)=>{gt(h,S=>{a[S]=C})});const i=s,d=mO(s),g=Ds(d,(h,C)=>[C].concat(uS(a,i,d,C)));return Ds(a,h=>It(g,h).getOr([h]))},wB=()=>{const n=Bt({}),s=Bt({}),a=Bt({}),i=pn(),d=Bt({}),g=()=>{n.set({}),s.set({}),a.set({}),i.clear()},h=()=>i.get().isNone(),C=(Te,ct)=>{s.set({...s.get(),[Te]:{type:"prepared",menu:ct}})},S=(Te,ct,lt,Ne)=>{i.set(Te),n.set(lt),s.set(ct),d.set(Ne);const Fe=Wz(Ne,lt);a.set(Fe)},x=Te=>ki(n.get(),(ct,lt)=>ct===Te),A=(Te,ct,lt)=>K(Te).bind(Ne=>x(Te).bind(Fe=>ct(Fe).map(Ft=>({triggeredMenu:Ne,triggeringItem:Ft,triggeringPath:lt})))),R=(Te,ct)=>{const lt=Co(G(Te).toArray(),Ne=>K(Ne).isSome());return It(a.get(),Te).bind(Ne=>{const Fe=De(lt.concat(Ne)),Ft=ne(Fe,(Ot,En)=>A(Ot,ct,Fe.slice(0,En+1)).fold(()=>ti(i.get(),Ot)?[]:[T.none()],Ut=>[T.some(Ut)]));return np(Ft)})},P=Te=>It(n.get(),Te).map(ct=>{const lt=It(a.get(),Te).getOr([]);return[ct].concat(lt)}),z=Te=>It(a.get(),Te).bind(ct=>ct.length>1?T.some(ct.slice(1)):T.none()),Z=Te=>It(a.get(),Te),K=Te=>ee(Te).bind(fO),ee=Te=>It(s.get(),Te),G=Te=>It(n.get(),Te);return{setMenuBuilt:C,setContents:S,expand:P,refresh:Z,collapse:z,lookupMenu:ee,lookupItem:G,otherMenus:Te=>{const ct=d.get();return ge(mo(ct),Te)},getPrimary:()=>i.get().bind(K),getMenus:()=>s.get(),clear:g,isClear:h,getTriggeringPath:R}},fO=n=>n.type==="prepared"?T.some(n.menu):T.none(),gO={init:wB,extractPreparedMenu:fO},_4=Ct("tiered-menu-item-highlight"),hO=Ct("tiered-menu-item-dehighlight"),jz=(n,s)=>{const a=pn(),i=(Pe,tt,Kt)=>Ds(Kt,(bn,Pt)=>{const hn=()=>Wf.sketch({...bn,value:Pt,markers:n.markers,fakeFocus:n.fakeFocus,onHighlight:(yo,Kn)=>{Ht(yo,_4,{menuComp:yo,itemComp:Kn})},onDehighlight:(yo,Kn)=>{Ht(yo,hO,{menuComp:yo,itemComp:Kn})},focusManager:n.fakeFocus?Db():sC()});return Pt===tt?{type:"prepared",menu:Pe.getSystem().build(hn())}:{type:"notbuilt",nbMenu:hn}}),d=gO.init(),g=Pe=>{const tt=i(Pe,n.data.primary,n.data.menus),Kt=S();return d.setContents(n.data.primary,tt,n.data.expansions,Kt),d.getPrimary()},h=Pe=>St.getValue(Pe).value,C=(Pe,tt,Kt)=>ic(tt,bn=>{if(!bn.getSystem().isConnected())return T.none();const Pt=eo.getCandidates(bn);return Ce(Pt,hn=>h(hn)===Kt)}),S=Pe=>Ds(n.data.menus,(tt,Kt)=>ne(tt.items,bn=>bn.type==="separator"?[]:[bn.data.value])),x=eo.highlight,A=(Pe,tt)=>{x(Pe,tt),eo.getHighlighted(tt).orThunk(()=>eo.getFirst(tt)).each(Kt=>{n.fakeFocus?eo.highlight(tt,Kt):xb(Pe,Kt.element,bf())})},R=(Pe,tt)=>Xu($e(tt,Kt=>Pe.lookupMenu(Kt).bind(bn=>bn.type==="prepared"?T.some(bn.menu):T.none()))),P=(Pe,tt,Kt)=>{const bn=R(tt,tt.otherMenus(Kt));gt(bn,Pt=>{ea(Pt.element,[n.markers.backgroundMenu]),n.stayInDom||mn.remove(Pe,Pt)})},z=Pe=>a.get().getOrThunk(()=>{const tt={},Kt=Lr(Pe.element,`.${n.markers.item}`),bn=Co(Kt,Pt=>br(Pt,"aria-haspopup")==="true");return gt(bn,Pt=>{Pe.getSystem().getByDom(Pt).each(hn=>{const yo=h(hn);tt[yo]=hn})}),a.set(tt),tt}),Z=(Pe,tt)=>{const Kt=z(Pe);Cs(Kt,(bn,Pt)=>{const hn=vo(tt,Pt);qt(bn.element,"aria-expanded",hn)})},K=(Pe,tt,Kt)=>T.from(Kt[0]).bind(bn=>tt.lookupMenu(bn).bind(Pt=>{if(Pt.type==="notbuilt")return T.none();{const hn=Pt.menu,yo=R(tt,Kt.slice(1));return gt(yo,Kn=>{Ro(Kn.element,n.markers.backgroundMenu)}),Qn(hn.element)||mn.append(Pe,p(hn)),ea(hn.element,[n.markers.backgroundMenu]),A(Pe,hn),P(Pe,tt,Kt),T.some(hn)}}));let ee;(function(Pe){Pe[Pe.HighlightSubmenu=0]="HighlightSubmenu",Pe[Pe.HighlightParent=1]="HighlightParent"})(ee||(ee={}));const G=(Pe,tt,Kt)=>{if(Kt.type==="notbuilt"){const bn=Pe.getSystem().build(Kt.nbMenu());return d.setMenuBuilt(tt,bn),bn}else return Kt.menu},oe=(Pe,tt,Kt=ee.HighlightSubmenu)=>{if(tt.hasConfigured(Rt)&&Rt.isDisabled(tt))return T.some(tt);{const bn=h(tt);return d.expand(bn).bind(Pt=>(Z(Pe,Pt),T.from(Pt[0]).bind(hn=>d.lookupMenu(hn).bind(yo=>{const Kn=G(Pe,hn,yo);return Qn(Kn.element)||mn.append(Pe,p(Kn)),n.onOpenSubmenu(Pe,tt,Kn,De(Pt)),Kt===ee.HighlightSubmenu?(eo.highlightFirst(Kn),K(Pe,d,Pt)):(eo.dehighlightAll(Kn),T.some(tt))}))))}},le=(Pe,tt)=>{const Kt=h(tt);return d.collapse(Kt).bind(bn=>(Z(Pe,bn),K(Pe,d,bn).map(Pt=>(n.onCollapseMenu(Pe,tt,Pt),Pt))))},Se=(Pe,tt)=>{const Kt=h(tt);return d.refresh(Kt).bind(bn=>(Z(Pe,bn),K(Pe,d,bn)))},Te=(Pe,tt)=>gh(tt.element)?T.none():oe(Pe,tt,ee.HighlightSubmenu),ct=(Pe,tt)=>gh(tt.element)?T.none():le(Pe,tt),lt=(Pe,tt)=>le(Pe,tt).orThunk(()=>n.onEscape(Pe,tt).map(()=>Pe)),Ne=Pe=>(tt,Kt)=>ya(Kt.getSource(),`.${n.markers.item}`).bind(bn=>tt.getSystem().getByDom(bn).toOptional().bind(Pt=>Pe(tt,Pt).map(yt))),Fe=ns([Me(dO(),(Pe,tt)=>{const Kt=tt.event.item;d.lookupItem(h(Kt)).each(()=>{const bn=tt.event.menu;eo.highlight(Pe,bn);const Pt=h(tt.event.item);d.refresh(Pt).each(hn=>P(Pe,d,hn))})}),km((Pe,tt)=>{const Kt=tt.event.target;Pe.getSystem().getByDom(Kt).each(bn=>{h(bn).indexOf("collapse-item")===0&&le(Pe,bn),oe(Pe,bn,ee.HighlightSubmenu).fold(()=>{n.onExecute(Pe,bn)},U)})}),Wo((Pe,tt)=>{g(Pe).each(Kt=>{mn.append(Pe,p(Kt)),n.onOpenMenu(Pe,Kt),n.highlightOnOpen===sa.HighlightMenuAndItem?A(Pe,Kt):n.highlightOnOpen===sa.HighlightJustMenu&&x(Pe,Kt)})}),Me(_4,(Pe,tt)=>{n.onHighlightItem(Pe,tt.event.menuComp,tt.event.itemComp)}),Me(hO,(Pe,tt)=>{n.onDehighlightItem(Pe,tt.event.menuComp,tt.event.itemComp)}),...n.navigateOnHover?[Me(rO(),(Pe,tt)=>{const Kt=tt.event.item;Se(Pe,Kt),oe(Pe,Kt,ee.HighlightParent),n.onHover(Pe,Kt)})]:[]]),Ft=Pe=>eo.getHighlighted(Pe).bind(eo.getHighlighted),Ot=Pe=>{Ft(Pe).each(tt=>{le(Pe,tt)})},En=Pe=>{d.getPrimary().each(tt=>{A(Pe,tt)})},Ut=Pe=>T.from(Pe.components()[0]).filter(tt=>br(tt.element,"role")==="menu"),Mt={collapseMenu:Ot,highlightPrimary:En,repositionMenus:Pe=>{d.getPrimary().bind(Kt=>Ft(Pe).bind(bn=>{const Pt=h(bn),hn=_i(d.getMenus()),yo=Xu($e(hn,gO.extractPreparedMenu));return d.getTriggeringPath(Pt,Kn=>C(Pe,yo,Kn))}).map(bn=>({primary:Kt,triggeringPath:bn}))).fold(()=>{Ut(Pe).each(Kt=>{n.onRepositionMenu(Pe,Kt,[])})},({primary:Kt,triggeringPath:bn})=>{n.onRepositionMenu(Pe,Kt,bn)})}};return{uid:n.uid,dom:n.dom,markers:n.markers,behaviours:wa(n.tmenuBehaviours,[Lt.config({mode:"special",onRight:Ne(Te),onLeft:Ne(ct),onEscape:Ne(lt),focusIn:(Pe,tt)=>{d.getPrimary().each(Kt=>{xb(Pe,Kt.element,bf())})}}),eo.config({highlightClass:n.markers.selectedMenu,itemClass:n.markers.menu}),We.config({find:Pe=>eo.getHighlighted(Pe)}),mn.config({})]),eventOrder:n.eventOrder,apis:Mt,events:Fe}},xB=ie("collapse-item"),EB=(n,s,a)=>({primary:n,menus:s,expansions:a}),TB=(n,s)=>({primary:n,menus:hm(n,s),expansions:{}}),kB=n=>({value:Ct(xB()),meta:{text:n}}),S1=Ji({name:"TieredMenu",configFields:[Dp("onExecute"),Dp("onEscape"),bm("onOpenMenu"),bm("onOpenSubmenu"),qn("onRepositionMenu"),qn("onCollapseMenu"),pe("highlightOnOpen",sa.HighlightMenuAndItem),pu("data",[He("primary"),He("menus"),He("expansions")]),pe("fakeFocus",!1),qn("onHighlightItem"),qn("onDehighlightItem"),qn("onHover"),Sx(),He("dom"),pe("navigateOnHover",!0),pe("stayInDom",!1),Ur("tmenuBehaviours",[Lt,eo,We,mn]),pe("eventOrder",{})],apis:{collapseMenu:(n,s)=>{n.collapseMenu(s)},highlightPrimary:(n,s)=>{n.highlightPrimary(s)},repositionMenus:(n,s)=>{n.repositionMenus(s)}},factory:jz,extraApis:{tieredData:EB,singleData:TB,collapseItem:kB}}),A4=ie("sink"),Gz=ie(Na({name:A4(),overrides:ie({dom:{tag:"div"},behaviours:Xe([La.config({useFixed:yt})]),events:ns([Df(Sr()),Df(Ya()),Df(pf())])})})),qz=yc([pe("isExtraPart",Cn),Ka("fireEventInstead",[pe("event",pd())])]),pO=n=>{const s=Aa("Dismissal",qz,n);return{[wu()]:{schema:yc([He("target")]),onReceive:(a,i)=>{Jn.isOpen(a)&&(Jn.isPartOf(a,i.target)||s.isExtraPart(a,i.target)||s.fireEventInstead.fold(()=>Jn.close(a),g=>On(a,g.event)))}}}},Kz=yc([Ka("fireEventInstead",[pe("event",px())]),Cc("doReposition")]),O4=n=>{const s=Aa("Reposition",Kz,n);return{[Ks()]:{onReceive:a=>{Jn.isOpen(a)&&s.fireEventInstead.fold(()=>s.doReposition(a),i=>On(a,i.event))}}}},_B=(n,s)=>{const a=n.getHotspot(s).getOr(s),i="hotspot",d=n.getAnchorOverrides();return n.layouts.fold(()=>({type:i,hotspot:a,overrides:d}),g=>({type:i,hotspot:a,overrides:d,layouts:g}))},dS=(n,s,a)=>{const i=n.fetch;return i(a).map(s)},AB=(n,s,a,i,d,g,h)=>{const C=dS(n,s,i),S=OB(i,n);return C.map(x=>x.bind(A=>{const R=A.menus[A.primary];return T.from(R).each(P=>{n.listRole.each(z=>{P.role=z})}),T.from(S1.sketch({...g.menu(),uid:yh(""),data:A,highlightOnOpen:h,onOpenMenu:(P,z)=>{const Z=S().getOrDie();La.position(Z,z,{anchor:a}),Jn.decloak(d)},onOpenSubmenu:(P,z,Z)=>{const K=S().getOrDie();La.position(K,Z,{anchor:{type:"submenu",item:z}}),Jn.decloak(d)},onRepositionMenu:(P,z,Z)=>{const K=S().getOrDie();La.position(K,z,{anchor:a}),gt(Z,ee=>{La.position(K,ee.triggeredMenu,{anchor:{type:"submenu",item:ee.triggeringItem}})})},onEscape:()=>(ln.focus(i),Jn.close(d),T.some(!0))}))}))},D4=(n,s,a,i,d,g,h)=>{const C=_B(n,a);return AB(n,s,C,a,i,d,h).map(x=>(x.fold(()=>{Jn.isOpen(i)&&Jn.close(i)},A=>{Jn.cloak(i),Jn.open(i,A),g(i)}),i))},Yz=(n,s,a,i,d,g,h)=>(Jn.close(i),Ss.pure(i)),R4=(n,s,a,i,d,g)=>{const h=fn.getCoupled(a,"sandbox");return(Jn.isOpen(h)?Yz:D4)(n,s,a,h,i,d,g)},Xz=(n,s,a)=>{const i=We.getCurrent(s).getOr(s),d=va(n.element);a?on(i.element,"min-width",d+"px"):lf(i.element,d)},OB=(n,s)=>n.getSystem().getByUid(s.uid+"-"+A4()).map(a=>()=>Xt.value(a)).getOrThunk(()=>s.lazySink.fold(()=>()=>Xt.error(new Error("No internal sink is specified, nor could an external sink be found")),a=>()=>a(n))),DB=n=>{Jn.getState(n).each(s=>{S1.repositionMenus(s)})},RB=(n,s,a)=>{const i=sB(),d=(C,S)=>{const x=_B(n,s);i.link(s.element),n.matchWidth&&Xz(x.hotspot,S,n.useMinWidth),n.onOpen(x,C,S),a!==void 0&&a.onOpen!==void 0&&a.onOpen(C,S)},g=(C,S)=>{i.unlink(s.element),h().getOr(S).element.dom.dispatchEvent(new window.FocusEvent("focusout")),a!==void 0&&a.onClose!==void 0&&a.onClose(C,S)},h=OB(s,n);return{dom:{tag:"div",classes:n.sandboxClasses,attributes:{id:i.id}},behaviours:Du.augment(n.sandboxBehaviours,[St.config({store:{mode:"memory",initialValue:s}}),Jn.config({onOpen:d,onClose:g,isPartOf:(C,S,x)=>kh(S,x)||kh(s,x),getAttachPoint:()=>h().getOrDie()}),We.config({find:C=>Jn.getState(C).bind(S=>We.getCurrent(S))}),Fa.config({channels:{...pO({isExtraPart:Cn}),...O4({doReposition:DB})}})])}},Jz=n=>{const s=fn.getCoupled(n,"sandbox");DB(s)},bO=()=>[pe("sandboxClasses",[]),Du.field("sandboxBehaviours",[We,Fa,Jn,St])],Qz=ie([He("dom"),He("fetch"),qn("onOpen"),wc("onExecute"),pe("getHotspot",T.some),pe("getAnchorOverrides",ie({})),xh(),Ur("dropdownBehaviours",[Pn,fn,Lt,ln]),He("toggleClass"),pe("eventOrder",{}),ho("lazySink"),pe("matchWidth",!1),pe("useMinWidth",!1),ho("role"),ho("listRole")].concat(bO())),eV=ie([bi({schema:[Sx(),pe("fakeFocus",!1)],name:"menu",defaults:n=>({onExecute:n.onExecute})}),Gz()]),tV=(n,s,a,i)=>{const d=A=>It(n.dom,"attributes").bind(R=>It(R,A)),g=A=>{Jn.getState(A).each(R=>{S1.highlightPrimary(R)})},h=(A,R,P)=>R4(n,Et,A,i,R,P),C=A=>{h(A,g,sa.HighlightMenuAndItem).get(U)},S={expand:A=>{Pn.isOn(A)||h(A,U,sa.HighlightNone).get(U)},open:A=>{Pn.isOn(A)||h(A,U,sa.HighlightMenuAndItem).get(U)},refetch:A=>fn.getExistingCoupled(A,"sandbox").fold(()=>h(A,U,sa.HighlightMenuAndItem).map(U),P=>D4(n,Et,A,P,i,U,sa.HighlightMenuAndItem).map(U)),isOpen:Pn.isOn,close:A=>{Pn.isOn(A)&&h(A,U,sa.HighlightMenuAndItem).get(U)},repositionMenus:A=>{Pn.isOn(A)&&Jz(A)}},x=(A,R)=>(ah(A),T.some(!0));return{uid:n.uid,dom:n.dom,components:s,behaviours:wa(n.dropdownBehaviours,[Pn.config({toggleClass:n.toggleClass,aria:{mode:"expanded"}}),fn.config({others:{sandbox:A=>RB(n,A,{onOpen:()=>Pn.on(A),onClose:()=>Pn.off(A)})}}),Lt.config({mode:"special",onSpace:x,onEnter:x,onDown:(A,R)=>{if(Kc.isOpen(A)){const P=fn.getCoupled(A,"sandbox");g(P)}else Kc.open(A);return T.some(!0)},onEscape:(A,R)=>Kc.isOpen(A)?(Kc.close(A),T.some(!0)):T.none()}),ln.config({})]),events:tO(T.some(C)),eventOrder:{...n.eventOrder,[Hr()]:["disabling","toggling","alloy.base.behaviour"]},apis:S,domModification:{attributes:{"aria-haspopup":n.listRole.getOr("true"),...n.role.fold(()=>({}),A=>({role:A})),...n.dom.tag==="button"?{type:d("type").getOr("button")}:{}}}}},Kc=kc({name:"Dropdown",configFields:Qz(),partFields:eV(),factory:tV,apis:{open:(n,s)=>n.open(s),refetch:(n,s)=>n.refetch(s),expand:(n,s)=>n.expand(s),close:(n,s)=>n.close(s),isOpen:(n,s)=>n.isOpen(s),repositionMenus:(n,s)=>n.repositionMenus(s)}}),MB="form",nV=[Ur("formBehaviours",[St])],vO=n=>"<alloy.field."+n+">",oV=n=>{const s=(()=>{const g=[];return{field:(C,S)=>(g.push(C),Ry(MB,vO(C),S)),record:ie(g)}})(),a=n(s),i=s.record(),d=$e(i,g=>Ca({name:g,pname:vO(g)}));return lA(MB,nV,d,BB,a)},NB=(n,s)=>n.fold(()=>Xt.error(s),Xt.value),BB=(n,s)=>({uid:n.uid,dom:n.dom,components:s,behaviours:wa(n.formBehaviours,[St.config({store:{mode:"manual",getValue:a=>{const i=Rl(a,n);return Ds(i,(d,g)=>d().bind(h=>{const C=We.getCurrent(h);return NB(C,new Error(`Cannot find a current component to extract the value from for form part '${g}': `+Ol(h.element)))}).map(St.getValue))},setValue:(a,i)=>{Cs(i,(d,g)=>{Mo(a,n,g).each(h=>{We.getCurrent(h).each(C=>{St.setValue(C,d)})})})}}})]),apis:{getField:(a,i)=>Mo(a,n,i).bind(We.getCurrent)}}),_h={getField:r1((n,s,a)=>n.getField(s,a)),sketch:oV},vv=ie([He("dom"),pe("shell",!0),Ur("toolbarBehaviours",[mn])]),rV=ie([Na({name:"groups",overrides:()=>({behaviours:Xe([mn.config({})])})})]),mS=(n,s,a,i)=>{const d=(C,S)=>{g(C).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},x=>{mn.set(x,S)})},g=C=>n.shell?T.some(C):Mo(C,n,"groups"),h=n.shell?{behaviours:[mn.config({})],components:[]}:{behaviours:[],components:s};return{uid:n.uid,dom:n.dom,components:h.components,behaviours:wa(n.toolbarBehaviours,h.behaviours),apis:{setGroups:d,refresh:U},domModification:{attributes:{role:"group"}}}},Bd=kc({name:"Toolbar",configFields:vv(),partFields:rV(),factory:mS,apis:{setGroups:(n,s,a)=>{n.setGroups(s,a)}}}),aV=ie([Un(["toggledClass"]),He("lazySink"),Cc("fetch"),Vi("getBounds"),Ka("fireDismissalEventInstead",[pe("event",pd())]),xh(),qn("onToggled")]),cV=ie([bi({name:"button",overrides:n=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:Xe([Pn.config({toggleClass:n.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:n.onToggled})])})}),bi({factory:Bd,schema:vv(),name:"toolbar",overrides:n=>({toolbarBehaviours:Xe([Lt.config({mode:"cyclic",onEscape:s=>(Mo(s,n,"button").each(ln.focus),T.none())})])})})]),yv=pn(),PB=(n,s)=>{yv.set(!0),yO(n,s),yv.clear()},yO=(n,s)=>{const a=fn.getCoupled(n,"toolbarSandbox");Jn.isOpen(a)?Jn.close(a):Jn.open(a,s.toolbar())},fS=(n,s,a,i)=>{const d=a.getBounds.map(h=>h()),g=a.lazySink(n).getOrDie();La.positionWithinBounds(g,s,{anchor:{type:"hotspot",hotspot:n,layouts:i,overrides:{maxWidthFunction:Zp()}}},d)},$B=(n,s,a,i,d)=>{Bd.setGroups(s,d),fS(n,s,a,i),Pn.on(n)},iV=(n,s,a)=>{const i=sB(),d=(h,C)=>{const S=yv.get().getOr(!1);a.fetch().get(x=>{$B(n,C,a,s.layouts,x),i.link(n.element),S||Lt.focusIn(C)})},g=()=>{Pn.off(n),yv.get().getOr(!1)||ln.focus(n),i.unlink(n.element)};return{dom:{tag:"div",attributes:{id:i.id}},behaviours:Xe([Lt.config({mode:"special",onEscape:h=>(Jn.close(h),T.some(!0))}),Jn.config({onOpen:d,onClose:g,isPartOf:(h,C,S)=>kh(C,S)||kh(n,S),getAttachPoint:()=>a.lazySink(n).getOrDie()}),Fa.config({channels:{...pO({isExtraPart:Cn,...a.fireDismissalEventInstead.map(h=>({fireEventInstead:{event:h.event}})).getOr({})}),...O4({doReposition:()=>{Jn.getState(fn.getCoupled(n,"toolbarSandbox")).each(h=>{fS(n,h,a,s.layouts)})}})}})])}},jf=kc({name:"FloatingToolbarButton",factory:(n,s,a,i)=>({...wr.sketch({...i.button(),action:d=>{yO(d,i)},buttonBehaviours:Du.augment({dump:i.button().buttonBehaviours},[fn.config({others:{toolbarSandbox:d=>iV(d,a,n)}})])}),apis:{setGroups:(d,g)=>{Jn.getState(fn.getCoupled(d,"toolbarSandbox")).each(h=>{$B(d,h,n,a.layouts,g)})},reposition:d=>{Jn.getState(fn.getCoupled(d,"toolbarSandbox")).each(g=>{fS(d,g,n,a.layouts)})},toggle:d=>{yO(d,i)},toggleWithoutFocusing:d=>{PB(d,i)},getToolbar:d=>Jn.getState(fn.getCoupled(d,"toolbarSandbox")),isOpen:d=>Jn.isOpen(fn.getCoupled(d,"toolbarSandbox"))}}),configFields:aV(),partFields:cV(),apis:{setGroups:(n,s,a)=>{n.setGroups(s,a)},reposition:(n,s)=>{n.reposition(s)},toggle:(n,s)=>{n.toggle(s)},toggleWithoutFocusing:(n,s)=>{n.toggleWithoutFocusing(s)},getToolbar:(n,s)=>n.getToolbar(s),isOpen:(n,s)=>n.isOpen(s)}}),IB=ie([pe("prefix","form-field"),Ur("fieldBehaviours",[We,St])]),lV=ie([Na({schema:[He("dom")],name:"label"}),Na({factory:{sketch:n=>({uid:n.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:n.text}})},schema:[He("text")],name:"aria-descriptor"}),Ca({factory:{sketch:n=>{const s=by(n,["factory"]);return n.factory.sketch(s)}},schema:[He("factory")],name:"field"})]),uV=(n,s,a,i)=>{const d=wa(n.fieldBehaviours,[We.config({find:C=>Mo(C,n,"field")}),St.config({store:{mode:"manual",getValue:C=>We.getCurrent(C).bind(St.getValue),setValue:(C,S)=>{We.getCurrent(C).each(x=>{St.setValue(x,S)})}}})]),g=ns([Wo((C,S)=>{const x=vd(C,n,["label","field","aria-descriptor"]);x.field().each(A=>{const R=Ct(n.prefix);x.label().each(P=>{qt(P.element,"for",R),qt(A.element,"id",R)}),x["aria-descriptor"]().each(P=>{const z=Ct(n.prefix);qt(P.element,"id",z),qt(A.element,"aria-describedby",z)})})})]),h={getField:C=>Mo(C,n,"field"),getLabel:C=>Mo(C,n,"label")};return{uid:n.uid,dom:n.dom,components:s,behaviours:d,events:g,apis:h}},Dn=kc({name:"FormField",configFields:IB(),partFields:lV(),factory:uV,apis:{getField:(n,s)=>n.getField(s),getLabel:(n,s)=>n.getLabel(s)}}),dV=ie([pe("field1Name","field1"),pe("field2Name","field2"),bm("onLockedChange"),Un(["lockClass"]),pe("locked",!1),Du.field("coupledFieldBehaviours",[We,St]),Ho("onInput",U)]),mV=(n,s,a)=>Mo(n,s,a).bind(We.getCurrent),LB=(n,s)=>Ca({factory:Dn,name:n,overrides:a=>({fieldBehaviours:Xe([cn("coupled-input-behaviour",[Me(_l(),i=>{mV(i,a,s).each(d=>{Mo(i,a,"lock").each(g=>{Pn.isOn(g)&&a.onLockedChange(i,d,g),a.onInput(i)})})})])])})}),fV=ie([LB("field1","field2"),LB("field2","field1"),Ca({factory:wr,schema:[He("dom")],name:"lock",overrides:n=>({buttonBehaviours:Xe([Pn.config({selected:n.locked,toggleClass:n.markers.lockClass,aria:{mode:"pressed"}})])})})]),gV=(n,s,a,i)=>({uid:n.uid,dom:n.dom,components:s,behaviours:Du.augment(n.coupledFieldBehaviours,[We.config({find:T.some}),St.config({store:{mode:"manual",getValue:d=>{const g=db(d,n,["field1","field2"]);return{[n.field1Name]:St.getValue(g.field1()),[n.field2Name]:St.getValue(g.field2())}},setValue:(d,g)=>{const h=db(d,n,["field1","field2"]);Bn(g,n.field1Name)&&St.setValue(h.field1(),g[n.field1Name]),Bn(g,n.field2Name)&&St.setValue(h.field2(),g[n.field2Name])}}})]),apis:{getField1:d=>Mo(d,n,"field1"),getField2:d=>Mo(d,n,"field2"),getLock:d=>Mo(d,n,"lock")}}),Ls=kc({name:"FormCoupledInputs",configFields:dV(),partFields:fV(),factory:gV,apis:{getField1:(n,s)=>n.getField1(s),getField2:(n,s)=>n.getField2(s),getLock:(n,s)=>n.getLock(s)}}),hV=(n,s)=>{const a=$e(n.options,d=>({dom:{tag:"option",value:d.value,innerHtml:d.text}})),i=n.data.map(d=>hm("initialValue",d)).getOr({});return{uid:n.uid,dom:{tag:"select",classes:n.selectClasses,attributes:n.selectAttributes},components:a,behaviours:wa(n.selectBehaviours,[ln.config({}),St.config({store:{mode:"manual",getValue:d=>Hc(d.element),setValue:(d,g)=>{const h=To(n.options);Ce(n.options,S=>S.value===g).isSome()?im(d.element,g):d.element.dom.selectedIndex===-1&&g===""&&h.each(S=>im(d.element,S.value))},...i}})])}},SO=Ji({name:"HtmlSelect",configFields:[He("options"),Ur("selectBehaviours",[ln,St]),pe("selectClasses",[]),pe("selectAttributes",{}),ho("data")],factory:hV}),FB=(n,s,a,i,d)=>{const g=()=>n.lazySink(s),h=i.type==="horizontal"?{layouts:{onLtr:()=>Hy(),onRtl:()=>bb()}}:{},C=x=>x.length===2,S=x=>C(x)?h:{};return S1.sketch({dom:{tag:"div"},data:i.data,markers:i.menu.markers,highlightOnOpen:i.menu.highlightOnOpen,fakeFocus:i.menu.fakeFocus,onEscape:()=>(Jn.close(s),n.onEscape.map(x=>x(s)),T.some(!0)),onExecute:()=>T.some(!0),onOpenMenu:(x,A)=>{La.positionWithinBounds(g().getOrDie(),A,a,d())},onOpenSubmenu:(x,A,R,P)=>{const z=g().getOrDie();La.position(z,R,{anchor:{type:"submenu",item:A,...S(P)}})},onRepositionMenu:(x,A,R)=>{const P=g().getOrDie();La.positionWithinBounds(P,A,a,d()),gt(R,z=>{const Z=S(z.triggeringPath);La.position(P,z.triggeredMenu,{anchor:{type:"submenu",item:z.triggeringItem,...Z}})})}})},pV=(n,s)=>{const a=(P,z)=>n.getRelated(P).exists(K=>kh(K,z)),i=(P,z)=>{Jn.setContent(P,z)},d=(P,z,Z)=>{const K=T.none;g(P,z,Z,K)},g=(P,z,Z,K)=>{const ee=n.lazySink(P).getOrDie();Jn.openWhileCloaked(P,z,()=>La.positionWithinBounds(ee,P,Z,K())),St.setValue(P,T.some({mode:"position",config:Z,getBounds:K}))},h=(P,z,Z)=>{C(P,z,Z,T.none)},C=(P,z,Z,K)=>{const ee=FB(n,P,z,Z,K);Jn.open(P,ee),St.setValue(P,T.some({mode:"menu",menu:ee}))},S=P=>{Jn.isOpen(P)&&(St.setValue(P,T.none()),Jn.close(P))},x=P=>Jn.getState(P),A=P=>{Jn.isOpen(P)&&St.getValue(P).each(z=>{switch(z.mode){case"menu":Jn.getState(P).each(S1.repositionMenus);break;case"position":const Z=n.lazySink(P).getOrDie();La.positionWithinBounds(Z,P,z.config,z.getBounds());break}})},R={setContent:i,showAt:d,showWithinBounds:g,showMenuAt:h,showMenuWithinBounds:C,hide:S,getContent:x,reposition:A,isOpen:Jn.isOpen};return{uid:n.uid,dom:n.dom,behaviours:wa(n.inlineBehaviours,[Jn.config({isPartOf:(P,z,Z)=>kh(z,Z)||a(P,Z),getAttachPoint:P=>n.lazySink(P).getOrDie(),onOpen:P=>{n.onShow(P)},onClose:P=>{n.onHide(P)}}),St.config({store:{mode:"memory",initialValue:T.none()}}),Fa.config({channels:{...pO({isExtraPart:s.isExtraPart,...n.fireDismissalEventInstead.map(P=>({fireEventInstead:{event:P.event}})).getOr({})}),...O4({...n.fireRepositionEventInstead.map(P=>({fireEventInstead:{event:P.event}})).getOr({}),doReposition:A})}})]),eventOrder:n.eventOrder,apis:R}},fs=Ji({name:"InlineView",configFields:[He("lazySink"),qn("onShow"),qn("onHide"),Vi("onEscape"),Ur("inlineBehaviours",[Jn,St,Fa]),Ka("fireDismissalEventInstead",[pe("event",pd())]),Ka("fireRepositionEventInstead",[pe("event",px())]),pe("getRelated",T.none),pe("isExtraPart",Cn),pe("eventOrder",T.none)],factory:pV,apis:{showAt:(n,s,a,i)=>{n.showAt(s,a,i)},showWithinBounds:(n,s,a,i,d)=>{n.showWithinBounds(s,a,i,d)},showMenuAt:(n,s,a,i)=>{n.showMenuAt(s,a,i)},showMenuWithinBounds:(n,s,a,i,d)=>{n.showMenuWithinBounds(s,a,i,d)},hide:(n,s)=>{n.hide(s)},isOpen:(n,s)=>n.isOpen(s),getContent:(n,s)=>n.getContent(s),setContent:(n,s,a)=>{n.setContent(s,a)},reposition:(n,s)=>{n.reposition(s)}}}),wO=ie([ms("type","text"),ho("data"),pe("inputAttributes",{}),pe("inputStyles",{}),pe("tag","input"),pe("inputClasses",[]),qn("onSetValue"),Ho("fromInputValue",Et),Ho("toInputValue",Et),pe("styles",{}),pe("eventOrder",{}),Ur("inputBehaviours",[St,ln]),pe("selectOnFocus",!0)]),HB=n=>Xe([ln.config({onFocus:n.selectOnFocus?s=>{const a=s.element,i=Hc(a);n.type!=="range"&&a.dom.setSelectionRange(0,i.length)}:U})]),bV=n=>({...HB(n),...wa(n.inputBehaviours,[St.config({store:{mode:"manual",...n.data.map(s=>({initialValue:s})).getOr({}),getValue:s=>n.fromInputValue(Hc(s.element)),setValue:(s,a)=>{Hc(s.element)!==a&&im(s.element,n.toInputValue(a))}},onSetValue:n.onSetValue})])}),xO=n=>({tag:n.tag,attributes:{type:n.type,...n.inputAttributes},styles:n.inputStyles,classes:n.inputClasses}),zB=(n,s)=>({uid:n.uid,dom:xO(n),components:[],behaviours:bV(n),eventOrder:n.eventOrder}),Hm=Ji({name:"Input",configFields:wO(),factory:zB}),EO=ym(cO(),iO()),vV=(n,s)=>{const a=Pr(n,"id").fold(()=>{const i=Ct("dialog-label");return qt(s,"id",i),i},Et);qt(n,"aria-labelledby",a)},yV=ie([He("lazySink"),ho("dragBlockClass"),Ho("getBounds",ta),pe("useTabstopAt",yt),pe("firstTabstop",0),pe("eventOrder",{}),Ur("modalBehaviours",[Lt]),wc("onExecute"),Dp("onEscape")]),M4={sketch:Et},TO=ie([Na({name:"draghandle",overrides:(n,s)=>({behaviours:Xe([Vf.config({mode:"mouse",getTarget:a=>Li(a,'[role="dialog"]').getOr(a),blockerClass:n.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:n.getDragBounds})])})}),Ca({schema:[He("dom")],name:"title"}),Ca({factory:M4,schema:[He("dom")],name:"close"}),Ca({factory:M4,schema:[He("dom")],name:"body"}),Na({factory:M4,schema:[He("dom")],name:"footer"}),bi({factory:{sketch:(n,s)=>({...n,dom:s.dom,components:s.components})},schema:[pe("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),pe("components",[])],name:"blocker"})]),CV=(n,s,a,i)=>{const d=pn(),g=Z=>{d.set(Z);const K=n.lazySink(Z).getOrDie(),ee=i.blocker(),G=K.getSystem().build({...ee,components:ee.components.concat([p(Z)]),behaviours:Xe([ln.config({}),cn("dialog-blocker-events",[lh(Ui(),()=>{fe.isBlocked(Z)?U():Lt.focusIn(Z)})])])});Ed(K,G),Lt.focusIn(Z)},h=Z=>{d.clear(),Za(Z.element).each(K=>{Z.getSystem().getByDom(K).each(ee=>{kd(ee)})})},C=Z=>Dl(Z,n,"body"),S=Z=>Mo(Z,n,"footer"),x=(Z,K)=>{fe.block(Z,K)},A=Z=>{fe.unblock(Z)},R=Ct("modal-events"),P={...n.eventOrder,[Al()]:[R].concat(n.eventOrder["alloy.system.attached"]||[])},z=Jr();return{uid:n.uid,dom:n.dom,components:s,apis:{show:g,hide:h,getBody:C,getFooter:S,setIdle:A,setBusy:x},eventOrder:P,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:wa(n.modalBehaviours,[mn.config({}),Lt.config({mode:"cyclic",onEnter:n.onExecute,onEscape:n.onEscape,useTabstopAt:n.useTabstopAt,firstTabstop:n.firstTabstop}),fe.config({getRoot:d.get}),cn(R,[Wo(Z=>{const K=Dl(Z,n,"title").element,ee=v3(K);z.os.isMacOS()&&jt(ee)?qt(Z.element,"aria-label",ee):vV(Z.element,K)})])])}},xr=kc({name:"ModalDialog",configFields:yV(),partFields:TO(),factory:CV,apis:{show:(n,s)=>{n.show(s)},hide:(n,s)=>{n.hide(s)},getBody:(n,s)=>n.getBody(s),getFooter:(n,s)=>n.getFooter(s),setBusy:(n,s,a)=>{n.setBusy(s,a)},setIdle:(n,s)=>{n.setIdle(s)}}}),SV=Na({schema:[He("dom")],name:"label"}),Ah=n=>Na({name:""+n+"-edge",overrides:s=>s.model.manager.edgeActions[n].fold(()=>({}),i=>({events:ns([ch(Sc(),(d,g,h)=>i(d,h),[s]),ch(Ya(),(d,g,h)=>i(d,h),[s]),ch(Wg(),(d,g,h)=>{h.mouseIsDown.get()&&i(d,h)},[s])])}))}),wV=Ah("top-left"),xV=Ah("top"),VB=Ah("top-right"),UB=Ah("right"),EV=Ah("bottom-right"),TV=Ah("bottom"),kV=Ah("bottom-left"),Ci=Ah("left"),Nu=Ca({name:"thumb",defaults:ie({dom:{styles:{position:"absolute"}}}),overrides:n=>({events:ns([Su(Sc(),n,"spectrum"),Su(Bs(),n,"spectrum"),Su(pm(),n,"spectrum"),Su(Ya(),n,"spectrum"),Su(Wg(),n,"spectrum"),Su(W0(),n,"spectrum")])})}),gS=n=>_m(n.event),kO=Ca({schema:[Da("mouseIsDown",()=>Bt(!1))],name:"spectrum",overrides:n=>{const a=n.model.manager,i=(d,g)=>a.getValueFromEvent(g).map(h=>a.setValueFrom(d,n,h));return{behaviours:Xe([Lt.config({mode:"special",onLeft:(d,g)=>a.onLeft(d,n,gS(g)),onRight:(d,g)=>a.onRight(d,n,gS(g)),onUp:(d,g)=>a.onUp(d,n,gS(g)),onDown:(d,g)=>a.onDown(d,n,gS(g))}),Vo.config({}),ln.config({})]),events:ns([Me(Sc(),i),Me(Bs(),i),Me(Ya(),i),Me(Wg(),(d,g)=>{n.mouseIsDown.get()&&i(d,g)})])}}});var _O=[SV,Ci,UB,xV,TV,wV,VB,kV,EV,Nu,kO];const hS=ie("slider.change.value"),ZB=n=>n.type.indexOf("touch")!==-1,w1=n=>{const s=n.event.raw;if(ZB(s)){const a=s;return a.touches!==void 0&&a.touches.length===1?T.some(a.touches[0]).map(i=>ko(i.clientX,i.clientY)):T.none()}else{const a=s;return a.clientX!==void 0?T.some(a).map(i=>ko(i.clientX,i.clientY)):T.none()}},_V="top",N4="right",OO="bottom",WB="left",Pd=n=>n.model.minX,x1=n=>n.model.minY,B4=n=>n.model.minX-1,tl=n=>n.model.minY-1,ia=n=>n.model.maxX,$d=n=>n.model.maxY,tc=n=>n.model.maxX+1,P4=n=>n.model.maxY+1,Uo=(n,s,a)=>s(n)-a(n),DO=n=>Uo(n,ia,Pd),Id=n=>Uo(n,$d,x1),Cv=n=>DO(n)/2,RO=n=>Id(n)/2,Oh=(n,s)=>s?n.stepSize*n.speedMultiplier:n.stepSize,$4=n=>n.snapToGrid,jB=n=>n.snapStart,I4=n=>n.rounded,L4=(n,s)=>n[s+"-edge"]!==void 0,MO=n=>L4(n,WB),NO=n=>L4(n,N4),F4=n=>L4(n,_V),BO=n=>L4(n,OO),Bu=n=>n.model.value.get(),Dh=(n,s)=>({x:n,y:s}),Pu=(n,s)=>{Ht(n,hS(),{value:s})},AV=(n,s)=>{Pu(n,Dh(B4(s),tl(s)))},OV=(n,s)=>{Pu(n,tl(s))},DV=(n,s)=>{Pu(n,Dh(Cv(s),tl(s)))},GB=(n,s)=>{Pu(n,Dh(tc(s),tl(s)))},RV=(n,s)=>{Pu(n,tc(s))},MV=(n,s)=>{Pu(n,Dh(tc(s),RO(s)))},qB=(n,s)=>{Pu(n,Dh(tc(s),P4(s)))},NV=(n,s)=>{Pu(n,P4(s))},KB=(n,s)=>{Pu(n,Dh(Cv(s),P4(s)))},pS=(n,s)=>{Pu(n,Dh(B4(s),P4(s)))},BV=(n,s)=>{Pu(n,B4(s))},PV=(n,s)=>{Pu(n,Dh(B4(s),RO(s)))},H4=(n,s,a,i)=>n<s?n:n>a?a:n===s?s-1:Math.max(s,n-i),z4=(n,s,a,i)=>n>a?n:n<s?s:n===a?a+1:Math.min(a,n+i),V4=(n,s,a)=>Math.max(s,Math.min(a,n)),YB=(n,s,a,i,d)=>d.fold(()=>{const g=n-s,h=Math.round(g/i)*i;return V4(s+h,s-1,a+1)},g=>{const h=(n-g)%i,C=Math.round(h/i),S=Math.floor((n-g)/i),x=Math.floor((a-g)/i),A=Math.min(x,S+C),R=g+A*i;return Math.max(g,R)}),$V=(n,s,a)=>Math.min(a,Math.max(n,s))-s,XB=n=>{const{min:s,max:a,range:i,value:d,step:g,snap:h,snapStart:C,rounded:S,hasMinEdge:x,hasMaxEdge:A,minBound:R,maxBound:P,screenRange:z}=n,Z=x?s-1:s,K=A?a+1:a;if(d<R)return Z;if(d>P)return K;{const ee=$V(d,R,P),G=V4(ee/z*i+s,Z,K);return h&&G>=s&&G<=a?YB(G,s,a,g,C):S?Math.round(G):G}},JB=n=>{const{min:s,max:a,range:i,value:d,hasMinEdge:g,hasMaxEdge:h,maxBound:C,maxOffset:S,centerMinEdge:x,centerMaxEdge:A}=n;return d<s?g?0:x:d>a?h?C:A:(d-s)/i*S},PO="top",QB="right",eP="bottom",U4="left",$u="width",IV="height",Iu=n=>n.element.dom.getBoundingClientRect(),Vl=(n,s)=>n[s],bS=n=>{const s=Iu(n);return Vl(s,U4)},tP=n=>{const s=Iu(n);return Vl(s,QB)},vS=n=>{const s=Iu(n);return Vl(s,PO)},$O=n=>{const s=Iu(n);return Vl(s,eP)},IO=n=>{const s=Iu(n);return Vl(s,$u)},nP=n=>{const s=Iu(n);return Vl(s,IV)},oP=(n,s,a)=>(n+s)/2-a,sP=(n,s)=>{const a=Iu(n),i=Iu(s),d=Vl(a,U4),g=Vl(a,QB),h=Vl(i,U4);return oP(d,g,h)},rP=(n,s)=>{const a=Iu(n),i=Iu(s),d=Vl(a,PO),g=Vl(a,eP),h=Vl(i,PO);return oP(d,g,h)},Z4=(n,s)=>{Ht(n,hS(),{value:s})},LO=(n,s,a)=>{const i={min:Pd(s),max:ia(s),range:DO(s),value:a,step:Oh(s),snap:$4(s),snapStart:jB(s),rounded:I4(s),hasMinEdge:MO(s),hasMaxEdge:NO(s),minBound:bS(n),maxBound:tP(n),screenRange:IO(n)};return XB(i)},LV=(n,s,a)=>{const i=LO(n,s,a);return Z4(n,i),i},aP=(n,s)=>{const a=Pd(s);Z4(n,a)},cP=(n,s)=>{const a=ia(s);Z4(n,a)},iP=(n,s,a,i)=>{const g=(n>0?z4:H4)(Bu(a),Pd(a),ia(a),Oh(a,i));return Z4(s,g),T.some(g)},FO=n=>(s,a,i)=>iP(n,s,a,i).map(yt),FV=n=>w1(n).map(a=>a.left),HV=(n,s,a,i,d)=>{const h=IO(n),C=i.bind(A=>T.some(sP(A,n))).getOr(0),S=d.bind(A=>T.some(sP(A,n))).getOr(h),x={min:Pd(s),max:ia(s),range:DO(s),value:a,hasMinEdge:MO(s),hasMaxEdge:NO(s),minBound:bS(n),minOffset:0,maxBound:tP(n),maxOffset:h,centerMinEdge:C,centerMaxEdge:S};return JB(x)},HO=(n,s,a,i,d,g)=>{const h=HV(s,g,a,i,d);return bS(s)-bS(n)+h},lP=(n,s,a,i)=>{const d=Bu(a),g=HO(n,i.getSpectrum(n),d,i.getLeftEdge(n),i.getRightEdge(n),a),h=va(s.element)/2;on(s.element,"left",g-h+"px")},Sv=FO(-1),W4=FO(1),zV=T.none,uP=T.none,dP={"top-left":T.none(),top:T.none(),"top-right":T.none(),right:T.some(RV),"bottom-right":T.none(),bottom:T.none(),"bottom-left":T.none(),left:T.some(BV)};var mP=Object.freeze({__proto__:null,setValueFrom:LV,setToMin:aP,setToMax:cP,findValueOfOffset:LO,getValueFromEvent:FV,findPositionOfValue:HO,setPositionFromValue:lP,onLeft:Sv,onRight:W4,onUp:zV,onDown:uP,edgeActions:dP});const yS=(n,s)=>{Ht(n,hS(),{value:s})},CS=(n,s,a)=>{const i={min:x1(s),max:$d(s),range:Id(s),value:a,step:Oh(s),snap:$4(s),snapStart:jB(s),rounded:I4(s),hasMinEdge:F4(s),hasMaxEdge:BO(s),minBound:vS(n),maxBound:$O(n),screenRange:nP(n)};return XB(i)},zO=(n,s,a)=>{const i=CS(n,s,a);return yS(n,i),i},VV=(n,s)=>{const a=x1(s);yS(n,a)},UV=(n,s)=>{const a=$d(s);yS(n,a)},ZV=(n,s,a,i)=>{const g=(n>0?z4:H4)(Bu(a),x1(a),$d(a),Oh(a,i));return yS(s,g),T.some(g)},VO=n=>(s,a,i)=>ZV(n,s,a,i).map(yt),fP=n=>w1(n).map(a=>a.top),WV=(n,s,a,i,d)=>{const h=nP(n),C=i.bind(A=>T.some(rP(A,n))).getOr(0),S=d.bind(A=>T.some(rP(A,n))).getOr(h),x={min:x1(s),max:$d(s),range:Id(s),value:a,hasMinEdge:F4(s),hasMaxEdge:BO(s),minBound:vS(n),minOffset:0,maxBound:$O(n),maxOffset:h,centerMinEdge:C,centerMaxEdge:S};return JB(x)},UO=(n,s,a,i,d,g)=>{const h=WV(s,g,a,i,d);return vS(s)-vS(n)+h},gP=(n,s,a,i)=>{const d=Bu(a),g=UO(n,i.getSpectrum(n),d,i.getTopEdge(n),i.getBottomEdge(n),a),h=vr(s.element)/2;on(s.element,"top",g-h+"px")},jV=T.none,GV=T.none,qV=VO(-1),KV=VO(1),YV={"top-left":T.none(),top:T.some(OV),"top-right":T.none(),right:T.none(),"bottom-right":T.none(),bottom:T.some(NV),"bottom-left":T.none(),left:T.none()};var XV=Object.freeze({__proto__:null,setValueFrom:zO,setToMin:VV,setToMax:UV,findValueOfOffset:CS,getValueFromEvent:fP,findPositionOfValue:UO,setPositionFromValue:gP,onLeft:jV,onRight:GV,onUp:qV,onDown:KV,edgeActions:YV});const j4=(n,s)=>{Ht(n,hS(),{value:s})},SS=(n,s)=>({x:n,y:s}),hP=(n,s,a)=>{const i=LO(n,s,a.left),d=CS(n,s,a.top),g=SS(i,d);return j4(n,g),g},JV=(n,s,a,i,d)=>{const g=n>0?z4:H4,h=s?Bu(i).x:g(Bu(i).x,Pd(i),ia(i),Oh(i,d)),C=s?g(Bu(i).y,x1(i),$d(i),Oh(i,d)):Bu(i).y;return j4(a,SS(h,C)),T.some(h)},G4=(n,s)=>(a,i,d)=>JV(n,s,a,i,d).map(yt),QV=(n,s)=>{const a=Pd(s),i=x1(s);j4(n,SS(a,i))},pP=(n,s)=>{const a=ia(s),i=$d(s);j4(n,SS(a,i))},eU=n=>w1(n),tU=(n,s,a,i)=>{const d=Bu(a),g=HO(n,i.getSpectrum(n),d.x,i.getLeftEdge(n),i.getRightEdge(n),a),h=UO(n,i.getSpectrum(n),d.y,i.getTopEdge(n),i.getBottomEdge(n),a),C=va(s.element)/2,S=vr(s.element)/2;on(s.element,"left",g-C+"px"),on(s.element,"top",h-S+"px")},nU=G4(-1,!1),q4=G4(1,!1),oU=G4(-1,!0),sU=G4(1,!0),rU={"top-left":T.some(AV),top:T.some(DV),"top-right":T.some(GB),right:T.some(MV),"bottom-right":T.some(qB),bottom:T.some(KB),"bottom-left":T.some(pS),left:T.some(PV)};var aU=Object.freeze({__proto__:null,setValueFrom:hP,setToMin:QV,setToMax:pP,getValueFromEvent:eU,setPositionFromValue:tU,onLeft:nU,onRight:q4,onUp:oU,onDown:sU,edgeActions:rU});const cU=[pe("stepSize",1),pe("speedMultiplier",10),pe("onChange",U),pe("onChoose",U),pe("onInit",U),pe("onDragStart",U),pe("onDragEnd",U),pe("snapToGrid",!1),pe("rounded",!0),ho("snapStart"),Ga("model",Oa("mode",{x:[pe("minX",0),pe("maxX",100),Da("value",n=>Bt(n.mode.minX)),He("getInitialValue"),ro("manager",mP)],y:[pe("minY",0),pe("maxY",100),Da("value",n=>Bt(n.mode.minY)),He("getInitialValue"),ro("manager",XV)],xy:[pe("minX",0),pe("maxX",100),pe("minY",0),pe("maxY",100),Da("value",n=>Bt({x:n.mode.minX,y:n.mode.minY})),He("getInitialValue"),ro("manager",aU)]})),Ur("sliderBehaviours",[Lt,St]),Da("mouseIsDown",()=>Bt(!1))],Lu=kc({name:"Slider",configFields:cU,partFields:_O,factory:(n,s,a,i)=>{const d=Te=>Dl(Te,n,"thumb"),g=Te=>Dl(Te,n,"spectrum"),h=Te=>Mo(Te,n,"left-edge"),C=Te=>Mo(Te,n,"right-edge"),S=Te=>Mo(Te,n,"top-edge"),x=Te=>Mo(Te,n,"bottom-edge"),A=n.model,R=A.manager,P=(Te,ct)=>{R.setPositionFromValue(Te,ct,n,{getLeftEdge:h,getRightEdge:C,getTopEdge:S,getBottomEdge:x,getSpectrum:g})},z=(Te,ct)=>{A.value.set(ct);const lt=d(Te);P(Te,lt)},Z=(Te,ct)=>{z(Te,ct);const lt=d(Te);return n.onChange(Te,lt,ct),T.some(!0)},K=Te=>{R.setToMin(Te,n)},ee=Te=>{R.setToMax(Te,n)},G=Te=>{const ct=()=>{Mo(Te,n,"thumb").each(Ne=>{const Fe=A.value.get();n.onChoose(Te,Ne,Fe)})},lt=n.mouseIsDown.get();n.mouseIsDown.set(!1),lt&&ct()},oe=(Te,ct)=>{ct.stop(),n.mouseIsDown.set(!0),n.onDragStart(Te,d(Te))},le=(Te,ct)=>{ct.stop(),n.onDragEnd(Te,d(Te)),G(Te)},Se=Te=>{Mo(Te,n,"spectrum").map(Lt.focusIn)};return{uid:n.uid,dom:n.dom,components:s,behaviours:wa(n.sliderBehaviours,[Lt.config({mode:"special",focusIn:Se}),St.config({store:{mode:"manual",getValue:Te=>A.value.get(),setValue:z}}),Fa.config({channels:{[wd()]:{onReceive:G}}})]),events:ns([Me(hS(),(Te,ct)=>{Z(Te,ct.event.value)}),Wo((Te,ct)=>{const lt=A.getInitialValue();A.value.set(lt);const Ne=d(Te);P(Te,Ne);const Fe=g(Te);n.onInit(Te,Ne,Fe,A.value.get())}),Me(Sc(),oe),Me(pm(),le),Me(Ya(),(Te,ct)=>{Se(Te),oe(Te,ct)}),Me(W0(),le)]),apis:{resetToMin:K,resetToMax:ee,setValue:z,refresh:P},domModification:{styles:{position:"relative"}}}},apis:{setValue:(n,s,a)=>{n.setValue(s,a)},resetToMin:(n,s)=>{n.resetToMin(s)},resetToMax:(n,s)=>{n.resetToMax(s)},refresh:(n,s)=>{n.refresh(s)}}}),bP="container",iU=[Ur("slotBehaviours",[])],vP=n=>"<alloy.field."+n+">",lU=n=>{const s=(()=>{const g=[];return{slot:(C,S)=>(g.push(C),Ry(bP,vP(C),S)),record:ie(g)}})(),a=n(s),i=s.record(),d=$e(i,g=>Ca({name:g,pname:vP(g)}));return lA(bP,iU,d,uU,a)},uU=(n,s)=>{const a=K=>Zc(n),i=(K,ee)=>Mo(K,n,ee),d=(K,ee)=>(G,oe)=>Mo(G,n,oe).map(le=>K(le,oe)).getOr(ee),g=K=>(ee,G)=>{gt(G,oe=>K(ee,oe))},h=(K,ee)=>br(K.element,"aria-hidden")!=="true",C=(K,ee)=>{if(!h(K)){const G=K.element;Nn(G,"display"),Qo(G,"aria-hidden"),Ht(K,wy(),{name:ee,visible:!0})}},S=(K,ee)=>{if(h(K)){const G=K.element;on(G,"display","none"),qt(G,"aria-hidden","true"),Ht(K,wy(),{name:ee,visible:!1})}},x=d(h,!1),A=d(S),R=g(A),P=K=>R(K,a()),z=d(C),Z={getSlotNames:a,getSlot:i,isShowing:x,hideSlot:A,hideAllSlots:P,showSlot:z};return{uid:n.uid,dom:n.dom,components:s,behaviours:XC(n.slotBehaviours),apis:Z}},la={...Ds({getSlotNames:(n,s)=>n.getSlotNames(s),getSlot:(n,s,a)=>n.getSlot(s,a),isShowing:(n,s,a)=>n.isShowing(s,a),hideSlot:(n,s,a)=>n.hideSlot(s,a),hideAllSlots:(n,s)=>n.hideAllSlots(s),showSlot:(n,s,a)=>n.showSlot(s,a)},n=>r1(n)),sketch:lU},dU=(n,s)=>Po(n,(d,g)=>s(g,d.len).fold(ie(d),C=>({len:C.finish,list:d.list.concat([C])})),{len:0,list:[]}).list,ZO=(n,s,a)=>({within:n,extra:s,withinWidth:a}),yP=(n,s,a)=>{const i=dU(n,(C,S)=>{const x=a(C);return T.some({element:C,start:S,finish:S+x,width:x})}),d=Co(i,C=>C.finish<=s),g=gs(d,(C,S)=>C+S.width,0),h=i.slice(d.length);return{within:d,extra:h,withinWidth:g}},wS=n=>$e(n,s=>s.element),mU=(n,s,a)=>{const i=wS(n.concat(s));return ZO(i,[],a)},fU=(n,s,a,i)=>{const d=wS(n).concat([a]);return ZO(d,wS(s),i)},gU=(n,s,a)=>ZO(wS(n),[],a),hU=(n,s,a)=>{const i=yP(s,n,a);return i.extra.length===0?T.some(i):T.none()},pU=(n,s,a,i)=>{const d=hU(n,s,a).getOrThunk(()=>yP(s,n-a(i),a)),g=d.within,h=d.extra,C=d.withinWidth;return h.length===1&&h[0].width<=a(i)?mU(g,h,C):h.length>=1?fU(g,h,i,C):gU(g,h,C)},CP=(n,s)=>{const a=$e(s,i=>p(i));Bd.setGroups(n,a)},WO=n=>ic(n,s=>or(s.element).bind(a=>s.getSystem().getByDom(a).toOptional())),SP=(n,s,a)=>{const i=s.builtGroups.get();if(i.length===0)return;const d=Dl(n,s,"primary"),g=fn.getCoupled(n,"overflowGroup");on(d.element,"visibility","hidden");const h=i.concat([g]),C=WO(h);a([]),CP(d,h);const S=va(d.element),x=pU(S,s.builtGroups.get(),A=>Math.ceil(A.element.dom.getBoundingClientRect().width),g);x.extra.length===0?(mn.remove(d,g),a([])):(CP(d,x.within),a(x.extra)),Nn(d.element,"visibility"),Ii(d.element),C.each(ln.focus)},wP=ie([Ur("splitToolbarBehaviours",[fn]),Da("builtGroups",()=>Bt([]))]),bU=ie([Un(["overflowToggledClass"]),Vi("getOverflowBounds"),He("lazySink"),Da("overflowGroups",()=>Bt([])),qn("onOpened"),qn("onClosed")].concat(wP())),vU=ie([Ca({factory:Bd,schema:vv(),name:"primary"}),bi({schema:vv(),name:"overflow"}),bi({name:"overflow-button"}),bi({name:"overflow-group"})]),yU=ie([He("items"),Un(["itemSelector"]),Ur("tgroupBehaviours",[Lt])]),CU=ie([ib({name:"items",unit:"item"})]),SU=(n,s,a,i)=>({uid:n.uid,dom:n.dom,components:s,behaviours:wa(n.tgroupBehaviours,[Lt.config({mode:"flow",selector:n.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),K4=kc({name:"ToolbarGroup",configFields:yU(),partFields:CU(),factory:SU}),xP=n=>$e(n,s=>p(s)),EP=(n,s,a)=>{SP(n,a,i=>{a.overflowGroups.set(i),s.getOpt(n).each(d=>{jf.setGroups(d,xP(i))})})},wU=(n,s,a,i)=>{const d=to(jf.sketch({fetch:()=>Ss.nu(g=>{g(xP(n.overflowGroups.get()))}),layouts:{onLtr:()=>[Gs,cr],onRtl:()=>[cr,Gs],onBottomLtr:()=>[_r,Vr],onBottomRtl:()=>[Vr,_r]},getBounds:a.getOverflowBounds,lazySink:n.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:n.markers.overflowToggledClass},parts:{button:i["overflow-button"](),toolbar:i.overflow()},onToggled:(g,h)=>n[h?"onOpened":"onClosed"](g)}));return{uid:n.uid,dom:n.dom,components:s,behaviours:wa(n.splitToolbarBehaviours,[fn.config({others:{overflowGroup:()=>K4.sketch({...i["overflow-group"](),items:[d.asSpec()]})}})]),apis:{setGroups:(g,h)=>{n.builtGroups.set($e(h,g.getSystem().build)),EP(g,d,n)},refresh:g=>EP(g,d,n),toggle:g=>{d.getOpt(g).each(h=>{jf.toggle(h)})},toggleWithoutFocusing:g=>{d.getOpt(g).each(jf.toggleWithoutFocusing)},isOpen:g=>d.getOpt(g).map(jf.isOpen).getOr(!1),reposition:g=>{d.getOpt(g).each(h=>{jf.reposition(h)})},getOverflow:g=>d.getOpt(g).bind(jf.getToolbar)},domModification:{attributes:{role:"group"}}}},TP=kc({name:"SplitFloatingToolbar",configFields:bU(),partFields:vU(),factory:wU,apis:{setGroups:(n,s,a)=>{n.setGroups(s,a)},refresh:(n,s)=>{n.refresh(s)},reposition:(n,s)=>{n.reposition(s)},toggle:(n,s)=>{n.toggle(s)},toggleWithoutFocusing:(n,s)=>{n.toggle(s)},isOpen:(n,s)=>n.isOpen(s),getOverflow:(n,s)=>n.getOverflow(s)}}),xU=ie([Un(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),qn("onOpened"),qn("onClosed")].concat(wP())),EU=ie([Ca({factory:Bd,schema:vv(),name:"primary"}),Ca({factory:Bd,schema:vv(),name:"overflow",overrides:n=>({toolbarBehaviours:Xe([ec.config({dimension:{property:"height"},closedClass:n.markers.closedClass,openClass:n.markers.openClass,shrinkingClass:n.markers.shrinkingClass,growingClass:n.markers.growingClass,onShrunk:s=>{Mo(s,n,"overflow-button").each(a=>{Pn.off(a)}),n.onClosed(s)},onGrown:s=>{n.onOpened(s)},onStartGrow:s=>{Mo(s,n,"overflow-button").each(Pn.on)}}),Lt.config({mode:"acyclic",onEscape:s=>(Mo(s,n,"overflow-button").each(ln.focus),T.some(!0))})])})}),bi({name:"overflow-button",overrides:n=>({buttonBehaviours:Xe([Pn.config({toggleClass:n.markers.overflowToggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])})}),bi({name:"overflow-group"})]),TU=(n,s)=>Mo(n,s,"overflow").map(ec.hasGrown).getOr(!1),xS=(n,s,a)=>{Mo(n,s,"overflow-button").each(i=>{Mo(n,s,"overflow").each(d=>{if(jO(n,s),ec.hasShrunk(d)){const g=s.onOpened;s.onOpened=h=>{a||Lt.focusIn(d),g(h),s.onOpened=g}}else{const g=s.onClosed;s.onClosed=h=>{a||ln.focus(i),g(h),s.onClosed=g}}ec.toggleGrow(d)})})},jO=(n,s)=>{Mo(n,s,"overflow").each(a=>{SP(n,s,i=>{const d=$e(i,g=>p(g));Bd.setGroups(a,d)}),Mo(n,s,"overflow-button").each(i=>{ec.hasGrown(a)&&Pn.on(i)}),ec.refresh(a)})},kU=(n,s,a,i)=>{const d="alloy.toolbar.toggle",g=(h,C)=>{const S=$e(C,h.getSystem().build);n.builtGroups.set(S)};return{uid:n.uid,dom:n.dom,components:s,behaviours:wa(n.splitToolbarBehaviours,[fn.config({others:{overflowGroup:h=>K4.sketch({...i["overflow-group"](),items:[wr.sketch({...i["overflow-button"](),action:C=>{On(h,d)}})]})}}),cn("toolbar-toggle-events",[Me(d,h=>{xS(h,n,!1)})])]),apis:{setGroups:(h,C)=>{g(h,C),jO(h,n)},refresh:h=>jO(h,n),toggle:h=>{xS(h,n,!1)},toggleWithoutFocusing:h=>{xS(h,n,!0)},isOpen:h=>TU(h,n)},domModification:{attributes:{role:"group"}}}},GO=kc({name:"SplitSlidingToolbar",configFields:xU(),partFields:EU(),factory:kU,apis:{setGroups:(n,s,a)=>{n.setGroups(s,a)},refresh:(n,s)=>{n.refresh(s)},toggle:(n,s)=>{n.toggle(s)},isOpen:(n,s)=>n.isOpen(s)}}),ES=(n,s)=>({uid:n.uid,dom:n.dom,components:n.components,events:tO(n.action),behaviours:wa(n.tabButtonBehaviours,[ln.config({}),Lt.config({mode:"execution",useSpace:!0,useEnter:!0}),St.config({store:{mode:"memory",initialValue:n.value}})]),domModification:n.domModification}),kP=Ji({name:"TabButton",configFields:[pe("uid",void 0),He("value"),Cr("dom","dom",md(()=>({attributes:{role:"tab",id:Ct("aria"),"aria-selected":"false"}})),mi()),ho("action"),pe("domModification",{}),Ur("tabButtonBehaviours",[ln,Lt,St]),He("view")],factory:ES}),_U=ie([He("tabs"),He("dom"),pe("clickToDismiss",!1),Ur("tabbarBehaviours",[eo,Lt]),Un(["tabClass","selectedClass"])]),AU=ib({factory:kP,name:"tabs",unit:"tab",overrides:n=>{const s=(i,d)=>{eo.dehighlight(i,d),Ht(i,J0(),{tabbar:i,button:d})},a=(i,d)=>{eo.highlight(i,d),Ht(i,xy(),{tabbar:i,button:d})};return{action:i=>{const d=i.getSystem().getByUid(n.uid).getOrDie(),g=eo.isHighlighted(d,i);(g&&n.clickToDismiss?s:g?U:a)(d,i)},domModification:{classes:[n.markers.tabClass]}}}}),_P=ie([AU]),OU=(n,s,a,i)=>({uid:n.uid,dom:n.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:wa(n.tabbarBehaviours,[eo.config({highlightClass:n.markers.selectedClass,itemClass:n.markers.tabClass,onHighlight:(d,g)=>{qt(g.element,"aria-selected","true")},onDehighlight:(d,g)=>{qt(g.element,"aria-selected","false")}}),Lt.config({mode:"flow",getInitial:d=>eo.getHighlighted(d).map(g=>g.element),selector:"."+n.markers.tabClass,executeOnMove:!0})])}),AP=kc({name:"Tabbar",configFields:_U(),partFields:_P(),factory:OU}),DU=(n,s)=>({uid:n.uid,dom:n.dom,behaviours:wa(n.tabviewBehaviours,[mn.config({})]),domModification:{attributes:{role:"tabpanel"}}}),RU=Ji({name:"Tabview",configFields:[Ur("tabviewBehaviours",[mn])],factory:DU}),MU=ie([pe("selectFirst",!0),qn("onChangeTab"),qn("onDismissTab"),pe("tabs",[]),Ur("tabSectionBehaviours",[])]),NU=Ca({factory:AP,schema:[He("dom"),pu("markers",[He("tabClass"),He("selectedClass")])],name:"tabbar",defaults:n=>({tabs:n.tabs})}),BU=Ca({factory:RU,name:"tabview"}),PU=ie([NU,BU]),OP=(n,s,a,i)=>{const d=h=>{const C=St.getValue(h);Mo(h,n,"tabview").each(S=>{Ce(n.tabs,A=>A.value===C).each(A=>{const R=A.view();Pr(h.element,"id").each(P=>{qt(S.element,"aria-labelledby",P)}),mn.set(S,R),n.onChangeTab(S,h,R)})})},g=(h,C)=>{Mo(h,n,"tabbar").each(S=>{C(S).each(ah)})};return{uid:n.uid,dom:n.dom,components:s,behaviours:XC(n.tabSectionBehaviours),events:ns(Ue([n.selectFirst?[Wo((h,C)=>{g(h,eo.getFirst)})]:[],[Me(xy(),(h,C)=>{const S=C.event.button;d(S)}),Me(J0(),(h,C)=>{const S=C.event.button;n.onDismissTab(h,S)})]])),apis:{getViewItems:h=>Mo(h,n,"tabview").map(C=>mn.contents(C)).getOr([]),showTab:(h,C)=>{g(h,x=>{const A=eo.getCandidates(x);return Ce(A,P=>St.getValue(P)===C).filter(P=>!eo.isHighlighted(x,P))})}}}},E1=kc({name:"TabSection",configFields:MU(),partFields:PU(),factory:OP,apis:{getViewItems:(n,s)=>n.getViewItems(s),showTab:(n,s,a)=>{n.showTab(s,a)}}}),Y4=(n,s,a)=>{const i=St.getValue(a);St.setValue(s,i),KO(s)},qO=(n,s)=>{const a=n.element,i=Hc(a),d=a.dom;br(a,"type")!=="number"&&s(d,i)},KO=n=>{qO(n,(s,a)=>s.setSelectionRange(a.length,a.length))},DP=(n,s)=>{qO(n,(a,i)=>a.setSelectionRange(s,i.length))},RP=(n,s,a)=>{if(n.selectsOver){const i=St.getValue(s),d=n.getDisplayText(i),g=St.getValue(a);return n.getDisplayText(g).indexOf(d)===0?T.some(()=>{Y4(n,s,a),DP(s,d.length)}):T.none()}else return T.none()},YO=ie("alloy.typeahead.itemexecute"),$U=(n,s,a,i)=>{const d=(R,P,z)=>{n.previewing.set(!1);const Z=fn.getCoupled(R,"sandbox");if(Jn.isOpen(Z))We.getCurrent(Z).each(K=>{eo.getHighlighted(K).fold(()=>{z(K)},()=>{Zy(Z,K.element,"keydown",P)})});else{const K=ee=>{We.getCurrent(ee).each(z)};D4(n,h(R),R,Z,i,K,sa.HighlightMenuAndItem).get(U)}},g=HB(n),h=R=>P=>P.map(z=>{const Z=_i(z.menus),K=ne(Z,G=>Co(G.items,oe=>oe.type==="item"));return St.getState(R).update($e(K,G=>G.data)),z}),C=R=>We.getCurrent(R),S="typeaheadevents",x=[ln.config({}),St.config({onSetValue:n.onSetValue,store:{mode:"dataset",getDataKey:R=>Hc(R.element),getFallbackEntry:R=>({value:R,meta:{}}),setValue:(R,P)=>{im(R.element,n.model.getDisplayText(P))},...n.initialData.map(R=>hm("initialValue",R)).getOr({})}}),pv.config({stream:{mode:"throttle",delay:n.responseTime,stopEvent:!1},onStream:(R,P)=>{const z=fn.getCoupled(R,"sandbox");if(ln.isFocused(R)&&Hc(R.element).length>=n.minChars){const K=C(z).bind(G=>eo.getHighlighted(G).map(St.getValue));n.previewing.set(!0);const ee=G=>{C(z).each(oe=>{K.fold(()=>{n.model.selectsOver&&eo.highlightFirst(oe)},le=>{eo.highlightBy(oe,Se=>St.getValue(Se).value===le.value),eo.getHighlighted(oe).orThunk(()=>(eo.highlightFirst(oe),T.none()))})})};D4(n,h(R),R,z,i,ee,sa.HighlightJustMenu).get(U)}},cancelEvent:Y0()}),Lt.config({mode:"special",onDown:(R,P)=>(d(R,P,eo.highlightFirst),T.some(!0)),onEscape:R=>{const P=fn.getCoupled(R,"sandbox");return Jn.isOpen(P)?(Jn.close(P),T.some(!0)):T.none()},onUp:(R,P)=>(d(R,P,eo.highlightLast),T.some(!0)),onEnter:R=>{const P=fn.getCoupled(R,"sandbox"),z=Jn.isOpen(P);if(z&&!n.previewing.get())return C(P).bind(Z=>eo.getHighlighted(Z)).map(Z=>(Ht(R,YO(),{item:Z}),!0));{const Z=St.getValue(R);return On(R,Y0()),n.onExecute(P,R,Z),z&&Jn.close(P),T.some(!0)}}}),Pn.config({toggleClass:n.markers.openClass,aria:{mode:"expanded"}}),fn.config({others:{sandbox:R=>RB(n,R,{onOpen:()=>Pn.on(R),onClose:()=>{n.lazyTypeaheadComp.get().each(P=>Qo(P.element,"aria-activedescendant")),Pn.off(R)}})}}),cn(S,[Wo(R=>{n.lazyTypeaheadComp.set(T.some(R))}),qi(R=>{n.lazyTypeaheadComp.set(T.none())}),km(R=>{const P=U;R4(n,h(R),R,i,P,sa.HighlightMenuAndItem).get(U)}),Me(YO(),(R,P)=>{const z=fn.getCoupled(R,"sandbox");Y4(n.model,R,P.event.item),On(R,Y0()),n.onItemExecute(R,z,P.event.item,St.getValue(R)),Jn.close(z),KO(R)})].concat(n.dismissOnBlur?[Me(Gg(),R=>{const P=fn.getCoupled(R,"sandbox");or(P.element).isNone()&&Jn.close(P)})]:[]))],A={[pi()]:[St.name(),pv.name(),S],...n.eventOrder};return{uid:n.uid,dom:xO($o(n,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...g,...wa(n.typeaheadBehaviours,x)},eventOrder:A}},IU=ie([ho("lazySink"),He("fetch"),pe("minChars",5),pe("responseTime",1e3),qn("onOpen"),pe("getHotspot",T.some),pe("getAnchorOverrides",ie({})),pe("layouts",T.none()),pe("eventOrder",{}),gm("model",{},[pe("getDisplayText",n=>n.meta!==void 0&&n.meta.text!==void 0?n.meta.text:n.value),pe("selectsOver",!0),pe("populateFromBrowse",!0)]),qn("onSetValue"),wc("onExecute"),qn("onItemExecute"),pe("inputClasses",[]),pe("inputAttributes",{}),pe("inputStyles",{}),pe("matchWidth",!0),pe("useMinWidth",!1),pe("dismissOnBlur",!0),Un(["openClass"]),ho("initialData"),ho("listRole"),Ur("typeaheadBehaviours",[ln,St,pv,Lt,Pn,fn]),Da("lazyTypeaheadComp",()=>Bt(T.none)),Da("previewing",()=>Bt(!0))].concat(wO()).concat(bO())),LU=ie([bi({schema:[Sx()],name:"menu",overrides:n=>({fakeFocus:!0,onHighlightItem:(s,a,i)=>{n.previewing.get()?n.lazyTypeaheadComp.get().each(d=>{RP(n.model,d,i).fold(()=>{n.model.selectsOver?(eo.dehighlight(a,i),n.previewing.set(!0)):n.previewing.set(!1)},g=>{g(),n.previewing.set(!1)})}):n.lazyTypeaheadComp.get().each(d=>{n.model.populateFromBrowse&&Y4(n.model,d,i),Pr(i.element,"id").each(g=>qt(d.element,"aria-activedescendant",g))})},onExecute:(s,a)=>n.lazyTypeaheadComp.get().map(i=>(Ht(i,YO(),{item:a}),!0)),onHover:(s,a)=>{n.previewing.set(!1),n.lazyTypeaheadComp.get().each(i=>{n.model.populateFromBrowse&&Y4(n.model,i,a)})}})})]),XO=kc({name:"Typeahead",configFields:IU(),partFields:LU(),factory:$U});var MP=tinymce.util.Tools.resolve("tinymce.ThemeManager"),X4=tinymce.util.Tools.resolve("tinymce.util.Delay"),wv=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),FU=tinymce.util.Tools.resolve("tinymce.EditorManager"),xv=tinymce.util.Tools.resolve("tinymce.Env"),nl;(function(n){n.default="wrap",n.floating="floating",n.sliding="sliding",n.scrolling="scrolling"})(nl||(nl={}));var Ev;(function(n){n.auto="auto",n.top="top",n.bottom="bottom"})(Ev||(Ev={}));const Ao=n=>s=>s.options.get(n),Tv=n=>s=>T.from(n(s)),NP=n=>{const s=xv.deviceType.isPhone(),a=xv.deviceType.isTablet()||s,i=n.options.register,d=h=>be(h)||h===!1,g=h=>be(h)||dn(h);i("skin",{processor:h=>be(h)||h===!1,default:"oxide"}),i("skin_url",{processor:"string"}),i("height",{processor:g,default:Math.max(n.getElement().offsetHeight,400)}),i("width",{processor:g,default:wv.DOM.getStyle(n.getElement(),"width")}),i("min_height",{processor:"number",default:100}),i("min_width",{processor:"number"}),i("max_height",{processor:"number"}),i("max_width",{processor:"number"}),i("style_formats",{processor:"object[]"}),i("style_formats_merge",{processor:"boolean",default:!1}),i("style_formats_autohide",{processor:"boolean",default:!1}),i("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),i("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),i("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),i("font_size_input_default_unit",{processor:"string",default:"pt"}),i("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),i("content_langs",{processor:"object[]"}),i("removed_menuitems",{processor:"string",default:""}),i("menubar",{processor:h=>be(h)||rn(h),default:!s}),i("menu",{processor:"object",default:{}}),i("toolbar",{processor:h=>rn(h)||be(h)||xt(h)?{value:h,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),Xo(9,h=>{i("toolbar"+(h+1),{processor:"string"})}),i("toolbar_mode",{processor:"string",default:a?"scrolling":"floating"}),i("toolbar_groups",{processor:"object",default:{}}),i("toolbar_location",{processor:"string",default:Ev.auto}),i("toolbar_persist",{processor:"boolean",default:!1}),i("toolbar_sticky",{processor:"boolean",default:n.inline}),i("toolbar_sticky_offset",{processor:"number",default:0}),i("fixed_toolbar_container",{processor:"string",default:""}),i("fixed_toolbar_container_target",{processor:"object"}),i("ui_mode",{processor:"string",default:"combined"}),i("file_picker_callback",{processor:"function"}),i("file_picker_validator_handler",{processor:"function"}),i("file_picker_types",{processor:"string"}),i("typeahead_urls",{processor:"boolean",default:!0}),i("anchor_top",{processor:d,default:"#top"}),i("anchor_bottom",{processor:d,default:"#bottom"}),i("draggable_modal",{processor:"boolean",default:!1}),i("statusbar",{processor:"boolean",default:!0}),i("elementpath",{processor:"boolean",default:!0}),i("branding",{processor:"boolean",default:!0}),i("promotion",{processor:"boolean",default:!0}),i("resize",{processor:h=>h==="both"||rn(h),default:!xv.deviceType.isTouch()}),i("sidebar_show",{processor:"string"}),i("help_accessibility",{processor:"boolean",default:n.hasPlugin("help")}),i("default_font_stack",{processor:"string[]",default:[]})},BP=Ao("readonly"),J4=Ao("disabled"),JO=Ao("height"),QO=Ao("width"),eD=Tv(Ao("min_width")),tD=Tv(Ao("min_height")),Q4=Tv(Ao("max_width")),nD=Tv(Ao("max_height")),PP=Tv(Ao("style_formats")),$P=Ao("style_formats_merge"),oD=Ao("style_formats_autohide"),IP=Ao("content_langs"),LP=Ao("removed_menuitems"),T1=Ao("toolbar_mode"),FP=Ao("toolbar_groups"),sD=Ao("toolbar_location"),eT=Ao("fixed_toolbar_container"),HP=Ao("fixed_toolbar_container_target"),zP=Ao("toolbar_persist"),VP=Ao("toolbar_sticky_offset"),UP=Ao("menubar"),tT=Ao("toolbar"),ZP=Ao("file_picker_callback"),WP=Ao("file_picker_validator_handler"),nT=Ao("font_size_input_default_unit"),rD=Ao("file_picker_types"),aD=Ao("typeahead_urls"),jP=Ao("anchor_top"),cD=Ao("anchor_bottom"),GP=Ao("draggable_modal"),qP=Ao("statusbar"),KP=Ao("elementpath"),iD=Ao("branding"),YP=Ao("resize"),XP=Ao("paste_as_text"),JP=Ao("sidebar_show"),QP=Ao("promotion"),e$=Ao("help_accessibility"),t$=Ao("default_font_stack"),TS=Ao("skin"),kS=n=>n.options.get("skin")===!1,kv=n=>n.options.get("menubar")!==!1,lD=n=>{const s=n.options.get("skin_url");if(kS(n))return s;if(s)return n.documentBaseURI.toAbsolute(s);{const a=n.options.get("skin");return FU.baseURL+"/skins/ui/"+a}},HU=n=>T.from(n.options.get("skin_url")),n$=n=>n.options.get("line_height_formats").split(" "),_v=n=>{const s=tT(n),a=be(s),i=xt(s)&&s.length>0;return!Rh(n)&&(i||a||s===!0)},_S=n=>{const s=Xo(9,i=>n.options.get("toolbar"+(i+1))),a=Co(s,be);return dc(a.length>0,a)},Rh=n=>_S(n).fold(()=>{const s=tT(n);return Yn(s,be)&&s.length>0},yt),oT=n=>sD(n)===Ev.bottom,o$=n=>{if(!n.inline)return T.none();const s=eT(n)??"";if(s.length>0)return wo(Fc(),s);const a=HP(n);return jt(a)?T.some(at.fromDom(a)):T.none()},Av=n=>n.inline&&o$(n).isSome(),uD=n=>o$(n).getOrThunk(()=>vl(nr(at.fromDom(n.getElement())))),dD=n=>n.inline&&!kv(n)&&!_v(n)&&!Rh(n),Ov=n=>(n.options.get("toolbar_sticky")||n.inline)&&!Av(n)&&!dD(n),Mh=n=>!Av(n)&&n.options.get("ui_mode")==="split",s$=n=>{const s=n.options.get("menu");return Ds(s,a=>({...a,items:a.items}))};var zU=Object.freeze({__proto__:null,get ToolbarMode(){return nl},get ToolbarLocation(){return Ev},register:NP,getSkinUrl:lD,getSkinUrlOption:HU,isReadOnly:BP,isDisabled:J4,getSkin:TS,isSkinDisabled:kS,getHeightOption:JO,getWidthOption:QO,getMinWidthOption:eD,getMinHeightOption:tD,getMaxWidthOption:Q4,getMaxHeightOption:nD,getUserStyleFormats:PP,shouldMergeStyleFormats:$P,shouldAutoHideStyleFormats:oD,getLineHeightFormats:n$,getContentLanguages:IP,getRemovedMenuItems:LP,isMenubarEnabled:kv,isMultipleToolbars:Rh,isToolbarEnabled:_v,isToolbarPersist:zP,getMultipleToolbarsOption:_S,getUiContainer:uD,useFixedContainer:Av,isSplitUiMode:Mh,getToolbarMode:T1,isDraggableModal:GP,isDistractionFree:dD,isStickyToolbar:Ov,getStickyToolbarOffset:VP,getToolbarLocation:sD,isToolbarLocationBottom:oT,getToolbarGroups:FP,getMenus:s$,getMenubar:UP,getToolbar:tT,getFilePickerCallback:ZP,getFilePickerTypes:rD,useTypeaheadUrls:aD,getAnchorTop:jP,getAnchorBottom:cD,getFilePickerValidatorHandler:WP,getFontSizeInputDefaultUnit:nT,useStatusBar:qP,useElementPath:KP,promotionEnabled:QP,useBranding:iD,getResize:YP,getPasteAsText:XP,getSidebarShow:JP,useHelpAccessibility:e$,getDefaultFontStack:t$});const VU=["visible","hidden","clip"],r$=n=>pt(n).length>0&&!vo(VU,n),a$=n=>{if(Y(n)){const s=es(n,"overflow-x"),a=es(n,"overflow-y");return r$(s)||r$(a)}else return!1},c$=n=>n.plugins.fullscreen&&n.plugins.fullscreen.isFullscreen(),UU=(n,s)=>{const a=yr(s,a$),i=a.length===0?Ts(s).map(fo).map(d=>yr(d,a$)).getOr([]):a;return To(i).map(d=>({element:d,others:i.slice(1),isFullscreen:()=>c$(n)}))},Gf=(n,s)=>Mh(n)?UU(n,s):T.none(),k1=n=>{const s=[...$e(n.others,js),ta()];return n.isFullscreen()?ta():oy(js(n.element),s)};/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:i$,setPrototypeOf:Ld,isFrozen:ZU,getPrototypeOf:WU,getOwnPropertyDescriptor:mD}=Object;let{freeze:Go,seal:Fu,create:l$}=Object,{apply:fD,construct:gD}=typeof Reflect<"u"&&Reflect;Go||(Go=function(s){return s}),Fu||(Fu=function(s){return s}),fD||(fD=function(s,a,i){return s.apply(a,i)}),gD||(gD=function(s,a){return new s(...a)});const sT=wi(Array.prototype.forEach),jU=wi(Array.prototype.lastIndexOf),u$=wi(Array.prototype.pop),AS=wi(Array.prototype.push),GU=wi(Array.prototype.splice),rT=wi(String.prototype.toLowerCase),hD=wi(String.prototype.toString),d$=wi(String.prototype.match),OS=wi(String.prototype.replace),qU=wi(String.prototype.indexOf),KU=wi(String.prototype.trim),Fd=wi(Object.prototype.hasOwnProperty),Si=wi(RegExp.prototype.test),DS=YU(TypeError);function wi(n){return function(s){s instanceof RegExp&&(s.lastIndex=0);for(var a=arguments.length,i=new Array(a>1?a-1:0),d=1;d<a;d++)i[d-1]=arguments[d];return fD(n,s,i)}}function YU(n){return function(){for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return gD(n,a)}}function qo(n,s){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:rT;Ld&&Ld(n,null);let i=s.length;for(;i--;){let d=s[i];if(typeof d=="string"){const g=a(d);g!==d&&(ZU(s)||(s[i]=g),d=g)}n[d]=!0}return n}function XU(n){for(let s=0;s<n.length;s++)Fd(n,s)||(n[s]=null);return n}function qf(n){const s=l$(null);for(const[a,i]of i$(n))Fd(n,a)&&(Array.isArray(i)?s[a]=XU(i):i&&typeof i=="object"&&i.constructor===Object?s[a]=qf(i):s[a]=i);return s}function RS(n,s){for(;n!==null;){const i=mD(n,s);if(i){if(i.get)return wi(i.get);if(typeof i.value=="function")return wi(i.value)}n=WU(n)}function a(){return null}return a}const m$=Go(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),aT=Go(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),pD=Go(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),f$=Go(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),bD=Go(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),g$=Go(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),h$=Go(["#text"]),vD=Go(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),yD=Go(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),p$=Go(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),cT=Go(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),JU=Fu(/\{\{[\w\W]*|[\w\W]*\}\}/gm),QU=Fu(/<%[\w\W]*|[\w\W]*%>/gm),eZ=Fu(/\$\{[\w\W]*/gm),tZ=Fu(/^data-[\-\w.\u00B7-\uFFFF]+$/),nZ=Fu(/^aria-[\-\w]+$/),b$=Fu(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),oZ=Fu(/^(?:\w+script|data):/i),sZ=Fu(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),v$=Fu(/^html$/i),rZ=Fu(/^[a-z][.\w]*(-[.\w]+)+$/i);var CD=Object.freeze({__proto__:null,ARIA_ATTR:nZ,ATTR_WHITESPACE:sZ,CUSTOM_ELEMENT:rZ,DATA_ATTR:tZ,DOCTYPE_NAME:v$,ERB_EXPR:QU,IS_ALLOWED_URI:b$,IS_SCRIPT_OR_DATA:oZ,MUSTACHE_EXPR:JU,TMPLIT_EXPR:eZ});const MS={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},aZ=function(){return typeof window>"u"?null:window},cZ=function(s,a){if(typeof s!="object"||typeof s.createPolicy!="function")return null;let i=null;const d="data-tt-policy-suffix";a&&a.hasAttribute(d)&&(i=a.getAttribute(d));const g="dompurify"+(i?"#"+i:"");try{return s.createPolicy(g,{createHTML(h){return h},createScriptURL(h){return h}})}catch{return console.warn("TrustedTypes policy "+g+" could not be created."),null}},y$=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function C$(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:aZ();const s=Rn=>C$(Rn);if(s.version="3.2.6",s.removed=[],!n||!n.document||n.document.nodeType!==MS.document||!n.Element)return s.isSupported=!1,s;let{document:a}=n;const i=a,d=i.currentScript,{DocumentFragment:g,HTMLTemplateElement:h,Node:C,Element:S,NodeFilter:x,NamedNodeMap:A=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:R,DOMParser:P,trustedTypes:z}=n,Z=S.prototype,K=RS(Z,"cloneNode"),ee=RS(Z,"remove"),G=RS(Z,"nextSibling"),oe=RS(Z,"childNodes"),le=RS(Z,"parentNode");if(typeof h=="function"){const Rn=a.createElement("template");Rn.content&&Rn.content.ownerDocument&&(a=Rn.content.ownerDocument)}let Se,Te="";const{implementation:ct,createNodeIterator:lt,createDocumentFragment:Ne,getElementsByTagName:Fe}=a,{importNode:Ft}=i;let Ot=y$();s.isSupported=typeof i$=="function"&&typeof le=="function"&&ct&&ct.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:En,ERB_EXPR:Ut,TMPLIT_EXPR:gn,DATA_ATTR:Mt,ARIA_ATTR:Pe,IS_SCRIPT_OR_DATA:tt,ATTR_WHITESPACE:Kt,CUSTOM_ELEMENT:bn}=CD;let{IS_ALLOWED_URI:Pt}=CD,hn=null;const yo=qo({},[...m$,...aT,...pD,...bD,...h$]);let Kn=null;const oc=qo({},[...vD,...yD,...p$,...cT]);let as=Object.seal(l$(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Yc=null,jr=null,za=!0,Xc=!0,Yl=!1,Zh=!0,Ym=!1,K1=!0,sg=!1,Tw=!1,RM=!1,Wh=!1,a2=!1,zk=!1,MM=!0,iH=!1;const VX="user-content-";let Vk=!0,kw=!1,Zu={},Y1=null;const lH=qo({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let _w=null;const X1=qo({},["audio","video","img","source","image","track"]);let c2=null;const NM=qo({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),J1="http://www.w3.org/1998/Math/MathML",Va="http://www.w3.org/2000/svg",Wu="http://www.w3.org/1999/xhtml";let Q1=Wu,Uk=!1,BM=null;const UX=qo({},[J1,Va,Wu],hD);let jd=qo({},["mi","mo","mn","ms","mtext"]),PM=qo({},["annotation-xml"]);const ZX=qo({},["title","style","font","a","script"]);let i2=null;const l2=["application/xhtml+xml","text/html"],Zk="text/html";let Ua=null,u2=null;const WX=a.createElement("form"),uH=function(e){return e instanceof RegExp||e instanceof Function},$M=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(u2&&u2===e)){if((!e||typeof e!="object")&&(e={}),e=qf(e),i2=l2.indexOf(e.PARSER_MEDIA_TYPE)===-1?Zk:e.PARSER_MEDIA_TYPE,Ua=i2==="application/xhtml+xml"?hD:rT,hn=Fd(e,"ALLOWED_TAGS")?qo({},e.ALLOWED_TAGS,Ua):yo,Kn=Fd(e,"ALLOWED_ATTR")?qo({},e.ALLOWED_ATTR,Ua):oc,BM=Fd(e,"ALLOWED_NAMESPACES")?qo({},e.ALLOWED_NAMESPACES,hD):UX,c2=Fd(e,"ADD_URI_SAFE_ATTR")?qo(qf(NM),e.ADD_URI_SAFE_ATTR,Ua):NM,_w=Fd(e,"ADD_DATA_URI_TAGS")?qo(qf(X1),e.ADD_DATA_URI_TAGS,Ua):X1,Y1=Fd(e,"FORBID_CONTENTS")?qo({},e.FORBID_CONTENTS,Ua):lH,Yc=Fd(e,"FORBID_TAGS")?qo({},e.FORBID_TAGS,Ua):qf({}),jr=Fd(e,"FORBID_ATTR")?qo({},e.FORBID_ATTR,Ua):qf({}),Zu=Fd(e,"USE_PROFILES")?e.USE_PROFILES:!1,za=e.ALLOW_ARIA_ATTR!==!1,Xc=e.ALLOW_DATA_ATTR!==!1,Yl=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Zh=e.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ym=e.SAFE_FOR_TEMPLATES||!1,K1=e.SAFE_FOR_XML!==!1,sg=e.WHOLE_DOCUMENT||!1,Wh=e.RETURN_DOM||!1,a2=e.RETURN_DOM_FRAGMENT||!1,zk=e.RETURN_TRUSTED_TYPE||!1,RM=e.FORCE_BODY||!1,MM=e.SANITIZE_DOM!==!1,iH=e.SANITIZE_NAMED_PROPS||!1,Vk=e.KEEP_CONTENT!==!1,kw=e.IN_PLACE||!1,Pt=e.ALLOWED_URI_REGEXP||b$,Q1=e.NAMESPACE||Wu,jd=e.MATHML_TEXT_INTEGRATION_POINTS||jd,PM=e.HTML_INTEGRATION_POINTS||PM,as=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&uH(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(as.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&uH(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(as.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(as.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ym&&(Xc=!1),a2&&(Wh=!0),Zu&&(hn=qo({},h$),Kn=[],Zu.html===!0&&(qo(hn,m$),qo(Kn,vD)),Zu.svg===!0&&(qo(hn,aT),qo(Kn,yD),qo(Kn,cT)),Zu.svgFilters===!0&&(qo(hn,pD),qo(Kn,yD),qo(Kn,cT)),Zu.mathMl===!0&&(qo(hn,bD),qo(Kn,p$),qo(Kn,cT))),e.ADD_TAGS&&(hn===yo&&(hn=qf(hn)),qo(hn,e.ADD_TAGS,Ua)),e.ADD_ATTR&&(Kn===oc&&(Kn=qf(Kn)),qo(Kn,e.ADD_ATTR,Ua)),e.ADD_URI_SAFE_ATTR&&qo(c2,e.ADD_URI_SAFE_ATTR,Ua),e.FORBID_CONTENTS&&(Y1===lH&&(Y1=qf(Y1)),qo(Y1,e.FORBID_CONTENTS,Ua)),Vk&&(hn["#text"]=!0),sg&&qo(hn,["html","head","body"]),hn.table&&(qo(hn,["tbody"]),delete Yc.tbody),e.TRUSTED_TYPES_POLICY){if(typeof e.TRUSTED_TYPES_POLICY.createHTML!="function")throw DS('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof e.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw DS('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Se=e.TRUSTED_TYPES_POLICY,Te=Se.createHTML("")}else Se===void 0&&(Se=cZ(z,d)),Se!==null&&typeof Te=="string"&&(Te=Se.createHTML(""));Go&&Go(e),u2=e}},e0=qo({},[...aT,...pD,...f$]),jX=qo({},[...bD,...g$]),GX=function(e){let t=le(e);(!t||!t.tagName)&&(t={namespaceURI:Q1,tagName:"template"});const o=rT(e.tagName),r=rT(t.tagName);return BM[e.namespaceURI]?e.namespaceURI===Va?t.namespaceURI===Wu?o==="svg":t.namespaceURI===J1?o==="svg"&&(r==="annotation-xml"||jd[r]):!!e0[o]:e.namespaceURI===J1?t.namespaceURI===Wu?o==="math":t.namespaceURI===Va?o==="math"&&PM[r]:!!jX[o]:e.namespaceURI===Wu?t.namespaceURI===Va&&!PM[r]||t.namespaceURI===J1&&!jd[r]?!1:!jX[o]&&(ZX[o]||!e0[o]):!!(i2==="application/xhtml+xml"&&BM[e.namespaceURI]):!1},Xm=function(e){AS(s.removed,{element:e});try{le(e).removeChild(e)}catch{ee(e)}},Aw=function(e,t){try{AS(s.removed,{attribute:t.getAttributeNode(e),from:t})}catch{AS(s.removed,{attribute:null,from:t})}if(t.removeAttribute(e),e==="is")if(Wh||a2)try{Xm(t)}catch{}else try{t.setAttribute(e,"")}catch{}},dH=function(e){let t=null,o=null;if(RM)e="<remove></remove>"+e;else{const u=d$(e,/^[\r\n\t ]+/);o=u&&u[0]}i2==="application/xhtml+xml"&&Q1===Wu&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const r=Se?Se.createHTML(e):e;if(Q1===Wu)try{t=new P().parseFromString(r,i2)}catch{}if(!t||!t.documentElement){t=ct.createDocument(Q1,"template",null);try{t.documentElement.innerHTML=Uk?Te:r}catch{}}const c=t.body||t.documentElement;return e&&o&&c.insertBefore(a.createTextNode(o),c.childNodes[0]||null),Q1===Wu?Fe.call(t,sg?"html":"body")[0]:sg?t.documentElement:c},mH=function(e){return lt.call(e.ownerDocument||e,e,x.SHOW_ELEMENT|x.SHOW_COMMENT|x.SHOW_TEXT|x.SHOW_PROCESSING_INSTRUCTION|x.SHOW_CDATA_SECTION,null)},t0=function(e){return e instanceof R&&(typeof e.nodeName!="string"||typeof e.textContent!="string"||typeof e.removeChild!="function"||!(e.attributes instanceof A)||typeof e.removeAttribute!="function"||typeof e.setAttribute!="function"||typeof e.namespaceURI!="string"||typeof e.insertBefore!="function"||typeof e.hasChildNodes!="function")},fH=function(e){return typeof C=="function"&&e instanceof C};function rg(Rn,e,t){sT(Rn,o=>{o.call(s,e,t,u2)})}const IM=function(e){let t=null;if(rg(Ot.beforeSanitizeElements,e,null),t0(e))return Xm(e),!0;const o=Ua(e.nodeName);if(rg(Ot.uponSanitizeElement,e,{tagName:o,allowedTags:hn}),K1&&e.hasChildNodes()&&!fH(e.firstElementChild)&&Si(/<[/\w!]/g,e.innerHTML)&&Si(/<[/\w!]/g,e.textContent)||e.nodeType===MS.progressingInstruction||K1&&e.nodeType===MS.comment&&Si(/<[/\w]/g,e.data))return Xm(e),!0;if(!hn[o]||Yc[o]){if(!Yc[o]&&qX(o)&&(as.tagNameCheck instanceof RegExp&&Si(as.tagNameCheck,o)||as.tagNameCheck instanceof Function&&as.tagNameCheck(o)))return!1;if(Vk&&!Y1[o]){const r=le(e)||e.parentNode,c=oe(e)||e.childNodes;if(c&&r){const u=c.length;for(let f=u-1;f>=0;--f){const b=K(c[f],!0);b.__removalCount=(e.__removalCount||0)+1,r.insertBefore(b,G(e))}}}return Xm(e),!0}return e instanceof S&&!GX(e)||(o==="noscript"||o==="noembed"||o==="noframes")&&Si(/<\/no(script|embed|frames)/i,e.innerHTML)?(Xm(e),!0):(Ym&&e.nodeType===MS.text&&(t=e.textContent,sT([En,Ut,gn],r=>{t=OS(t,r," ")}),e.textContent!==t&&(AS(s.removed,{element:e.cloneNode()}),e.textContent=t)),rg(Ot.afterSanitizeElements,e,null),!1)},gH=function(e,t,o){if(MM&&(t==="id"||t==="name")&&(o in a||o in WX))return!1;if(!(Xc&&!jr[t]&&Si(Mt,t))){if(!(za&&Si(Pe,t))){if(!Kn[t]||jr[t]){if(!(qX(e)&&(as.tagNameCheck instanceof RegExp&&Si(as.tagNameCheck,e)||as.tagNameCheck instanceof Function&&as.tagNameCheck(e))&&(as.attributeNameCheck instanceof RegExp&&Si(as.attributeNameCheck,t)||as.attributeNameCheck instanceof Function&&as.attributeNameCheck(t))||t==="is"&&as.allowCustomizedBuiltInElements&&(as.tagNameCheck instanceof RegExp&&Si(as.tagNameCheck,o)||as.tagNameCheck instanceof Function&&as.tagNameCheck(o))))return!1}else if(!c2[t]){if(!Si(Pt,OS(o,Kt,""))){if(!((t==="src"||t==="xlink:href"||t==="href")&&e!=="script"&&qU(o,"data:")===0&&_w[e])){if(!(Yl&&!Si(tt,OS(o,Kt,"")))){if(o)return!1}}}}}}return!0},qX=function(e){return e!=="annotation-xml"&&d$(e,bn)},Xl=function(e){rg(Ot.beforeSanitizeAttributes,e,null);const{attributes:t}=e;if(!t||t0(e))return;const o={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Kn,forceKeepAttr:void 0};let r=t.length;for(;r--;){const c=t[r],{name:u,namespaceURI:f,value:b}=c,v=Ua(u),w=b;let _=u==="value"?w:KU(w);if(o.attrName=v,o.attrValue=_,o.keepAttr=!0,o.forceKeepAttr=void 0,rg(Ot.uponSanitizeAttribute,e,o),_=o.attrValue,iH&&(v==="id"||v==="name")&&(Aw(u,e),_=VX+_),K1&&Si(/((--!?|])>)|<\/(style|title)/i,_)){Aw(u,e);continue}if(o.forceKeepAttr)continue;if(!o.keepAttr){Aw(u,e);continue}if(!Zh&&Si(/\/>/i,_)){Aw(u,e);continue}Ym&&sT([En,Ut,gn],M=>{_=OS(_,M," ")});const D=Ua(e.nodeName);if(!gH(D,v,_)){Aw(u,e);continue}if(Se&&typeof z=="object"&&typeof z.getAttributeType=="function"&&!f)switch(z.getAttributeType(D,v)){case"TrustedHTML":{_=Se.createHTML(_);break}case"TrustedScriptURL":{_=Se.createScriptURL(_);break}}if(_!==w)try{f?e.setAttributeNS(f,u,_):e.setAttribute(u,_),t0(e)?Xm(e):u$(s.removed)}catch{Aw(u,e)}}rg(Ot.afterSanitizeAttributes,e,null)},Wk=function Rn(e){let t=null;const o=mH(e);for(rg(Ot.beforeSanitizeShadowDOM,e,null);t=o.nextNode();)rg(Ot.uponSanitizeShadowNode,t,null),IM(t),Xl(t),t.content instanceof g&&Rn(t.content);rg(Ot.afterSanitizeShadowDOM,e,null)};return s.sanitize=function(Rn){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=null,o=null,r=null,c=null;if(Uk=!Rn,Uk&&(Rn="<!-->"),typeof Rn!="string"&&!fH(Rn))if(typeof Rn.toString=="function"){if(Rn=Rn.toString(),typeof Rn!="string")throw DS("dirty is not a string, aborting")}else throw DS("toString is not a function");if(!s.isSupported)return Rn;if(Tw||$M(e),s.removed=[],typeof Rn=="string"&&(kw=!1),kw){if(Rn.nodeName){const b=Ua(Rn.nodeName);if(!hn[b]||Yc[b])throw DS("root node is forbidden and cannot be sanitized in-place")}}else if(Rn instanceof C)t=dH("<!---->"),o=t.ownerDocument.importNode(Rn,!0),o.nodeType===MS.element&&o.nodeName==="BODY"||o.nodeName==="HTML"?t=o:t.appendChild(o);else{if(!Wh&&!Ym&&!sg&&Rn.indexOf("<")===-1)return Se&&zk?Se.createHTML(Rn):Rn;if(t=dH(Rn),!t)return Wh?null:zk?Te:""}t&&RM&&Xm(t.firstChild);const u=mH(kw?Rn:t);for(;r=u.nextNode();)IM(r),Xl(r),r.content instanceof g&&Wk(r.content);if(kw)return Rn;if(Wh){if(a2)for(c=Ne.call(t.ownerDocument);t.firstChild;)c.appendChild(t.firstChild);else c=t;return(Kn.shadowroot||Kn.shadowrootmode)&&(c=Ft.call(i,c,!0)),c}let f=sg?t.outerHTML:t.innerHTML;return sg&&hn["!doctype"]&&t.ownerDocument&&t.ownerDocument.doctype&&t.ownerDocument.doctype.name&&Si(v$,t.ownerDocument.doctype.name)&&(f="<!DOCTYPE "+t.ownerDocument.doctype.name+`>
`+f),Ym&&sT([En,Ut,gn],b=>{f=OS(f,b," ")}),Se&&zk?Se.createHTML(f):f},s.setConfig=function(){let Rn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};$M(Rn),Tw=!0},s.clearConfig=function(){u2=null,Tw=!1},s.isValidAttribute=function(Rn,e,t){u2||$M({});const o=Ua(Rn),r=Ua(e);return gH(o,r,t)},s.addHook=function(Rn,e){typeof e=="function"&&AS(Ot[Rn],e)},s.removeHook=function(Rn,e){if(e!==void 0){const t=jU(Ot[Rn],e);return t===-1?void 0:GU(Ot[Rn],t,1)[0]}return u$(Ot[Rn])},s.removeHooks=function(Rn){Ot[Rn]=[]},s.removeAllHooks=function(){Ot=y$()},s}var SD=C$();const NS=n=>SD().sanitize(n);var Ha=tinymce.util.Tools.resolve("tinymce.util.I18n");const iT={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-disc":!0,"list-bull-default":!0,"list-bull-square":!0},S$="temporary-placeholder",wD=n=>()=>It(n,S$).getOr("!not found!"),xD=(n,s)=>{const a=n.toLowerCase();if(Ha.isRtl()){const i=hg(a,"-rtl");return So(s,i)?i:a}else return a},w$=(n,s)=>It(s,xD(n,s)),iZ=(n,s)=>{const a=s();return w$(n,a).getOrThunk(wD(a))},lT=(n,s,a)=>{const i=s();return w$(n,i).or(a).getOrThunk(wD(i))},Dv=n=>Ha.isRtl()?So(iT,n):!1,ED=()=>cn("add-focusable",[Wo(n=>{am(n.element,"svg").each(s=>qt(s,"focusable","false"))})]),TD=(n,s,a,i)=>{const d=Dv(s)?["tox-icon--flip"]:[],g=It(a,xD(s,a)).or(i).getOrThunk(wD(a));return{dom:{tag:n.tag,attributes:n.attributes??{},classes:n.classes.concat(d),innerHtml:g},behaviours:Xe([...n.behaviours??[],ED()]),eventOrder:n.eventOrder??{}}},ol=(n,s,a,i=T.none())=>TD(s,n,a(),i),lZ=(n,s,a)=>{const i=a(),d=Ce(n,g=>So(i,xD(g,i)));return TD(s,d.getOr(S$),i,T.none())},uZ={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},kD=Ji({name:"Notification",factory:n=>{const s=Ct("notification-text"),a=to({dom:Nd(`<p id=${s}>${NS(n.backstageProvider.translate(n.text))}</p>`),behaviours:Xe([mn.config({})])}),i=Z=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${Z}%`}}}),d=Z=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${Z}%`}}),g=to({dom:{tag:"div",classes:n.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[i(0)]},d(0)],behaviours:Xe([mn.config({})])}),S={updateProgress:(Z,K)=>{Z.getSystem().isConnected()&&g.getOpt(Z).each(ee=>{mn.set(ee,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[i(K)]},d(K)])})},updateText:(Z,K)=>{if(Z.getSystem().isConnected()){const ee=a.get(Z);mn.set(ee,[Yo(K)])}}},x=Ue([n.icon.toArray(),[n.level],T.from(uZ[n.level]).toArray()]),A=to(wr.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":n.backstageProvider.translate("Close")}},components:[ol("close",{tag:"span",classes:["tox-icon"]},n.iconProvider)],buttonBehaviours:Xe([Vo.config({}),jo.config({...n.backstageProvider.tooltips.getConfig({tooltipText:n.backstageProvider.translate("Close")})})]),action:Z=>{n.onAction(Z)}})),R=lZ(x,{tag:"div",classes:["tox-notification__icon"]},n.iconProvider),P={dom:{tag:"div",classes:["tox-notification__body"]},components:[a.asSpec()],behaviours:Xe([mn.config({})])},z=[R,P];return{uid:n.uid,dom:{tag:"div",attributes:{role:"alert","aria-labelledby":s},classes:["tox-notification","tox-notification--in",`tox-notification--${n.level}`]},behaviours:Xe([Vo.config({}),ln.config({}),Lt.config({mode:"special",onEscape:Z=>(n.onAction(Z),T.some(!0))})]),components:z.concat(n.progress?[g.asSpec()]:[]).concat([A.asSpec()]),apis:S}},configFields:[Ra("level","info",["success","error","warning","warn","info"]),He("progress"),ho("icon"),He("onAction"),He("text"),He("iconProvider"),He("backstageProvider")],apis:{updateProgress:(n,s,a)=>{n.updateProgress(s,a)},updateText:(n,s,a)=>{n.updateText(s,a)}}});var dZ=(n,s,a,i)=>{const d=s.backstage.shared,g=()=>at.fromDom(n.queryCommandValue("ToggleView")===""?n.getContentAreaContainer():n.getContainer()),h=()=>{const R=js(g());return T.some(R)},C=R=>{h().each(P=>{gt(R,z=>{Nn(z.element,"width"),va(z.element)>P.width&&on(z.element,"width",P.width+"px")})})};return{open:(R,P,z)=>{const Z=()=>{const le=lt=>{mn.remove(lt,ee),G()},Se=(lt,Ne)=>{bl(lt.element).length===0?Te(lt,Ne):ct(lt,Ne)},Te=(lt,Ne)=>{fs.hide(lt),i.clear(),Ne&&n.focus()},ct=(lt,Ne)=>{Ne&&Lt.focusIn(lt)};i.on(lt=>{P();const Ne=z();le(lt),Se(lt,Ne)})},K=()=>!Ov(n)||!d.header.isPositionedAtTop(),ee=m(kD.sketch({text:R.text,level:vo(["success","error","warning","warn","info"],R.type)?R.type:void 0,progress:R.progressBar===!0,icon:R.icon,onAction:Z,iconProvider:d.providers.icons,backstageProvider:d.providers}));if(i.isSet()){const le=p(ee);i.on(Se=>{mn.append(Se,le),fs.reposition(Se),ee.hasConfigured(rs)&&rs.refresh(Se),C(Se.components())})}else{const le=m(fs.sketch({dom:{tag:"div",classes:["tox-notifications-container"],attributes:{"aria-label":"Notifications",role:"region"}},lazySink:d.getSink,fireDismissalEventInstead:{},...d.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Xe([Lt.config({mode:"cyclic",selector:".tox-notification, .tox-notification a, .tox-notification button"}),mn.config({}),...K()?[rs.config({contextual:{lazyContext:()=>T.some(js(g())),fadeInClass:"tox-notification-container-dock-fadein",fadeOutClass:"tox-notification-container-dock-fadeout",transitionClass:"tox-notification-container-dock-transition"},modes:["top"],lazyViewport:lt=>Gf(n,lt.element).map(Fe=>({bounds:k1(Fe),optScrollEnv:T.some({currentScrollTop:Fe.element.dom.scrollTop,scrollElmTop:pc(Fe.element).top})})).getOrThunk(()=>({bounds:ta(),optScrollEnv:T.none()}))})]:[]])})),Se=p(ee),Te={maxHeightFunction:Af()},ct={...d.anchors.banner(),overrides:Te};i.set(le),a.add(le),fs.showWithinBounds(le,Se,{anchor:ct},h)}dn(R.timeout)&&R.timeout>0&&X4.setEditorTimeout(n,()=>{Z()},R.timeout);const G=()=>{i.on(le=>{fs.reposition(le),le.hasConfigured(rs)&&rs.refresh(le),C(le.components())})};return{close:Z,reposition:G,text:le=>{kD.updateText(ee,le)},settings:R,getEl:()=>ee.element.dom,progressBar:{value:le=>{kD.updateProgress(ee,le)}}}},close:R=>{R.close()},getArgs:R=>R.settings}};const mZ={setup:(n,s)=>{const a=(d,g)=>{Ht(d,Sr(),{raw:g})},i=()=>n.getMenu().bind(eo.getHighlighted);s.on("keydown",d=>{const g=d.which;n.isActive()&&(n.isMenuOpen()?g===13?(i().each(ah),d.preventDefault()):g===40?(i().fold(()=>{n.getMenu().each(eo.highlightFirst)},h=>{a(h,d)}),d.preventDefault(),d.stopImmediatePropagation()):(g===37||g===38||g===39)&&i().each(h=>{a(h,d),d.preventDefault(),d.stopImmediatePropagation()}):(g===13||g===38||g===40)&&n.cancelIfNecessary())}),s.on("NodeChange",()=>{n.isActive()&&!n.isProcessingAction()&&!s.queryCommandState("mceAutoCompleterInRange")&&n.cancelIfNecessary()})}};var _D;(function(n){n[n.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",n[n.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(_D||(_D={}));var Hu=_D;const AD="tox-menu-nav__js",BS="tox-collection__item",Nh="tox-swatch",_1={normal:AD,color:Nh},OD="tox-collection__item--enabled",x$="tox-collection__group-heading",DD="tox-collection__item-icon",uT="tox-collection__item-image",fZ="tox-collection__item-image-selector",Kf="tox-collection__item-label",A1="tox-collection__item-accessory",E$="tox-collection__item-caret",gZ="tox-collection__item-checkmark",O1="tox-collection__item--active",T$="tox-collection__item-container",hZ="tox-collection__item-container--column",k$="tox-collection__item-container--row",pZ="tox-collection__item-container--align-right",bZ="tox-collection__item-container--align-left",dT="tox-collection__item-container--valign-top",_$="tox-collection__item-container--valign-middle",vZ="tox-collection__item-container--valign-bottom",RD=n=>It(_1,n).getOr(AD),yZ=n=>n==="color"?"tox-swatches":"tox-menu",MD=n=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:yZ(n),tieredMenu:"tox-tiered-menu"}),zm=n=>{const s=MD(n);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:RD(n)}},XJ=(n,s,a)=>{const i=MD(a);return{tag:"div",classes:Ue([[i.menu,`tox-menu-${s}-column`],n?[i.hasIcons]:[]])}},ND=[Wf.parts.items({})],PS=(n,s,a)=>{const i=MD(a);return{dom:{tag:"div",classes:Ue([[i.tieredMenu]])},markers:zm(a)}},A$=Ct("refetch-trigger-event"),O$=Ct("redirect-menu-item-interaction"),D$="tox-menu__searcher",$S=n=>wo(n.element,`.${D$}`).bind(s=>n.getSystem().getByDom(s).toOptional()),R$=$S,CZ=(n,s)=>{St.setValue(n,s.fetchPattern),n.element.dom.selectionStart=s.selectionStart,n.element.dom.selectionEnd=s.selectionEnd},BD=n=>{const s=St.getValue(n),a=n.element.dom.selectionStart,i=n.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:a,selectionEnd:i}},M$=(n,s)=>{Pr(s.element,"id").each(a=>qt(n.element,"aria-activedescendant",a))},SZ=n=>{const s=(d,g)=>(g.cut(),T.none()),a=(d,g)=>{const h={interactionEvent:g.event,eventType:g.event.raw.type};return Ht(d,O$,h),T.some(!0)},i="searcher-events";return{dom:{tag:"div",classes:[BS]},components:[Hm.sketch({inputClasses:[D$,"tox-textfield"],inputAttributes:{...n.placeholder.map(d=>({placeholder:n.i18n(d)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:Xe([cn(i,[Me(_l(),d=>{On(d,A$)}),Me(Sr(),(d,g)=>{g.event.raw.key==="Escape"&&g.stop()})]),Lt.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:a,onEscape:a,onUp:a,onDown:a})]),eventOrder:{keydown:[i,Lt.name()]}})]}},mT="tox-collection--results__js",IS=n=>n.dom?{...n,dom:{...n.dom,attributes:{...n.dom.attributes??{},id:Ct("aria-item-search-result-id"),"aria-selected":"false"}}}:n,PD="Use arrow keys to navigate.",$D=(n,s)=>a=>{const i=er(a,s);return $e(i,d=>({dom:n,components:d}))},ID=n=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"],attributes:{"aria-label":Ha.translate(PD)}},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Wf.parts.items({preprocess:n!=="auto"?$D({tag:"div",classes:["tox-swatches__row"]},n):Et})]}]}),wZ=n=>({dom:{tag:"div",classes:["tox-menu","tox-image-selector-menu"]},components:[{dom:{tag:"div",classes:["tox-image-selector"]},components:[Wf.parts.items({preprocess:n!=="auto"?$D({tag:"div",classes:["tox-image-selector__row"]},n):Et})]}]}),LD=n=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Wf.parts.items({preprocess:$D({tag:"div",classes:["tox-collection__group"]},n)})]}),N$=(n,s)=>{const a=[];let i=[];return gt(n,(d,g)=>{s(d,g)?(i.length>0&&a.push(i),i=[],(So(d.dom,"innerHtml")||d.components&&d.components.length>0)&&i.push(d)):i.push(d)}),i.length>0&&a.push(i),$e(a,d=>({dom:{tag:"div",classes:["tox-collection__group"]},components:d}))},FD=(n,s,a)=>Wf.parts.items({preprocess:i=>{const d=$e(i,a);return n!=="auto"&&n>1?$D({tag:"div",classes:["tox-collection__group"]},n)(d):N$(d,(g,h)=>s[h].type==="separator")}}),B$=n=>Qs(n,s=>s.type==="widget"),HD=(n,s,a=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(n===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{...B$(s)?{"aria-label":Ha.translate(PD)}:{}}},components:[FD(n,s,Et)]}),P$=(n,s,a=!0)=>{const i=Ct("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",mT].concat(n===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:i}},components:[FD(n,s,IS)]}},Yf=(n,s,a)=>{const i=Ct("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(n===1?["tox-collection--list"]:["tox-collection--grid"])},components:[SZ({i18n:Ha.translate,placeholder:a.placeholder}),{dom:{tag:"div",classes:[...n===1?["tox-collection--list"]:["tox-collection--grid"],mT],attributes:{id:i}},components:[FD(n,s,IS)]}]}},D1=(n,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Wf.parts.items({preprocess:a=>N$(a,(i,d)=>n[d].type==="separator")})]}),LS=n=>Qs(n,s=>"icon"in s&&s.icon!==void 0),Hd=n=>(console.error(zg(n)),console.log(n),T.none()),$$=(n,s,a,i,d)=>{const g=D1(a);return{value:n,dom:g.dom,components:g.components,items:a}},zD=(n,s,a,i,d)=>{const g=()=>d.menuType!=="searchable"?HD(i,a):d.searchMode.searchMode==="search-with-field"?Yf(i,a,d.searchMode):P$(i,a);if(d.menuType==="color"){const h=ID(i);return{value:n,dom:h.dom,components:h.components,items:a}}else if(d.menuType==="imageselector"&&i!=="auto"){const h=wZ(i);return{value:n,dom:h.dom,components:h.components,items:a}}else if(d.menuType==="normal"&&i==="auto"){const h=HD(i,a);return{value:n,dom:h.dom,components:h.components,items:a}}else if(d.menuType==="normal"||d.menuType==="searchable"){const h=g();return{value:n,dom:h.dom,components:h.components,items:a}}else if(d.menuType==="listpreview"&&i!=="auto"){const h=LD(i);return{value:n,dom:h.dom,components:h.components,items:a}}else return{value:n,dom:XJ(s,i,d.menuType),components:ND,items:a}},Os=ps("type"),VD=ps("name"),fT=ps("label"),Xf=ps("text"),I$=ps("title"),UD=ps("icon"),xZ=ps("url"),Rv=ps("value"),EZ=Cc("fetch"),TZ=Cc("getSubmenuItems"),Bh=Cc("onAction"),kZ=Cc("onItemAction"),R1=Ho("onSetup",()=>U),_Z=bs("name"),Jf=bs("text"),AZ=bs("role"),Ul=bs("icon"),M1=bs("tooltip"),L$=bs("chevronTooltip"),FS=bs("label"),ZD=bs("shortcut"),OZ=Vi("select"),Mv=dr("active",!1),DZ=dr("borderless",!1),Zl=dr("enabled",!0),HS=dr("primary",!1),F$=n=>pe("columns",n),WD=pe("meta",{}),jD=Ho("onAction",U),N1=n=>ms("type",n),GD=n=>Cr("name","name",bp(()=>Ct(`${n}-name`)),ur),H$=n=>Cr("value","value",bp(()=>Ct(`${n}-value`)),mi()),Nv=[Os,Xf,zi("level",["info","warn","error","success"]),UD,pe("url","")],RZ=Vt(Nv),MZ=n=>[Os,n],NZ=[Os,Xf,Zl,GD("button"),Ul,DZ,gy("buttonType",["primary","secondary","toolbar"]),HS,ms("context","mode:design")],gT=Vt(NZ),nc=[Os,VD],Wl=nc.concat([FS]),z$=nc.concat([fT,Zl,ms("context","mode:design")]),BZ=Vt(z$),PZ=Tn,$Z=Wl.concat([F$("auto"),ms("context","mode:design")]),IZ=Vt($Z),V$=Hg([Rv,Xf,UD]),U$=Wl.concat([ms("storageKey","default"),ms("context","mode:design")]),LZ=Vt(U$),FZ=ur,zZ=Vt(Wl),Z$=ur,W$=nc.concat([ms("tag","textarea"),ps("scriptId"),ps("scriptUrl"),Vi("onFocus"),mx("settings",void 0)]),j$=nc.concat([ms("tag","textarea"),Cc("init")]),VZ=hu(n=>ls("customeditor.old",yc(j$),n).orThunk(()=>ls("customeditor.new",yc(W$),n))),UZ=ur,Ph=[Zl,Jf,AZ,ZD,H$("menuitem"),WD,ms("context","mode:design")],ZZ=Vt([Os,VD].concat(Ph)),WZ=Tn,Bv=[GD("button"),Ul,Ra("align","end",["start","end"]),HS,Zl,gy("buttonType",["primary","secondary"]),ms("context","mode:design")],zd=[...Bv,Xf],hT=[zi("type",["submit","cancel","custom"]),...zd],jl=[zi("type",["menu"]),Jf,M1,Ul,qa("items",ZZ),...Bv],jZ=[...Bv,zi("type",["togglebutton"]),M1,Ul,Jf,dr("active",!1)],pT=Oa("type",{submit:hT,cancel:hT,custom:hT,menu:jl,togglebutton:jZ}),GZ=Wl.concat([ms("context","mode:design"),bs("dropAreaLabel"),bs("buttonLabel"),bs("allowedFileTypes"),Z0("allowedFileExtensions",ur)]),B1=Vt(GZ),qZ=lx(),qD=n=>[Os,wp("columns"),n],KD=[Os,ps("html"),Ra("presets","presentation",["presentation","document"]),Ho("onInit",U),dr("stretched",!1)],KZ=Vt(KD),YZ=Wl.concat([dr("border",!1),dr("sandboxed",!0),dr("streamContent",!1),dr("transparent",!0)]),P1=Vt(YZ),G$=ur,q$=Vt(nc.concat([bs("height")])),XZ=Vt([ps("url"),Vg("zoom"),Vg("cachedWidth"),Vg("cachedHeight")]),YD=Wl.concat([bs("inputMode"),bs("placeholder"),dr("maximized",!1),Zl,ms("context","mode:design")]),K$=Vt(YD),XD=ur,Y$=n=>[Os,fT,n,Ra("align","start",["start","center","end"]),bs("for")],X$=[Xf,Rv],zS=[Xf,qa("items",gf("items",()=>J$))],J$=Fg([Vt(X$),Vt(zS)]),JZ=Wl.concat([qa("items",J$),Zl,ms("context","mode:design")]),QZ=Vt(JZ),eW=ur,JD=Wl.concat([dx("items",[Xf,Rv]),xp("size",1),Zl,ms("context","mode:design")]),tW=Vt(JD),QD=ur,nW=Wl.concat([dr("constrain",!0),Zl,ms("context","mode:design")]),VS=Vt(nW),Q$=Vt([ps("width"),ps("height")]),e8=nc.concat([fT,xp("min",0),xp("max",0)]),oW=Vt(e8),sW=cy,rW=[Os,qa("header",ur),qa("cells",As(ur))],aW=Vt(rW),bT=Wl.concat([bs("placeholder"),dr("maximized",!1),Zl,ms("context","mode:design"),hy("spellcheck")]),t8=Vt(bT),cW=ur,eR=[ms("buttonType","default"),bs("text"),bs("tooltip"),bs("icon"),Vc("search",!1,Fg([Tn,Vt([bs("placeholder")])],n=>rn(n)?n?T.some({placeholder:T.none()}):T.none():T.some(n))),Cc("fetch"),Ho("onSetup",()=>U),ms("context","mode:design")],$h=Vt([Os,...eR]),tR=n=>ls("menubutton",$h,n),Pv=[zi("type",["directory","leaf"]),I$,ps("id"),kl("menu",$h),bs("customStateIcon"),bs("customStateIconTooltip")],nR=Vt(Pv),iW=Pv.concat([qa("children",gf("children",()=>ff("type",{directory:n8,leaf:nR})))]),n8=Vt(iW),$1=ff("type",{directory:n8,leaf:nR}),o8=[Os,qa("items",$1),Vi("onLeafAction"),Vi("onToggleExpand"),fm("defaultExpandedIds",[],ur),bs("defaultSelectedId")],lW=Vt(o8),s8=Wl.concat([Ra("filetype","file",["image","media","file"]),Zl,bs("picker_text"),ms("context","mode:design")]),uW=Vt(s8),dW=Vt([Rv,WD]),oR=n=>Cr("items","items",fi(),As(hu(s=>ls(`Checking item of ${n}`,vT,s).fold(a=>Xt.error(zg(a)),a=>Xt.value(a))))),vT=Sp(()=>ff("type",{alertbanner:RZ,bar:Vt(MZ(oR("bar"))),button:gT,checkbox:BZ,colorinput:LZ,colorpicker:zZ,dropzone:B1,grid:Vt(qD(oR("grid"))),iframe:P1,input:K$,listbox:QZ,selectbox:tW,sizeinput:VS,slider:oW,textarea:t8,urlinput:uW,customeditor:VZ,htmlpanel:KZ,imagepreview:q$,collection:IZ,label:Vt(Y$(oR("label"))),table:aW,tree:lW,panel:r8})),mW=[Os,pe("classes",[]),qa("items",vT)],r8=Vt(mW),fW=[GD("tab"),I$,qa("items",vT)],gW=[Os,dx("tabs",fW)],hW=Vt(gW),pW=zd,bW=pT,vW=Vt([ps("title"),Ga("body",ff("type",{panel:r8,tabpanel:hW})),ms("size","normal"),fm("buttons",[],bW),pe("initialData",{}),Ho("onAction",U),Ho("onChange",U),Ho("onSubmit",U),Ho("onClose",U),Ho("onCancel",U),Ho("onTabChange",U)]),a8=n=>ls("dialog",vW,n),yW=Vt([zi("type",["cancel","custom"]),...pW]),CW=Vt([ps("title"),ps("url"),Vg("height"),Vg("width"),Z0("buttons",yW),Ho("onAction",U),Ho("onCancel",U),Ho("onClose",U),Ho("onMessage",U)]),SW=n=>ls("dialog",CW,n),sR=n=>we(n)?[n].concat(ne(_i(n),sR)):xt(n)?ne(n,sR):[],wW=n=>be(n.type)&&be(n.name),xW={checkbox:PZ,colorinput:FZ,colorpicker:Z$,dropzone:qZ,input:XD,iframe:G$,imagepreview:XZ,selectbox:QD,sizeinput:Q$,slider:sW,listbox:eW,size:Q$,textarea:cW,urlinput:dW,customeditor:UZ,collection:V$,togglemenuitem:WZ},c8=n=>T.from(xW[n.type]),i8=n=>Co(sR(n),wW),EW=n=>{const s=i8(n),a=ne(s,i=>c8(i).fold(()=>[],d=>[Ga(i.name,d)]));return Vt(a)},US=n=>{const s=hi(a8(n)),a=EW(n),i=n.initialData??{};return{internalDialog:s,dataValidator:a,initialData:i}},I1={open:(n,s)=>{const a=US(s);return n(a.internalDialog,a.initialData,a.dataValidator)},openUrl:(n,s)=>{const a=hi(SW(s));return n(a)},redial:n=>US(n)},l8=Vt([Os,Jf]),TW=n=>ls("separatormenuitem",l8,n),kW=Vt([N1("autocompleteitem"),Mv,Zl,WD,Rv,Jf,Ul]),_W=n=>ls("Autocompleter.Separator",l8,n),AW=n=>ls("Autocompleter.Item",kW,n),$v=[Zl,M1,Ul,Jf,R1,ms("context","mode:design")],OW=Vt([Os,Bh,ZD].concat($v)),Vm=n=>ls("toolbarbutton",OW,n),rR=[Mv].concat($v),DW=Vt(rR.concat([Os,Bh,ZD])),aR=n=>ls("ToggleButton",DW,n),yT=[Ho("predicate",Cn),Ra("scope","node",["node","editor"]),Ra("position","selection",["node","selection","line"])],RW=$v.concat([N1("contextformbutton"),ms("align","end"),HS,Bh,Da("original",Et)]),MW=rR.concat([N1("contextformbutton"),ms("align","end"),HS,Bh,Da("original",Et)]),NW=$v.concat([N1("contextformbutton")]),cR=rR.concat([N1("contextformtogglebutton")]),u8=Oa("type",{contextformbutton:RW,contextformtogglebutton:MW}),ZS=[FS,qa("commands",u8),kl("launch",Oa("type",{contextformbutton:NW,contextformtogglebutton:cR})),Ho("onInput",U),Ho("onSetup",U)],CT=[...yT,...ZS,zi("type",["contextform"]),Ho("initValue",ie("")),bs("placeholder")],Iv=[...yT,...ZS,zi("type",["contextsliderform"]),Ho("initValue",ie(0)),Ho("min",ie(0)),Ho("max",ie(100))],BW=[...yT,...ZS,zi("type",["contextsizeinputform"]),Ho("initValue",ie({width:"",height:""}))],d8=Oa("type",{contextform:CT,contextsliderform:Iv,contextsizeinputform:BW}),PW=n=>ls("ContextForm",d8,n),Lv=$v.concat([N1("contexttoolbarbutton")]),$W=Vt([N1("contexttoolbar"),Ka("launch",Lv),Ga("items",Fg([ur,Hg([bs("name"),bs("label"),qa("items",ur)])]))].concat(yT)),ST=n=>({name:n.name.getOrUndefined(),label:n.label.getOrUndefined(),items:n.items}),iR=n=>({...n,launch:n.launch.getOrUndefined(),items:be(n.items)?n.items:$e(n.items,ST)}),IW=n=>ls("ContextToolbar",$W,n),LW=[Os,ps("src"),bs("alt"),fm("classes",[],ur)],FW=Vt(LW),lR=[Os,Xf,_Z,fm("classes",["tox-collection__item-label"],ur)],HW=Vt(lR),m8=Sp(()=>ff("type",{cardimage:FW,cardtext:HW,cardcontainer:zW})),zW=Vt([Os,ms("direction","horizontal"),ms("align","left"),ms("valign","middle"),qa("items",m8)]),f8=Vt([Os,FS,qa("items",m8),R1,jD].concat(Ph)),uR=n=>ls("cardmenuitem",f8,n),VW=Vt([Os,Mv,Ul,FS].concat(Ph)),UW=n=>ls("choicemenuitem",VW,n),dR=[Os,ps("fancytype"),jD],g8=[pe("initData",{})].concat(dR),ZW=[Vi("select"),gm("initData",{},[dr("allowCustomColors",!0),ms("storageKey","default"),Z0("colors",mi())])].concat(dR),mR=[Vi("select"),pu("initData",[wp("columns"),fm("items",[],mi())])].concat(dR),h8=Oa("fancytype",{inserttable:g8,colorswatch:ZW,imageselect:mR}),p8=n=>ls("fancymenuitem",h8,n),WW=Vt([Os,Mv,xZ,FS,M1].concat(Ph)),jW=Vt([Os,Mv,UD,fT,M1,Rv].concat(Ph)),b8=n=>ls("imagemenuitem",WW,n),fR=n=>ls("resetimageitem",jW,n),GW=Vt([Os,R1,jD,Ul].concat(Ph)),qW=n=>ls("menuitem",GW,n),KW=Vt([Os,TZ,R1,Ul].concat(Ph)),YW=n=>ls("nestedmenuitem",KW,n),XW=Vt([Os,Ul,Mv,R1,Bh].concat(Ph)),JW=n=>ls("togglemenuitem",XW,n),QW=Vt([Ul,M1,Ho("onShow",U),Ho("onHide",U),R1]),gR=n=>ls("sidebar",QW,n),ej=Vt([Os,Ga("items",Fg([Hg([VD,qa("items",ur)]),ur]))].concat($v)),hR=n=>ls("GroupToolbarButton",ej,n),tj=Vt([Os,M1,L$,Ul,Jf,OZ,EZ,R1,Ra("presets","normal",["normal","color","listpreview"]),F$(1),Bh,kZ,ms("context","mode:design")]),nj=n=>ls("SplitButton",tj,n),wT=[Jf,Ul,bs("tooltip"),Ra("buttonType","secondary",["primary","secondary"]),dr("borderless",!1),Cc("onAction"),ms("context","mode:design")],oj=[...wT,Xf,zi("type",["button"])],sj=[...wT,dr("active",!1),zi("type",["togglebutton"])],pR={button:oj,togglebutton:sj},rj=[zi("type",["group"]),fm("buttons",[],Oa("type",pR))],aj=Oa("type",{...pR,group:rj}),cj=Vt([fm("buttons",[],aj),Cc("onShow"),Cc("onHide")]),ij=n=>ls("view",cj,n),bR=(n,s,a)=>{const i=Lr(n.element,"."+a);if(i.length>0){const d=Ge(i,g=>{const h=g.dom.getBoundingClientRect().top,C=i[0].dom.getBoundingClientRect().top;return Math.abs(h-C)>s}).getOr(i.length);return T.some({numColumns:d,numRows:Math.ceil(i.length/d)})}else return T.none()},v8=(n,s)=>Xe([cn(n,s)]),Fv={namedEvents:v8,unnamedEvents:n=>v8(Ct("unnamed-events"),n)},Vd={item:n=>Rt.config({disabled:n,disableClass:"tox-collection__item--state-disabled"}),button:n=>Rt.config({disabled:n}),splitButton:n=>Rt.config({disabled:n,disableClass:"tox-tbtn--disabled"}),toolbarButton:n=>Rt.config({disabled:n,disableClass:"tox-tbtn--disabled",useNative:!1})},WS=(n,s)=>{const a=n.getApi(s);return i=>{i(a)}},Ud=(n,s)=>Wo(a=>{et(n.onBeforeSetup)&&n.onBeforeSetup(a),WS(n,a)(d=>{const g=n.onSetup(d);et(g)&&s.set(g)})}),Ih=(n,s)=>qi(a=>WS(n,a)(s.get())),xT=(n,s,a)=>qi(i=>(a.set(St.getValue(i)),WS(n,i)(s.get()))),vR="silver.uistate",L1="setDisabled",uj="setEnabled",yR="init",dj=["switchmode",yR],jS=(n,s)=>{const a=n.mainUi.outerContainer,i=[n.mainUi.mothership,...n.uiMotherships];s===L1&&gt(i,d=>{d.broadcastOn([wu()],{target:a.element})}),gt(i,d=>{d.broadcastOn([vR],s)})},y8=(n,s)=>{n.on("init SwitchMode",a=>{jS(s,a.type)}),n.on("DisabledStateChange",a=>{if(!a.isDefaultPrevented()){const i=a.state?L1:yR;jS(s,i),a.state||n.nodeChanged()}}),n.on("NodeChange",a=>{const i=n.ui.isEnabled()?a.type:L1;jS(s,i)}),BP(n)&&n.mode.set("readonly")},Fs=n=>Fa.config({channels:{[vR]:{onReceive:(s,a)=>{if(a===L1||a===uj){Rt.set(s,a===L1);return}const{contextType:i,shouldDisable:d}=n();i==="mode"&&!vo(dj,a)||Rt.set(s,d)}}}}),Qf=(n,s)=>km((a,i)=>{WS(n,a)(n.onAction),!n.triggersSubmenu&&s===Hu.CLOSE_ON_EXECUTE&&(a.getSystem().isConnected()&&On(a,K0()),i.stop())}),mj={[Hr()]:["disabling","alloy.base.behaviour","toggling","item-events"]},Um=Xu,F1=(n,s,a,i)=>{const d=Bt(U);return{type:"item",dom:s.dom,components:Um(s.optComponents),data:n.data,eventOrder:mj,hasSubmenu:n.triggersSubmenu,itemBehaviours:Xe([cn("item-events",[Qf(n,a),Ud(n,d),Ih(n,d)]),Vd.item(()=>!n.enabled||i.checkUiComponentContext(n.context).shouldDisable),Fs(()=>i.checkUiComponentContext(n.context)),mn.config({})].concat(n.itemBehaviours))}},eg=n=>({value:n.value,meta:{text:n.text.getOr(""),...n.meta}}),fj=(n,s)=>{const a=at.fromTag("div");Ro(a,"tox-image-selector-loading-spinner");const i=g=>{Ro(g,"tox-image-selector-loading-spinner-wrapper"),Br(g,a)},d=g=>{us(g,"tox-image-selector-loading-spinner-wrapper"),Pi(a)};return{dom:{tag:n.tag,attributes:n.attributes??{},classes:n.classes},components:[{dom:{tag:"div",classes:["tox-image-selector-image-wrapper"]},components:[{dom:{tag:"img",attributes:{src:s},classes:["tox-image-selector-image-img"]}}]},...n.checkMark.toArray()],behaviours:Xe([...n.behaviours??[],cn("render-image-events",[Wo(g=>{i(g.element),wo(g.element,"img").each(h=>{xl(h).catch(C=>{console.error(C)}).finally(()=>{d(g.element)})})})])])}},gj=(n,s)=>fj(s,n),CR=n=>{const s=xv.os.isMacOS()||xv.os.isiOS(),d=s?{alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"}:{meta:"Ctrl",access:"Shift+Alt"},g=n.split("+"),h=$e(g,C=>{const S=C.toLowerCase().trim();return So(d,S)?d[S]:C});return s?h.join(""):h.join("+")},ET=(n,s,a=[DD])=>ol(n,{tag:"div",classes:a},s),C8=n=>({dom:{tag:"div",classes:[Kf]},components:[Yo(Ha.translate(n))]}),TT=(n,s)=>({dom:{tag:"div",classes:s,innerHtml:n}}),SR=(n,s)=>({dom:{tag:"div",classes:[Kf]},components:[{dom:{tag:n.tag,styles:n.styles},components:[Yo(Ha.translate(s))]}]}),wR=n=>({dom:{tag:"div",classes:[A1]},components:[Yo(CR(n))]}),xR=n=>ET("checkmark",n,[gZ]),sl=n=>ET("chevron-right",n,[E$]),hj=n=>ET("chevron-down",n,[E$]),pj=(n,s)=>{const a=n.direction==="vertical"?hZ:k$,i=n.align==="left"?bZ:pZ;return{dom:{tag:"div",classes:[T$,a,i,(()=>{switch(n.valign){case"top":return dT;case"middle":return _$;case"bottom":return vZ}})()]},components:s}},S8=(n,s,a)=>({dom:{tag:"img",classes:s,attributes:{src:n,alt:a.getOr("")}}}),w8=(n,s,a)=>{const i="custom",d="remove",g=n.value,h=n.iconContent.map(x=>lT(x,s.icons,a)),C=n.ariaLabel.map(x=>({"aria-label":s.translate(x),"data-mce-name":x})).getOr({});return{dom:(()=>{const x=Nh,A=h.getOr(""),R={tag:"div",attributes:C,classes:[x]};return g===i?{...R,tag:"button",classes:[...R.classes,"tox-swatches__picker-btn"],innerHtml:A}:g===d?{...R,classes:[...R.classes,"tox-swatch--remove"],innerHtml:A}:jt(g)?{...R,attributes:{...R.attributes,"data-mce-color":g},styles:{"background-color":g},innerHtml:A}:R})(),optComponents:[]}},ER=(n,s)=>{const a=n.map(i=>({attributes:{id:Ct("menu-item"),"aria-label":Ha.translate(i)}})).getOr({});return{tag:"div",classes:[AD,BS].concat(s),...a}},x8=n=>({dom:{tag:"label"},components:[Yo(n)]}),bj=(n,s,a,i)=>{const d={tag:"div",classes:[DD]},g=P=>ol(P,d,s.icons,i),h=()=>T.some({dom:d}),C=a?n.iconContent.map(g).orThunk(h):T.none(),S=n.checkMark,x=T.from(n.meta).fold(()=>C8,P=>So(P,"style")?Le(SR,P.style):C8),A=n.htmlContent.fold(()=>n.textContent.map(x),P=>T.some(TT(P,[Kf])));return{dom:ER(n.ariaLabel,[]),optComponents:[C,A,n.shortcutContent.map(wR),S,n.caret,n.labelContent.map(x8)]}},vj=n=>({dom:ER(n.ariaLabel,[fZ]),optComponents:[T.some(gj(n.iconContent.getOrDie(),{tag:"div",classes:[uT],checkMark:n.checkMark})),n.labelContent.map(x8)]}),Hv=(n,s,a,i=T.none())=>n.presets==="color"?w8(n,s,i):n.presets==="img"?vj(n):bj(n,s,a,i),E8=(n,s,a)=>It(n,"tooltipWorker").map(i=>[jo.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:d=>({type:"submenu",item:d,overrides:{maxHeightFunction:Af}}),mode:"follow-highlight",onShow:(d,g)=>{i(h=>{jo.setComponents(d,[jc({element:at.fromDom(h)})])})}})]).getOrThunk(()=>a.map(i=>[jo.config({...s.providers.tooltips.getConfig({tooltipText:i}),mode:"follow-highlight"})]).getOr([])),yj=n=>wv.DOM.encode(n),TR=(n,s)=>{const a=Ha.translate(n),i=yj(a);if(s.length>0){const d=new RegExp(Pw(s),"gi");return i.replace(d,g=>`<span class="tox-autocompleter-highlight">${g}</span>`)}else return i},Cj=(n,s,a,i,d,g,h,C=!0)=>{const S=Hv({presets:i,textContent:T.none(),htmlContent:a?n.text.map(A=>TR(A,s)):T.none(),ariaLabel:n.text,labelContent:T.none(),iconContent:n.icon,shortcutContent:T.none(),checkMark:T.none(),caret:T.none(),value:n.value},h.providers,C,n.icon),x=n.text.filter(A=>!a&&A!=="");return F1({context:"mode:design",data:eg(n),enabled:n.enabled,getApi:ie({}),onAction:A=>d(n.value,n.meta),onSetup:ie(U),triggersSubmenu:!1,itemBehaviours:E8(n,h,x)},S,g,h.providers)},T8=(n,s)=>$e(n,a=>{switch(a.type){case"cardcontainer":return pj(a,T8(a.items,s));case"cardimage":return S8(a.src,a.classes,a.alt);case"cardtext":const d=a.name.exists(g=>vo(s.cardText.highlightOn,g))?T.from(s.cardText.matchText).getOr(""):"";return TT(TR(a.text,d),a.classes)}}),Sj=(n,s,a,i)=>{const d=h=>({isEnabled:()=>!Rt.isDisabled(h),setEnabled:C=>{Rt.set(h,!C),gt(Lr(h.element,"*"),S=>{h.getSystem().getByDom(S).each(x=>{x.hasConfigured(Rt)&&Rt.set(x,!C)})})}}),g={dom:ER(n.label,[]),optComponents:[T.some({dom:{tag:"div",classes:[T$,k$]},components:T8(n.items,i)})]};return F1({context:"mode:design",data:eg({text:T.none(),...n}),enabled:n.enabled,getApi:d,onAction:n.onAction,onSetup:n.onSetup,triggersSubmenu:!1,itemBehaviours:T.from(i.itemBehaviours).getOr([])},g,s,a.providers)},kR=(n,s,a,i,d,g,h,C=!0)=>{const S=R=>({setActive:P=>{Pn.set(R,P)},isActive:()=>Pn.isOn(R),isEnabled:()=>!Rt.isDisabled(R),setEnabled:P=>Rt.set(R,!P)}),x=Hv({presets:a,textContent:s?n.text:T.none(),htmlContent:T.none(),labelContent:n.label,ariaLabel:n.text,iconContent:n.icon,shortcutContent:s?n.shortcut:T.none(),checkMark:s?T.some(xR(h.icons)):T.none(),caret:T.none(),value:n.value},h,C),A=n.text.filter(ie(!s)).map(R=>jo.config(h.tooltips.getConfig({tooltipText:h.translate(R)})));return $o(F1({context:n.context,data:eg(n),enabled:n.enabled,getApi:S,onAction:R=>i(n.value),onSetup:R=>(R.setActive(d),U),triggersSubmenu:!1,itemBehaviours:[...A.toArray()]},x,g,h),{toggling:{toggleClass:OD,toggleOnExecute:!1,selected:n.active,exclusive:!0}})},kT=n=>({value:H1(n)}),_T=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,k8=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,AT=n=>_T.test(n)||k8.test(n),H1=n=>op(n,"#").toUpperCase(),_8=n=>AT(n)?T.some({value:H1(n)}):T.none(),A8=n=>({value:n.value.replace(_T,(a,i,d,g)=>i+i+d+d+g+g)}),O8=n=>{const s=A8(n),a=k8.exec(s.value);return a===null?["FFFFFF","FF","FF","FF"]:a},_R=n=>{const s=n.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},GS=n=>{const s=_R(n.red)+_R(n.green)+_R(n.blue);return kT(s)},Lh=(n,s,a)=>({hue:n,saturation:s,value:a}),AR=n=>{let s=0,a=0,i=0;const d=n.red/255,g=n.green/255,h=n.blue/255,C=Math.min(d,Math.min(g,h)),S=Math.max(d,Math.max(g,h));if(C===S)return i=C,Lh(0,0,i*100);const x=d===C?g-h:h===C?d-g:h-d;return s=d===C?3:h===C?1:5,s=60*(s-x/(S-C)),a=(S-C)/S,i=S,Lh(Math.round(s),Math.round(a*100),Math.round(i*100))},D8=Math.min,OR=Math.max,qS=Math.round,DR=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,R8=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,Rr=(n,s,a,i)=>({red:n,green:s,blue:a,alpha:i}),OT=n=>{const s=parseInt(n,10);return s.toString()===n&&s>=0&&s<=255},M8=n=>{let s,a,i;const d=(n.hue||0)%360;let g=n.saturation/100,h=n.value/100;if(g=OR(0,D8(g,1)),h=OR(0,D8(h,1)),g===0)return s=a=i=qS(255*h),Rr(s,a,i,1);const C=d/60,S=h*g,x=S*(1-Math.abs(C%2-1)),A=h-S;switch(Math.floor(C)){case 0:s=S,a=x,i=0;break;case 1:s=x,a=S,i=0;break;case 2:s=0,a=S,i=x;break;case 3:s=0,a=x,i=S;break;case 4:s=x,a=0,i=S;break;case 5:s=S,a=0,i=x;break;default:s=a=i=0}return s=qS(255*(s+A)),a=qS(255*(a+A)),i=qS(255*(i+A)),Rr(s,a,i,1)},KS=n=>{const s=O8(n),a=parseInt(s[1],16),i=parseInt(s[2],16),d=parseInt(s[3],16);return Rr(a,i,d,1)},RR=(n,s,a,i)=>{const d=parseInt(n,10),g=parseInt(s,10),h=parseInt(a,10),C=parseFloat(i);return Rr(d,g,h,C)},MR=n=>{const s=DR.exec(n);if(s!==null)return T.some(RR(s[1],s[2],s[3],"1"));const a=R8.exec(n);return a!==null?T.some(RR(a[1],a[2],a[3],a[4])):T.none()},N8=n=>`rgba(${n.red},${n.green},${n.blue},${n.alpha})`,B8=Rr(255,0,0,1),P8=n=>AR(KS(n)),Zd=n=>GS(M8(n)),NR=n=>_8(n).orThunk(()=>MR(n).map(GS)).getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const a=s.getContext("2d");a.clearRect(0,0,s.width,s.height),a.fillStyle="#FFFFFF",a.fillStyle=n,a.fillRect(0,0,1,1);const i=a.getImageData(0,0,1,1).data,d=i[0],g=i[1],h=i[2],C=i[3];return GS(Rr(d,g,h,C))}),$8=n=>{n.dispatch("SkinLoaded")},DT=(n,s)=>{n.dispatch("SkinLoadError",s)},BR=n=>{n.dispatch("ResizeEditor")},PR=(n,s)=>{n.dispatch("ResizeContent",s)},wj=(n,s)=>{n.dispatch("ScrollContent",s)},I8=(n,s)=>{n.dispatch("TextColorChange",s)},xj=(n,s)=>{n.dispatch("AfterProgressState",{state:s})},Ej=(n,s)=>n.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),Tj=(n,s)=>{n.dispatch("ToggleToolbarDrawer",{state:s})},kj=(n,s)=>{n.dispatch("StylesTextUpdate",s)},L8=(n,s)=>{n.dispatch("AlignTextUpdate",s)},_j=(n,s)=>{n.dispatch("FontSizeTextUpdate",s)},Zm=(n,s)=>{n.dispatch("FontSizeInputTextUpdate",s)},RT=(n,s)=>{n.dispatch("BlocksTextUpdate",s)},Aj=(n,s)=>{n.dispatch("FontFamilyTextUpdate",s)},Oj=n=>{n.dispatch("ToggleSidebar")},F8=n=>{n.dispatch("ToggleView")},$R=n=>{n.dispatch("ContextToolbarClose")},IR=n=>{n.dispatch("ContextFormSlideBack")},z1=(n,s)=>()=>{n(),s()},Wr=(n,s=yt)=>Fh(n,"NodeChange",a=>{a.setEnabled(n.selection.isEditable()&&s())}),YS=(n,s)=>a=>{const i=Us(),d=()=>{a.setActive(n.formatter.match(s));const g=n.formatter.formatChanged(s,a.setActive);i.set(g)};return n.initialized?d():n.once("init",d),()=>{n.off("init",d),i.clear()}},XS=(n,s)=>a=>{const i=Wr(n)(a),d=YS(n,s)(a);return()=>{i(),d()}},Fh=(n,s,a)=>i=>{const d=()=>a(i),g=()=>{a(i),n.on(s,d)};return n.initialized?g():n.once("init",g),()=>{n.off("init",g),n.off(s,d)}},MT=n=>s=>()=>{n.undoManager.transact(()=>{n.focus(),n.execCommand("mceToggleFormat",!1,s.format)})},_c=(n,s)=>()=>n.execCommand(s);var V1=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const H8={},z8=(n,s=10)=>{const a=V1.getItem(n),i=be(a)?JSON.parse(a):[],g=(x=>s-x.length<0?x.slice(0,s):x)(i),h=x=>{ze(g,x).each(C),g.unshift(x),g.length>s&&g.pop(),V1.setItem(n,JSON.stringify(g))},C=x=>{g.splice(x,1)};return{add:h,state:()=>g.slice(0)}},LR=n=>It(H8,n).getOrThunk(()=>{const s=`tinymce-custom-colors-${n}`,a=V1.getItem(s);if(In(a)){const d=V1.getItem("tinymce-custom-colors");V1.setItem(s,jt(d)?d:"[]")}const i=z8(s,10);return H8[n]=i,i}),Dj=n=>$e(LR(n).state(),s=>({type:"choiceitem",text:s,icon:"checkmark",value:s})),FR=(n,s)=>{LR(n).add(s)},NT="forecolor",HR="hilitecolor",V8=5,Rj=n=>zR(n.map((s,a)=>a%2===0?"#"+NR(s).value:s)),zR=n=>{const s=[];for(let a=0;a<n.length;a+=2)s.push({text:n[a+1],value:n[a],icon:"checkmark",type:"choiceitem"});return s},Ac=n=>s=>s.options.get(n),VR="#000000",U8=n=>{const s=n.options.register,a=g=>Yn(g,be)?{value:Rj(g),valid:!0}:{valid:!1,message:"Must be an array of strings."},i=g=>Yn(g,be)?{value:zR(g),valid:!0}:{valid:!1,message:"Must be an array of strings."},d=g=>dn(g)&&g>0?{value:g,valid:!0}:{valid:!1,message:"Must be a positive number."};s("color_map",{processor:a,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_map_raw",{processor:i}),s("color_map_background",{processor:a}),s("color_map_foreground",{processor:a}),s("color_cols",{processor:d,default:UR(n)}),s("color_cols_foreground",{processor:d,default:Z8(n,NT)}),s("color_cols_background",{processor:d,default:Z8(n,HR)}),s("custom_colors",{processor:"boolean",default:!0}),s("color_default_foreground",{processor:"string",default:VR}),s("color_default_background",{processor:"string",default:VR})},BT=(n,s)=>s===NT&&n.options.isSet("color_map_foreground")?Ac("color_map_foreground")(n):s===HR&&n.options.isSet("color_map_background")?Ac("color_map_background")(n):n.options.isSet("color_map_raw")?Ac("color_map_raw")(n):Ac("color_map")(n),UR=(n,s="default")=>Math.max(V8,Math.ceil(Math.sqrt(BT(n,s).length))),Z8=(n,s)=>{const a=Ac("color_cols")(n),i=UR(n,s);return a===UR(n)?i:a},W8=(n,s="default")=>Math.round(s===NT?Ac("color_cols_foreground")(n):s===HR?Ac("color_cols_background")(n):Ac("color_cols")(n)),ZR=Ac("custom_colors"),Mj=Ac("color_default_foreground"),j8=Ac("color_default_background"),WR="rgba(0, 0, 0, 0)",Wm=n=>MR(n).exists(s=>s.alpha!==0),jR=n=>Fi(n,s=>{if(gc(s)){const a=es(s,"background-color");return dc(Wm(a),a)}else return T.none()}).getOr(WR),GR=(n,s)=>{const a=at.fromDom(n.selection.getStart()),i=s==="hilitecolor"?jR(a):es(a,"color");return MR(i).map(d=>"#"+GS(d).value)},G8=(n,s,a)=>{n.undoManager.transact(()=>{n.focus(),n.formatter.apply(s,{value:a}),n.nodeChanged()})},q8=(n,s)=>{n.undoManager.transact(()=>{n.focus(),n.formatter.remove(s,{value:null},void 0,!0),n.nodeChanged()})},K8=n=>{n.addCommand("mceApplyTextcolor",(s,a)=>{G8(n,s,a)}),n.addCommand("mceRemoveTextcolor",s=>{q8(n,s)})},PT=n=>{const s="choiceitem",a={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return n?[a,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[a]},$T=(n,s,a,i)=>{a==="custom"?YR(n)(g=>{g.each(h=>{FR(s,h),n.execCommand("mceApplyTextcolor",s,h),i(h)})},GR(n,s).getOr(VR)):a==="remove"?(i(""),n.execCommand("mceRemoveTextcolor",s)):(i(a),n.execCommand("mceApplyTextcolor",s,a))},zv=(n,s,a)=>n.concat(Dj(s).concat(PT(a))),qR=(n,s,a)=>i=>{i(zv(n,s,a))},IT=(n,s,a)=>{const i=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";n.setIconFill(i,a)},Y8=(n,s)=>{n.setTooltip(s)},X8=(n,s)=>a=>{const i=GR(n,s);return ti(i,a.toUpperCase())},KR=(n,s,a)=>{if(mc(a))return s==="forecolor"?"Text color":"Background color";const i=s==="forecolor"?"Text color {0}":"Background color {0}",d=zv(BT(n,s),s,!1),g=Ce(d,h=>h.value===a).getOr({text:""}).text;return n.translate([i,n.translate(g)])},J8=(n,s,a,i)=>{n.ui.registry.addSplitButton(s,{tooltip:KR(n,a,i.get()),chevronTooltip:s==="forecolor"?"Text color menu":"Background color menu",presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:X8(n,a),columns:W8(n,a),fetch:qR(BT(n,a),a,ZR(n)),onAction:d=>{$T(n,a,i.get(),U)},onItemAction:(d,g)=>{$T(n,a,g,h=>{i.set(h),I8(n,{name:s,color:h})})},onSetup:d=>{IT(d,s,i.get());const g=h=>{h.name===s&&(IT(d,h.name,h.color),Y8(d,KR(n,a,h.color)))};return n.on("TextColorChange",g),z1(Wr(n)(d),()=>{n.off("TextColorChange",g)})}})},Q8=(n,s,a,i,d)=>{n.ui.registry.addNestedMenuItem(s,{text:i,icon:s==="forecolor"?"text-color":"highlight-bg-color",onSetup:g=>(Y8(g,KR(n,a,d.get())),IT(g,s,d.get()),Wr(n)(g)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:X8(n,a),initData:{storageKey:a},onAction:g=>{$T(n,a,g.value,h=>{d.set(h),I8(n,{name:s,color:h})})}}]})},YR=n=>(s,a)=>{let i=!1;const d=C=>{const x=C.getData().colorpicker;i?(s(T.from(x)),C.close()):n.windowManager.alert(n.translate(["Invalid hex color code: {0}",x]))},g=(C,S)=>{S.name==="hex-valid"&&(i=S.value)},h={colorpicker:a};n.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:h,onAction:g,onSubmit:d,onClose:U,onCancel:()=>{s(T.none())}})},eI=n=>{K8(n);const s=Mj(n),a=j8(n),i=Bt(s),d=Bt(a);J8(n,"forecolor","forecolor",i),J8(n,"backcolor","hilitecolor",d),Q8(n,"forecolor","forecolor","Text color",i),Q8(n,"backcolor","hilitecolor","Background color",d)},Nj=(n,s,a,i,d)=>{const g=S=>({setActive:x=>{Pn.set(S,x)},isActive:()=>Pn.isOn(S),isEnabled:()=>!Rt.isDisabled(S),setEnabled:x=>Rt.set(S,!x)}),h=Hv({presets:"img",textContent:T.none(),htmlContent:T.none(),ariaLabel:n.tooltip,iconContent:T.some(n.url),labelContent:n.label,shortcutContent:T.none(),checkMark:T.some(xR(d.icons)),caret:T.none(),value:n.value},d,!0),C=n.tooltip.map(S=>jo.config(d.tooltips.getConfig({tooltipText:d.translate(S)})));return $o(F1({context:n.context,data:eg(n),enabled:n.enabled,getApi:g,onAction:S=>{s(n.value),S.setActive(!0)},onSetup:S=>(S.setActive(a),U),triggersSubmenu:!1,itemBehaviours:[...C.toArray()]},h,i,d),{toggling:{toggleClass:OD,toggleOnExecute:!1,selected:n.active,exclusive:!0}})},LT=(n,s,a,i,d,g,h,C)=>{const S=LS(s),A=Bj(s,a,i,d!=="color"?"normal":"color",g,h,C);return zD(n,S,A,i,{menuType:d})},Bj=(n,s,a,i,d,g,h)=>Xu($e(n,C=>C.type==="choiceitem"?UW(C).fold(Hd,S=>T.some(kR(S,a===1,i,s,g(S.value),d,h,LS(n)))):C.type==="imageitem"?b8(C).fold(Hd,S=>T.some(Nj(S,s,g(S.value),d,h))):C.type==="resetimage"?fR(C).fold(Hd,S=>T.some(kR({...S,type:"choiceitem",text:S.tooltip,icon:T.some(S.icon),label:T.some(S.label)},a===1,i,s,g(S.value),d,h,LS(n)))):T.none())),Hh=(n,s)=>{const a=zm(s);return n===1?{mode:"menu",moveOnTab:!0}:n==="auto"?{mode:"grid",selector:"."+a.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+{color:"tox-swatches__row",imageselector:"tox-image-selector__row",listpreview:"tox-collection__group",normal:"tox-collection__group"}[s],previousSelector:d=>s==="color"?wo(d.element,"[aria-checked=true]"):T.none()}},Pj=(n,s)=>n===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:n==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${Nh}`:`.${BS}`}},$j=(n,s)=>{const a=tI(n,s),i=s.colorinput.getColorCols(n.initData.storageKey),d="color",h={...LT(Ct("menu-value"),a,C=>{n.onAction({value:C})},i,d,Hu.CLOSE_ON_EXECUTE,n.select.getOr(Cn),s.shared.providers),markers:zm(d),movement:Hh(i,d),showMenuRole:!1};return{type:"widget",data:{value:Ct("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[EO.widget(Wf.sketch(h))]}},tI=(n,s)=>{const a=n.initData.allowCustomColors&&s.colorinput.hasCustomColors();return n.initData.colors.fold(()=>zv(s.colorinput.getColors(n.initData.storageKey),n.initData.storageKey,a),i=>i.concat(PT(a)))},nI=(n,s)=>{const a="imageselector",i=n.initData.columns,g={...LT(Ct("menu-value"),n.initData.items,h=>{n.onAction({value:h})},i,a,Hu.CLOSE_ON_EXECUTE,n.select.getOr(Cn),s.shared.providers),markers:zm(a),movement:Hh(i,a),showMenuRole:!1};return{type:"widget",data:{value:Ct("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem","tox-collection--toolbar"]},autofocus:!0,components:[EO.widget(Wf.sketch(g))]}},oI=Ct("cell-over"),sI=Ct("cell-execute"),XR=n=>(s,a)=>n.shared.providers.translate(["{0} columns, {1} rows",a,s]),Ij=(n,s,a)=>{const i=h=>Ht(h,oI,{row:n,col:s}),d=h=>Ht(h,sI,{row:n,col:s}),g=(h,C)=>{C.stop(),d(h)};return m({dom:{tag:"div",attributes:{role:"button","aria-label":a}},behaviours:Xe([cn("insert-table-picker-cell",[Me(Uc(),ln.focus),Me(Hr(),d),Me(pf(),g),Me(qg(),g)]),Pn.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),ln.config({onFocus:i})])})},rI=(n,s,a)=>{const i=[];for(let d=0;d<s;d++){const g=[];for(let h=0;h<a;h++){const C=n(d+1,h+1);g.push(Ij(d,h,C))}i.push(g)}return i},Lj=(n,s,a,i,d)=>{for(let g=0;g<i;g++)for(let h=0;h<d;h++)Pn.set(n[g][h],g<=s&&h<=a)},Fj=n=>ne(n,s=>$e(s,p)),aI=(n,s)=>Yo(`${s}x${n}`),JR={inserttable:(n,s)=>{const d=XR(s),g=rI(d,10,10),h=aI(0,0),C=to({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[h],behaviours:Xe([mn.config({})])});return{type:"widget",data:{value:Ct("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[EO.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:Fj(g).concat(C.asSpec()),behaviours:Xe([cn("insert-table-picker",[Wo(S=>{mn.set(C.get(S),[h])}),ih(oI,(S,x,A)=>{const{row:R,col:P}=A.event;Lj(g,R,P,10,10),mn.set(C.get(S),[aI(R+1,P+1)])}),ih(sI,(S,x,A)=>{const{row:R,col:P}=A.event;On(S,K0()),n.onAction({numRows:R+1,numColumns:P+1})})]),Lt.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:$j,imageselect:nI},zj=(n,s)=>It(JR,n.fancytype).map(a=>a(n,s)),Vj=(n,s,a,i=!0,d=!1)=>{const g=d?hj(a.icons):sl(a.icons),h=S=>({isEnabled:()=>!Rt.isDisabled(S),setEnabled:x=>Rt.set(S,!x),setIconFill:(x,A)=>{wo(S.element,`svg path[class="${x}"], rect[class="${x}"]`).each(R=>{qt(R,"fill",A)})},setTooltip:x=>{const A=a.translate(x);qt(S.element,"aria-label",A)}}),C=Hv({presets:"normal",iconContent:n.icon,textContent:n.text,htmlContent:T.none(),ariaLabel:n.text,labelContent:T.none(),caret:T.some(g),checkMark:T.none(),shortcutContent:n.shortcut},a,i);return F1({context:n.context,data:eg(n),getApi:h,enabled:n.enabled,onAction:U,onSetup:n.onSetup,triggersSubmenu:!0,itemBehaviours:[]},C,s,a)},Uj=(n,s,a,i=!0)=>{const d=h=>({isEnabled:()=>!Rt.isDisabled(h),setEnabled:C=>Rt.set(h,!C)}),g=Hv({presets:"normal",iconContent:n.icon,textContent:n.text,htmlContent:T.none(),labelContent:T.none(),ariaLabel:n.text,caret:T.none(),checkMark:T.none(),shortcutContent:n.shortcut},a,i);return F1({context:n.context,data:eg(n),getApi:d,enabled:n.enabled,onAction:n.onAction,onSetup:n.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a)},Zj=n=>({type:"separator",dom:{tag:"div",classes:[BS,x$]},components:n.text.map(Yo).toArray()}),cI=(n,s,a,i=!0)=>{const d=h=>({setActive:C=>{Pn.set(h,C)},isActive:()=>Pn.isOn(h),isEnabled:()=>!Rt.isDisabled(h),setEnabled:C=>Rt.set(h,!C)}),g=Hv({iconContent:n.icon,textContent:n.text,htmlContent:T.none(),labelContent:T.none(),ariaLabel:n.text,checkMark:T.some(xR(a.icons)),caret:T.none(),shortcutContent:n.shortcut,presets:"normal",meta:n.meta},a,i);return $o(F1({context:n.context,data:eg(n),enabled:n.enabled,getApi:d,onAction:n.onAction,onSetup:n.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a),{toggling:{toggleClass:OD,toggleOnExecute:!1,selected:n.active},role:n.role.getOrUndefined()})},iI=Cj,QR=Zj,Wj=Uj,jj=Vj,Gj=cI,qj=zj,Kj=Sj,Yj=n=>{switch(n.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:n}}},Xj=n=>{const s=St.getValue(n),a=$S(n).map(BD);Kc.refetch(s).get(()=>{const i=fn.getCoupled(s,"sandbox");a.each(d=>$S(i).each(g=>CZ(g,d)))})},Jj=(n,s)=>{Qj(n).each(a=>{s_(n,a.element,s.event.eventType,s.event.interactionEvent)})},Qj=n=>Jn.getState(n).bind(eo.getHighlighted).bind(eo.getHighlighted),e5=n=>Ws(n.element,mT)?T.some(n.element):wo(n.element,"."+mT),lI=(n,s,a)=>{R$(n).each(i=>{M$(i,a),e5(s).each(g=>{Pr(g,"id").each(h=>qt(i.element,"aria-controls",h))})}),qt(a.element,"aria-selected","true")},eG=(n,s,a)=>{qt(a.element,"aria-selected","false")},tG=n=>{R$(n).each(s=>ln.focus(s))},JS=n=>fn.getExistingCoupled(n,"sandbox").bind($S).map(BD).map(a=>a.fetchPattern).getOr("");var Vv;(function(n){n[n.ContentFocus=0]="ContentFocus",n[n.UiFocus=1]="UiFocus"})(Vv||(Vv={}));const nG=(n,s,a,i,d)=>{const g=a.shared.providers,h=C=>d?{...C,shortcut:T.none(),icon:C.text.isSome()?T.none():C.icon}:C;switch(n.type){case"menuitem":return qW(n).fold(Hd,C=>T.some(Wj(h(C),s,g,i)));case"nestedmenuitem":return YW(n).fold(Hd,C=>T.some(jj(h(C),s,g,i,d)));case"togglemenuitem":return JW(n).fold(Hd,C=>T.some(Gj(h(C),s,g,i)));case"separator":return TW(n).fold(Hd,C=>T.some(QR(C)));case"fancymenuitem":return p8(n).fold(Hd,C=>qj(C,a));default:return console.error("Unknown item in general menu",n),T.none()}},oG=(n,s,a,i,d,g,h)=>{const C=i===1,S=!C||LS(n);return Xu($e(n,x=>{switch(x.type){case"separator":return _W(x).fold(Hd,A=>T.some(QR(A)));case"cardmenuitem":return uR(x).fold(Hd,A=>T.some(Kj({...A,onAction:R=>{A.onAction(R),a(A.value,A.meta)}},d,g,{itemBehaviours:E8(A.meta,g,T.none()),cardText:{matchText:s,highlightOn:h}})));case"autocompleteitem":default:return AW(x).fold(Hd,A=>T.some(iI(A,s,C,"normal",a,d,g,S)))}}))},FT=(n,s,a,i,d,g)=>{const h=LS(s),C=Xu($e(s,A=>{const R=z=>d?!So(z,"text"):h,P=z=>nG(z,a,i,R(z),d);return A.type==="nestedmenuitem"&&A.getSubmenuItems().length<=0?P({...A,enabled:!1}):P(A)})),S=Yj(g);return(d?$$:zD)(n,h,C,1,S)},t5=n=>S1.singleData(n.value,n),n5=(n,s,a,i)=>{const d=Hh(s,i),g=zm(i);return{data:t5({...n,movement:d,menuBehaviours:Fv.unnamedEvents(s!=="auto"?[]:[Wo((h,C)=>{bR(h,4,g.item).each(({numColumns:S,numRows:x})=>{Lt.setGridSize(h,x,S)})})])}),menu:{markers:zm(i),fakeFocus:a===Vv.ContentFocus}}},uI=n=>df.create(at.fromDom(n.startContainer),n.startOffset,at.fromDom(n.endContainer),n.endOffset),sG={register:(n,s)=>{const a=Ct("autocompleter"),i=Bt(!1),d=Bt(!1),g=pn(),h=m(fs.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:a}},components:[],fireDismissalEventInstead:{},inlineBehaviours:Xe([cn("dismissAutocompleter",[Me(pd(),()=>R()),Me(Q0(),(G,oe)=>{Pr(oe.event.target,"id").each(le=>qt(at.fromDom(n.getBody()),"aria-activedescendant",le))})])]),lazySink:s.getSink})),C=()=>fs.isOpen(h),S=d.get,x=()=>{if(C()){fs.hide(h),n.dom.remove(a,!1);const G=at.fromDom(n.getBody());Pr(G,"aria-owns").filter(oe=>oe===a).each(()=>{Qo(G,"aria-owns"),Qo(G,"aria-activedescendant")})}},A=()=>fs.getContent(h).bind(G=>pr(G.components(),0)),R=()=>n.execCommand("mceAutocompleterClose"),P=G=>{const oe=ic(G,le=>T.from(le.columns)).getOr(1);return ne(G,le=>{const Se=le.items;return oG(Se,le.matchText,(Te,ct)=>{const lt={hide:()=>R(),reload:Ne=>{x(),n.execCommand("mceAutocompleterReload",!1,{fetchOptions:Ne})}};n.execCommand("mceAutocompleterRefreshActiveRange"),g.get().each(Ne=>{i.set(!0),le.onAction(lt,Ne,Te,ct),i.set(!1)})},oe,Hu.BUBBLE_TO_SANDBOX,s,le.highlightOn)})},z=(G,oe)=>{const le=ic(G,Se=>T.from(Se.columns)).getOr(1);fs.showMenuAt(h,{anchor:{type:"selection",getSelection:()=>g.get().map(uI),root:at.fromDom(n.getBody())}},n5(zD("autocompleter-value",!0,oe,le,{menuType:"normal"}),le,Vv.ContentFocus,"normal")),A().each(eo.highlightFirst)},Z=G=>{const oe=P(G);oe.length>0?(z(G,oe),qt(at.fromDom(n.getBody()),"aria-owns",a),n.inline||K()):x()},K=()=>{n.dom.get(a)&&n.dom.remove(a,!1);const G=n.getDoc().documentElement,oe=n.selection.getNode(),le=E0(h.element);hs(le,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${oe.offsetTop}px`,left:`${oe.offsetLeft}px`}),n.dom.add(G,le.dom),wo(le,'[role="menu"]').each(Se=>{Nn(Se,"position"),Nn(Se,"max-height")})};n.on("AutocompleterStart",({lookupData:G})=>{d.set(!0),i.set(!1),Z(G)}),n.on("AutocompleterUpdate",({lookupData:G})=>Z(G)),n.on("AutocompleterUpdateActiveRange",({range:G})=>g.set(G)),n.on("AutocompleterEnd",()=>{x(),d.set(!1),i.set(!1),g.clear()});const ee={cancelIfNecessary:R,isMenuOpen:C,isActive:S,isProcessingAction:i.get,getMenu:A};mZ.setup(ee,n)}},dI=(n,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:$e(n.items,s.interpreter)});var rG=tinymce.util.Tools.resolve("tinymce.html.Entities");const Uv=(n,s,a,i)=>{const d=mI(n,s,a,i);return Dn.sketch(d)},aG=(n,s)=>Uv(n,s,[],[]),mI=(n,s,a,i)=>({dom:gI(a),components:n.toArray().concat([s]),fieldBehaviours:Xe(i)}),fI=()=>gI([]),gI=n=>({tag:"div",classes:["tox-form__group"].concat(n)}),tg=(n,s)=>Dn.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Yo(s.translate(n))]}),Oc=Ct("form-component-change"),hI=Ct("form-component-input"),U1=Ct("form-close"),ng=Ct("form-cancel"),zu=Ct("form-action"),QS=Ct("form-submit"),o5=Ct("form-block"),HT=Ct("form-unblock"),pI=Ct("form-tabchange"),s5=Ct("form-resize"),cG=(n,s,a)=>{const i=n.label.map(z=>tg(z,s)),d=s.icons(),g=z=>d[z]??z,h=z=>(Z,K)=>{ya(K.event.target,"[data-collection-item-value]").each(ee=>{z(Z,K,ee,br(ee,"data-collection-item-value"))})},C=(z,Z)=>{const ee=s.checkUiComponentContext("mode:design").shouldDisable||s.isDisabled()?" tox-collection__item--state-disabled":"",G=$e(Z,Se=>{const Te=Ha.translate(Se.text),ct=n.columns===1?`<div class="tox-collection__item-label">${Te}</div>`:"",lt=`<div class="tox-collection__item-icon">${g(Se.icon)}</div>`,Ne={_:" "," - ":" ","-":" "},Fe=Te.replace(/\_| \- |\-/g,Ft=>Ne[Ft]);return`<div data-mce-tooltip="${Fe}" class="tox-collection__item${ee}" tabindex="-1" data-collection-item-value="${rG.encodeAllRaw(Se.value)}" aria-label="${Fe}">${lt}${ct}</div>`}),oe=n.columns!=="auto"&&n.columns>1?er(G,n.columns):[G],le=$e(oe,Se=>`<div class="tox-collection__group">${Se.join("")}</div>`);wl(z.element,le.join(""))},S=h((z,Z,K,ee)=>{Z.stop(),s.checkUiComponentContext("mode:design").shouldDisable||s.isDisabled()||Ht(z,zu,{name:n.name,value:ee})}),x=[Me(Uc(),h((z,Z,K)=>{kr(K,!0)})),Me(pf(),S),Me(qg(),S),Me(Ui(),h((z,Z,K)=>{wo(z.element,"."+O1).each(ee=>{us(ee,O1)}),Ro(K,O1)})),Me(yy(),h(z=>{wo(z.element,"."+O1).each(Z=>{us(Z,O1),ks(Z)})})),km(h((z,Z,K,ee)=>{Ht(z,zu,{name:n.name,value:ee})}))],A=(z,Z)=>$e(Lr(z.element,".tox-collection__item"),Z),R=Dn.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(n.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:Et},behaviours:Xe([Rt.config({disabled:()=>s.checkUiComponentContext(n.context).shouldDisable,onDisabled:z=>{A(z,Z=>{Ro(Z,"tox-collection__item--state-disabled"),qt(Z,"aria-disabled",!0)})},onEnabled:z=>{A(z,Z=>{us(Z,"tox-collection__item--state-disabled"),Qo(Z,"aria-disabled")})}}),Fs(()=>s.checkUiComponentContext(n.context)),mn.config({}),jo.config({...s.tooltips.getConfig({tooltipText:"",onShow:z=>{wo(z.element,"."+O1+"[data-mce-tooltip]").each(Z=>{Pr(Z,"data-mce-tooltip").each(K=>{jo.setComponents(z,s.tooltips.getComponents({tooltipText:K}))})})}}),mode:"children-keyboard-focus",anchor:z=>({type:"node",node:wo(z.element,"."+O1).orThunk(()=>jw(".tox-collection__item")),root:z.element,layouts:{onLtr:ie([qs,ss,cr,Vr,Gs,_r]),onRtl:ie([qs,ss,cr,Vr,Gs,_r])},bubble:Ec(0,-2,{})})}),St.config({store:{mode:"memory",initialValue:a.getOr([])},onSetValue:(z,Z)=>{C(z,Z),n.columns==="auto"&&bR(z,5,"tox-collection__item").each(({numRows:K,numColumns:ee})=>{Lt.setGridSize(z,K,ee)}),On(z,s5)}}),Vo.config({}),Lt.config(Pj(n.columns,"normal")),cn("collection-events",x)]),eventOrder:{[Hr()]:["disabling","alloy.base.behaviour","collection-events"],[Ui()]:["collection-events","tooltipping"]}});return Uv(i,R,["tox-form__group--collection"],[])},iG=(n,s)=>Kc.sketch({dom:n.dom,components:n.components,toggleClass:"mce-active",dropdownBehaviours:Xe([Vd.button(()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(n.context).shouldDisable),Fs(()=>s.providers.checkUiComponentContext(n.context)),Md.config({}),Vo.config({})]),layouts:n.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:a=>Ss.nu(i=>n.fetch(i)).map(i=>T.from(t5($o(LT(Ct("menu-value"),i,d=>{n.onItemAction(a,d)},n.columns,n.presets,Hu.CLOSE_ON_EXECUTE,Cn,s.providers),{movement:Hh(n.columns,n.presets)})))),parts:{menu:PS(!1,1,n.presets)}}),zT=Ct("color-input-change"),bI=Ct("color-swatch-change"),vI=Ct("color-picker-cancel"),lG=(n,s,a,i)=>{const d=Dn.parts.field({factory:Hm,inputClasses:["tox-textfield"],data:i,onSetValue:x=>Qi.run(x).get(U),inputBehaviours:Xe([Rt.config({disabled:()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(n.context).shouldDisable}),Fs(()=>s.providers.checkUiComponentContext(n.context)),Vo.config({}),Qi.config({invalidClass:"tox-textbox-field-invalid",getRoot:x=>cu(x.element),notify:{onValid:x=>{const A=St.getValue(x);Ht(x,zT,{color:A})}},validator:{validateOnLoad:!1,validate:x=>{const A=St.getValue(x);if(A.length===0)return Ss.pure(Xt.value(!0));{const R=at.fromTag("span");on(R,"background-color",A);const P=is(R,"background-color").fold(()=>Xt.error("blah"),z=>Xt.value(A));return Ss.pure(P)}}}})]),selectOnFocus:!1}),g=n.label.map(x=>tg(x,s.providers)),h=(x,A)=>{Ht(x,bI,{value:A})},C=(x,A)=>{S.getOpt(x).each(R=>{A==="custom"?a.colorPicker(P=>{P.fold(()=>On(R,vI),z=>{h(R,z),FR(n.storageKey,z)})},"#ffffff"):A==="remove"?h(R,""):h(R,A)})},S=to(iG({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[Gs,cr,qs],onLtr:()=>[cr,Gs,qs]},components:[],fetch:qR(a.getColors(n.storageKey),n.storageKey,a.hasCustomColors()),columns:a.getColorCols(n.storageKey),presets:"color",onItemAction:C,context:n.context},s));return Dn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:g.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[d,S.asSpec()]}]),fieldBehaviours:Xe([cn("form-field-events",[Me(zT,(x,A)=>{S.getOpt(x).each(R=>{on(R.element,"background-color",A.event.color)}),Ht(x,Oc,{name:n.name})}),Me(bI,(x,A)=>{Dn.getField(x).each(R=>{St.setValue(R,A.event.value),We.getCurrent(x).each(ln.focus)})}),Me(vI,(x,A)=>{Dn.getField(x).each(R=>{We.getCurrent(x).each(ln.focus)})})])])})},Vu={self:()=>We.config({find:T.some}),memento:n=>We.config({find:n.getOpt}),childAt:n=>We.config({find:s=>sm(s.element,n).bind(a=>s.getSystem().getByDom(a).toOptional())})},CI=Vt([pe("preprocess",Et),pe("postprocess",Et)]),dG=(n,s)=>{const a=Aa("RepresentingConfigs.memento processors",CI,s);return St.config({store:{mode:"manual",getValue:i=>{const d=n.get(i),g=St.getValue(d);return a.postprocess(g)},setValue:(i,d)=>{const g=a.preprocess(d),h=n.get(i);St.setValue(h,g)}}})},Z1=(n,s,a)=>St.config({store:{mode:"manual",...n.map(i=>({initialValue:i})).getOr({}),getValue:s,setValue:a}}),SI=(n,s,a)=>Z1(n,i=>s(i.element),(i,d)=>a(i.element,d)),mG=n=>SI(n,rd,wl),VT=n=>St.config({store:{mode:"memory",initialValue:n}}),UT=Ct("rgb-hex-update"),wI=Ct("slider-update"),xI=Ct("palette-update"),EI=(n,s)=>{const a=Lu.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),i=Lu.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return Lu.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:ie(0)},components:[a,i],sliderBehaviours:Xe([ln.config({})]),onChange:(d,g,h)=>{qt(d.element,"aria-valuenow",Math.floor(360-h*3.6)),Ht(d,wI,{value:h})}})},TI=Ct("valid-input"),kI=Ct("invalid-input"),_I=Ct("validating-input"),ZT="colorcustom.rgb.",fG={isEnabled:yt,setEnabled:U,immediatelyShow:U,immediatelyHide:U},gG=(n,s,a,i,d,g)=>{const h=(K,ee)=>{const G=ee.get();K!==G.isEnabled()&&(G.setEnabled(K),K?G.immediatelyShow():G.immediatelyHide())},C=(K,ee,G)=>Qi.config({invalidClass:s("invalid"),notify:{onValidate:oe=>{Ht(oe,_I,{type:K})},onValid:oe=>{h(!1,G),Ht(oe,TI,{type:K,value:St.getValue(oe)})},onInvalid:oe=>{h(!0,G),Ht(oe,kI,{type:K,value:St.getValue(oe)})}},validator:{validate:oe=>{const le=St.getValue(oe),Se=ee(le)?Xt.value(!0):Xt.error(n("aria.input.invalid"));return Ss.pure(Se)},validateOnLoad:!1}}),S=(K,ee,G,oe,le)=>{const Se=Bt(fG),Te=n(ZT+"range"),ct=Dn.parts.label({dom:{tag:"label"},components:[Yo(G)]}),lt=Dn.parts.field({data:le,factory:Hm,inputAttributes:{type:"text","aria-label":oe,...ee==="hex"?{"aria-live":"polite"}:{}},inputClasses:[s("textfield")],inputBehaviours:Xe([C(ee,K,Se),Vo.config({}),jo.config({...d({tooltipText:"",onSetup:gn=>{Se.set({isEnabled:()=>jo.isEnabled(gn),setEnabled:Mt=>jo.setEnabled(gn,Mt),immediatelyShow:()=>jo.immediateOpenClose(gn,!0),immediatelyHide:()=>jo.immediateOpenClose(gn,!1)}),jo.setEnabled(gn,!1)},onShow:(gn,Mt)=>{jo.setComponents(gn,[{dom:{tag:"p",classes:[s("rgb-warning-note")]},components:[Yo(n(ee==="hex"?"colorcustom.rgb.invalidHex":"colorcustom.rgb.invalid"))]}])}})})]),onSetValue:gn=>{Qi.isInvalid(gn)&&Qi.run(gn).get(U)}}),Ne=Ct("aria-invalid"),Fe=to(g("invalid",T.some(Ne),"warning")),Ft=to({dom:{tag:"div",classes:[s("invalid-icon")]},components:[Fe.asSpec()]}),Ot=[ct,lt,Ft.asSpec()],En=ee!=="hex"?[Dn.parts["aria-descriptor"]({text:Te})]:[],Ut=Ot.concat(En);return{dom:{tag:"div",attributes:{role:"presentation"},classes:[s("rgb-container")]},components:Ut}},x=(K,ee)=>{const G=GS(ee);return _h.getField(K,"hex").each(oe=>{ln.isFocused(oe)||St.setValue(K,{hex:G.value})}),G},A=(K,ee)=>{const G=ee.red,oe=ee.green,le=ee.blue;St.setValue(K,{red:G,green:oe,blue:le})},R=to({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),P=(K,ee)=>{R.getOpt(K).each(G=>{on(G.element,"background-color","#"+ee.value)})};return Ji({factory:()=>{const K={red:Bt(T.some(255)),green:Bt(T.some(255)),blue:Bt(T.some(255)),hex:Bt(T.some("ffffff"))},ee=(Mt,Pe)=>{const tt=KS(Pe);A(Mt,tt),Se(tt)},G=Mt=>K[Mt].get(),oe=(Mt,Pe)=>{K[Mt].set(Pe)},le=()=>G("red").bind(Mt=>G("green").bind(Pe=>G("blue").map(tt=>Rr(Mt,Pe,tt,1)))),Se=Mt=>{const Pe=Mt.red,tt=Mt.green,Kt=Mt.blue;oe("red",T.some(Pe)),oe("green",T.some(tt)),oe("blue",T.some(Kt))},Te=(Mt,Pe)=>{const tt=Pe.event;tt.type!=="hex"?oe(tt.type,T.none()):i(Mt)},ct=(Mt,Pe)=>{a(Mt);const tt=kT(Pe);oe("hex",T.some(tt.value));const Kt=KS(tt);A(Mt,Kt),Se(Kt),Ht(Mt,UT,{hex:tt}),P(Mt,tt)},lt=(Mt,Pe,tt)=>{const Kt=parseInt(tt,10);oe(Pe,T.some(Kt)),le().each(bn=>{const Pt=x(Mt,bn);Ht(Mt,UT,{hex:Pt}),P(Mt,Pt)})},Ne=Mt=>Mt.type==="hex",Fe=(Mt,Pe)=>{const tt=Pe.event;Ne(tt)?ct(Mt,tt.value):lt(Mt,tt.type,tt.value)},Ft=Mt=>({label:n(ZT+Mt+".label"),description:n(ZT+Mt+".description")}),Ot=Ft("red"),En=Ft("green"),Ut=Ft("blue"),gn=Ft("hex");return $o(_h.sketch(Mt=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":n("aria.color.picker")}},components:[Mt.field("red",Dn.sketch(S(OT,"red",Ot.label,Ot.description,255))),Mt.field("green",Dn.sketch(S(OT,"green",En.label,En.description,255))),Mt.field("blue",Dn.sketch(S(OT,"blue",Ut.label,Ut.description,255))),Mt.field("hex",Dn.sketch(S(AT,"hex",gn.label,gn.description,"ffffff"))),R.asSpec()],formBehaviours:Xe([Qi.config({invalidClass:s("form-invalid")}),cn("rgb-form-events",[Me(TI,Fe),Me(kI,Te),Me(_I,Te)])])})),{apis:{updateHex:(Mt,Pe)=>{St.setValue(Mt,{hex:Pe.value}),ee(Mt,Pe),P(Mt,Pe)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(K,ee,G)=>{K.updateHex(ee,G)}},extraApis:{}})},hG=(n,s)=>{const a=Lu.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),i=Lu.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),d=(x,A)=>{const{width:R,height:P}=x,z=x.getContext("2d");if(z===null)return;z.fillStyle=A,z.fillRect(0,0,R,P);const Z=z.createLinearGradient(0,0,R,0);Z.addColorStop(0,"rgba(255,255,255,1)"),Z.addColorStop(1,"rgba(255,255,255,0)"),z.fillStyle=Z,z.fillRect(0,0,R,P);const K=z.createLinearGradient(0,0,0,P);K.addColorStop(0,"rgba(0,0,0,0)"),K.addColorStop(1,"rgba(0,0,0,1)"),z.fillStyle=K,z.fillRect(0,0,R,P)},g=(x,A)=>{const R=x.components()[0].element.dom,P=Lh(A,100,100),z=M8(P);d(R,N8(z))},h=(x,A)=>{const R=AR(KS(A));Lu.setValue(x,{x:R.saturation,y:100-R.value}),qt(x.element,"aria-valuetext",n(["Saturation {0}%, Brightness {1}%",R.saturation,R.value]))};return Ji({factory:x=>{const A=ie({x:0,y:0}),R=(Z,K,ee)=>{dn(ee)||qt(Z.element,"aria-valuetext",n(["Saturation {0}%, Brightness {1}%",Math.floor(ee.x),Math.floor(100-ee.y)])),Ht(Z,xI,{value:ee})},P=(Z,K,ee,G)=>{d(ee.element.dom,N8(B8))},z=Xe([We.config({find:T.some}),ln.config({})]);return Lu.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":n(["Saturation {0}%, Brightness {1}%",0,0])},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:A},rounded:!1,components:[a,i],onChange:R,onInit:P,sliderBehaviours:z})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(x,A,R)=>{g(A,R)},setThumb:(x,A,R)=>{h(A,R)}},extraApis:{}})},AI=(n,s,a,i)=>{const d=h=>{const C=gG(n,s,h.onValidHex,h.onInvalidHex,a,i),S=hG(n,s),x=Ne=>(100-Ne)/100*360,A=Ne=>100-Ne/360*100,R={paletteRgba:Bt(B8),paletteHue:Bt(0)},P=to(EI(n,s)),z=to(S.sketch({})),Z=to(C.sketch({})),K=(Ne,Fe,Ft)=>{z.getOpt(Ne).each(Ot=>{S.setHue(Ot,Ft)})},ee=(Ne,Fe)=>{Z.getOpt(Ne).each(Ft=>{C.updateHex(Ft,Fe)})},G=(Ne,Fe,Ft)=>{P.getOpt(Ne).each(Ot=>{Lu.setValue(Ot,A(Ft))})},oe=(Ne,Fe)=>{z.getOpt(Ne).each(Ft=>{S.setThumb(Ft,Fe)})},le=(Ne,Fe)=>{const Ft=KS(Ne);R.paletteRgba.set(Ft),R.paletteHue.set(Fe)},Se=(Ne,Fe,Ft,Ot)=>{le(Fe,Ft),gt(Ot,En=>{En(Ne,Fe,Ft)})},Te=()=>{const Ne=[ee];return(Fe,Ft)=>{const Ot=Ft.event.value,En=R.paletteHue.get(),Ut=Lh(En,Ot.x,100-Ot.y),gn=Zd(Ut);Se(Fe,gn,En,Ne)}},ct=()=>{const Ne=[K,ee];return(Fe,Ft)=>{const Ot=x(Ft.event.value),En=R.paletteRgba.get(),Ut=AR(En),gn=Lh(Ot,Ut.saturation,Ut.value),Mt=Zd(gn);Se(Fe,Mt,Ot,Ne)}},lt=()=>{const Ne=[K,G,oe];return(Fe,Ft)=>{const Ot=Ft.event.hex,En=P8(Ot);Se(Fe,Ot,En.hue,Ne)}};return{uid:h.uid,dom:h.dom,components:[z.asSpec(),P.asSpec(),Z.asSpec()],behaviours:Xe([cn("colour-picker-events",[Me(UT,lt()),Me(xI,Te()),Me(wI,ct())]),We.config({find:Ne=>Z.getOpt(Ne)}),Lt.config({mode:"acyclic"})])}};return Ji({name:"ColourPicker",configFields:[He("dom"),pe("onValidHex",U),pe("onInvalidHex",U)],factory:d})},OI={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red channel","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green channel","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue channel","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.rgb.invalid":"Numbers only, 0 to 255","colorcustom.rgb.invalidHex":"Hexadecimal only, 000000 to FFFFFF","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},DI=n=>s=>be(s)?n.translate(OI[s]):n.translate(s),WT=(n,s,a)=>{const i=x=>"tox-"+x,d=(x,A,R=x,P=x)=>ol(R,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+x],attributes:{title:s.translate(P),"aria-live":"polite",...A.fold(()=>({}),z=>({id:z}))}},s.icons),g=AI(DI(s),i,s.tooltips.getConfig,d),h=x=>{Ht(x,zu,{name:"hex-valid",value:!0})},C=x=>{Ht(x,zu,{name:"hex-valid",value:!1})},S=to(g.sketch({dom:{tag:"div",classes:[i("color-picker-container")],attributes:{role:"presentation"}},onValidHex:h,onInvalidHex:C}));return{dom:{tag:"div"},components:[S.asSpec()],behaviours:Xe([Z1(a,x=>{const A=S.get(x);return We.getCurrent(A).bind(z=>St.getValue(z).hex).map(z=>"#"+op(z,"#")).getOr("")},(x,A)=>{const R=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,P=T.from(R.exec(A)).bind(K=>pr(K,1)),z=S.get(x);We.getCurrent(z).fold(()=>{console.log("Can not find form")},K=>{St.setValue(K,{hex:P.getOr("")}),_h.getField(K,"hex").each(ee=>{On(ee,_l())})})}),Vu.self()])}};var RI=tinymce.util.Tools.resolve("tinymce.Resource");const MI=n=>So(n,"init"),pG=n=>{const s=pn(),a=to({dom:{tag:n.tag}}),i=pn(),d=!MI(n)&&n.onFocus.isSome()?[ln.config({onFocus:g=>{n.onFocus.each(h=>{h(g.element.dom)})}}),Vo.config({})]:[];return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:Xe([cn("custom-editor-events",[Wo(g=>{a.getOpt(g).each(h=>{(MI(n)?n.init(h.element.dom):RI.load(n.scriptId,n.scriptUrl).then(C=>C(h.element.dom,n.settings))).then(C=>{i.on(S=>{C.setValue(S)}),i.clear(),s.set(C)})})})]),Z1(T.none(),()=>s.get().fold(()=>i.get().getOr(""),g=>g.getValue()),(g,h)=>{s.get().fold(()=>i.set(h),C=>C.setValue(h))}),Vu.self()].concat(d)),components:[a.asSpec()]}};var jm=tinymce.util.Tools.resolve("tinymce.util.Tools");const r5=Ct("browse.files.event"),bG=(n,s,a)=>{const i=jm.explode(s.getOption("images_file_types")),d=g=>a.fold(()=>Qs(i,h=>fl(g.name.toLowerCase(),`.${h.toLowerCase()}`)),h=>Qs(h,C=>fl(g.name.toLowerCase(),`.${C.toLowerCase()}`)));return Co(S2(n),d)},vG=(n,s,a)=>{const i=(P,z)=>{z.stop()},d=P=>(z,Z)=>{gt(P,K=>{K(z,Z)})},g=(P,z)=>{var Z;if(!Rt.isDisabled(P)){const K=z.event.raw;Ht(P,r5,{files:(Z=K.dataTransfer)==null?void 0:Z.files})}},h=(P,z)=>{const Z=z.event.raw.target;Ht(P,r5,{files:Z.files})},C=(P,z)=>{z&&(St.setValue(P,bG(z,s,n.allowedFileExtensions)),Ht(P,Oc,{name:n.name}))},S=to({dom:{tag:"input",attributes:{type:"file",accept:n.allowedFileTypes.getOr("image/*")},styles:{display:"none"}},behaviours:Xe([cn("input-file-events",[Df(pf()),Df(qg())])])}),x=n.label.map(P=>tg(P,s)),A=Dn.parts.field({factory:wr,dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[Yo(s.translate(n.buttonLabel.getOr("Browse for an image"))),S.asSpec()],action:P=>{S.get(P).element.dom.click()},buttonBehaviours:Xe([Vu.self(),VT(a.getOr([])),Vo.config({}),Vd.button(()=>s.checkUiComponentContext(n.context).shouldDisable),Fs(()=>s.checkUiComponentContext(n.context))])}),R={dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:Xe([Rt.config({disabled:()=>s.checkUiComponentContext(n.context).shouldDisable}),Fs(()=>s.checkUiComponentContext(n.context)),Pn.config({toggleClass:"dragenter",toggleOnExecute:!1}),cn("dropzone-events",[Me("dragenter",d([i,Pn.toggle])),Me("dragleave",d([i,Pn.toggle])),Me("dragover",i),Me("drop",d([i,g])),Me(hf(),h)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[Yo(s.translate(n.dropAreaLabel.getOr("Drop an image here")))]},A]}]};return Uv(x,R,["tox-form__group--stretched"],[cn("handle-files",[Me(r5,(P,z)=>{Dn.getField(P).each(Z=>{C(Z,z.event.files)})})])])},yG=(n,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${n.columns}col`]},components:$e(n.items,s.interpreter)}),jT=Ct("alloy-fake-before-tabstop"),a5=Ct("alloy-fake-after-tabstop"),NI=n=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:n},behaviours:Xe([ln.config({ignore:!0}),Vo.config({})])}),BI=(n,s)=>({dom:{tag:"div",classes:["tox-navobj",...n.getOr([])]},components:[NI([jT]),s,NI([a5])],behaviours:Xe([Vu.childAt(1)])}),c5=(n,s)=>{Ht(n,Sr(),{raw:{which:9,shiftKey:s}})},PI=(n,s)=>{const a=s.element;Ws(a,jT)?c5(n,!0):Ws(a,a5)&&c5(n,!1)},ew=n=>gp(n,["."+jT,"."+a5].join(","),Cn),GT=Ct("update-dialog"),i5=Ct("update-title"),$I=Ct("update-body"),II=Ct("update-footer"),sn=Ct("body-send-message"),zh=Ct("dialog-focus-shifted"),qT=Jr().browser,Zv=qT.isSafari(),LI=qT.isFirefox(),l5=Zv||LI,CG=qT.isChromium(),FI=({scrollTop:n,scrollHeight:s,clientHeight:a})=>Math.ceil(n)+a>=s,HI=(n,s)=>n.scrollTo(0,s==="bottom"?99999999:s),SG=(n,s)=>{const a=n.body;return T.from(!/^<!DOCTYPE (html|HTML)/.test(s)&&(!CG&&!Zv||jt(a)&&(a.scrollTop!==0||Math.abs(a.scrollHeight-a.clientHeight)>1))?a:n.documentElement)},zI=(n,s,a)=>{const i=n.dom;T.from(i.contentDocument).fold(a,d=>{let g=0;const h=SG(d,s).map(S=>(g=S.scrollTop,S)).forall(FI),C=()=>{const S=i.contentWindow;jt(S)&&(h?HI(S,"bottom"):!h&&l5&&g!==0&&HI(S,g))};Zv&&i.addEventListener("load",C,{once:!0}),d.open(),d.write(s),d.close(),Zv||C()})},VI=dc(l5,Zv?500:200).map(n=>Zs(zI,n)),aQ=(n,s)=>{const a=Bt(n.getOr(""));return{getValue:i=>a.get(),setValue:(i,d)=>{if(a.get()!==d){const g=i.element,h=()=>qt(g,"srcdoc",d);s?VI.fold(ie(zI),C=>C.throttle)(g,d,h):h()}a.set(d)}}},tw=(n,s,a)=>{const i="tox-dialog__iframe",d=n.transparent?[]:[`${i}--opaque`],g=n.border?["tox-navobj-bordered"]:[],h={...n.label.map(R=>({title:R})).getOr({}),...a.map(R=>({srcdoc:R})).getOr({}),...n.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},C=aQ(a,n.streamContent),S=n.label.map(R=>tg(R,s)),x=R=>BI(T.from(g),{uid:R.uid,dom:{tag:"iframe",attributes:h,classes:[i,...d]},behaviours:Xe([Vo.config({}),ln.config({}),Z1(a,C.getValue,C.setValue),Fa.config({channels:{[zh]:{onReceive:(P,z)=>{z.newFocus.each(Z=>{cu(P.element).each(K=>{(Hn(P.element,Z)?Ro:us)(K,"tox-navobj-bordered-focus")})})}}}})])}),A=Dn.parts.field({factory:{sketch:x}});return Uv(S,A,["tox-form__group--stretched"],[])},u5=(n,s,a,i,d)=>{const g=a*d,h=i*d,C=Math.max(0,n/2-g/2),S=Math.max(0,s/2-h/2);return{left:C.toString()+"px",top:S.toString()+"px",width:g.toString()+"px",height:h.toString()+"px"}},UI=(n,s,a)=>{const i=va(n),d=vr(n);return Math.min(i/s,d/a,1)},xG=(n,s)=>{const a=Bt(s.getOr({url:""})),i=to({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(S=>({src:S.url})).getOr({})}}),d=to({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[i.asSpec()]}),g=(S,x)=>{const A={url:x.url};x.zoom.each(P=>A.zoom=P),x.cachedWidth.each(P=>A.cachedWidth=P),x.cachedHeight.each(P=>A.cachedHeight=P),a.set(A);const R=()=>{const{cachedWidth:P,cachedHeight:z,zoom:Z}=A;if(!zt(P)&&!zt(z)){if(zt(Z)){const ee=UI(S.element,P,z);A.zoom=ee}const K=u5(va(S.element),vr(S.element),P,z,A.zoom);d.getOpt(S).each(ee=>{hs(ee.element,K)})}};i.getOpt(S).each(P=>{const z=P.element;x.url!==br(z,"src")&&(qt(z,"src",x.url),us(S.element,"tox-imagepreview__loaded")),R(),xl(z).then(Z=>{S.getSystem().isConnected()&&(Ro(S.element,"tox-imagepreview__loaded"),A.cachedWidth=Z.dom.naturalWidth,A.cachedHeight=Z.dom.naturalHeight,R())})})},h={};n.height.each(S=>h.height=S);const C=s.map(S=>({url:S.url,zoom:T.from(S.zoom),cachedWidth:T.from(S.cachedWidth),cachedHeight:T.from(S.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:h,attributes:{role:"presentation"}},components:[d.asSpec()],behaviours:Xe([Vu.self(),Z1(C,()=>a.get(),g)])}},EG=(n,s,a)=>{const i="tox-label",d=n.align==="center"?[`${i}--center`]:[],g=n.align==="end"?[`${i}--end`]:[],h=to({dom:{tag:"label",classes:[i,...d,...g]},components:[Yo(s.providers.translate(n.label))]}),C=$e(n.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[h.asSpec(),...C],behaviours:Xe([Vu.self(),mn.config({}),mG(T.none()),Lt.config({mode:"acyclic"}),cn("label",[Wo(S=>{n.for.each(x=>{a(x).each(A=>{h.getOpt(S).each(R=>{const P=br(A.element,"id")??Ct("form-field");qt(A.element,"id",P),qt(R.element,"for",P)})})})})])])}},d5=Ct("toolbar.button.execute"),TG=n=>km((s,a)=>{WS(n,s)(i=>{Ht(s,d5,{buttonApi:i}),n.onAction(i)})}),Gm=Ct("common-button-display-events"),m5={[Hr()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events","tooltipping"],[Al()]:["toolbar-button-events",Gm],[pi()]:["toolbar-button-events","dropdown-events","tooltipping"],[Ya()]:["focusing","alloy.base.behaviour",Gm]},KT=n=>on(n.element,"width",es(n.element,"width")),ZI=(n,s,a)=>ol(n,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:a},s),f5=(n,s)=>ZI(n,s,[]),Vh=(n,s)=>ZI(n,s,[mn.config({})]),g5=(n,s,a)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[Yo(a.translate(n))],behaviours:Xe([mn.config({})])}),Gl=Ct("update-menu-text"),W1=Ct("update-menu-icon"),YT=Ct("update-tooltip-text"),h5=(n,s,a,i)=>{const d=Bt(U),g=Bt(n.tooltip),h=n.text.map(ee=>to(g5(ee,s,a.providers))),C=n.icon.map(ee=>to(Vh(ee,a.providers.icons))),S=(ee,G)=>{const oe=St.getValue(ee);return ln.focus(oe),Ht(oe,"keydown",{raw:G.event.raw}),Kc.close(oe),T.some(!0)},x=n.role.fold(()=>({}),ee=>({role:ee})),A=T.from(n.listRole).map(ee=>({listRole:ee})).getOr({}),R=n.ariaLabel.fold(()=>({}),ee=>({"aria-label":a.providers.translate(ee)})),P=ol("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},a.providers.icons),z=Ct("common-button-display-events"),Z="dropdown-events";return to(Kc.sketch({...n.uid?{uid:n.uid}:{},...x,...A,dom:{tag:"button",classes:[s,`${s}--select`].concat($e(n.classes,ee=>`${s}--${ee}`)),attributes:{...R,...jt(i)?{"data-mce-name":i}:{}}},components:Um([C.map(ee=>ee.asSpec()),h.map(ee=>ee.asSpec()),T.some(P)]),matchWidth:!0,useMinWidth:!0,onOpen:(ee,G,oe)=>{n.searchable&&tG(oe)},dropdownBehaviours:Xe([...n.dropdownBehaviours,Vd.button(()=>n.disabled||a.providers.checkUiComponentContext(n.context).shouldDisable),Fs(()=>a.providers.checkUiComponentContext(n.context)),Md.config({}),mn.config({}),...n.tooltip.map(ee=>jo.config(a.providers.tooltips.getConfig({tooltipText:a.providers.translate(ee),onShow:G=>{if(ni(g.get(),n.tooltip,(oe,le)=>le!==oe).getOr(!1)){const oe=a.providers.translate(g.get().getOr(""));jo.setComponents(G,a.providers.tooltips.getComponents({tooltipText:oe}))}}}))).toArray(),cn(Z,[Ud(n,d),Ih(n,d)]),cn(z,[Wo((ee,G)=>{n.listRole!=="listbox"&&KT(ee)})]),cn("update-dropdown-width-variable",[Me(Kg(),(ee,G)=>Kc.close(ee))]),cn("menubutton-update-display-text",[Me(Gl,(ee,G)=>{h.bind(oe=>oe.getOpt(ee)).each(oe=>{mn.set(oe,[Yo(a.providers.translate(G.event.text))])})}),Me(W1,(ee,G)=>{C.bind(oe=>oe.getOpt(ee)).each(oe=>{mn.set(oe,[Vh(G.event.icon,a.providers.icons)])})}),Me(YT,(ee,G)=>{const oe=a.providers.translate(G.event.text);qt(ee.element,"aria-label",oe),g.set(T.some(G.event.text))})])]),eventOrder:$o(m5,{[Ya()]:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[Al()]:["toolbar-button-events",jo.name(),Z,z]}),sandboxBehaviours:Xe([Lt.config({mode:"special",onLeft:S,onRight:S}),cn("dropdown-sandbox-events",[Me(A$,(ee,G)=>{Xj(ee),G.stop()}),Me(O$,(ee,G)=>{Jj(ee,G),G.stop()})])]),lazySink:a.getSink,toggleClass:`${s}--active`,parts:{menu:{...PS(!1,n.columns,n.presets),fakeFocus:n.searchable,...n.listRole==="listbox"?{}:{onHighlightItem:lI,onCollapseMenu:(ee,G,oe)=>{eo.getHighlighted(oe).each(le=>{lI(ee,oe,le)})},onDehighlightItem:eG}}},getAnchorOverrides:()=>({maxHeightFunction:(ee,G)=>{Uy()(ee,G-10)}}),fetch:ee=>Ss.nu(Le(n.fetch,ee))})).asSpec()},XT=n=>be(n),WI=n=>n.type==="separator",jI=n=>So(n,"getSubmenuItems"),kG={type:"separator"},_G=(n,s)=>{const a=Po(n,(i,d)=>XT(d)?d===""?i:d==="|"?i.length>0&&!WI(i[i.length-1])?i.concat([kG]):i:So(s,d.toLowerCase())?i.concat([s[d.toLowerCase()]]):i:i.concat([d]),[]);return a.length>0&&WI(a[a.length-1])&&a.pop(),a},cQ=(n,s)=>{const a=n.getSubmenuItems(),i=GI(a,s),d=$o(i.menus,{[n.value]:i.items}),g=$o(i.expansions,{[n.value]:n.value});return{item:n,menus:d,expansions:g}},AG=n=>{const s=It(n,"value").getOrThunk(()=>Ct("generated-menu-item"));return $o({value:s},n)},GI=(n,s)=>{const a=_G(be(n)?n.split(" "):n,s);return gs(a,(i,d)=>{if(jI(d)){const g=AG(d),h=cQ(g,s);return{menus:$o(i.menus,h.menus),items:[h.item,...i.items],expansions:$o(i.expansions,h.expansions)}}else return{...i,items:[d,...i.items]}},{menus:{},expansions:{},items:[]})},p5=n=>n.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-field",placeholder:s.placeholder})),OG=n=>n.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-results"})),og=(n,s,a,i)=>{const d=Ct("primary-menu"),g=GI(n,a.shared.providers.menuItems());if(g.items.length===0)return T.none();const h=p5(i),C=FT(d,g.items,s,a,i.isHorizontalMenu,h),S=OG(i),x=Ds(g.menus,(R,P)=>FT(P,R,s,a,!1,S)),A=$o(x,hm(d,C));return T.from(S1.tieredData(d,A,g.expansions))},nw=n=>!So(n,"items"),b5="data-value",JT=(n,s,a,i,d)=>$e(a,g=>nw(g)?{type:"togglemenuitem",...d?{}:{role:"option"},text:g.text,value:g.value,active:g.value===i,onAction:()=>{St.setValue(n,g.value),Ht(n,Oc,{name:s}),ln.focus(n)}}:{type:"nestedmenuitem",text:g.text,getSubmenuItems:()=>JT(n,s,g.items,i,d)}),v5=(n,s)=>ic(n,a=>nw(a)?dc(a.value===s,a):v5(a.items,s)),qI=(n,s,a)=>{const i=Qs(n.items,x=>!nw(x)),d=s.shared.providers,g=a.bind(x=>v5(n.items,x)).orThunk(()=>To(n.items).filter(nw)),h=n.label.map(x=>tg(x,d)),C=Dn.parts.field({dom:{},factory:{sketch:x=>h5({context:n.context,uid:x.uid,text:g.map(A=>A.text),icon:T.none(),tooltip:T.none(),role:dc(!i,"combobox"),...i?{}:{listRole:"listbox"},ariaLabel:n.label,fetch:(A,R)=>{const P=JT(A,n.name,n.items,St.getValue(A),i);R(og(P,Hu.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:T.none()}))},onSetup:ie(U),getApi:ie({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[Vo.config({}),Z1(g.map(A=>A.value),A=>br(A.element,b5),(A,R)=>{v5(n.items,R).each(P=>{qt(A.element,b5,P.value),Ht(A,Gl,{text:P.text})})})]},"tox-listbox",s.shared)}}),S={dom:{tag:"div",classes:["tox-listboxfield"]},components:[C]};return Dn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Ue([h.toArray(),[S]]),fieldBehaviours:Xe([Rt.config({disabled:()=>!n.enabled||d.checkUiComponentContext(n.context).shouldDisable,onDisabled:x=>{Dn.getField(x).each(Rt.disable)},onEnabled:x=>{Dn.getField(x).each(Rt.enable)}})])})},Wv=(n,s)=>({dom:{tag:"div",classes:n.classes},components:$e(n.items,s.shared.interpreter)}),KI=(n,s,a)=>{const i=$e(n.items,S=>({text:s.translate(S.text),value:S.value})),d=n.label.map(S=>tg(S,s)),g=Dn.parts.field({dom:{},...a.map(S=>({data:S})).getOr({}),selectAttributes:{size:n.size},options:i,factory:SO,selectBehaviours:Xe([Rt.config({disabled:()=>!n.enabled||s.checkUiComponentContext(n.context).shouldDisable}),Vo.config({}),cn("selectbox-change",[Me(hf(),(S,x)=>{Ht(S,Oc,{name:n.name})})])])}),h=n.size>1?T.none():T.some(ol("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),C={dom:{tag:"div",classes:["tox-selectfield"]},components:Ue([[g],h.toArray()])};return Dn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Ue([d.toArray(),[C]]),fieldBehaviours:Xe([Rt.config({disabled:()=>!n.enabled||s.checkUiComponentContext(n.context).shouldDisable,onDisabled:S=>{Dn.getField(S).each(Rt.disable)},onEnabled:S=>{Dn.getField(S).each(Rt.enable)}}),Fs(()=>s.checkUiComponentContext(n.context))])})},YI=n=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},a=d=>d in s?s[d]:1;let i=n.value.toFixed(a(n.unit));return i.indexOf(".")!==-1&&(i=i.replace(/\.?0*$/,"")),i+n.unit},QT=n=>{const a=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(n);if(a!==null){const i=parseFloat(a[1]),d=a[2];return Xt.value({value:i,unit:d})}else return Xt.error(n)},XI=(n,s)=>{const a={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},i=d=>So(a,d);return n.unit===s?T.some(n.value):i(n.unit)&&i(s)?a[n.unit]===a[s]?T.some(n.value):T.some(n.value/a[n.unit]*a[s]):T.none()},jv=n=>T.none(),DG=(n,s)=>a=>XI(a,s).map(i=>({value:i*n,unit:s})),JI=(n,s)=>{const a=QT(n).toOptional(),i=QT(s).toOptional();return ni(a,i,(d,g)=>XI(d,g.unit).map(h=>g.value/h).map(h=>DG(h,g.unit)).getOr(jv)).getOr(jv)},QI=(n,s)=>{let a=jv;const i=Ct("ratio-event"),d=K=>ol(K,{tag:"span",classes:["tox-icon","tox-lock-icon__"+K]},s.icons),g=()=>!n.enabled||s.checkUiComponentContext(n.context).shouldDisable,h=Fs(()=>s.checkUiComponentContext(n.context)),C=n.label.getOr("Constrain proportions"),S=s.translate(C),x=Ls.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":S,"data-mce-name":C}},components:[d("lock"),d("unlock")],buttonBehaviours:Xe([Rt.config({disabled:g}),h,Vo.config({}),jo.config(s.tooltips.getConfig({tooltipText:S}))])}),A=K=>({dom:{tag:"div",classes:["tox-form__group"]},components:K}),R=K=>Dn.parts.field({factory:Hm,inputClasses:["tox-textfield"],inputBehaviours:Xe([Rt.config({disabled:g}),h,Vo.config({}),cn("size-input-events",[Me(Ui(),(ee,G)=>{Ht(ee,i,{isField1:K})}),Me(hf(),(ee,G)=>{Ht(ee,Oc,{name:n.name})})])]),selectOnFocus:!1}),P=K=>({dom:{tag:"label",classes:["tox-label"]},components:[Yo(s.translate(K))]}),z=Ls.parts.field1(A([Dn.parts.label(P("Width")),R(!0)])),Z=Ls.parts.field2(A([Dn.parts.label(P("Height")),R(!1)]));return Ls.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[z,Z,A([P(m0),x])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(K,ee,G)=>{QT(St.getValue(K)).each(oe=>{a(oe).each(le=>{St.setValue(ee,YI(le))})})},coupledFieldBehaviours:Xe([Rt.config({disabled:g,onDisabled:K=>{Ls.getField1(K).bind(Dn.getField).each(Rt.disable),Ls.getField2(K).bind(Dn.getField).each(Rt.disable),Ls.getLock(K).each(Rt.disable)},onEnabled:K=>{Ls.getField1(K).bind(Dn.getField).each(Rt.enable),Ls.getField2(K).bind(Dn.getField).each(Rt.enable),Ls.getLock(K).each(Rt.enable)}}),Fs(()=>s.checkUiComponentContext("mode:design")),cn("size-input-events2",[Me(i,(K,ee)=>{const G=ee.event.isField1,oe=G?Ls.getField1(K):Ls.getField2(K),le=G?Ls.getField2(K):Ls.getField1(K),Se=oe.map(St.getValue).getOr(""),Te=le.map(St.getValue).getOr("");a=JI(Se,Te)})])])})},RG=(n,s,a)=>{const i=Lu.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Yo(s.translate(n.label))]}),d=Lu.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),g=Lu.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Lu.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:n.min,maxX:n.max,getInitialValue:ie(a.getOrThunk(()=>(Math.abs(n.max)-Math.abs(n.min))/2))},components:[i,d,g],sliderBehaviours:Xe([Vu.self(),ln.config({})]),onChoose:(h,C,S)=>{Ht(h,Oc,{name:n.name,value:S})},onChange:(h,C,S)=>{Ht(h,Oc,{name:n.name,value:S})}})},MG=(n,s)=>{const a=C=>({dom:{tag:"th",innerHtml:s.translate(C)}}),i=C=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:$e(C,a)}]}),d=C=>({dom:{tag:"td",innerHtml:s.translate(C)}}),g=C=>({dom:{tag:"tr"},components:$e(C,d)}),h=C=>({dom:{tag:"tbody"},components:$e(C,g)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[i(n.header),h(n.cells)],behaviours:Xe([Vo.config({}),ln.config({})])}},e7=(n,s)=>{const a=n.label.map(Z=>tg(Z,s)),i=[Rt.config({disabled:()=>n.disabled||s.checkUiComponentContext(n.context).shouldDisable}),Fs(()=>s.checkUiComponentContext(n.context)),Lt.config({mode:"execution",useEnter:n.multiline!==!0,useControlEnter:n.multiline===!0,execute:Z=>(On(Z,QS),T.some(!0))}),cn("textfield-change",[Me(_l(),(Z,K)=>{Ht(Z,Oc,{name:n.name})}),Me(G0(),(Z,K)=>{Ht(Z,Oc,{name:n.name})})]),Vo.config({})],d=n.validation.map(Z=>Qi.config({getRoot:K=>cu(K.element),invalidClass:"tox-invalid",validator:{validate:K=>{const ee=St.getValue(K),G=Z.validator(ee);return Ss.pure(G===!0?Xt.value(ee):Xt.error(G))},validateOnLoad:Z.validateOnLoad}})).toArray(),g=n.placeholder.fold(ie({}),Z=>({placeholder:s.translate(Z)})),h=n.inputMode.fold(ie({}),Z=>({inputmode:Z})),S={...n.spellcheck.fold(ie({}),Z=>({spellcheck:Z})),...g,...h,"data-mce-name":n.name},x=Dn.parts.field({tag:n.multiline===!0?"textarea":"input",...n.data.map(Z=>({data:Z})).getOr({}),inputAttributes:S,inputClasses:[n.classname],inputBehaviours:Xe(Ue([i,d])),selectOnFocus:!1,factory:Hm}),A=n.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[x]}:x,P=(n.flex?["tox-form__group--stretched"]:[]).concat(n.maximized?["tox-form-group--maximize"]:[]),z=[Rt.config({disabled:()=>n.disabled||s.checkUiComponentContext(n.context).shouldDisable,onDisabled:Z=>{Dn.getField(Z).each(Rt.disable)},onEnabled:Z=>{Dn.getField(Z).each(Rt.enable)}}),Fs(()=>s.checkUiComponentContext(n.context))];return Uv(a,A,P,z)},t7=(n,s,a)=>e7({name:n.name,multiline:!1,label:n.label,inputMode:n.inputMode,placeholder:n.placeholder,flex:!1,disabled:!n.enabled,classname:"tox-textfield",validation:T.none(),maximized:n.maximized,data:a,context:n.context,spellcheck:T.none()},s),NG=(n,s,a)=>e7({name:n.name,multiline:!0,label:n.label,inputMode:T.none(),placeholder:n.placeholder,flex:!0,disabled:!n.enabled,classname:"tox-textarea",validation:T.none(),maximized:n.maximized,data:a,context:n.context,spellcheck:n.spellcheck},s),n7=n=>({isEnabled:()=>!Rt.isDisabled(n),setEnabled:s=>Rt.set(n,!s),setActive:s=>{const a=n.element;s?(Ro(a,"tox-tbtn--enabled"),qt(a,"aria-pressed",!0)):(us(a,"tox-tbtn--enabled"),Qo(a,"aria-pressed"))},isActive:()=>Ws(n.element,"tox-tbtn--enabled"),setTooltip:s=>{Ht(n,YT,{text:s})},setText:s=>{Ht(n,Gl,{text:s})},setIcon:s=>Ht(n,W1,{icon:s})}),ow=(n,s,a,i,d=!0,g)=>{const h=n.buttonType==="bordered"?["bordered"]:[];return h5({text:n.text,icon:n.icon,tooltip:n.tooltip,ariaLabel:n.tooltip,searchable:n.search.isSome(),role:i,fetch:(C,S)=>{const x={pattern:n.search.isSome()?JS(C):""};n.fetch(A=>{S(og(A,Hu.CLOSE_ON_EXECUTE,a,{isHorizontalMenu:!1,search:n.search}))},x,n7(C))},onSetup:n.onSetup,getApi:C=>n7(C),columns:1,presets:"normal",classes:h,dropdownBehaviours:[...d?[Vo.config({})]:[]],context:n.context},s,a.shared,g)},BG=(n,s,a)=>{const i=g=>h=>{const C=!h.isActive();h.setActive(C),g.storage.set(C),a.shared.getSink().each(S=>{s().getOpt(S).each(x=>{kr(x.element),Ht(x,zu,{name:g.name,value:g.storage.get()})})})},d=g=>h=>{h.setActive(g.storage.get())};return g=>{g($e(n,h=>{const C=h.text.fold(()=>({}),S=>({text:S}));return{type:h.type,active:!1,...C,context:h.context,onAction:i(h),onSetup:d(h)}}))}},o7=n=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{"aria-label":n}},components:[Yo(n)]}),s7=(n,s,a)=>{n.customStateIcon.each(i=>s.push(a7(i,a.shared.providers.icons,n.customStateIconTooltip.fold(()=>[],d=>[jo.config(a.shared.providers.tooltips.getConfig({tooltipText:d}))]),["tox-icon-custom-state"])))},r7=Ct("leaf-label-event-id"),y5=({leaf:n,onLeafAction:s,visible:a,treeId:i,selectedId:d,backstage:g})=>{const h=n.menu.map(S=>ow(S,"tox-mbtn",g,T.none(),a)),C=[o7(n.title)];return s7(n,C,g),h.each(S=>C.push(S)),wr.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(a?["tox-tree--leaf__label--visible"]:[])},components:C,role:"treeitem",action:S=>{s(n.id),S.getSystem().broadcastOn([`update-active-item-${i}`],{value:n.id})},eventOrder:{[Sr()]:[r7,"keying"]},buttonBehaviours:Xe([...a?[Vo.config({})]:[],Pn.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),Fa.config({channels:{[`update-active-item-${i}`]:{onReceive:(S,x)=>{(x.value===n.id?Pn.on:Pn.off)(S)}}}}),cn(r7,[Wo((S,x)=>{d.each(A=>{(A===n.id?Pn.on:Pn.off)(S)})}),Me(Sr(),(S,x)=>{const A=x.event.raw.code==="ArrowLeft",R=x.event.raw.code==="ArrowRight";A?(Li(S.element,".tox-tree--directory").each(P=>{S.getSystem().getByDom(P).each(z=>{am(P,".tox-tree--directory__label").each(Z=>{z.getSystem().getByDom(Z).each(ln.focus)})})}),x.stop()):R&&x.stop()})])])})},a7=(n,s,a,i,d)=>ol(n,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"].concat(i||[]),behaviours:a,attributes:d},s),PG=(n,s)=>a7(n,s,[]),c7=Ct("directory-label-event-id"),i7=({directory:n,visible:s,noChildren:a,backstage:i})=>{const d=n.menu.map(C=>ow(C,"tox-mbtn",i,T.none())),g=[{dom:{tag:"div",classes:["tox-chevron"]},components:[PG("chevron-right",i.shared.providers.icons)]},o7(n.title)];s7(n,g,i),d.each(C=>{g.push(C)});const h=C=>{Li(C.element,".tox-tree--directory").each(S=>{C.getSystem().getByDom(S).each(x=>{const A=!Pn.isOn(x);Pn.toggle(x),Ht(C,"expand-tree-node",{expanded:A,node:n.id})})})};return wr.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(s?["tox-tree--directory__label--visible"]:[])},components:g,action:h,eventOrder:{[Sr()]:[c7,"keying"]},buttonBehaviours:Xe([...s?[Vo.config({})]:[],cn(c7,[Me(Sr(),(C,S)=>{const x=S.event.raw.code==="ArrowRight",A=S.event.raw.code==="ArrowLeft";x&&a&&S.stop(),(x||A)&&Li(C.element,".tox-tree--directory").each(R=>{C.getSystem().getByDom(R).each(P=>{!Pn.isOn(P)&&x||Pn.isOn(P)&&A?(h(C),S.stop()):A&&!Pn.isOn(P)&&(Li(P.element,".tox-tree--directory").each(z=>{am(z,".tox-tree--directory__label").each(Z=>{P.getSystem().getByDom(Z).each(ln.focus)})}),S.stop())})})})])])})},$G=({children:n,onLeafAction:s,visible:a,treeId:i,expandedIds:d,selectedId:g,backstage:h})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:n.map(C=>C.type==="leaf"?y5({leaf:C,selectedId:g,onLeafAction:s,visible:a,treeId:i,backstage:h}):C5({directory:C,expandedIds:d,selectedId:g,onLeafAction:s,labelTabstopping:a,treeId:i,backstage:h})),behaviours:Xe([ec.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:a}),mn.config({})])}),IG=Ct("directory-event-id"),C5=({directory:n,onLeafAction:s,labelTabstopping:a,treeId:i,backstage:d,expandedIds:g,selectedId:h})=>{const{children:C}=n,S=Bt(g),x=R=>C.map(P=>P.type==="leaf"?y5({leaf:P,selectedId:h,onLeafAction:s,visible:R,treeId:i,backstage:d}):C5({directory:P,expandedIds:S.get(),selectedId:h,onLeafAction:s,labelTabstopping:R,treeId:i,backstage:d})),A=g.includes(n.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[i7({directory:n,visible:a,noChildren:n.children.length===0,backstage:d}),$G({children:C,expandedIds:g,selectedId:h,onLeafAction:s,visible:A,treeId:i,backstage:d})],behaviours:Xe([cn(IG,[Wo((R,P)=>{Pn.set(R,A)}),Me("expand-tree-node",(R,P)=>{const{expanded:z,node:Z}=P.event;S.set(z?[...S.get(),Z]:S.get().filter(K=>K!==Z))})]),Pn.config({...n.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(R,P)=>{const z=R.components()[1],Z=x(P);P?ec.grow(z):ec.shrink(z),mn.set(z,Z)}})])}},LG=Ct("tree-event-id"),FG=(n,s)=>{const a=n.onLeafAction.getOr(U),i=n.onToggleExpand.getOr(U),d=n.defaultExpandedIds,g=Bt(d),h=Bt(n.defaultSelectedId),C=Ct("tree-id"),S=(x,A)=>n.items.map(R=>R.type==="leaf"?y5({leaf:R,selectedId:x,onLeafAction:a,visible:!0,treeId:C,backstage:s}):C5({directory:R,selectedId:x,onLeafAction:a,expandedIds:A,labelTabstopping:!0,treeId:C,backstage:s}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:S(h.get(),g.get()),behaviours:Xe([Lt.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),cn(LG,[Me("expand-tree-node",(x,A)=>{const{expanded:R,node:P}=A.event;g.set(R?[...g.get(),P]:g.get().filter(z=>z!==P)),i(g.get(),{expanded:R,node:P})})]),Fa.config({channels:{[`update-active-item-${C}`]:{onReceive:(x,A)=>{h.set(T.some(A.value)),mn.set(x,S(T.some(A.value),g.get()))}}}}),mn.config({})])}},ek=(n,s,a=[],i,d,g,h)=>{const C=s.fold(()=>({}),A=>({action:A})),S={buttonBehaviours:Xe([Vd.item(()=>!n.enabled||h.checkUiComponentContext(n.context).shouldDisable),Fs(()=>h.checkUiComponentContext(n.context)),Vo.config({}),...g.map(A=>jo.config(h.tooltips.getConfig({tooltipText:h.translate(A)}))).toArray(),cn("button press",[Wy("click")])].concat(a)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...C},x=$o(S,{dom:i});return $o(x,{components:d})},l7=(n,s,a,i=[],d)=>{const g=n.tooltip.map(x=>({"aria-label":a.translate(x)})).getOr({}),h={tag:"button",classes:["tox-tbtn"],attributes:{...g,"data-mce-name":d}},C=n.icon.map(x=>f5(x,a.icons)),S=Um([C]);return ek(n,s,i,h,S,n.tooltip,a)},S5=n=>{switch(n){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},w5=(n,s,a,i=[],d=[])=>{const g=a.translate(n.text),h=n.icon.map(z=>f5(z,a.icons)),C=[h.getOrThunk(()=>Yo(g))],S=n.buttonType.getOr(!n.primary&&!n.borderless?"secondary":"primary"),R={tag:"button",classes:[...S5(S),...h.isSome()?["tox-button--icon"]:[],...n.borderless?["tox-button--naked"]:[],...d],attributes:{"aria-label":g,"data-mce-name":n.text}},P=n.icon.map(ie(g));return ek(n,s,i,R,C,P,a)},u7=(n,s,a,i=[],d=[])=>{const g=w5(n,T.some(s),a,i,d);return wr.sketch(g)},x5=(n,s)=>a=>{s==="custom"?Ht(a,zu,{name:n,value:{}}):s==="submit"?On(a,QS):s==="cancel"?On(a,ng):console.error("Unknown button type: ",s)},d7=(n,s)=>s==="menu",E5=(n,s)=>s==="custom"||s==="cancel"||s==="submit",HG=(n,s)=>s==="togglebutton",zG=(n,s,a)=>{const i=n.icon.map(G=>Vh(G,s.icons)).map(to),d=G=>{Ht(G,zu,{name:n.name,value:{setIcon:oe=>{i.map(le=>le.getOpt(G).each(Se=>{mn.set(Se,[Vh(oe,s.icons)])}))}}})},g=n.buttonType.getOr(n.primary?"primary":"secondary"),h={...n,name:n.name??"",primary:g==="primary",tooltip:n.tooltip,enabled:n.enabled??!1,borderless:!1},C=h.tooltip.or(n.text).map(G=>({"aria-label":s.translate(G)})).getOr({}),S=S5(g??"secondary"),x=n.icon.isSome()&&n.text.isSome(),A={tag:"button",classes:[...S.concat(n.icon.isSome()?["tox-button--icon"]:[]),...n.active?["tox-button--enabled"]:[],...x?["tox-button--icon-and-text"]:[]],attributes:{...C,...jt(a)?{"data-mce-name":a}:{}}},R=[],P=s.translate(n.text.getOr("")),z=Yo(P),K=[...Um([i.map(G=>G.asSpec())]),...n.text.isSome()?[z]:[]],ee=ek(h,T.some(d),R,A,K,n.tooltip,s);return wr.sketch(ee)},sw=(n,s,a)=>{if(d7(n,s)){const i=()=>h,d=n,g={...n,buttonType:"default",type:"menubutton",search:T.none(),onSetup:C=>(C.setEnabled(n.enabled),U),fetch:BG(d.items,i,a)},h=to(ow(g,"tox-tbtn",a,T.none(),!0,n.text.or(n.tooltip).getOrUndefined()));return h.asSpec()}else if(E5(n,s)){const i=x5(n.name,s),d={...n,context:s==="cancel"?"any":n.context,borderless:!1};return u7(d,i,a.shared.providers,[])}else{if(HG(n,s))return zG(n,a.shared.providers,n.text.or(n.tooltip).getOrUndefined());throw console.error("Unknown footer button type: ",s),new Error("Unknown footer button type")}},VG=(n,s)=>{const a=x5(n.name,"custom");return aG(T.none(),Dn.parts.field({factory:wr,...w5(n,T.some(a),s,[VT(""),Vu.self()])}))},m7={type:"separator"},UG=n=>({type:"menuitem",value:n.url,text:n.title,meta:{attach:n.attach},onAction:U}),Gv=(n,s)=>({type:"menuitem",value:s,text:n,meta:{attach:void 0},onAction:U}),ZG=n=>$e(n,UG),f7=(n,s)=>Co(s,a=>a.type===n),g7=(n,s)=>ZG(f7(n,s)),WG=n=>g7("header",n.targets),Wd=n=>g7("anchor",n.targets),tk=n=>T.from(n.anchorTop).map(s=>Gv("<top>",s)).toArray(),nk=n=>T.from(n.anchorBottom).map(s=>Gv("<bottom>",s)).toArray(),jG=n=>$e(n,s=>Gv(s,s)),T5=n=>Po(n,(s,a)=>s.length===0||a.length===0?s.concat(a):s.concat(m7,a),[]),k5=(n,s)=>{const a=n.toLowerCase();return Co(s,i=>{const d=i.meta!==void 0&&i.meta.text!==void 0?i.meta.text:i.text,g=i.value??"";return xs(d.toLowerCase(),a)||xs(g.toLowerCase(),a)})},_5=(n,s,a)=>{var h;const i=St.getValue(s),d=((h=i==null?void 0:i.meta)==null?void 0:h.text)??i.value;return a.getLinkInformation().fold(()=>[],C=>{const S=k5(d,jG(a.getHistory(n)));return n==="file"?T5([S,k5(d,WG(C)),k5(d,Ue([tk(C),Wd(C),nk(C)]))]):S})},A5=Ct("aria-invalid"),O5=(n,s,a,i)=>{const d=s.shared.providers,g=oe=>{const le=St.getValue(oe);a.addToHistory(le.value,n.filetype)},h={...i.map(oe=>({initialData:oe})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{type:"url"},minChars:0,responseTime:0,fetch:oe=>{const le=_5(n.filetype,oe,a),Se=og(le,Hu.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:T.none()});return Ss.pure(Se)},getHotspot:oe=>Z.getOpt(oe),onSetValue:(oe,le)=>{oe.hasConfigured(Qi)&&Qi.run(oe).get(U)},typeaheadBehaviours:Xe([...a.getValidationHandler().map(oe=>Qi.config({getRoot:le=>cu(le.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(le,Se)=>{A.getOpt(le).each(Te=>{qt(Te.element,"title",d.translate(Se))})}},validator:{validate:le=>{const Se=St.getValue(le);return dg.nu(Te=>{oe({type:n.filetype,url:Se.value},ct=>{if(ct.status==="invalid"){qt(le.element,"aria-errormessage",A5);const lt=Xt.error(ct.message);Te(lt)}else{Qo(le.element,"aria-errormessage");const lt=Xt.value(ct.message);Te(lt)}})})},validateOnLoad:!1}})).toArray(),Rt.config({disabled:()=>!n.enabled||d.checkUiComponentContext(n.context).shouldDisable}),Vo.config({}),cn("urlinput-events",[Me(_l(),oe=>{const le=Hc(oe.element),Se=le.trim();Se!==le&&im(oe.element,Se),n.filetype==="file"&&Ht(oe,Oc,{name:n.name})}),Me(hf(),oe=>{Ht(oe,Oc,{name:n.name}),g(oe)}),Me(G0(),oe=>{Ht(oe,Oc,{name:n.name}),g(oe)})])]),eventOrder:{[_l()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:oe=>oe.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:PS(!1,1,"normal")},onExecute:(oe,le,Se)=>{Ht(le,QS,{})},onItemExecute:(oe,le,Se,Te)=>{g(oe),Ht(oe,Oc,{name:n.name})}},C=Dn.parts.field({...h,factory:XO}),S=n.label.map(oe=>tg(oe,d)),A=to(((oe,le,Se=oe,Te=oe)=>ol(Se,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+oe],attributes:{title:d.translate(Te),"aria-live":"polite",...le.fold(()=>({}),ct=>({id:ct}))}},d.icons))("invalid",T.some(A5),"warning")),R=to({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[A.asSpec()]}),P=a.getUrlPicker(n.filetype),z=Ct("browser.url.event"),Z=to({dom:{tag:"div",classes:["tox-control-wrap"]},components:[C,R.asSpec()],behaviours:Xe([Rt.config({disabled:()=>!n.enabled||d.checkUiComponentContext(n.context).shouldDisable})])}),K=to(u7({context:n.context,name:n.name,icon:T.some("browse"),text:n.picker_text.or(n.label).getOr(""),enabled:n.enabled,primary:!1,buttonType:T.none(),borderless:!0},oe=>On(oe,z),d,[],["tox-browse-url"])),ee=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:Ue([[Z.asSpec()],P.map(()=>K.asSpec()).toArray()])}),G=oe=>{We.getCurrent(oe).each(le=>{const Se=St.getValue(le),Te={fieldname:n.name,...Se};P.each(ct=>{ct(Te).get(lt=>{St.setValue(le,lt),Ht(oe,Oc,{name:n.name})})})})};return Dn.sketch({dom:fI(),components:S.toArray().concat([ee()]),fieldBehaviours:Xe([Rt.config({disabled:()=>!n.enabled||d.checkUiComponentContext(n.context).shouldDisable,onDisabled:oe=>{Dn.getField(oe).each(Rt.disable),K.getOpt(oe).each(Rt.disable)},onEnabled:oe=>{Dn.getField(oe).each(Rt.enable),K.getOpt(oe).each(Rt.enable)}}),Fs(()=>d.checkUiComponentContext(n.context)),cn("url-input-events",[Me(z,G)])])})},GG=(n,s)=>{const a=iZ(n.icon,s.icons);return Dd.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${n.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:n.url?void 0:a},components:n.url?[wr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:a,attributes:{title:s.translate(n.iconTooltip)}},action:i=>Ht(i,zu,{name:"alert-banner",value:n.url}),buttonBehaviours:Xe([ED()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(n.text)}}]})},qG=(n,s,a)=>{const i=S=>(S.element.dom.click(),T.some(!0)),d=Dn.parts.field({factory:{sketch:Et},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:Xe([Vu.self(),Rt.config({disabled:()=>!n.enabled||s.checkUiComponentContext(n.context).shouldDisable,onDisabled:S=>{cu(S.element).each(x=>Ro(x,"tox-checkbox--disabled"))},onEnabled:S=>{cu(S.element).each(x=>us(x,"tox-checkbox--disabled"))}}),Vo.config({}),ln.config({}),SI(a,Y2,du),Lt.config({mode:"special",onEnter:i,onSpace:i,stopSpaceKeyup:!0}),cn("checkbox-events",[Me(hf(),(S,x)=>{Ht(S,Oc,{name:n.name})})])])}),g=Dn.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[Yo(s.translate(n.label))],behaviours:Xe([Md.config({})])}),h=S=>ol(S==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+S]},s.icons),C=to({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[h("checked"),h("unchecked")]});return Dn.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[d,C.asSpec(),g],fieldBehaviours:Xe([Rt.config({disabled:()=>!n.enabled||s.checkUiComponentContext(n.context).shouldDisable}),Fs(()=>s.checkUiComponentContext(n.context))])})},h7=(n,s)=>{const a=["tox-form__group",...n.stretched?["tox-form__group--stretched"]:[]],i=cn("htmlpanel",[Wo(d=>{n.onInit(d.element.dom)})]);return n.presets==="presentation"?Dd.sketch({dom:{tag:"div",classes:a,innerHtml:n.html},containerBehaviours:Xe([jo.config({...s.tooltips.getConfig({tooltipText:"",onShow:d=>{wo(d.element,"[data-mce-tooltip]:hover").orThunk(()=>or(d.element)).each(g=>{Pr(g,"data-mce-tooltip").each(h=>{jo.setComponents(d,s.tooltips.getComponents({tooltipText:h}))})})}}),mode:"children-normal",anchor:d=>({type:"node",node:wo(d.element,"[data-mce-tooltip]:hover").orThunk(()=>or(d.element).filter(g=>Pr(g,"data-mce-tooltip").isSome())),root:d.element,layouts:{onLtr:ie([qs,ss,cr,Vr,Gs,_r]),onRtl:ie([qs,ss,cr,Vr,Gs,_r])},bubble:Ec(0,-2,{})})}),i])}):Dd.sketch({dom:{tag:"div",classes:a,innerHtml:n.html,attributes:{role:"document"}},containerBehaviours:Xe([Vo.config({}),ln.config({}),i])})},Er=n=>(s,a,i,d,g)=>It(a,"name").fold(()=>n(a,d,T.none(),g),h=>s.field(h,n(a,d,It(i,h),g))),KG=n=>(s,a,i,d,g)=>{const h=$o(a,{source:"dynamic"});return Er(n)(s,h,i,d,g)},D5={bar:Er((n,s)=>dI(n,s.shared)),collection:Er((n,s,a)=>cG(n,s.shared.providers,a)),alertbanner:Er((n,s)=>GG(n,s.shared.providers)),input:Er((n,s,a)=>t7(n,s.shared.providers,a)),textarea:Er((n,s,a)=>NG(n,s.shared.providers,a)),label:Er((n,s,a,i)=>EG(n,s.shared,i)),iframe:KG((n,s,a)=>tw(n,s.shared.providers,a)),button:Er((n,s)=>VG(n,s.shared.providers)),checkbox:Er((n,s,a)=>qG(n,s.shared.providers,a)),colorinput:Er((n,s,a)=>lG(n,s.shared,s.colorinput,a)),colorpicker:Er((n,s,a)=>WT(n,s.shared.providers,a)),dropzone:Er((n,s,a)=>vG(n,s.shared.providers,a)),grid:Er((n,s)=>yG(n,s.shared)),listbox:Er((n,s,a)=>qI(n,s,a)),selectbox:Er((n,s,a)=>KI(n,s.shared.providers,a)),sizeinput:Er((n,s)=>QI(n,s.shared.providers)),slider:Er((n,s,a)=>RG(n,s.shared.providers,a)),urlinput:Er((n,s,a)=>O5(n,s,s.urlinput,a)),customeditor:Er(pG),htmlpanel:Er((n,s)=>h7(n,s.shared.providers)),imagepreview:Er((n,s,a)=>xG(n,a)),table:Er((n,s)=>MG(n,s.shared.providers)),tree:Er((n,s)=>FG(n,s)),panel:Er((n,s)=>Wv(n,s))},YG={field:(n,s)=>s,record:ie([])},p7=(n,s,a,i,d)=>{const g=$o(i,{shared:{interpreter:h=>ok(n,h,a,g,d)}});return ok(n,s,a,g,d)},ok=(n,s,a,i,d)=>It(D5,s.type).fold(()=>(console.error(`Unknown factory type "${s.type}", defaulting to container: `,s),s),g=>g(n,s,a,i,d)),R5=(n,s,a,i)=>ok(YG,n,s,a,i),rw={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},XG=(n,s,a)=>{const d={maxHeightFunction:Af()},g=()=>({type:"node",root:vl(nr(n())),node:T.from(n()),bubble:Ec(12,12,rw),layouts:{onRtl:()=>[Ba],onLtr:()=>[_f]},overrides:d}),h=()=>({type:"hotspot",hotspot:s(),bubble:Ec(-12,12,rw),layouts:{onRtl:()=>[cr,Gs,qs],onLtr:()=>[Gs,cr,qs]},overrides:d});return()=>a()?g():h()},JG=(n,s,a,i)=>{const g={maxHeightFunction:Af()},h=()=>({type:"node",root:vl(nr(s())),node:T.from(s()),bubble:Ec(12,12,rw),layouts:{onRtl:()=>[oa],onLtr:()=>[oa]},overrides:g}),C=()=>n?{type:"node",root:vl(nr(s())),node:T.from(s()),bubble:Ec(0,-ba(s()),rw),layouts:{onRtl:()=>[ss],onLtr:()=>[ss]},overrides:g}:{type:"hotspot",hotspot:a(),bubble:Ec(0,0,rw),layouts:{onRtl:()=>[ss],onLtr:()=>[ss]},overrides:g};return()=>i()?h():C()},QG=(n,s,a)=>{const i=()=>({type:"node",root:vl(nr(n())),node:T.from(n()),layouts:{onRtl:()=>[oa],onLtr:()=>[oa]}}),d=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[qs],onLtr:()=>[qs]}});return()=>a()?i():d()},b7=(n,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const a=n.selection.getRng(),i=n.model.table.getSelectedCells();if(i.length>1){const d=i[0],g=i[i.length-1],h={firstCell:at.fromDom(d),lastCell:at.fromDom(g)};return T.some(h)}return T.some(Ng.range(at.fromDom(a.startContainer),a.startOffset,at.fromDom(a.endContainer),a.endOffset))}}),eq=n=>s=>({type:"node",root:n(),node:s}),tq=(n,s,a,i)=>{const d=Av(n),g=()=>at.fromDom(n.getBody()),h=()=>at.fromDom(n.getContentAreaContainer()),C=()=>d||!i();return{inlineDialog:XG(h,s,C),inlineBottomDialog:JG(n.inline,h,a,C),banner:QG(h,s,C),cursor:b7(n,g),node:eq(g)}},nq=n=>(s,a)=>{YR(n)(s,a)},oq=n=>()=>ZR(n),sq=n=>s=>BT(n,s),rq=n=>s=>W8(n,s),aq=n=>({colorPicker:nq(n),hasCustomColors:oq(n),getColors:sq(n),getColorCols:rq(n)}),cq=n=>()=>GP(n),iq=n=>({isDraggableModal:cq(n)}),lq=n=>{const s=Bt(oT(n)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},uq=n=>Bn(n,"items"),v7=n=>Bn(n,"format"),M5=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],y7=n=>So(n,"items"),sk=n=>So(n,"block"),C7=n=>So(n,"inline"),dq=n=>So(n,"selector"),S7=n=>Po(n,(s,a)=>{if(y7(a)){const i=S7(a.items);return{customFormats:s.customFormats.concat(i.customFormats),formats:s.formats.concat([{title:a.title,items:i.formats}])}}else if(C7(a)||sk(a)||dq(a)){const d=`custom-${be(a.name)?a.name:a.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:d,format:a}]),formats:s.formats.concat([{title:a.title,format:d,icon:a.icon}])}}else return{...s,formats:s.formats.concat(a)}},{customFormats:[],formats:[]}),mq=(n,s)=>{const a=S7(s),i=d=>{gt(d,g=>{n.formatter.has(g.name)||n.formatter.register(g.name,g.format)})};return n.formatter?i(a.customFormats):n.on("init",()=>{i(a.customFormats)}),a.formats},w7=n=>PP(n).map(s=>{const a=mq(n,s);return $P(n)?M5.concat(a):a}).getOr(M5),fq=n=>{const s=mo(n);return s.length===1&&vo(s,"title")},x7=(n,s,a)=>({...n,type:"formatter",isSelected:s(n.format),getStylePreview:a(n.format)}),E7=(n,s,a,i)=>{const d=S=>x7(S,a,i),g=S=>{const x=C(S.items);return{...S,type:"submenu",getStyleItems:ie(x)}},h=S=>{const x=be(S.name)?S.name:Ct(S.title),A=`custom-${x}`,R={...S,type:"formatter",format:A,isSelected:a(A),getStylePreview:i(A)};return n.formatter.register(x,R),R},C=S=>$e(S,x=>uq(x)?g(x):v7(x)?d(x):fq(x)?{...x,type:"separator"}:h(x));return C(s)},T7=n=>{const s=C=>()=>n.formatter.match(C),a=C=>()=>{const S=n.formatter.get(C);return S!==void 0?T.some({tag:S.length>0&&(S[0].inline||S[0].block)||"div",styles:n.dom.parseStyle(n.formatter.getCssText(C))}):T.none()},i=Bt([]),d=Bt([]),g=Bt(!1);return n.on("PreInit",C=>{const S=w7(n),x=E7(n,S,s,a);i.set(x)}),n.on("addStyleModifications",C=>{const S=E7(n,C.items,s,a);d.set(S),g.set(C.replace)}),{getData:()=>{const C=g.get()?[]:i.get(),S=d.get();return C.concat(S)}}},k7=n=>{let i=0;const d=()=>i>0,g=C=>[{dom:{tag:"div",classes:["tox-tooltip__body"]},components:[Yo(C.tooltipText)]}];return{getConfig:C=>({delayForShow:()=>d()?60:300,delayForHide:ie(300),exclusive:!0,lazySink:n,tooltipDom:{tag:"div",classes:["tox-tooltip","tox-tooltip--up"]},tooltipComponents:g(C),onShow:(S,x)=>{i++,C.onShow&&C.onShow(S,x)},onHide:(S,x)=>{i--,C.onHide&&C.onHide(S,x)},onSetup:C.onSetup}),getComponents:g}},gq=n=>jt(n)&&n.nodeType===1,_7=jm.trim,A7=n=>s=>!!(gq(s)&&(s.contentEditable===n||s.getAttribute("data-mce-contenteditable")===n)),hq=A7("true"),pq=A7("false"),Uh=(n,s,a,i,d)=>({type:n,title:s,url:a,level:i,attach:d}),O7=n=>{let s=n;for(;s=s.parentNode;){const a=s.contentEditable;if(a&&a!=="inherit")return hq(s)}return!1},aw=(n,s)=>$e(Lr(at.fromDom(s),n),a=>a.dom),cw=n=>n.innerText||n.textContent,D7=n=>n.id?n.id:Ct("h"),R7=n=>n&&n.nodeName==="A"&&(n.id||n.name)!==void 0,M7=n=>R7(n)&&N7(n),bq=n=>n&&/^(H[1-6])$/.test(n.nodeName),N7=n=>O7(n)&&!pq(n),vq=n=>bq(n)&&N7(n),yq=n=>bq(n)?parseInt(n.nodeName.substr(1),10):0,Cq=n=>{const s=D7(n),a=()=>{n.id=s};return Uh("header",cw(n)??"","#"+s,yq(n),a)},Sq=n=>{const s=n.id||n.name,a=cw(n);return Uh("anchor",a||"#"+s,"#"+s,0,U)},wq=n=>$e(Co(n,vq),Cq),qv=n=>$e(Co(n,M7),Sq),iw=n=>aw("h1,h2,h3,h4,h5,h6,a:not([href])",n),N5=n=>_7(n.title).length>0,xq={find:n=>{const s=iw(n);return Co(wq(s).concat(qv(s)),N5)}},Kv="tinymce-url-history",B7=5,Yv=n=>be(n)&&/^https?/.test(n),P7=n=>xt(n)&&n.length<=B7&&Vn(n,Yv),$7=n=>we(n)&&ki(n,s=>!P7(s)).isNone(),I7=()=>{const n=V1.getItem(Kv);if(n===null)return{};let s;try{s=JSON.parse(n)}catch(a){if(a instanceof SyntaxError)return console.log("Local storage "+Kv+" was not valid JSON",a),{};throw a}return $7(s)?s:(console.log("Local storage "+Kv+" was not valid format",s),{})},Eq=n=>{if(!$7(n))throw new Error(`Bad format for history:
`+JSON.stringify(n));V1.setItem(Kv,JSON.stringify(n))},Tq=n=>{const s=I7();return It(s,n).getOr([])},kq=(n,s)=>{if(!Yv(n))return;const a=I7(),i=It(a,s).getOr([]),d=Co(i,g=>g!==n);a[s]=[n].concat(d).slice(0,B7),Eq(a)},L7=n=>!!n,F7=n=>Ds(jm.makeMap(n,/[, ]/),L7),rk=n=>T.from(ZP(n)),B5=n=>{const s=T.from(rD(n)).filter(L7).map(F7);return rk(n).fold(Cn,a=>s.fold(yt,i=>mo(i).length>0?i:!1))},_q=(n,s)=>{const a=B5(n);return rn(a)?a?rk(n):T.none():a[s]?rk(n):T.none()},ak=(n,s)=>_q(n,s).map(a=>i=>Ss.nu(d=>{const g=(C,S)=>{if(!be(C))throw new Error("Expected value to be string");if(S!==void 0&&!we(S))throw new Error("Expected meta to be a object");d({value:C,meta:S})},h={filetype:s,fieldname:i.fieldname,...T.from(i.meta).getOr({})};a.call(n,g,i.value,h)})),lw=n=>T.from(n).filter(be).getOrUndefined(),H7=n=>aD(n)?T.some({targets:xq.find(n.getBody()),anchorTop:lw(jP(n)),anchorBottom:lw(cD(n))}):T.none(),Aq=n=>T.from(WP(n)),Oq=n=>({getHistory:Tq,addToHistory:kq,getLinkInformation:()=>H7(n),getValidationHandler:()=>Aq(n),getUrlPicker:s=>ak(n,s)}),Dq=(n,s,a,i)=>{const d=Bt(!1),g=lq(s),h={icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:Ha.translate,isDisabled:()=>!s.ui.isEnabled(),getOption:s.options.get,tooltips:k7(n.dialog),checkUiComponentContext:G=>{if(J4(s))return{contextType:"disabled",shouldDisable:!0};const[oe,le=""]=G.split(":"),Se=s.ui.registry.getAll().contexts,Te=It(Se,oe).fold(()=>It(Se,"mode").map(ct=>ct("design")).getOr(!1),ct=>le.charAt(0)==="!"?!ct(le.slice(1)):ct(le));return{contextType:oe,shouldDisable:!Te}}},C=Oq(s),S=T7(s),x=aq(s),A=iq(s),R=()=>d.get(),P=G=>d.set(G),z={shared:{providers:h,anchors:tq(s,a,i,g.isPositionedAtTop),header:g},urlinput:C,styles:S,colorinput:x,dialog:A,isContextMenuOpen:R,setContextMenuState:P},Z=G=>T.none(),K={...z,shared:{...z.shared,interpreter:G=>R5(G,{},K,Z),getSink:n.popup}},ee={...z,shared:{...z.shared,interpreter:G=>R5(G,{},ee,Z),getSink:n.dialog}};return{popup:K,dialog:ee}},P5={skipFocus:"ToggleToolbarDrawer skipFocus is deprecated see migration guide: https://www.tiny.cloud/docs/tinymce/latest/migration-from-7x/"},Rq=n=>{console.warn(P5[n],new Error().stack)},$5=(n,s,a)=>{const i=(Fe,Ft)=>{gt([s,...a],Ot=>{Ot.broadcastEvent(Fe,Ft)})},d=(Fe,Ft)=>{gt([s,...a],Ot=>{Ot.broadcastOn([Fe],Ft)})},g=Fe=>d(wu(),{target:Fe.target}),h=Fe=>{d(mh(),{closedTooltip:()=>{Fe.preventDefault()}})},C=pa(),S=go(C,"touchstart",g),x=go(C,"touchmove",Fe=>i(hx(),Fe)),A=go(C,"touchend",Fe=>i(Cy(),Fe)),R=go(C,"mousedown",g),P=go(C,"mouseup",Fe=>{Fe.raw.button===0&&d(wd(),{target:Fe.target})}),z=Fe=>d(wu(),{target:at.fromDom(Fe.target)}),Z=Fe=>{Fe.button===0&&d(wd(),{target:at.fromDom(Fe.target)})},K=()=>{gt(n.editorManager.get(),Fe=>{n!==Fe&&Fe.dispatch("DismissPopups",{relatedTarget:n})})},ee=Fe=>i(Sy(),lu(Fe)),G=Fe=>{d(Ks(),{}),i(Kg(),lu(Fe))},oe=nr(at.fromDom(n.getElement())),le=ci(oe,"scroll",Fe=>{requestAnimationFrame(()=>{const Ft=n.getContainer();if(Ft!=null){const En=Gf(n,s.element).map(Ut=>[Ut.element,...Ut.others]).getOr([]);Qs(En,Ut=>Hn(Ut,Fe.target))&&(n.dispatch("ElementScroll",{target:Fe.target.dom}),i(bx(),Fe))}})}),Se=()=>d(Ks(),{}),Te=Fe=>{Fe.state&&d(wu(),{target:at.fromDom(n.getContainer())})},ct=Fe=>{d(wu(),{target:at.fromDom(Fe.relatedTarget.getContainer())})},lt=Fe=>n.dispatch("focusin",Fe),Ne=Fe=>n.dispatch("focusout",Fe);n.on("PostRender",()=>{n.on("click",z),n.on("tap",z),n.on("mouseup",Z),n.on("mousedown",K),n.on("ScrollWindow",ee),n.on("ResizeWindow",G),n.on("ResizeEditor",Se),n.on("AfterProgressState",Te),n.on("DismissPopups",ct),n.on("CloseActiveTooltips",h),gt([s,...a],Fe=>{Fe.element.dom.addEventListener("focusin",lt),Fe.element.dom.addEventListener("focusout",Ne)})}),n.on("remove",()=>{n.off("click",z),n.off("tap",z),n.off("mouseup",Z),n.off("mousedown",K),n.off("ScrollWindow",ee),n.off("ResizeWindow",G),n.off("ResizeEditor",Se),n.off("AfterProgressState",Te),n.off("DismissPopups",ct),n.off("CloseActiveTooltips",h),gt([s,...a],Fe=>{Fe.element.dom.removeEventListener("focusin",lt),Fe.element.dom.removeEventListener("focusout",Ne)}),R.unbind(),S.unbind(),x.unbind(),A.unbind(),P.unbind(),le.unbind()}),n.on("detach",()=>{gt([s,...a],ME),gt([s,...a],Fe=>Fe.destroy())})},Mq=U,I5=Cn,z7=ie([]);var Nq=Object.freeze({__proto__:null,setup:Mq,isDocked:I5,getBehaviours:z7});const L5=ie(Ct("toolbar-height-change")),qm={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},V7="tox-tinymce--toolbar-sticky-on",Bq="tox-tinymce--toolbar-sticky-off",uQ=(n,s)=>{const a=hc(s),d=ap(s).dom.innerHeight,g=Ns(a),h=at.fromDom(n.elm),C=um(h),S=vr(h),x=C.y,A=x+S,R=pc(s),P=vr(s),z=R.top,Z=z+P,K=Math.abs(z-g.top)<2,ee=Math.abs(Z-(g.top+d))<2;if(K&&x<Z)rm(g.left,x-P,a);else if(ee&&A>z){const G=x-d+S+P;rm(g.left,G,a)}},uw=(n,s)=>vo(rs.getModes(n),s),F5=n=>{const s=i=>ba(i)+(parseInt(es(i,"margin-top"),10)||0)+(parseInt(es(i,"margin-bottom"),10)||0),a=n.element;cu(a).each(i=>{const d="padding-"+rs.getModes(n)[0];if(rs.isDocked(n)){const g=va(i);on(a,"width",g+"px"),on(i,d,s(a)+"px")}else Nn(a,"width"),Nn(i,d)})},H5=(n,s)=>{s?(us(n,qm.fadeOutClass),gu(n,[qm.transitionClass,qm.fadeInClass])):(us(n,qm.fadeInClass),gu(n,[qm.fadeOutClass,qm.transitionClass]))},U7=(n,s)=>{const a=at.fromDom(n.getContainer());s?(Ro(a,V7),us(a,Bq)):(Ro(a,Bq),us(a,V7))},Pq=(n,s)=>{const a=hc(s);Nr(a).filter(i=>!Hn(s,i)).filter(i=>Hn(i,at.fromDom(a.dom.body))||I(n,i)).each(()=>kr(s))},$q=(n,s)=>or(n).orThunk(()=>s().toOptional().bind(a=>or(a.element))),Iq=(n,s,a)=>{n.inline||(s.header.isPositionedAtTop()||n.on("ResizeEditor",()=>{a().each(rs.reset)}),n.on("ResizeWindow ResizeEditor",()=>{a().each(F5)}),n.on("SkinLoaded",()=>{a().each(i=>{rs.isDocked(i)?rs.reset(i):rs.refresh(i)})}),n.on("FullscreenStateChanged",()=>{a().each(rs.reset)})),n.on("AfterScrollIntoView",i=>{a().each(d=>{rs.refresh(d);const g=d.element;lp(g)&&uQ(i,g)})}),n.on("PostRender",()=>{U7(n,!1)})},Lq=n=>n().map(rs.isDocked).getOr(!1),Z7=()=>[Fa.config({channels:{[L5()]:{onReceive:F5}}})],W7=(n,s)=>{const a=pn(),i=s.getSink,d=C=>{i().each(S=>C(S.element))},g=C=>{n.inline||F5(C),U7(n,rs.isDocked(C)),C.getSystem().broadcastOn([Ks()],{}),i().each(S=>S.getSystem().broadcastOn([Ks()],{}))},h=n.inline?[]:Z7();return[ln.config({}),rs.config({contextual:{lazyContext:C=>{const S=ba(C.element),x=n.inline?n.getContentAreaContainer():n.getContainer();return T.from(x).map(A=>{const R=js(at.fromDom(A));return Gf(n,C.element).fold(()=>{const z=R.height-S,Z=R.y+(uw(C,"top")?0:S);return rr(R.x,Z,R.width,z)},z=>{const Z=ud(R,k1(z)),K=uw(C,"top")?Z.y:Z.y+S;return rr(Z.x,K,Z.width,Z.height-S)})})},onShow:()=>{d(C=>H5(C,!0))},onShown:C=>{d(S=>ea(S,[qm.transitionClass,qm.fadeInClass])),a.get().each(S=>{Pq(C.element,S),a.clear()})},onHide:C=>{$q(C.element,i).fold(a.clear,a.set),d(S=>H5(S,!1))},onHidden:()=>{d(C=>ea(C,[qm.transitionClass]))},...qm},lazyViewport:C=>Gf(n,C.element).fold(()=>{const x=ta(),A=VP(n),R=x.y+(uw(C,"top")&&!c$(n)?A:0),P=x.height-(uw(C,"bottom")?A:0);return{bounds:rr(x.x,R,x.width,P),optScrollEnv:T.none()}},x=>({bounds:k1(x),optScrollEnv:T.some({currentScrollTop:x.element.dom.scrollTop,scrollElmTop:pc(x.element).top})})),modes:[s.header.getDockingMode()],onDocked:g,onUndocked:g}),...h]};var Fq=Object.freeze({__proto__:null,setup:Iq,isDocked:Lq,getBehaviours:W7});const Hq=n=>{const s=n.editor,a=n.sticky?W7:z7;return{uid:n.uid,dom:n.dom,components:n.components,behaviours:Xe(a(s,n.sharedBackstage))}};var j7=Ji({factory:(n,s)=>{const a=(d,g)=>{const h=$e(g,C=>{const S={type:"menubutton",text:C.text,fetch:A=>{A(C.getItems())},context:"any"},x=tR(S).mapError(A=>zg(A)).getOrDie();return ow(x,"tox-mbtn",s.backstage,T.some("menuitem"))});mn.set(d,h)},i={focus:Lt.focusIn,setMenus:a};return{uid:n.uid,dom:n.dom,components:[],behaviours:Xe([mn.config({}),cn("menubar-events",[Wo(d=>{n.onSetup(d)}),Me(Uc(),(d,g)=>{wo(d.element,".tox-mbtn--active").each(h=>{ya(g.event.target,".tox-mbtn").each(C=>{Hn(h,C)||d.getSystem().getByDom(h).each(S=>{d.getSystem().getByDom(C).each(x=>{Kc.expand(x),Kc.close(S),ln.focus(x)})})})})}),Me(X0(),(d,g)=>{g.event.prevFocus.bind(h=>d.getSystem().getByDom(h).toOptional()).each(h=>{g.event.newFocus.bind(C=>d.getSystem().getByDom(C).toOptional()).each(C=>{Kc.isOpen(h)&&(Kc.expand(C),Kc.close(h))})})})]),Lt.config({mode:"flow",selector:".tox-mbtn",onEscape:d=>(n.onEscape(d),T.some(!0))}),Vo.config({})]),apis:i,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[He("dom"),He("uid"),He("onEscape"),He("backstage"),pe("onSetup",U)],apis:{focus:(n,s)=>{n.focus(s)},setMenus:(n,s,a)=>{n.setMenus(s,a)}}});const G7="💝 Get all features",q7="https://www.tiny.cloud/tinymce-upgrade-to-cloud/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",zq=n=>{const s=n.promotionLink?[{dom:{tag:"a",attributes:{href:q7,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:G7}}]:[];return{uid:n.uid,dom:n.dom,components:s}},Vq=n=>{const{sidebars:s}=n.ui.registry.getAll();gt(mo(s),a=>{const i=s[a],d=()=>ti(T.from(n.queryCommandValue("ToggleSidebar")),a);n.ui.registry.addToggleButton(a,{icon:i.icon,tooltip:i.tooltip,onAction:g=>{n.execCommand("ToggleSidebar",!1,a),g.setActive(d())},onSetup:g=>{g.setActive(d());const h=()=>g.setActive(d());return n.on("ToggleSidebar",h),()=>{n.off("ToggleSidebar",h)}},context:"any"})})},rl=n=>({element:()=>n.element.dom}),Uq=(n,s)=>{const a=$e(mo(s),i=>{const d=s[i],g=hi(gR(d));return{name:i,getApi:rl,onSetup:g.onSetup,onShow:g.onShow,onHide:g.onHide}});return $e(a,i=>{const d=Bt(U);return n.slot(i.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:Fv.unnamedEvents([Ud(i,d),Ih(i,d),Me(wy(),(g,h)=>{const C=h.event;Ce(a,x=>x.name===C.name).each(x=>{(C.visible?x.onShow:x.onHide)(x.getApi(g))})})])})})},K7=n=>la.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:Uq(s,n),slotBehaviours:Fv.unnamedEvents([Wo(a=>la.hideAllSlots(a))])})),Y7=(n,s,a)=>{We.getCurrent(n).each(d=>{mn.set(d,[K7(s)]);const g=a==null?void 0:a.toLowerCase();be(g)&&So(s,g)&&We.getCurrent(d).each(h=>{la.showSlot(h,g),ec.immediateGrow(d),Nn(d.element,"width"),ck(n.element,"region")})})},ck=(n,s)=>{qt(n,"role",s)},dw=(n,s)=>{We.getCurrent(n).each(i=>{We.getCurrent(i).each(g=>{ec.hasGrown(i)?la.isShowing(g,s)?(ec.shrink(i),ck(n.element,"presentation")):(la.hideAllSlots(g),la.showSlot(g,s),ck(n.element,"region")):(la.hideAllSlots(g),la.showSlot(g,s),ec.grow(i),ck(n.element,"region"))})})},Zq=n=>We.getCurrent(n).bind(a=>ec.isGrowing(a)||ec.hasGrown(a)?We.getCurrent(a).bind(g=>Ce(la.getSlotNames(g),h=>la.isShowing(g,h))):T.none()),Xv=Ct("FixSizeEvent"),z5=Ct("AutoSizeEvent"),ik=n=>({uid:n.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:Xe([Vo.config({}),ln.config({}),ec.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{We.getCurrent(s).each(la.hideAllSlots),On(s,z5)},onGrown:s=>{On(s,z5)},onStartGrow:s=>{Ht(s,Xv,{width:is(s.element,"width").getOr("")})},onStartShrink:s=>{Ht(s,Xv,{width:va(s.element)+"px"})}}),mn.config({}),We.config({find:s=>{const a=mn.contents(s);return To(a)}})])}],behaviours:Xe([Vu.childAt(0),cn("sidebar-sliding-events",[Me(Xv,(s,a)=>{on(s.element,"width",a.event.width)}),Me(z5,(s,a)=>{Nn(s.element,"width")})])])}),Wq=n=>(s,a)=>({dom:{tag:"div",attributes:{"aria-label":n.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:Nd('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),X7=n=>We.getCurrent(n).each(s=>kr(s.element,!0)),ql=(n,s)=>{const a="tabindex",i=`data-mce-${a}`;T.from(n.iframeElement).map(at.fromDom).each(d=>{s?(Pr(d,a).each(g=>qt(d,i,g)),qt(d,a,-1)):(Qo(d,a),Pr(d,i).each(g=>{qt(d,a,g),Qo(d,i)}))})},jq=(n,s,a,i)=>{const d=s.element;if(ql(n,a),a)fe.block(s,Wq(i)),Nn(d,"display"),Qo(d,"aria-hidden"),n.hasFocus()&&X7(s);else{const g=We.getCurrent(s).exists(h=>Bi(h.element));fe.unblock(s),on(d,"display","none"),qt(d,"aria-hidden","true"),g&&n.focus()}},lk=n=>({uid:n.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:Xe([mn.config({}),fe.config({focus:!1}),We.config({find:s=>To(s.components())})]),components:[]}),J7=n=>n.type==="focusin",Q7=n=>J7(n)?(n.composed?To(n.composedPath()):T.from(n.target)).map(at.fromDom).filter(gc).exists(a=>Ws(a,"mce-pastebin")):!1,Gq=(n,s,a)=>{const i=Bt(!1),d=pn(),g=C=>{i.get()&&!Q7(C)&&(C.preventDefault(),X7(s()),n.editorManager.setActive(n))};n.inline||n.on("PreInit",()=>{n.dom.bind(n.getWin(),"focusin",g),n.on("BeforeExecCommand",C=>{C.command.toLowerCase()==="mcefocus"&&C.value!==!0&&g(C)})});const h=C=>{C!==i.get()&&(i.set(C),jq(n,s(),C,a.providers),xj(n,C))};n.on("ProgressState",C=>{if(d.on(clearTimeout),dn(C.time)){const S=X4.setEditorTimeout(n,()=>h(C.state),C.time);d.set(S)}else h(C.state),d.clear()})},V5=n=>{const s=n.label.isNone()?n.title.fold(()=>({}),a=>({attributes:{"aria-label":a}})):n.label.fold(()=>({}),a=>({attributes:{"aria-label":a}}));return{dom:{tag:"div",classes:["tox-toolbar__group"].concat(n.label.isSome()?["tox-toolbar__group_with_label"]:[]),...s},components:[...n.label.map(a=>({dom:{tag:"span",classes:["tox-label","tox-label--context-toolbar"]},components:[Yo(a)]})).toArray(),K4.parts.items({})],items:n.items,markers:{itemSelector:".tox-tbtn:not([disabled]), .tox-toolbar-nav-item:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:Xe([Vo.config({}),ln.config({ignore:!0})])}},uk=n=>K4.sketch(V5(n)),eL=(n,s)=>{const a=Wo(i=>{const d=$e(n.initGroups,uk);Bd.setGroups(i,d)});return Xe([Vd.toolbarButton(()=>n.providers.checkUiComponentContext("any").shouldDisable),Fs(()=>n.providers.checkUiComponentContext("any")),Lt.config({mode:s,onEscape:n.onEscape,visibilitySelector:".tox-toolbar__overflow",selector:".tox-toolbar__group"}),cn("toolbar-events",[a])])},tL=n=>{const s=n.cyclicKeying?"cyclic":"acyclic";return{uid:n.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":V5({title:T.none(),label:T.none(),items:[]}),"overflow-button":l7({context:"any",name:"more",icon:T.some("more-drawer"),enabled:!0,tooltip:T.some("Reveal or hide additional toolbar items"),primary:!1,buttonType:T.none(),borderless:!1},T.none(),n.providers,[],"overflow-button")},splitToolbarBehaviours:eL(n,s)}},qq=n=>{const s=tL(n),a=4,i=TP.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return TP.sketch({...s,lazySink:n.getSink,getOverflowBounds:()=>{const d=n.moreDrawerData.lazyHeader().element,g=um(d),h=H2(d),C=um(h),S=Math.max(h.dom.scrollHeight,C.height);return rr(g.x+a,C.y,g.width-a*2,S)},parts:{...s.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:n.attributes}}},components:[i],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>n.onToggled(d,!0),onClosed:d=>n.onToggled(d,!1)})},Kq=n=>{const s=GO.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),a=GO.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),i=tL(n);return GO.sketch({...i,components:[s,a],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>{d.getSystem().broadcastOn([L5()],{type:"opened"}),n.onToggled(d,!0)},onClosed:d=>{d.getSystem().broadcastOn([L5()],{type:"closed"}),n.onToggled(d,!1)}})},dk=n=>{const s=n.cyclicKeying?"cyclic":"acyclic";return Bd.sketch({uid:n.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(n.type===nl.scrolling?["tox-toolbar--scrolling"]:[])},components:[Bd.parts.groups({})],toolbarBehaviours:eL(n,s)})},Yq=(n,s)=>{const a=n.type==="togglebutton",i=n.icon.map(G=>Vh(G,s.icons)).map(to),g=G=>{const oe=ct=>{i.map(lt=>lt.getOpt(G).each(Ne=>{mn.set(Ne,[Vh(ct,s.icons)])}))},le=ct=>{const lt=G.element;ct?(Ro(lt,"tox-button--enabled"),qt(lt,"aria-pressed",!0)):(us(lt,"tox-button--enabled"),Qo(lt,"aria-pressed"))},Se=()=>Ws(G.element,"tox-button--enabled"),Te=()=>kr(G.element);if(a)return n.onAction({setIcon:oe,setActive:le,isActive:Se,focus:Te});if(n.type==="button")return n.onAction({setIcon:oe})},h={...n,name:a?n.text.getOr(n.icon.getOr("")):n.text??n.icon.getOr(""),primary:n.buttonType==="primary",buttonType:T.from(n.buttonType),tooltip:n.tooltip,icon:n.icon,enabled:!0,borderless:n.borderless},C=S5(n.buttonType??"secondary"),S=a?n.text.map(s.translate):T.some(s.translate(n.text)),x=S.map(Yo),A=h.tooltip.or(S).map(G=>({"aria-label":s.translate(G)})).getOr({}),R=i.map(G=>G.asSpec()),P=Um([R,x]),z=n.icon.isSome()&&x.isSome(),Z={tag:"button",classes:C.concat(...n.icon.isSome()&&!z?["tox-button--icon"]:[]).concat(...z?["tox-button--icon-and-text"]:[]).concat(...n.borderless?["tox-button--naked"]:[]).concat(...n.type==="togglebutton"&&n.active?["tox-button--enabled"]:[]),attributes:A},K=[],ee=ek(h,T.some(g),K,Z,P,n.tooltip,s);return wr.sketch(ee)},U5=(n,s)=>Yq(n,s),nL=(n,s)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:$e(n.buttons,a=>U5(a,s))}),Z5=Jr().deviceType,Xq=Z5.isPhone(),oL=Z5.isTablet(),Jq=n=>{let s=!1;const a=$e(n.buttons,i=>i.type==="group"?(s=!0,nL(i,n.providers)):U5(i,n.providers));return{uid:n.uid,dom:{tag:"div",classes:[s?"tox-view__toolbar":"tox-view__header",...Xq||oL?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:Xe([ln.config({}),Lt.config({mode:"flow",selector:"button, .tox-button",focusInside:Sf.OnEnterOrSpaceMode})]),components:s?a:[Dd.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),Dd.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:a})]}},Qq=n=>({uid:n.uid,behaviours:Xe([ln.config({}),Vo.config({})]),dom:{tag:"div",classes:["tox-view__pane"]}}),sL=(n,s,a,i)=>{const d={getPane:g=>Dr.getPart(g,n,"pane"),getOnShow:g=>n.viewConfig.onShow,getOnHide:g=>n.viewConfig.onHide};return{uid:n.uid,dom:n.dom,components:s,behaviours:Xe([ln.config({}),Lt.config({mode:"cyclic",focusInside:Sf.OnEnterOrSpaceMode})]),apis:d}};var j1=kc({name:"silver.View",configFields:[He("viewConfig")],partFields:[Na({factory:{sketch:Jq},schema:[He("buttons"),He("providers")],name:"header"}),Na({factory:{sketch:Qq},schema:[],name:"pane"})],factory:sL,apis:{getPane:(n,s)=>n.getPane(s),getOnShow:(n,s)=>n.getOnShow(s),getOnHide:(n,s)=>n.getOnHide(s)}});const rL=(n,s,a)=>Mr(s,(i,d)=>{const g=hi(ij(i));return n.slot(d,j1.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:g,components:[...g.buttons.length>0?[j1.parts.header({buttons:g.buttons,providers:a})]:[],j1.parts.pane({})]}))}),eK=(n,s)=>la.sketch(a=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:rL(a,n,s),slotBehaviours:Fv.unnamedEvents([Wo(i=>la.hideAllSlots(i))])})),aL=n=>Ce(la.getSlotNames(n),s=>la.isShowing(n,s)),tK=n=>{const s=n.element;on(s,"display","none"),qt(s,"aria-hidden","true")},cL=n=>{const s=n.element;Nn(s,"display"),Qo(s,"aria-hidden")},nK=n=>({getContainer:ie(n)}),iL=(n,s,a)=>{la.getSlot(n,s).each(i=>{j1.getPane(i).each(d=>{a(i)(nK(d.element.dom))})})},oK=(n,s)=>iL(n,s,j1.getOnShow),sK=(n,s)=>iL(n,s,j1.getOnHide);var mk=Ji({factory:(n,s)=>{const g={setViews:(h,C)=>{mn.set(h,[eK(C,s.backstage.shared.providers)])},whichView:h=>We.getCurrent(h).bind(aL),toggleView:(h,C,S,x)=>We.getCurrent(h).exists(A=>{const R=aL(A),P=R.exists(Z=>x===Z),z=la.getSlot(A,x).isSome();return z&&(la.hideAllSlots(A),P?(tK(h),C()):(S(),cL(h),la.showSlot(A,x),oK(A,x)),R.each(Z=>sK(A,Z))),z})};return{uid:n.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:Xe([mn.config({}),We.config({find:h=>{const C=mn.contents(h);return To(C)}})]),apis:g}},name:"silver.ViewWrapper",configFields:[He("backstage")],apis:{setViews:(n,s,a)=>n.setViews(s,a),toggleView:(n,s,a,i,d)=>n.toggleView(s,a,i,d),whichView:(n,s)=>n.whichView(s)}});const rK=(n,s,a)=>{let i=!1;const d=h=>{b3(h,".tox-statusbar").each(C=>{es(C,"display")==="none"&&br(C,"aria-hidden")==="true"?(Nn(C,"display"),Qo(C,"aria-hidden")):(on(C,"display","none"),qt(C,"aria-hidden","true"))})},g={getSocket:h=>Dr.getPart(h,n,"socket"),setSidebar:(h,C,S)=>{Dr.getPart(h,n,"sidebar").each(x=>Y7(x,C,S))},toggleSidebar:(h,C)=>{Dr.getPart(h,n,"sidebar").each(S=>dw(S,C))},whichSidebar:h=>Dr.getPart(h,n,"sidebar").bind(Zq).getOrNull(),getHeader:h=>Dr.getPart(h,n,"header"),getToolbar:h=>Dr.getPart(h,n,"toolbar"),setToolbar:(h,C)=>{Dr.getPart(h,n,"toolbar").each(S=>{const x=$e(C,uk);S.getApis().setGroups(S,x)})},setToolbars:(h,C)=>{Dr.getPart(h,n,"multiple-toolbar").each(S=>{const x=$e(C,A=>$e(A,uk));nB.setItems(S,x)})},refreshToolbar:h=>{Dr.getPart(h,n,"toolbar").each(S=>S.getApis().refresh(S))},toggleToolbarDrawer:h=>{Dr.getPart(h,n,"toolbar").each(C=>{su(C.getApis().toggle,S=>S(C))})},toggleToolbarDrawerWithoutFocusing:h=>{Dr.getPart(h,n,"toolbar").each(C=>{su(C.getApis().toggleWithoutFocusing,S=>S(C))})},isToolbarDrawerToggled:h=>Dr.getPart(h,n,"toolbar").bind(C=>T.from(C.getApis().isOpen).map(S=>S(C))).getOr(!1),getThrobber:h=>Dr.getPart(h,n,"throbber"),focusToolbar:h=>{Dr.getPart(h,n,"toolbar").orThunk(()=>Dr.getPart(h,n,"multiple-toolbar")).each(S=>{Lt.focusIn(S)})},setMenubar:(h,C)=>{Dr.getPart(h,n,"menubar").each(S=>{j7.setMenus(S,C)})},focusMenubar:h=>{Dr.getPart(h,n,"menubar").each(C=>{j7.focus(C)})},setViews:(h,C)=>{Dr.getPart(h,n,"viewWrapper").each(S=>{mk.setViews(S,C)})},toggleView:(h,C)=>Dr.getPart(h,n,"viewWrapper").exists(S=>mk.toggleView(S,()=>g.showMainView(h),()=>g.hideMainView(h),C)),whichView:h=>Dr.getPart(h,n,"viewWrapper").bind(mk.whichView).getOrNull(),hideMainView:h=>{i=g.isToolbarDrawerToggled(h),i&&g.toggleToolbarDrawer(h),Dr.getPart(h,n,"editorContainer").each(C=>{const S=C.element;d(S),on(S,"display","none"),qt(S,"aria-hidden","true")})},showMainView:h=>{i&&g.toggleToolbarDrawer(h),Dr.getPart(h,n,"editorContainer").each(C=>{const S=C.element;d(S),Nn(S,"display"),Qo(S,"aria-hidden")})}};return{uid:n.uid,dom:n.dom,components:s,apis:g,behaviours:n.behaviours}},aK=el.optional({factory:j7,name:"menubar",schema:[He("backstage")]}),cK=n=>n.type===nl.sliding?Kq:n.type===nl.floating?qq:dk,iK=el.optional({factory:{sketch:n=>nB.sketch({uid:n.uid,dom:n.dom,listBehaviours:Xe([Lt.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>dk({type:n.type,uid:Ct("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:n.providers,onEscape:()=>(n.onEscape(),T.some(!0))}),setupItem:(s,a,i,d)=>{Bd.setGroups(a,i)},shell:!0})},name:"multiple-toolbar",schema:[He("dom"),He("onEscape")]}),W5=el.optional({factory:{sketch:n=>{const s=cK(n),a={type:n.type,uid:n.uid,onEscape:()=>(n.onEscape(),T.some(!0)),onToggled:(i,d)=>n.onToolbarToggled(d),cyclicKeying:!1,initGroups:[],getSink:n.getSink,providers:n.providers,moreDrawerData:{lazyToolbar:n.lazyToolbar,lazyMoreButton:n.lazyMoreButton,lazyHeader:n.lazyHeader},attributes:n.attributes};return s(a)}},name:"toolbar",schema:[He("dom"),He("onEscape"),He("getSink")]}),lK=el.optional({factory:{sketch:Hq},name:"header",schema:[He("dom")]}),uK=el.optional({factory:{sketch:zq},name:"promotion",schema:[He("dom"),He("promotionLink")]}),lL=el.optional({name:"socket",schema:[He("dom")]}),uL=el.optional({factory:{sketch:ik},name:"sidebar",schema:[He("dom")]}),dK=el.optional({factory:{sketch:lk},name:"throbber",schema:[He("dom")]}),mK=el.optional({factory:mk,name:"viewWrapper",schema:[He("backstage")]}),fK=n=>({uid:n.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:n.components}),gK=el.optional({factory:{sketch:fK},name:"editorContainer",schema:[]});var No=kc({name:"OuterContainer",factory:rK,configFields:[He("dom"),He("behaviours")],partFields:[lK,aK,W5,iK,lL,uL,uK,dK,mK,gK],apis:{getSocket:(n,s)=>n.getSocket(s),setSidebar:(n,s,a,i)=>{n.setSidebar(s,a,i)},toggleSidebar:(n,s,a)=>{n.toggleSidebar(s,a)},whichSidebar:(n,s)=>n.whichSidebar(s),getHeader:(n,s)=>n.getHeader(s),getToolbar:(n,s)=>n.getToolbar(s),setToolbar:(n,s,a)=>{n.setToolbar(s,a)},setToolbars:(n,s,a)=>{n.setToolbars(s,a)},refreshToolbar:(n,s)=>n.refreshToolbar(s),toggleToolbarDrawer:(n,s)=>{n.toggleToolbarDrawer(s)},toggleToolbarDrawerWithoutFocusing:(n,s)=>{n.toggleToolbarDrawerWithoutFocusing(s)},isToolbarDrawerToggled:(n,s)=>n.isToolbarDrawerToggled(s),getThrobber:(n,s)=>n.getThrobber(s),setMenubar:(n,s,a)=>{n.setMenubar(s,a)},focusMenubar:(n,s)=>{n.focusMenubar(s)},focusToolbar:(n,s)=>{n.focusToolbar(s)},setViews:(n,s,a)=>{n.setViews(s,a)},toggleView:(n,s,a)=>n.toggleView(s,a),whichView:(n,s)=>n.whichView(s)}});const hK="file edit view insert format tools table help",j5={file:{title:"File",items:"newdocument restoredraft | preview | importword exportpdf exportword | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code suggestededits revisionhistory | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image video link media addcomment pageembed inserttemplate codesample inserttable accordion math | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},fk=(n,s,a)=>{const i=LP(a).split(/[ ,]/);return{text:n.title,getItems:()=>ne(n.items,d=>{const g=d.toLowerCase();return g.trim().length===0?[]:Qs(i,h=>h===g)?[]:g==="separator"||g==="|"?[{type:"separator"}]:s.menuItems[g]?[s.menuItems[g]]:[]})}},mw=n=>n.split(" "),dL=(n,s)=>{const a={...j5,...s.menus},i=mo(s.menus).length>0,d=s.menubar===void 0||s.menubar===!0?mw(hK):mw(s.menubar===!1?"":s.menubar),g=Co(d,C=>{const S=So(j5,C);return i?S||It(s.menus,C).exists(x=>So(x,"items")):S}),h=$e(g,C=>{const S=a[C];return fk({title:S.title,items:mw(S.items)},s,n)});return Co(h,C=>{const S=x=>be(x)||x.type!=="separator";return C.getItems().length>0&&Qs(C.getItems(),S)})},pK=n=>{const s=()=>{n._skinLoaded=!0,$8(n)};return()=>{n.initialized?s():n.on("init",s)}},mL=(n,s)=>()=>DT(n,{message:s}),bK=n=>{const s=TS(n);return s?T.from(s):T.none()},fL=(n,s,a)=>(n.on("remove",()=>a.unload(s)),a.load(s)),gk=(n,s,a,i)=>(n.on("remove",()=>i.unloadRawCss(s)),i.loadRawCss(s,a)),gL=(n,s)=>"ui/"+n+"/"+s,vK=n=>T.from(tinymce.Resource.get(n)).filter(be),G5=(n,s,a="")=>{const i=bK(n).map(g=>gL(g,`${s}.css`)),d=i.bind(vK);return ni(i,d,(g,h)=>({_kind:"load-raw",key:g,css:h})).getOrThunk(()=>{const g=n.editorManager.suffix;return{_kind:"load-stylesheet",url:a+`/${s}${g}.css`}})},q5=(n,s)=>{const a=n.ui.styleSheetLoader,i=G5(n,"skin",s);switch(i._kind){case"load-raw":const{key:d,css:g}=i;return gk(n,d,g,a),Promise.resolve();case"load-stylesheet":const{url:h}=i;return fL(n,h,a);default:return Promise.resolve()}},yK=(n,s)=>{if(yl(at.fromDom(n.getElement()))){const i=wv.DOM.styleSheetLoader,d=G5(n,"skin.shadowdom",s);switch(d._kind){case"load-raw":const{key:g,css:h}=d;return gk(n,g,h,i),Promise.resolve();case"load-stylesheet":const{url:C}=d;return fL(n,C,i);default:return Promise.resolve()}}else return Promise.resolve()},CK=(n,s,a)=>{const d=G5(n,s?"content.inline":"content",a);switch(d._kind){case"load-raw":const{key:g,css:h}=d;return s?gk(n,g,h,n.ui.styleSheetLoader):n.on("PostRender",()=>{gk(n,g,h,n.dom.styleSheetLoader)}),Promise.resolve();case"load-stylesheet":const{url:C}=d;return a&&n.contentCSS.push(C),Promise.resolve();default:return Promise.resolve()}},hL=async(n,s)=>{const a=lD(s);if(await CK(s,n,a),!kS(s)&&be(a))return Promise.all([q5(s,a),yK(s,a)]).then()},pL=(n,s)=>hL(n,s).then(pK(s),mL(s,"Skin could not be loaded")),bL=Le(pL,!1),SK=Le(pL,!0),K5=n=>({isEnabled:()=>!Rt.isDisabled(n),setEnabled:s=>Rt.set(n,!s),setText:s=>Ht(n,Gl,{text:s}),setIcon:s=>Ht(n,W1,{icon:s})}),wK=n=>({setActive:s=>{Pn.set(n,s)},isActive:()=>Pn.isOn(n),isEnabled:()=>!Rt.isDisabled(n),setEnabled:s=>Rt.set(n,!s),setText:s=>Ht(n,Gl,{text:s}),setIcon:s=>Ht(n,W1,{icon:s})}),xK=(n,s)=>n.map(a=>({"aria-label":s.translate(a)})).getOr({}),EK=Ct("focus-button"),hk=(n,s,a,i,d,g,h)=>{const C=s.map(x=>to(g5(x,"tox-tbtn",d))),S=n.map(x=>to(Vh(x,d.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:{...xK(a,d),...jt(h)?{"data-mce-name":h}:{}}},components:Um([S.map(x=>x.asSpec()),C.map(x=>x.asSpec())]),eventOrder:{[Ya()]:["focusing","alloy.base.behaviour",Gm],[Al()]:[Gm,"toolbar-group-button-events"],[pi()]:[Gm,"toolbar-group-button-events","tooltipping"]},buttonBehaviours:Xe([Vd.toolbarButton(()=>d.checkUiComponentContext(g).shouldDisable),Fs(()=>d.checkUiComponentContext(g)),cn(Gm,[Wo((x,A)=>KT(x)),Me(Gl,(x,A)=>{C.bind(R=>R.getOpt(x)).each(R=>{mn.set(R,[Yo(d.translate(A.event.text))])})}),Me(W1,(x,A)=>{S.bind(R=>R.getOpt(x)).each(R=>{mn.set(R,[Vh(A.event.icon,d.icons)])})}),Me(Ya(),(x,A)=>{A.event.prevent(),On(x,EK)})])].concat(i.getOr([])))}},TK=(n,s,a,i,d)=>{const g=s.shared,h=Bt(U),C={toolbarButtonBehaviours:[],getApi:K5,onSetup:n.onSetup},S=[cn("toolbar-group-button-events",[Ud(C,h),Ih(C,h)]),...n.tooltip.map(x=>jo.config(s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(x)}))).toArray()];return jf.sketch({lazySink:g.getSink,fetch:()=>Ss.nu(x=>{x($e(a(n.items),uk))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:hk(n.icon,n.text,n.tooltip,T.some(S),g.providers,n.context,d),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:i}}}})},vL=(n,s,a,i)=>{var h;const d=Bt(U),g=hk(n.icon,n.text,n.tooltip,T.none(),a,n.context,i);return wr.sketch({dom:g.dom,components:g.components,eventOrder:m5,buttonBehaviours:{...Xe([cn("toolbar-button-events",[TG({onAction:n.onAction,getApi:s.getApi}),Ud(s,d),Ih(s,d)]),...n.tooltip.map(C=>jo.config(a.tooltips.getConfig({tooltipText:a.translate(C)+n.shortcut.map(S=>` (${CR(S)})`).getOr("")}))).toArray(),Vd.toolbarButton(()=>!n.enabled||a.checkUiComponentContext(n.context).shouldDisable),Fs(()=>a.checkUiComponentContext(n.context))].concat(s.toolbarButtonBehaviours)),[Gm]:(h=g.buttonBehaviours)==null?void 0:h[Gm]}})},kK=(n,s,a)=>fw(n,s,[],a),fw=(n,s,a,i)=>vL(n,{toolbarButtonBehaviours:a.length>0?[cn("toolbarButtonWith",a)]:[],getApi:K5,onSetup:n.onSetup},s,i),Y5=(n,s,a)=>yL(n,s,[],a),yL=(n,s,a,i)=>vL(n,{toolbarButtonBehaviours:[mn.config({}),Pn.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(a.length>0?[cn("toolbarToggleButtonWith",a)]:[]),getApi:wK,onSetup:n.onSetup},s,i),_K=(n,s,a)=>i=>Ss.nu(d=>s.fetch(d)).map(d=>T.from(t5($o(LT(Ct("menu-value"),d,g=>{s.onItemAction(n(i),g)},s.columns,s.presets,Hu.CLOSE_ON_EXECUTE,s.select.getOr(Cn),a),{movement:Hh(s.columns,s.presets),menuBehaviours:Fv.unnamedEvents(s.columns!=="auto"?[]:[Wo((g,h)=>{bR(g,4,RD(s.presets)).each(({numRows:C,numColumns:S})=>{Lt.setGridSize(g,C,S)})})])})))),AK=(n,s,a)=>i=>{const d=i.getSystem(),g=i.element,h=()=>{const S=Ws(g,"tox-split-button__chevron"),x=S?Ic(g).bind(R=>d.getByDom(R).toOptional()):T.some(i),A=S?T.some(i):U2(g).bind(R=>d.getByDom(R).toOptional().filter(P=>Ws(P.element,"tox-split-button__chevron")));return{mainOpt:x,chevronOpt:A}},C=S=>{const{mainOpt:x,chevronOpt:A}=h();x.each(S),A.each(S)};return{isEnabled:()=>{const{mainOpt:S}=h();return S.exists(x=>!Rt.isDisabled(x))},setEnabled:S=>C(x=>Rt.set(x,!S)),setText:S=>{const{mainOpt:x}=h();x.each(A=>Ht(A,Gl,{text:S}))},setIcon:S=>{const{mainOpt:x}=h();x.each(A=>Ht(A,W1,{icon:S}))},setIconFill:(S,x)=>C(A=>{wo(A.element,`svg path[class="${S}"], rect[class="${S}"]`).each(R=>{qt(R,"fill",x)})}),isActive:()=>{const{mainOpt:S}=h();return S.exists(x=>Pn.isOn(x))},setActive:S=>{const{mainOpt:x}=h();x.each(A=>Pn.set(A,S))},setTooltip:S=>{n.set(S);const{mainOpt:x,chevronOpt:A}=h();x.each(P=>qt(P.element,"aria-label",s.providers.translate(S)));const R=a.chevronTooltip.map(P=>s.providers.translate(P)).getOr(s.providers.translate(S));A.each(P=>qt(P.element,"aria-label",R))}}},OK=(n,s,a)=>{const i=Bt(U),d=Bt(n.tooltip.getOr("")),g=AK(d,s,n),h=Ct("tox-split-menu"),C=Bt(!1),S=()=>({"aria-haspopup":"menu","aria-expanded":String(C.get()),"aria-controls":h}),x=()=>n.tooltip.map(K=>s.providers.translate(K)).getOr(s.providers.translate("Text color")),A=()=>n.chevronTooltip.map(K=>s.providers.translate(K)).getOrThunk(()=>{const K=x();return s.providers.translate(["{0} menu",K])}),R=(K,ee)=>{C.set(K),qt(ee.element,"aria-expanded",String(K))},P=Kc.sketch({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:iZ("chevron-down",s.providers.icons),attributes:{"aria-label":A(),...jt(a)?{"data-mce-name":a+"-chevron"}:{},...S()}},components:[],toggleClass:"tox-tbtn--enabled",dropdownBehaviours:Xe([cn("split-dropdown-events",[Wo((K,ee)=>KT(K)),Ud({getApi:g,onSetup:n.onSetup},i),Me("alloy-dropdown-open",K=>R(!0,K)),Me("alloy-dropdown-close",K=>R(!1,K))]),Vd.toolbarButton(()=>s.providers.checkUiComponentContext(n.context).shouldDisable),Fs(()=>s.providers.checkUiComponentContext(n.context)),Md.config({}),jo.config(s.providers.tooltips.getConfig({tooltipText:A(),onShow:K=>{if(d.get()!==n.tooltip.getOr("")){const ee=n.chevronTooltip.map(G=>s.providers.translate(G)).getOr(`${s.providers.translate(d.get())} menu`);jo.setComponents(K,s.providers.tooltips.getComponents({tooltipText:ee}))}}}))]),lazySink:s.getSink,fetch:_K(g,n,s.providers),getHotspot:K=>Ic(K.element).bind(ee=>K.getSystem().getByDom(ee).toOptional()),onOpen:(K,ee,G)=>{eo.highlightBy(G,oe=>Ws(oe.element,"tox-collection__item--active")),eo.getHighlighted(G).each(Lt.focusIn)},parts:{menu:{...PS(!1,n.columns,n.presets),dom:{...PS(!1,n.columns,n.presets).dom,tag:"div",attributes:{id:h}}}}}),z=hk(n.icon,n.text,T.none(),T.some([Pn.config({toggleClass:"tox-tbtn--enabled",aria:n.presets==="color"?{mode:"none"}:{mode:"pressed"},toggleOnExecute:!1}),...n.tooltip.isSome()?[jo.config(s.providers.tooltips.getConfig({tooltipText:s.providers.translate(n.tooltip.getOr("")),onShow:K=>{if(d.get()!==n.tooltip.getOr("")){const ee=s.providers.translate(d.get());jo.setComponents(K,s.providers.tooltips.getComponents({tooltipText:ee}))}}}))]:[]]),s.providers,n.context,a);return[wr.sketch({dom:{...z.dom,classes:["tox-tbtn","tox-split-button__main"].concat(n.text.isSome()?["tox-tbtn--select"]:[]),attributes:{"aria-label":x(),...jt(a)?{"data-mce-name":a}:{}}},components:z.components,eventOrder:z.eventOrder,buttonBehaviours:z.buttonBehaviours,action:K=>{if(n.onAction){const ee=g(K);ee.isEnabled()&&n.onAction(ee)}}}),P]},DK=".tox-toolbar-slider__input,.tox-toolbar-textfield",CL=n=>{fs.getContent(n).each(s=>{wo(s.element,DK).fold(()=>Lt.focusIn(s),kr)})},RK=n=>or(n.element).each(s=>{Li(s,'[tabindex="-1"]').each(a=>{kr(a)})}),SL=Ct("forward-slide"),pk=Ct("backward-slide"),bk=Ct("change-slide-event"),Jv="tox-pop--resizing",X5=n=>{const s=Bt([]);return{sketch:fs.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:i=>{s.set([]),fs.getContent(i).each(d=>{Nn(d.element,"visibility")}),us(i.element,Jv),Nn(i.element,"width")},onHide:()=>{s.set([]),n.onHide()},inlineBehaviours:Xe([cn("context-toolbar-events",[lh(j0(),(i,d)=>{d.event.raw.propertyName==="width"&&(us(i.element,Jv),Nn(i.element,"width"))}),Me(bk,(i,d)=>{const g=i.element;Nn(g,"width");const h=va(g),C=or(i.element).isSome();Nn(g,"left"),Nn(g,"right"),Nn(g,"max-width"),fs.setContent(i,d.event.contents),Ro(g,Jv);const S=va(g);on(g,"transition","none"),fs.reposition(i),Nn(g,"transition"),on(g,"width",h+"px"),d.event.focus.fold(()=>{C&&CL(i)},x=>{Nr(nr(i.element)).fold(()=>kr(x),A=>{Hn(A,x)||n.focusElement(x)})}),setTimeout(()=>{on(i.element,"width",S+"px")},0)}),Me(SL,(i,d)=>{fs.getContent(i).each(g=>{s.set(s.get().concat([{bar:g,focus:Nr(nr(i.element))}]))}),Ht(i,bk,{contents:d.event.forwardContents,focus:T.none()})}),Me(pk,(i,d)=>{n.onBack(),qu(s.get()).each(g=>{s.set(s.get().slice(0,s.get().length-1)),Ht(i,bk,{contents:p(g.bar),focus:g.focus})})})]),Lt.config({mode:"special",onEscape:i=>qu(s.get()).fold(()=>n.onEscape(),d=>(On(i,pk),T.some(!0)))})]),lazySink:()=>Xt.value(n.sink)}),inSubtoolbar:()=>s.get().length>0}},wL=(n,s)=>{const a=hi(Vm({type:"button",icon:"chevron-left",tooltip:"Back",onAction:U}));return fw(a,s.shared.providers,[Me(d5,i=>{On(i,pk)})])},Kl=(n,s,a)=>mc(a)?n.translate(s):n.translate([s,n.translate(a)]),xL=(n,s)=>{const a=(h,C,S,x)=>{const A=n.shared.providers.translate(h.title);if(h.type==="separator")return T.some({type:"separator",text:A});if(h.type==="submenu"){const R=ne(h.getStyleItems(),P=>i(P,C,x));return C===0&&R.length<=0?T.none():T.some({type:"nestedmenuitem",text:A,enabled:R.length>0,getSubmenuItems:()=>ne(h.getStyleItems(),P=>i(P,C,x))})}else return T.some({type:"togglemenuitem",text:A,icon:h.icon,active:h.isSelected(x),enabled:!S,onAction:s.onAction(h),...h.getStylePreview().fold(()=>({}),R=>({meta:{style:R}}))})},i=(h,C,S)=>{const x=h.type==="formatter"&&s.isInvalid(h);return C===0?x?[]:a(h,C,!1,S).toArray():a(h,C,x,S).toArray()},d=h=>{const C=s.getCurrentValue(),S=s.shouldHide?0:1;return ne(h,x=>i(x,S,C))};return{validateItems:d,getFetch:(h,C)=>(S,x)=>{const A=C(),R=d(A),P=og(R,Hu.CLOSE_ON_EXECUTE,h,{isHorizontalMenu:!1,search:T.none()});x(P)}}},Qv=(n,s)=>{const a=s.dataset,i=a.type==="basic"?()=>$e(a.data,d=>x7(d,s.isSelectedFor,s.getPreviewFor)):a.getData;return{items:xL(n,s),getStyleItems:i}},gw=(n,s,a,i,d,g)=>{const{items:h,getStyleItems:C}=Qv(s,a),S=Bt(a.tooltip),x=R=>({getComponent:ie(R),setTooltip:P=>{const z=s.shared.providers.translate(P);qt(R.element,"aria-label",z),S.set(P)}}),A=R=>{const P=z=>R.setTooltip(Kl(n,i(z.value),z.value));return n.on(d,P),z1(Fh(n,"NodeChange",z=>{const Z=z.getComponent();a.updateText(Z),Rt.set(z.getComponent(),!n.selection.isEditable()||C().length===0)})(R),()=>n.off(d,P))};return h5({context:"mode:design",text:a.icon.isSome()?T.none():a.text,icon:a.icon,ariaLabel:T.some(a.tooltip),tooltip:T.none(),role:T.none(),fetch:h.getFetch(s,C),onSetup:A,getApi:x,columns:1,presets:"normal",classes:a.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[jo.config({...s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(a.tooltip),onShow:R=>{if(a.tooltip!==S.get()){const P=s.shared.providers.translate(S.get());jo.setComponents(R,s.shared.providers.tooltips.getComponents({tooltipText:P}))}}})})]},"tox-tbtn",s.shared,g)},MK=n=>$e(n,s=>{let a=s,i=s;const d=s.split("=");return d.length>1&&(a=d[0],i=d[1]),{title:a,format:i}}),NK=n=>({type:"basic",data:n});var e2;(function(n){n[n.SemiColon=0]="SemiColon",n[n.Space=1]="Space"})(e2||(e2={}));const BK=(n,s)=>s===e2.SemiColon?n.replace(/;$/,"").split(";"):n.split(" "),J5=(n,s,a)=>{const i=n.options.get(s);return{type:"basic",data:MK(BK(i,a))}},EL="Align",TL=ie("Alignment {0}"),kL="left",hw=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],_L=n=>{const s=()=>Ce(hw,C=>n.formatter.match(C.format)),a=C=>()=>n.formatter.match(C),i=C=>T.none,d=C=>{const x=s().fold(ie(kL),A=>A.title.toLowerCase());Ht(C,W1,{icon:`align-${x}`}),L8(n,{value:x})},g=NK(hw),h=C=>()=>Ce(hw,S=>S.format===C.format).each(S=>n.execCommand(S.command));return{tooltip:Kl(n,TL(),kL),text:T.none(),icon:T.some("align-left"),isSelectedFor:a,getCurrentValue:T.none,getPreviewFor:i,onAction:h,updateText:d,dataset:g,shouldHide:!1,isInvalid:C=>!n.formatter.canApply(C.format)}},PK=(n,s)=>gw(n,s,_L(n),TL,"AlignTextUpdate","align"),$K=(n,s)=>{const a=Qv(s,_L(n));n.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate(EL),onSetup:Wr(n),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},AL=(n,s)=>{const a=s(),i=$e(a,d=>d.format);return T.from(n.formatter.closest(i)).bind(d=>Ce(a,g=>g.format===d))},IK="Blocks",OL=ie("Block {0}"),vk="Paragraph",Q5=n=>{const s=g=>()=>n.formatter.match(g),a=g=>()=>{const h=n.formatter.get(g);return h?T.some({tag:h.length>0&&(h[0].inline||h[0].block)||"div",styles:n.dom.parseStyle(n.formatter.getCssText(g))}):T.none()},i=g=>{const C=AL(n,()=>d.data).fold(ie(vk),S=>S.title);Ht(g,Gl,{text:C}),RT(n,{value:C})},d=J5(n,"block_formats",e2.SemiColon);return{tooltip:Kl(n,OL(),vk),text:T.some(vk),icon:T.none(),isSelectedFor:s,getCurrentValue:T.none,getPreviewFor:a,onAction:MT(n),updateText:i,dataset:d,shouldHide:!1,isInvalid:g=>!n.formatter.canApply(g.format)}},DL=(n,s)=>gw(n,s,Q5(n),OL,"BlocksTextUpdate","blocks"),LK=(n,s)=>{const a=Qv(s,Q5(n));n.ui.registry.addNestedMenuItem("blocks",{text:IK,onSetup:Wr(n),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},RL="Fonts",ML=ie("Font {0}"),eM="System Font",FK=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],tM=n=>{const s=n.split(/\s*,\s*/);return $e(s,a=>a.replace(/^['"]+|['"]+$/g,""))},NL=(n,s)=>s.length>0&&Vn(s,a=>n.indexOf(a.toLowerCase())>-1),BL=(n,s)=>{if(n.indexOf("-apple-system")===0||s.length>0){const a=tM(n.toLowerCase());return NL(a,FK)||NL(a,s)}else return!1},PL=n=>{const s=()=>{const S=Z=>Z?tM(Z)[0]:"",x=n.queryCommandValue("FontName"),A=C.data,R=x?x.toLowerCase():"",P=t$(n);return{matchOpt:Ce(A,Z=>{const K=Z.format;return K.toLowerCase()===R||S(K).toLowerCase()===S(R).toLowerCase()}).orThunk(()=>dc(BL(R,P),{title:eM,format:R})),font:x}},a=S=>x=>x.exists(A=>A.format===S),i=()=>{const{matchOpt:S}=s();return S},d=S=>()=>T.some({tag:"div",styles:S.indexOf("dings")===-1?{"font-family":S}:{}}),g=S=>()=>{n.undoManager.transact(()=>{n.focus(),n.execCommand("FontName",!1,S.format)})},h=S=>{const{matchOpt:x,font:A}=s(),R=x.fold(ie(A),P=>P.title);Ht(S,Gl,{text:R}),Aj(n,{value:R})},C=J5(n,"font_family_formats",e2.SemiColon);return{tooltip:Kl(n,ML(),eM),text:T.some(eM),icon:T.none(),isSelectedFor:a,getCurrentValue:i,getPreviewFor:d,onAction:g,updateText:h,dataset:C,shouldHide:!1,isInvalid:Cn}},HK=(n,s)=>gw(n,s,PL(n),ML,"FontFamilyTextUpdate","fontfamily"),zK=(n,s)=>{const a=Qv(s,PL(n));n.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate(RL),onSetup:Wr(n),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})};var yk=tinymce.util.Tools.resolve("tinymce.util.VK");const VK=(n,s,a,i)=>{let d=T.none();const g=le=>le.map(Se=>St.getValue(Se)).getOr(""),h=Fh(n,"NodeChange SwitchMode DisabledStateChange",le=>{const Se=le.getComponent();d=T.some(Se),a.updateInputValue(Se),Rt.set(Se,!n.selection.isEditable()||J4(n))}),C=le=>({getComponent:ie(le)}),S=Bt(U),x=Ct("custom-number-input-events"),A=(le,Se,Te)=>{const ct=g(d),lt=a.getNewValue(ct,le),Ne=ct.length-`${lt}`.length,Fe=d.map(Ot=>Ot.element.dom.selectionStart-Ne),Ft=d.map(Ot=>Ot.element.dom.selectionEnd-Ne);a.onAction(lt,Te),d.each(Ot=>{St.setValue(Ot,lt),Se&&(Fe.each(En=>Ot.element.dom.selectionStart=En),Ft.each(En=>Ot.element.dom.selectionEnd=En))})},R=(le,Se)=>A((Te,ct)=>Te-ct,le,Se),P=(le,Se)=>A((Te,ct)=>Te+ct,le,Se),z=le=>cu(le.element).fold(T.none,Se=>(kr(Se),T.some(!0))),Z=le=>Bi(le.element)?(Ln(le.element).each(Se=>kr(Se)),T.some(!0)):T.none(),K=(le,Se,Te,ct)=>{const lt=Bt(U),Ne=s.shared.providers.translate(Te),Fe=Ct("altExecuting"),Ft=Fh(n,"NodeChange SwitchMode DisabledStateChange",En=>{Rt.set(En.getComponent(),!n.selection.isEditable()||J4(n))}),Ot=En=>{Rt.isDisabled(En)||le(!0)};return wr.sketch({dom:{tag:"button",attributes:{"aria-label":Ne,"data-mce-name":Se},classes:ct.concat(Se)},components:[f5(Se,s.shared.providers.icons)],buttonBehaviours:Xe([Rt.config({}),jo.config(s.shared.providers.tooltips.getConfig({tooltipText:Ne})),cn(Fe,[Ud({onSetup:Ft,getApi:C},lt),Ih({getApi:C},lt),Me(Sr(),(En,Ut)=>{(Ut.event.raw.keyCode===yk.SPACEBAR||Ut.event.raw.keyCode===yk.ENTER)&&(Rt.isDisabled(En)||le(!1))}),Me(pf(),Ot),Me(pm(),Ot)])]),eventOrder:{[Sr()]:[Fe,"keying"],[pf()]:[Fe,"alloy.base.behaviour"],[pm()]:[Fe,"alloy.base.behaviour"],[Al()]:["alloy.base.behaviour",Fe,"tooltipping"],[pi()]:[Fe,"tooltipping"]}})},ee=to(K(le=>R(!1,le),"minus","Decrease font size",[])),G=to(K(le=>P(!1,le),"plus","Increase font size",[])),oe=to({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[Hm.sketch({inputBehaviours:Xe([Rt.config({}),cn(x,[Ud({onSetup:h,getApi:C},S),Ih({getApi:C},S)]),cn("input-update-display-text",[Me(Gl,(le,Se)=>{St.setValue(le,Se.event.text)}),Me(yy(),le=>{a.onAction(St.getValue(le))}),Me(hf(),le=>{a.onAction(St.getValue(le))})]),Lt.config({mode:"special",onEnter:le=>(A(Et,!0,!0),T.some(!0)),onEscape:z,onUp:le=>(P(!0,!1),T.some(!0)),onDown:le=>(R(!0,!1),T.some(!0)),onLeft:(le,Se)=>(Se.cut(),T.none()),onRight:(le,Se)=>(Se.cut(),T.none())})])})],behaviours:Xe([ln.config({}),Lt.config({mode:"special",onEnter:Z,onSpace:Z,onEscape:z}),cn("input-wrapper-events",[Me(Uc(),le=>{gt([ee,G],Se=>{const Te=at.fromDom(Se.get(le).element.dom);Bi(Te)&&ks(Te)})})])])});return{dom:{tag:"div",classes:["tox-number-input"],attributes:{...jt(i)?{"data-mce-name":i}:{}}},components:[ee.asSpec(),oe.asSpec(),G.asSpec()],behaviours:Xe([ln.config({}),Lt.config({mode:"flow",focusInside:Sf.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:le=>Bi(le.element)?T.none():(kr(le.element),T.some(!0))})])}},UK="Font sizes",$L=ie("Font size {0}"),nM="12pt",ZK={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},WK={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},jK=(n,s)=>{const a=Math.pow(10,s);return Math.round(n*a)/a},GK=(n,s)=>/[0-9.]+px$/.test(n)?jK(parseInt(n,10)*72/96,s||0)+"pt":It(WK,n).getOr(n),qK=n=>It(ZK,n).getOr(""),IL=n=>{const s=()=>{let S=T.none();const x=C.data,A=n.queryCommandValue("FontSize");if(A)for(let R=3;S.isNone()&&R>=0;R--){const P=GK(A,R),z=qK(P);S=Ce(x,Z=>Z.format===A||Z.format===P||Z.format===z)}return{matchOpt:S,size:A}},a=S=>x=>x.exists(A=>A.format===S),i=()=>{const{matchOpt:S}=s();return S},d=ie(T.none),g=S=>()=>{n.undoManager.transact(()=>{n.focus(),n.execCommand("FontSize",!1,S.format)})},h=S=>{const{matchOpt:x,size:A}=s(),R=x.fold(ie(A),P=>P.title);Ht(S,Gl,{text:R}),_j(n,{value:R})},C=J5(n,"font_size_formats",e2.Space);return{tooltip:Kl(n,$L(),nM),text:T.some(nM),icon:T.none(),isSelectedFor:a,getPreviewFor:d,getCurrentValue:i,onAction:g,updateText:h,dataset:C,shouldHide:!1,isInvalid:Cn}},KK=(n,s)=>gw(n,s,IL(n),$L,"FontSizeTextUpdate","fontsize"),LL=n=>{const s={step:1};return{em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[n]??s},YK=16,XK=n=>n>=0,FL=n=>{const s=()=>n.queryCommandValue("FontSize");return{updateInputValue:i=>Ht(i,Gl,{text:s()}),onAction:(i,d)=>n.execCommand("FontSize",!1,i,{skip_focus:!d}),getNewValue:(i,d)=>{P0(i,["unsupportedLength","empty"]);const g=s(),h=P0(i,["unsupportedLength","empty"]).or(P0(g,["unsupportedLength","empty"])),C=h.map(P=>P.value).getOr(YK),S=nT(n),x=h.map(P=>P.unit).filter(P=>P!=="").getOr(S),A=d(C,LL(x).step),R=`${XK(A)?A:C}${x}`;return R!==g&&Zm(n,{value:R}),R}}},JK=(n,s)=>VK(n,s,FL(n),"fontsizeinput"),HL=(n,s)=>{const a=Qv(s,IL(n));n.ui.registry.addNestedMenuItem("fontsize",{text:UK,onSetup:Wr(n),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},zL="Formats",VL=n=>mc(n)?"Formats":"Format {0}",UL=(n,s)=>{const a="Formats",i=h=>()=>n.formatter.match(h),d=h=>()=>{const C=n.formatter.get(h);return C!==void 0?T.some({tag:C.length>0&&(C[0].inline||C[0].block)||"div",styles:n.dom.parseStyle(n.formatter.getCssText(h))}):T.none()},g=h=>{const C=R=>uq(R)?ne(R.items,C):v7(R)?[{title:R.title,format:R.format}]:[],S=ne(w7(n),C),A=AL(n,ie(S)).fold(ie({title:a,tooltipLabel:""}),R=>({title:R.title,tooltipLabel:R.title}));Ht(h,Gl,{text:A.title}),kj(n,{value:A.tooltipLabel})};return{tooltip:Kl(n,VL(""),""),text:T.some(a),icon:T.none(),isSelectedFor:i,getCurrentValue:T.none,getPreviewFor:d,onAction:MT(n),updateText:g,shouldHide:oD(n),isInvalid:h=>!n.formatter.canApply(h.format),dataset:s}},QK=(n,s)=>{const a={type:"advanced",...s.styles};return gw(n,s,UL(n,a),VL,"StylesTextUpdate","styles")},t2=(n,s)=>{const a={type:"advanced",...s.styles},i=Qv(s,UL(n,a));n.ui.registry.addNestedMenuItem("styles",{text:zL,onSetup:Wr(n,()=>i.getStyleItems().length>0),getSubmenuItems:()=>i.items.validateItems(i.getStyleItems())})},eY=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],pw=(n,s)=>(a,i,d,g)=>{const h=n(a).mapError(C=>zg(C)).getOrDie();return s(h,i,d,g)},tY={button:pw(Vm,(n,s,a,i)=>kK(n,s.shared.providers,i)),togglebutton:pw(aR,(n,s,a,i)=>Y5(n,s.shared.providers,i)),menubutton:pw(tR,(n,s,a,i)=>ow(n,"tox-tbtn",s,T.none(),!1,i)),splitbutton:pw(nj,(n,s,a,i)=>OK(n,s.shared,i)),grouptoolbarbutton:pw(hR,(n,s,a,i)=>{const d=a.ui.registry.getAll().buttons,g=C=>Ck(a,{buttons:d,toolbar:C,allowToolbarGroups:!1},s,T.none()),h={[Sb]:s.shared.header.isPositionedAtTop()?Cd.TopToBottom:Cd.BottomToTop};switch(T1(a)){case nl.floating:return TK(n,s,g,h,i);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},nY=(n,s,a,i)=>It(tY,n.type).fold(()=>(console.error("skipping button defined by",n),T.none()),d=>T.some(d(n,s,a,i))),ZL={styles:QK,fontsize:KK,fontsizeinput:JK,fontfamily:HK,blocks:DL,align:PK,navigateback:wL},oY=n=>{const s=$e(eY,a=>{const i=Co(a.items,d=>So(n,d)||So(ZL,d));return{name:a.name,items:i}});return Co(s,a=>a.items.length>0)},sY=n=>{const s=n.split("|");return $e(s,a=>({items:a.trim().split(" ")}))},rY=n=>Yn(n,s=>(So(s,"name")||So(s,"label"))&&So(s,"items")),oM=n=>{const s=n.toolbar,a=n.buttons;return s===!1?[]:s===void 0||s===!0?oY(a):be(s)?sY(s):rY(s)?s:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},aY=(n,s,a,i,d,g)=>It(s,a.toLowerCase()).orThunk(()=>g.bind(h=>ic(h,C=>It(s,C+a.toLowerCase())))).fold(()=>It(ZL,a.toLowerCase()).map(h=>h(n,d)),h=>h.type==="grouptoolbarbutton"&&!i?(console.warn(`Ignoring the '${a}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),T.none()):nY(h,d,n,a.toLowerCase())),Ck=(n,s,a,i)=>{const d=oM(s),g=$e(d,h=>{const C=ne(h.items,S=>S.trim().length===0?[]:aY(n,s.buttons,S,s.allowToolbarGroups,a,i).map(x=>Array.isArray(x)?x:[x]).getOr([]));return{title:T.from(n.translate(h.name)),label:dc(h.label!==void 0,n.translate(h.label)),items:C}});return Co(g,h=>h.items.length>0)},sM=(n,s,a,i)=>{const d=s.mainUi.outerContainer,g=a.toolbar,h=a.buttons;if(Yn(g,be)){const C=g.map(S=>{const x={toolbar:S,buttons:h,allowToolbarGroups:a.allowToolbarGroups};return Ck(n,x,i,T.none())});No.setToolbars(d,C)}else No.setToolbar(d,Ck(n,a,i,T.none()))},rM=Jr(),cY=rM.os.isiOS()&&rM.os.version.major<=12,iY=(n,s)=>{const{uiMotherships:a}=s,i=n.dom;let d=n.getWin();const g=n.getDoc().documentElement,h=Bt(ko(d.innerWidth,d.innerHeight)),C=Bt(ko(g.offsetWidth,g.offsetHeight)),S=()=>{const P=h.get();(P.left!==d.innerWidth||P.top!==d.innerHeight)&&(h.set(ko(d.innerWidth,d.innerHeight)),PR(n))},x=()=>{const P=n.getDoc().documentElement,z=C.get();(z.left!==P.offsetWidth||z.top!==P.offsetHeight)&&(C.set(ko(P.offsetWidth,P.offsetHeight)),PR(n))},A=P=>{wj(n,P)};i.bind(d,"resize",S),i.bind(d,"scroll",A);const R=ci(at.fromDom(n.getBody()),"load",x);n.on("hide",()=>{gt(a,P=>{on(P.element,"display","none")})}),n.on("show",()=>{gt(a,P=>{Nn(P.element,"display")})}),n.on("NodeChange",x),n.on("remove",()=>{R.unbind(),i.unbind(d,"resize",S),i.unbind(d,"scroll",A),d=null})},lY=(n,s,a)=>{Mh(n)&&Xi(a.mainUi.mothership.element,a.popupUi.mothership),c1(s,a.dialogUi.mothership)};var uY=Object.freeze({__proto__:null,render:(n,s,a,i,d)=>{const{mainUi:g,uiMotherships:h}=s,C=Bt(0),S=g.outerContainer;bL(n);const x=at.fromDom(d.targetNode),A=vl(nr(x));Xi(x,g.mothership),lY(n,A,s),n.on("PostRender",()=>{No.setSidebar(S,a.sidebar,JP(n)),No.setViews(S,a.views)}),n.on("SkinLoaded",()=>{sM(n,s,a,i),C.set(n.getWin().innerWidth),No.setMenubar(S,dL(n,a)),iY(n,s)});const R=No.getSocket(S).getOrDie("Could not find expected socket element");if(cY){hs(R.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const K=_2(()=>{n.dispatch("ScrollContent")},20),ee=go(R.element,"scroll",K.throttle);n.on("remove",ee.unbind)}y8(n,s),n.addCommand("ToggleSidebar",(K,ee)=>{No.toggleSidebar(S,ee),Oj(n)}),n.addQueryValueHandler("ToggleSidebar",()=>No.whichSidebar(S)??""),n.addCommand("ToggleView",(K,ee)=>{if(No.toggleView(S,ee)){const G=S.element;g.mothership.broadcastOn([wu()],{target:G}),gt(h,oe=>{oe.broadcastOn([wu()],{target:G})}),_t(No.whichView(S))&&(n.focus(),n.nodeChanged(),No.refreshToolbar(S)),F8(n)}}),n.addQueryValueHandler("ToggleView",()=>No.whichView(S)??"");const P=T1(n),z=()=>{No.refreshToolbar(s.mainUi.outerContainer)};(P===nl.sliding||P===nl.floating)&&n.on("ResizeWindow ResizeEditor ResizeContent",()=>{const K=n.getWin().innerWidth;K!==C.get()&&(z(),C.set(K))});const Z={setEnabled:K=>{jS(s,K?"setEnabled":"setDisabled")},isEnabled:()=>!Rt.isDisabled(S)};return{iframeContainer:R.element.dom,editorContainer:S.element.dom,api:Z}}});const dY=n=>/^[0-9\.]+(|px)$/i.test(""+n)?T.some(parseInt(""+n,10)):T.none(),Sk=n=>dn(n)?n+"px":n,wk=(n,s,a)=>{const i=s.filter(g=>n<g),d=a.filter(g=>n>g);return i.or(d).getOr(n)},mY=(n,s)=>{if(typeof s=="number")return T.from(s);const a=/^([0-9.]+)(pt|em|px)$/.exec(s.trim());if(a){const i=a[2],d=Number.parseFloat(a[1]);if(Number.isNaN(d)||d<0)return T.none();if(i==="em")return T.from(d*Number.parseFloat(window.getComputedStyle(n.dom).fontSize));if(i==="pt")return T.from(d*(72/96));if(i==="px")return T.from(d)}return T.none()},fY=n=>{const s=mY(at.fromDom(n.targetElm),JO(n)),a=tD(n),i=nD(n);return s.map(d=>wk(d,a,i))},gY=n=>fY(n).getOr(JO(n)),bw=n=>{const s=QO(n),a=eD(n),i=Q4(n);return dY(s).map(d=>wk(d,a,i))},hY=n=>bw(n).getOr(QO(n)),{ToolbarLocation:n2,ToolbarMode:vw}=zU,WL=40,pY=(n,s,a,i,d)=>{const{mainUi:g,uiMotherships:h}=a,C=wv.DOM,S=Av(n),x=Ov(n),A=Q4(n).or(bw(n)),R=i.shared.header,P=R.isPositionedAtTop,z=150,Z=T1(n),K=Z===vw.sliding||Z===vw.floating,ee=Bt(!1),G=()=>ee.get()&&!n.removed,oe=Mt=>K?Mt.fold(ie(0),Pe=>Pe.components().length>1?vr(Pe.components()[1].element):0):0,le=Mt=>{switch(sD(n)){case n2.auto:const Pe=No.getToolbar(g.outerContainer),tt=oe(Pe),Kt=vr(Mt.element)-tt,bn=js(s);if(bn.y>Kt)return"top";{const hn=H2(s),yo=Math.max(hn.dom.scrollHeight,vr(hn));return bn.bottom<yo-Kt||ta().bottom<bn.bottom-Kt?"bottom":"top"}case n2.bottom:return"bottom";case n2.top:default:return"top"}},Se=Mt=>{d.on(Pe=>{rs.setModes(Pe,[Mt]),R.setDockingMode(Mt);const tt=P()?Cd.TopToBottom:Cd.BottomToTop;qt(Pe.element,Sb,tt)})},Te=()=>{d.on(Mt=>{const Pe=A.getOrThunk(()=>$0().width-ui(s).left-10);on(Mt.element,"max-width",Pe+"px")})},ct=(Mt,Pe)=>{d.on(tt=>{const Kt=No.getToolbar(g.outerContainer),bn=oe(Kt),Pt=js(s),hn=lt(n,g.outerContainer.element),yo=()=>hn.fold(()=>Pt.x,jr=>{const za=js(jr);return Hn(jr,Fc())?Pt.x:Pt.x-za.x}),Kn=()=>hn.fold(()=>P()?Math.max(Pt.y-vr(tt.element)+bn,0):Pt.bottom,jr=>{const za=js(jr),Xc=jr.dom.scrollTop??0,Zh=Hn(jr,Fc())?Math.max(Pt.y-vr(tt.element)+bn,0):Pt.y-za.y+Xc-vr(tt.element)+bn;return P()?Zh:Pt.bottom}),oc=yo(),as=dc(Mt,Math.ceil(g.outerContainer.element.dom.getBoundingClientRect().width)).filter(jr=>jr>z).map(jr=>{const za=Pe.getOr(Ns()),Xc=window.innerWidth-(oc-za.left),Yl=Math.max(Math.min(jr,Xc),z);return Xc<jr&&on(g.outerContainer.element,"width",Yl+"px"),{width:Yl+"px"}}).getOr({width:"max-content"}),Yc={position:"absolute",left:Math.round(oc)+"px",top:Kn()+"px"};hs(g.outerContainer.element,{...Yc,...as})})},lt=(Mt,Pe)=>Mh(Mt)?dm(Pe):T.none(),Ne=()=>{gt(h,Mt=>{Mt.broadcastOn([Ks()],{})})},Fe=()=>!S&&(pc(g.outerContainer.element).left+ad(g.outerContainer.element)>=window.innerWidth-WL||is(g.outerContainer.element,"width").isSome())?(on(g.outerContainer.element,"position","absolute"),on(g.outerContainer.element,"left","0px"),Nn(g.outerContainer.element,"width"),!0):!1,Ft=Mt=>{if(!G())return;S||Te();const Pe=Ns(),tt=S?!1:Fe();if(K&&No.refreshToolbar(g.outerContainer),!S){const Kt=Ns(),bn=dc(Pe.left!==Kt.left,Pe);ct(tt,bn),bn.each(Pt=>{rm(Pt.left,Kt.top)})}x&&d.on(Mt),Ne()},Ot=()=>S||!x||!G()?!1:d.get().exists(Mt=>{const Pe=R.getDockingMode(),tt=le(Mt);return tt!==Pe?(Se(tt),!0):!1});return{isVisible:G,isPositionedAtTop:P,show:()=>{ee.set(!0),on(g.outerContainer.element,"display","flex"),C.addClass(n.getBody(),"mce-edit-focus"),gt(h,Mt=>{Nn(Mt.element,"display")}),Ot(),Mh(n)?Ft(Mt=>rs.isDocked(Mt)?rs.reset(Mt):rs.refresh(Mt)):Ft(rs.refresh)},hide:()=>{ee.set(!1),on(g.outerContainer.element,"display","none"),C.removeClass(n.getBody(),"mce-edit-focus"),gt(h,Mt=>{on(Mt.element,"display","none")})},update:Ft,updateMode:()=>{Ot()&&Ft(rs.reset)},repositionPopups:Ne}},jL=(n,s)=>{const a=js(n);return{pos:s?a.y:a.bottom,bounds:a}},bY=(n,s,a,i)=>{const d=Bt(jL(s,a.isPositionedAtTop())),g=x=>{const{pos:A,bounds:R}=jL(s,a.isPositionedAtTop()),{pos:P,bounds:z}=d.get(),Z=R.height!==z.height||R.width!==z.width;d.set({pos:A,bounds:R}),Z&&PR(n,x),a.isVisible()&&(P!==A?a.update(rs.reset):Z&&(a.updateMode(),a.repositionPopups()))};i||(n.on("activate",a.show),n.on("deactivate",a.hide)),n.on("SkinLoaded ResizeWindow",()=>a.update(rs.reset)),n.on("NodeChange keydown",x=>{requestAnimationFrame(()=>g(x))});let h=0;const C=gl(()=>a.update(rs.refresh),33);n.on("ScrollWindow",()=>{const x=Ns().left;x!==h&&(h=x,C.throttle()),a.updateMode()}),Mh(n)&&n.on("ElementScroll",x=>{a.update(rs.refresh)});const S=Us();S.set(ci(at.fromDom(n.getBody()),"load",x=>g(x.raw))),n.on("remove",()=>{S.clear()})};var vY=Object.freeze({__proto__:null,render:(n,s,a,i,d)=>{const{mainUi:g}=s,h=pn(),C=at.fromDom(d.targetNode),S=pY(n,C,s,i,h),x=zP(n);SK(n);const A=()=>{if(h.isSet()){S.show();return}h.set(No.getHeader(g.outerContainer).getOrDie());const P=uD(n);Mh(n)?(Xi(C,g.mothership),Xi(C,s.popupUi.mothership)):c1(P,g.mothership),c1(P,s.dialogUi.mothership);const z=()=>{sM(n,s,a,i),No.setMenubar(g.outerContainer,dL(n,a)),S.show(),bY(n,C,S,x),n.nodeChanged()};x?n.once("SkinLoaded",z):z()};n.on("show",A),n.on("hide",S.hide),x||(n.on("focus",A),n.on("blur",S.hide)),n.on("init",()=>{(n.hasFocus()||x)&&A()}),y8(n,s);const R={show:A,hide:S.hide,setEnabled:P=>{jS(s,P?"setEnabled":"setDisabled")},isEnabled:()=>!Rt.isDisabled(g.outerContainer)};return{editorContainer:g.outerContainer.element.dom,api:R}}});const xk=()=>{const n=pn(),s=pn(),a=pn();return{dialogUi:n,popupUi:s,mainUi:a,getUiMotherships:()=>{const g=n.get().map(C=>C.mothership),h=s.get().map(C=>C.mothership);return g.fold(()=>h.toArray(),C=>h.fold(()=>[C],S=>Hn(C.element,S.element)?[C]:[C,S]))},lazyGetInOuterOrDie:(g,h)=>()=>a.get().bind(C=>h(C.outerContainer)).getOrDie(`Could not find ${g} element in OuterContainer`)}},GL="contexttoolbar-show",aM="contexttoolbar-hide",Ek=(n,s,a)=>({setInputEnabled:i=>{!i&&a&&kr(a),Rt.set(n,!i)},isInputEnabled:()=>!Rt.isDisabled(n),hide:()=>{On(n,K0())},back:()=>{On(n,pk)},getValue:()=>s.get().getOrThunk(()=>St.getValue(n)),setValue:i=>{n.getSystem().isConnected()?St.setValue(n,i):s.set(i)}}),yw=(n,s,a)=>{const d=Za(n.element).bind(g=>n.getSystem().getByDom(g).toOptional());return Ek(d.getOr(n),s,a)},qL=(n,s,a)=>Me(d5,(i,d)=>{const g=n.get(i),h=Ek(g,a,i.element);s.onAction(h,d.event.buttonApi)}),KL=(n,s,a,i)=>{const{primary:d,...g}=s.original,h=hi(Vm({...g,type:"button",onAction:U}));return fw(h,a,[qL(n,s,i)])},yY=(n,s,a,i)=>{const{primary:d,...g}=s.original,h=hi(aR({...g,type:"togglebutton",onAction:U}));return yL(h,a,[qL(n,s,i)])},CY=n=>n.type==="contextformtogglebutton",SY=(n,s,a,i)=>CY(s)?yY(n,s,a,i):KL(n,s,a,i),YL=(n,s,a,i)=>{const d=$e(s,C=>to(SY(n,C,a,i)));return{asSpecs:()=>$e(d,C=>C.asSpec()),findPrimary:C=>ic(s,(S,x)=>S.primary?T.from(d[x]).bind(A=>A.getOpt(C)).filter(de(Rt.isDisabled)):T.none())}},wY=(n,s,a,i)=>{const{width:d,height:g}=n.initValue();let h=jv;const C=!0,S=Ct("ratio-event"),x=Ne=>Ek(Ne,i),A=Ne=>ol(Ne,{tag:"span",classes:["tox-icon","tox-lock-icon__"+Ne]},s.icons),R=()=>!C,P=n.label.getOr("Constrain proportions"),z=s.translate(P),Z=Ls.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-lock-context-form-size-input","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":z,"data-mce-name":P}},components:[A("lock"),A("unlock")],buttonBehaviours:Xe([Rt.config({disabled:R}),Vo.config({}),jo.config(s.tooltips.getConfig({tooltipText:z}))])}),K=Ne=>({dom:{tag:"div",classes:["tox-context-form__group"]},components:Ne}),ee=Ne=>Li(Ne.element,"div.tox-focusable-wrapper").fold(T.none,Ft=>(kr(Ft),T.some(!0))),G=Ne=>Dn.parts.field({factory:Hm,inputClasses:["tox-textfield","tox-toolbar-textfield","tox-textfield-size"],data:Ne?d:g,inputBehaviours:Xe([Rt.config({disabled:R}),Vo.config({}),cn("size-input-toolbar-events",[Me(Ui(),(Fe,Ft)=>{Ht(Fe,S,{isField1:Ne})})]),Lt.config({mode:"special",onEnter:a,onEscape:ee})]),selectOnFocus:!1}),oe=Ne=>({dom:{tag:"label",classes:["tox-label"]},components:[Yo(s.translate(Ne))]}),le=Ne=>({dom:{tag:"div",classes:["tox-focusable-wrapper","tox-toolbar-nav-item"]},components:[Ne],behaviours:Xe([Vo.config({}),ln.config({}),Lt.config({mode:"special",onEnter:Fe=>wo(Fe.element,"input").fold(T.none,Ot=>(kr(Ot),T.some(!0)))})])}),Se=le(Ls.parts.field1(K([Dn.parts.label(oe("Width:")),G(!0)]))),Te=le(Ls.parts.field2(K([Dn.parts.label(oe("Height:")),G(!1)]))),ct=Bt(U),lt=[Ud({onBeforeSetup:Ne=>wo(Ne.element,"input").each(kr),onSetup:n.onSetup,getApi:x},ct),xT({getApi:x},ct,i)];return Ls.sketch({dom:{tag:"div",classes:["tox-context-form__group"]},components:[Se,K([Z]),Te],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(Ne,Fe,Ft)=>{QT(St.getValue(Ne)).each(Ot=>{h(Ot).each(En=>{St.setValue(Fe,YI(En))})})},onInput:Ne=>On(Ne,hI),coupledFieldBehaviours:Xe([ln.config({}),Lt.config({mode:"flow",focusInside:Sf.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-focusable-wrapper"}),Rt.config({disabled:R,onDisabled:Ne=>{Ls.getField1(Ne).bind(Dn.getField).each(Rt.disable),Ls.getField2(Ne).bind(Dn.getField).each(Rt.disable),Ls.getLock(Ne).each(Rt.disable)},onEnabled:Ne=>{Ls.getField1(Ne).bind(Dn.getField).each(Rt.enable),Ls.getField2(Ne).bind(Dn.getField).each(Rt.enable),Ls.getLock(Ne).each(Rt.enable)}}),Fs(()=>s.checkUiComponentContext("mode:design")),cn("size-input-toolbar-events2",[Me(S,(Ne,Fe)=>{const Ft=Fe.event.isField1,Ot=Ft?Ls.getField1(Ne):Ls.getField2(Ne),En=Ft?Ls.getField2(Ne):Ls.getField1(Ne),Ut=Ot.map(St.getValue).getOr(""),gn=En.map(St.getValue).getOr("");h=JI(Ut,gn)}),Me(hI,Ne=>n.onInput(x(Ne))),...lt])])})},o2=(n,s,a)=>Dn.sketch({dom:{tag:"div",classes:["tox-context-form__group"]},components:[...n.toArray(),s],fieldBehaviours:Xe([Rt.config({disabled:()=>a.checkUiComponentContext("mode:design").shouldDisable,onDisabled:i=>{RK(i),Dn.getField(i).each(Rt.disable)},onEnabled:i=>{Dn.getField(i).each(Rt.enable)}})])}),xY=(n,s,a,i)=>{const d=Bt(U),g=S=>yw(S,i),h=n.label.map(S=>Dn.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Yo(s.translate(S))]})),C=Dn.parts.field({factory:Hm,type:"range",inputClasses:["tox-toolbar-slider__input","tox-toolbar-nav-item"],inputAttributes:{min:String(n.min()),max:String(n.max())},data:n.initValue().toString(),fromInputValue:S=>of(S).getOr(n.min()),toInputValue:S=>String(S),inputBehaviours:Xe([Rt.config({disabled:()=>s.checkUiComponentContext("mode:design").shouldDisable}),Fs(()=>s.checkUiComponentContext("mode:design")),Lt.config({mode:"special",onEnter:a,onLeft:(S,x)=>(x.cut(),T.none()),onRight:(S,x)=>(x.cut(),T.none())}),cn("slider-events",[Ud({onSetup:n.onSetup,getApi:g,onBeforeSetup:Lt.focusIn},d),xT({getApi:g},d,i),Me(_l(),S=>{n.onInput(g(S))})])])});return o2(h,C,s)},EY=(n,s,a,i)=>{const d=Bt(U),g=A=>yw(A,i),h=n.label.map(A=>Dn.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Yo(s.translate(A))]})),S={...n.placeholder.map(A=>({placeholder:s.translate(A)})).getOr({})},x=Dn.parts.field({factory:Hm,inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-item"],inputAttributes:S,data:n.initValue(),selectOnFocus:!0,inputBehaviours:Xe([Rt.config({disabled:()=>s.checkUiComponentContext("mode:design").shouldDisable}),Fs(()=>s.checkUiComponentContext("mode:design")),Lt.config({mode:"special",onEnter:a,onLeft:(A,R)=>(R.cut(),T.none()),onRight:(A,R)=>(R.cut(),T.none())}),cn("input-events",[Ud({onSetup:n.onSetup,getApi:A=>Li(A.element,".tox-toolbar").bind(P=>wo(P,"button:enabled")).fold(()=>yw(A,i),P=>yw(A,i,P)),onBeforeSetup:Lt.focusIn},d),xT({getApi:g},d,i),Me(_l(),A=>{n.onInput(g(A))})])])});return o2(h,x,s)},cM=(n,s,a)=>{const i=pn(),g=to(n(a,x=>C.findPrimary(x).orThunk(()=>S.findPrimary(x)).map(A=>(ah(A),!0)),i)),h=Qc(s.commands,x=>x.align==="start"),C=YL(g,h.pass,a,i),S=YL(g,h.fail,a,i);return Co([{title:T.none(),label:T.none(),items:C.asSpecs()},{title:T.none(),label:T.none(),items:[g.asSpec()]},{title:T.none(),label:T.none(),items:S.asSpecs()}],x=>x.items.length>0)},iM=(n,s)=>{switch(n.type){case"contextform":return cM(Le(EY,n),n,s);case"contextsliderform":return cM(Le(xY,n),n,s);case"contextsizeinputform":return cM(Le(wY,n),n,s)}},XL={renderContextForm:(n,s,a)=>dk({type:n,uid:Ct("context-toolbar"),initGroups:iM(s,a),onEscape:T.none,cyclicKeying:!0,providers:a}),buildInitGroups:iM},JL=(n,s,a)=>s.bottom-n.y>=a&&n.bottom-s.y>=a,TY=n=>{const s=n.getBoundingClientRect();if(s.height<=0&&s.width<=0){const a=w0(at.fromDom(n.startContainer),n.startOffset).element;return(om(a)?Za(a):T.some(a)).filter(gc).map(d=>d.dom.getBoundingClientRect()).getOr(s)}else return s},lM=n=>{const s=n.selection.getRng(),a=TY(s);if(n.inline){const i=Ns();return rr(i.left+a.left,i.top+a.top,a.width,a.height)}else{const i=um(at.fromDom(n.getBody()));return rr(i.x+a.left,i.y+a.top,a.width,a.height)}},kY=(n,s)=>s.filter(a=>Qn(a)&&Y(a)).map(um).getOrThunk(()=>lM(n)),_Y=(n,s,a)=>{const i=Math.max(n.x+a,s.x),d=Math.min(n.right-a,s.right);return{x:i,width:d-i}},Cw=(n,s,a,i,d,g)=>{const h=at.fromDom(n.getContainer()),C=wo(h,".tox-editor-header").getOr(h),S=js(C),x=S.y>=s.bottom,A=i&&!x;if(n.inline&&A)return{y:Math.max(S.bottom+g,a.y),bottom:a.bottom};if(n.inline&&!A)return{y:a.y,bottom:Math.min(S.y-g,a.bottom)};const R=d==="line"?js(h):s;return A?{y:Math.max(S.bottom+g,a.y),bottom:Math.min(R.bottom-g,a.bottom)}:{y:Math.max(R.y+g,a.y),bottom:Math.min(S.y-g,a.bottom)}},uM=(n,s,a,i=0)=>{const d=$0(window),g=js(at.fromDom(n.getContentAreaContainer())),h=kv(n)||_v(n)||Rh(n),{x:C,width:S}=_Y(g,d,i);if(n.inline&&!h)return rr(C,d.y,S,d.height);{const x=s.header.isPositionedAtTop(),{y:A,bottom:R}=Cw(n,g,d,x,a,i);return rr(C,A,S,R-A)}},Tk=12,QL={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},dM={maxHeightFunction:Af(),maxWidthFunction:Zp()},mM=(n,s)=>{const a=n.selection.getRng(),i=w0(at.fromDom(a.startContainer),a.startOffset);return a.startContainer===a.endContainer&&a.startOffset===a.endOffset-1&&Hn(i.element,s)},eF=(n,s,a)=>{const i=is(n,"position");on(n,"position",s);const d=a(n);return i.each(g=>on(n,"position",g)),d},fM=n=>n==="node",AY=(n,s,a,i,d)=>{const g=lM(n),h=i.lastElement().exists(C=>Hn(a,C));if(mM(n,a))return h?Pa:oa;if(h)return eF(s,i.getMode(),()=>JL(g,js(s),-20)&&!i.isReposition()?Nl:Pa);{const C=i.getMode()==="fixed"?d.y+Ns().top:d.y,S=vr(s)+Tk;return C+S<=g.y?oa:oh}},s2=(n,s,a,i)=>{const d=S=>(x,A,R,P,z)=>{const Z=AY(n,P,S,a,z),K={...x,y:z.y,height:z.height};return{...Z(K,A,R,P,z),alwaysFit:!0}},g=S=>fM(i)?[d(S)]:[];return s?{onLtr:S=>[qs,cr,Gs,Vr,_r,ss].concat(g(S)),onRtl:S=>[qs,Gs,cr,_r,Vr,ss].concat(g(S))}:{onLtr:S=>[ss,qs,Vr,cr,_r,Gs].concat(g(S)),onRtl:S=>[ss,qs,_r,Gs,Vr,cr].concat(g(S))}},kk=(n,s,a,i)=>s==="line"?{bubble:Ec(Tk,0,QL),layouts:{onLtr:()=>[eh],onRtl:()=>[Iy]},overrides:dM}:{bubble:Ec(0,Tk,QL,1/Tk),layouts:s2(n,a,i,s),overrides:dM},r2=(n,s)=>{const a=Co(s,g=>g.predicate(n.dom)),{pass:i,fail:d}=Qc(a,g=>g.type==="contexttoolbar");return{contextToolbars:i,contextForms:d}},gM=n=>{if(n.length<=1)return n;{const s=g=>Qs(n,h=>h.position===g),a=g=>Co(n,h=>h.position===g),i=s("selection"),d=s("node");if(i||d)if(d&&i){const g=a("node"),h=$e(a("selection"),C=>({...C,position:"node"}));return g.concat(h)}else return a(i?"selection":"node");else return a("line")}},hM=n=>{if(n.length<=1)return n;{const s=i=>Ce(n,d=>d.position===i);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(i=>i.position).fold(()=>[],i=>Co(n,d=>d.position===i))}},tF=(n,s,a)=>{const i=r2(n,s);if(i.contextForms.length>0)return T.some({elem:n,toolbars:[i.contextForms[0]]});{const d=r2(n,a);if(d.contextForms.length>0)return T.some({elem:n,toolbars:[d.contextForms[0]]});if(i.contextToolbars.length>0||d.contextToolbars.length>0){const g=gM(i.contextToolbars.concat(d.contextToolbars));return T.some({elem:n,toolbars:g})}else return T.none()}},_k=(n,s,a)=>n(s)?T.none():Xw(s,i=>{if(gc(i)){const{contextToolbars:d,contextForms:g}=r2(i,a.inNodeScope),h=g.length>0?g:hM(d);return h.length>0?T.some({elem:i,toolbars:h}):T.none()}else return T.none()},n),nF=(n,s)=>{const a=at.fromDom(s.getBody()),i=h=>Hn(h,a),d=h=>!i(h)&&!I(a,h),g=at.fromDom(s.selection.getNode());return d(g)?T.none():tF(g,n.inNodeScope,n.inEditorScope).orThunk(()=>_k(i,g,n))},oF=(n,s)=>{const a={},i=[],d=[],g={},h={},C=(A,R)=>{const P=hi(PW(R));a[A]=P,P.launch.map(z=>{g["form:"+A]={...R.launch,type:z.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(P)}}}),P.scope==="editor"?d.push(P):i.push(P),h[A]=P},S=(A,R)=>{IW(R).each(P=>{P.launch.isSome()&&(g["toolbar:"+A]={...R.launch,type:"button",onAction:()=>{s(P)}}),R.scope==="editor"?d.push(P):i.push(P),h[A]=P})},x=mo(n);return gt(x,A=>{const R=n[A];R.type==="contextform"||R.type==="contextsliderform"||R.type==="contextsizeinputform"?C(A,R):R.type==="contexttoolbar"&&S(A,R)}),{forms:a,inNodeScope:i,inEditorScope:d,lookupTable:h,formNavigators:g}},Sw="tox-pop--transition",OY=n=>n===yk.ENTER||n===yk.SPACEBAR,sF=(n,s,a,i)=>{const d=i.backstage,g=d.shared,h=Jr().deviceType.isTouch,C=pn(),S=pn(),x=pn(),A=X5({sink:a,onEscape:()=>(n.focus(),$R(n),T.some(!0)),onHide:()=>{$R(n)},onBack:()=>{IR(n)},focusElement:Ut=>{n.getBody().contains(Ut.dom)?n.focus():kr(Ut)}}),R=m(A.sketch),P=()=>{const Ut=x.get().getOr("node"),gn=fM(Ut)?1:0;return uM(n,g,Ut,gn)},z=()=>!n.removed&&!(h()&&d.isContextMenuOpen()),Z=Ut=>ti(ni(Ut,C.get(),Hn),!0),K=()=>{if(z()){const Ut=P(),gn=ti(x.get(),"node")?kY(n,C.get()):lM(n);return Ut.height<=0||!JL(gn,Ut,.01)}else return!0},ee=()=>{C.clear(),S.clear(),x.clear(),fs.hide(R)},G=()=>{if(fs.isOpen(R)){const Ut=R.element;Nn(Ut,"display"),K()?on(Ut,"display","none"):(S.set(0),fs.reposition(R))}},oe=Ut=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[Ut],behaviours:Xe([Lt.config({mode:"acyclic"}),cn("pop-dialog-wrap-events",[Wo(gn=>{n.shortcuts.add("ctrl+F9","focus statusbar",()=>Lt.focusIn(gn))}),qi(gn=>{n.shortcuts.remove("ctrl+F9")})])])}),le=Ut=>{const gn=lt([Ut]);Ht(R,SL,{forwardContents:oe(gn)})},Se=Ai(()=>oF(s,le)),Te=(Ut,gn)=>Ck(n,{buttons:Ut,toolbar:gn.items,allowToolbarGroups:!1},i.backstage,T.some(["form:","toolbar:"])),ct=(Ut,gn)=>XL.buildInitGroups(Ut,gn),lt=Ut=>{const{buttons:gn}=n.ui.registry.getAll(),Mt=Se(),Pe={...gn,...Mt.formNavigators},tt=T1(n)===nl.scrolling?nl.scrolling:nl.default,Kt=Ue($e(Ut,bn=>bn.type==="contexttoolbar"?Te(Pe,iR(bn)):ct(bn,g.providers)));return dk({type:tt,uid:Ct("context-toolbar"),initGroups:Kt,onEscape:T.none,cyclicKeying:!0,providers:g.providers})},Ne=(Ut,gn)=>{const Mt=Ut==="node"?g.anchors.node(gn):g.anchors.cursor(),Pe=kk(n,Ut,h(),{lastElement:C.get,isReposition:()=>ti(S.get(),0),getMode:()=>La.getMode(a)});return $o(Mt,Pe)},Fe=(Ut,gn)=>{if(En.cancel(),!z())return;const Mt=lt(Ut),Pe=Ut[0].position,tt=Ne(Pe,gn);x.set(Pe),S.set(1);const Kt=R.element;Nn(Kt,"display"),Z(gn)||(us(Kt,Sw),La.reset(a,R)),fs.showWithinBounds(R,oe(Mt),{anchor:tt,transition:{classes:[Sw],mode:"placement"}},()=>T.some(P())),gn.fold(C.clear,C.set),K()&&on(Kt,"display","none")},Ft=()=>{on(R.element,"transition","none"),G(),Nn(R.element,"transition")};let Ot=!1;const En=gl(()=>{if(!(!n.hasFocus()||n.removed||Ot))if(Ws(R.element,Sw))En.throttle();else{const Ut=Se();nF(Ut,n).fold(ee,gn=>{Fe(gn.toolbars,T.some(gn.elem))})}},17);n.on("init",()=>{n.on("remove",ee),n.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",G),n.on("click focus SetContent",En.throttle),n.on("keyup",Ut=>{(!OY(Ut.keyCode)||!A.inSubtoolbar())&&En.throttle()}),n.on(aM,ee),n.on(GL,Ut=>{const gn=Se();It(gn.lookupTable,Ut.toolbarKey).each(Mt=>{Fe([Mt],dc(Ut.target!==n,Ut.target)),CL(R)})}),n.on("focusout",Ut=>{X4.setEditorTimeout(n,()=>{or(a.element).isNone()&&or(R.element).isNone()&&!n.hasFocus()&&ee()},0)}),n.on("SwitchMode",()=>{n.mode.isReadOnly()&&ee()}),n.on("DisabledStateChange",Ut=>{Ut.state&&ee()}),n.on("ExecCommand",({command:Ut})=>{Ut.toLowerCase()==="toggleview"&&ee()}),n.on("AfterProgressState",Ut=>{Ut.state?ee():n.hasFocus()&&En.throttle()}),n.on("dragstart",()=>{Ot=!0}),n.on("dragend drop",()=>{Ot=!1}),n.on("NodeChange",Ut=>{A.inSubtoolbar()?Ft():or(R.element).fold(En.throttle,U)})})},DY=n=>{gt([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],a=>{n.ui.registry.addToggleButton(a.name,{tooltip:a.text,icon:a.icon,onAction:_c(n,a.cmd),onSetup:XS(n,a.name)})}),n.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:Wr(n),onAction:_c(n,"JustifyNone")})},rF=(n,s)=>{const a=()=>{const i=s.getOptions(n),d=s.getCurrent(n).map(s.hash),g=pn();return $e(i,h=>({type:"togglemenuitem",text:s.display(h),onSetup:C=>{const S=A=>{A&&(g.on(R=>R.setActive(!1)),g.set(C)),C.setActive(A)};S(ti(d,s.hash(h)));const x=s.watcher(n,h,S);return()=>{g.clear(),x()}},onAction:()=>s.setCurrent(n,h)}))};n.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:i=>i(a()),onSetup:s.onToolbarSetup}),n.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:a,onSetup:s.onMenuSetup})},Ak=n=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:n$,hash:s=>A3(s,["fixed","relative","empty"]).getOr(s),display:Et,watcher:(s,a,i)=>s.formatter.formatChanged("lineheight",i,!1,{value:a}).unbind,getCurrent:s=>T.from(s.queryCommandValue("LineHeight")),setCurrent:(s,a)=>s.execCommand("LineHeight",!1,a),onToolbarSetup:Wr(n),onMenuSetup:Wr(n)}),aF=n=>T.from(IP(n)).map(a=>({name:"language",text:"Language",icon:"language",getOptions:ie(a),hash:i=>zt(i.customCode)?i.code:`${i.code}/${i.customCode}`,display:i=>i.title,watcher:(i,d,g)=>i.formatter.formatChanged("lang",g,!1,{value:d.code,customValue:d.customCode??null}).unbind,getCurrent:i=>{const d=at.fromDom(i.selection.getNode());return Fi(d,g=>T.some(g).filter(gc).bind(h=>Pr(h,"lang").map(S=>{const x=Pr(h,"data-mce-lang").getOrUndefined();return{code:S,customCode:x,title:""}})))},setCurrent:(i,d)=>i.execCommand("Lang",!1,d),onToolbarSetup:i=>{const d=Us();return i.setActive(n.formatter.match("lang",{},void 0,!0)),d.set(n.formatter.formatChanged("lang",i.setActive,!0)),z1(d.clear,Wr(n)(i))},onMenuSetup:Wr(n)})),RY=n=>{rF(n,Ak(n)),aF(n).each(s=>rF(n,s))},MY=(n,s)=>{$K(n,s),zK(n,s),t2(n,s),LK(n,s),HL(n,s)},NY=n=>{n.ui.registry.addContext("editable",()=>n.selection.isEditable()),n.ui.registry.addContext("mode",s=>n.mode.get()===s),n.ui.registry.addContext("any",yt),n.ui.registry.addContext("formatting",s=>n.formatter.canApply(s)),n.ui.registry.addContext("insert",s=>n.schema.isValidChild(n.selection.getNode().tagName,s))},BY=n=>Fh(n,"NodeChange",s=>{s.setEnabled(n.queryCommandState("outdent")&&n.selection.isEditable())}),PY=n=>{n.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:BY(n),onAction:_c(n,"outdent")}),n.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:Wr(n,()=>n.queryCommandState("indent")),onAction:_c(n,"indent")})},cF=n=>{PY(n)},pM=(n,s)=>a=>{a.setActive(s.get());const i=d=>{s.set(d.state),a.setActive(d.state)};return n.on("PastePlainTextToggle",i),z1(()=>n.off("PastePlainTextToggle",i),Wr(n)(a))},iF=n=>{const s=Bt(XP(n)),a=()=>n.execCommand("mceTogglePlainTextPaste");n.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:a,onSetup:pM(n,s)}),n.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:a,onSetup:pM(n,s)})},Ok=(n,s)=>()=>{n.execCommand("mceToggleFormat",!1,s)},$Y=n=>{jm.each([{name:"bold",text:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,a)=>{n.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:XS(n,s.name),onAction:Ok(n,s.name),shortcut:s.shortcut})});for(let s=1;s<=6;s++){const a="h"+s,i=`Access+${s}`;n.ui.registry.addToggleButton(a,{text:a.toUpperCase(),tooltip:"Heading "+s,onSetup:XS(n,a),onAction:Ok(n,a),shortcut:i})}},lF=n=>{jm.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy",context:"any"},{name:"help",text:"Help",action:"mceHelp",icon:"help",shortcut:"Alt+0",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],s=>{n.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:_c(n,s.action),shortcut:s.shortcut,context:s.context})}),jm.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{n.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:Wr(n),onAction:_c(n,s.action)})})},uF=n=>{jm.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{n.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:_c(n,s.action),onSetup:XS(n,s.name)})})},IY=n=>{$Y(n),lF(n),uF(n)},hQ=n=>{jm.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],s=>{n.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:_c(n,s.action),context:s.context})}),jm.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{n.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onSetup:Wr(n),onAction:_c(n,s.action)})}),n.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:Wr(n),onAction:Ok(n,"code")})},LY=n=>{IY(n),hQ(n)},Dk=(n,s)=>Fh(n,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",a=>{a.setEnabled(!n.mode.isReadOnly()&&n.undoManager[s]())}),FY=n=>{n.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:Dk(n,"hasUndo"),onAction:_c(n,"undo")}),n.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:Dk(n,"hasRedo"),onAction:_c(n,"redo")})},HY=n=>{n.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:Dk(n,"hasUndo"),onAction:_c(n,"undo"),shortcut:"Meta+Z"}),n.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:Dk(n,"hasRedo"),onAction:_c(n,"redo"),shortcut:"Meta+Y"})},zY=n=>{FY(n),HY(n)},VY=n=>Fh(n,"VisualAid",s=>{s.setActive(n.hasVisual)}),UY=n=>{n.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:VY(n),onAction:_c(n,"mceToggleVisualAid"),context:"any"})},ZY=n=>{n.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:_c(n,"mceToggleVisualAid"),context:"any"})},WY=n=>{ZY(n),UY(n)},jY=(n,s)=>{DY(n),LY(n),MY(n,s),zY(n),eI(n),WY(n),cF(n),RY(n),iF(n),NY(n)},GY=n=>be(n)?n.split(/[ ,]/):n,dF=n=>s=>s.options.get(n),qY=n=>{const s=n.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:a=>a===!1?{value:[],valid:!0}:be(a)||Yn(a,be)?{value:GY(a),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},bM=dF("contextmenu_never_use_native"),KY=dF("contextmenu_avoid_overlap"),YY=n=>mF(n).length===0,mF=n=>{const s=n.ui.registry.getAll().contextMenus,a=n.options.get("contextmenu");return n.options.isSet("contextmenu")?a:Co(a,i=>So(s,i))},ww=(n,s)=>({type:"makeshift",x:n,y:s}),XY=(n,s,a)=>ww(n.x+s,n.y+a),vM=n=>n.type==="longpress"||n.type.indexOf("touch")===0,yM=n=>{if(vM(n)){const s=n.touches[0];return ww(s.pageX,s.pageY)}else return ww(n.pageX,n.pageY)},JY=n=>{if(vM(n)){const s=n.touches[0];return ww(s.clientX,s.clientY)}else return ww(n.clientX,n.clientY)},fF=(n,s)=>{const a=wv.DOM.getPos(n);return XY(s,a.x,a.y)},QY=(n,s)=>s.type==="contextmenu"||s.type==="longpress"?n.inline?yM(s):fF(n.getContentAreaContainer(),JY(s)):gF(n),gF=n=>({type:"selection",root:at.fromDom(n.selection.getNode())}),eX=n=>({type:"node",node:T.some(at.fromDom(n.selection.getNode())),root:at.fromDom(n.getBody())}),hF=(n,s,a)=>{switch(a){case"node":return eX(n);case"point":return QY(n,s);case"selection":return gF(n)}},tX=(n,s,a,i,d,g)=>{const h=a(),C=hF(n,s,g);og(h,Hu.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!1,search:T.none()}).map(S=>{s.preventDefault(),fs.showMenuAt(d,{anchor:C},{menu:{markers:zm("normal")},data:S})})},CM={onLtr:()=>[qs,cr,Gs,Vr,_r,ss,oa,oh,Ba,Cb,_f,Vp],onRtl:()=>[qs,Gs,cr,_r,Vr,ss,oa,oh,_f,Vp,Ba,Cb]},nX=12,oX={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},SM=(n,s)=>{const a=n.selection;if(a.isCollapsed()||s.touches.length<1)return!1;{const i=s.touches[0],d=a.getRng();return ty(n.getWin(),Ng.domRange(d)).exists(h=>h.left<=i.clientX&&h.right>=i.clientX&&h.top<=i.clientY&&h.bottom>=i.clientY)}},pF=n=>{const s=n.selection.getRng(),a=()=>{X4.setEditorTimeout(n,()=>{n.selection.setRng(s)},10),g()};n.once("touchend",a);const i=h=>{h.preventDefault(),h.stopImmediatePropagation()};n.on("mousedown",i,!0);const d=()=>g();n.once("longpresscancel",d);const g=()=>{n.off("touchend",a),n.off("longpresscancel",d),n.off("mousedown",i)}},bF=(n,s,a)=>{const i=hF(n,s,a);return{bubble:Ec(0,a==="point"?nX:0,oX),layouts:CM,overrides:{maxWidthFunction:Zp(),maxHeightFunction:Af()},...i}},sX=(n,s,a,i,d,g,h)=>{const C=bF(n,s,g);og(a,Hu.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!0,search:T.none()}).map(S=>{s.preventDefault();const x=h?sa.HighlightMenuAndItem:sa.HighlightNone;fs.showMenuWithinBounds(d,{anchor:C},{menu:{markers:zm("normal"),highlightOnOpen:x},data:S,type:"horizontal"},()=>T.some(uM(n,i.shared,g==="node"?"node":"selection"))),n.dispatch(aM)})},rX=(n,s,a,i,d,g)=>{const h=Jr(),C=h.os.isiOS(),S=h.os.isMacOS(),x=h.os.isAndroid(),A=h.deviceType.isTouch(),R=()=>!(x||C||S&&A),P=()=>{const z=a();sX(n,s,z,i,d,g,R())};if((S||C)&&g!=="node"){const z=()=>{pF(n),P()};SM(n,s)?z():(n.once("selectionchange",z),n.once("touchend",()=>n.off("selectionchange",z)))}else P()},vF=n=>be(n)?n==="|":n.type==="separator",wM={type:"separator"},yF=n=>{const s=a=>({text:a.text,icon:a.icon,enabled:a.enabled,shortcut:a.shortcut});if(be(n))return n;switch(n.type){case"separator":return wM;case"submenu":return{type:"nestedmenuitem",...s(n),getSubmenuItems:()=>{const i=n.getSubmenuItems();return be(i)?i:$e(i,yF)}};default:const a=n;return{type:"menuitem",...s(a),onAction:At(a.onAction)}}},Rk=(n,s)=>{if(s.length===0)return n;const i=qu(n).filter(d=>!vF(d)).fold(()=>[],d=>[wM]);return n.concat(i).concat(s).concat([wM])},aX=(n,s,a)=>{const i=Po(s,(d,g)=>It(n,g.toLowerCase()).map(h=>{const C=h.update(a);if(be(C)&&Jd(pt(C)))return Rk(d,C.split(" "));if(xt(C)&&C.length>0){const S=$e(C,yF);return Rk(d,S)}else return d}).getOrThunk(()=>d.concat([g])),[]);return i.length>0&&vF(i[i.length-1])&&i.pop(),i},CF=(n,s)=>s.ctrlKey&&!bM(n),cX=n=>n.type==="longpress"||So(n,"touches"),SF=(n,s)=>!cX(s)&&(s.button!==2||s.target===n.getBody()&&s.pointerType===""),Mk=(n,s)=>SF(n,s)?n.selection.getStart(!0):s.target,iX=(n,s)=>{const a=KY(n),i=SF(n,s)?"selection":"point";if(Jd(a)){const d=Mk(n,s);return gp(at.fromDom(d),a)?"node":i}else return i},wF=(n,s,a)=>{const d=Jr().deviceType.isTouch,g=m(fs.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>n.focus(),onShow:()=>a.setContextMenuState(!0),onHide:()=>a.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:Xe([cn("dismissContextMenu",[Me(pd(),(S,x)=>{Jn.close(S),n.focus()})])])})),h=()=>fs.hide(g),C=S=>{if(bM(n)&&S.preventDefault(),CF(n,S)||YY(n))return;const x=iX(n,S),A=()=>{const P=Mk(n,S),z=n.ui.registry.getAll(),Z=mF(n);return aX(z.contextMenus,Z,P)};(d()?rX:tX)(n,S,A,a,g,x)};n.on("init",()=>{const S="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(d()?"":" ResizeWindow");n.on(S,h),n.on("longpress contextmenu",C)})},xw=40,Nk=xw/2,xF=(n,s,a,i,d,g)=>n.fold(()=>Vf.snap({sensor:Ou(a-Nk,i-Nk),range:ko(d,g),output:Ou(T.some(a),T.some(i)),extra:{td:s}}),h=>{const C=a-Nk,S=i-Nk,x=xw,A=xw,R=h.element.dom.getBoundingClientRect();return Vf.snap({sensor:Ou(C,S),range:ko(x,A),output:Ou(T.some(a-R.width/2),T.some(i-R.height/2)),extra:{td:s}})}),EF=(n,s,a)=>{const i=(d,g)=>d.exists(h=>Hn(h,g));return{getSnapPoints:n,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(d,g)=>{const h=g.td;i(s.get(),h)||(s.set(h),a(h))},mustSnap:!0}},TF=n=>to(wr.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:Xe([Vf.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:n}),Md.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),lX=(n,s)=>{const a=Bt([]),i=Bt([]),d=Bt(!1),g=pn(),h=pn(),C=lt=>{const Ne=um(lt);return xF(z.getOpt(s),lt,Ne.x,Ne.y,Ne.width,Ne.height)},S=()=>$e(a.get(),lt=>C(lt)),x=lt=>{const Ne=um(lt);return xF(Z.getOpt(s),lt,Ne.right,Ne.bottom,Ne.width,Ne.height)},A=()=>$e(i.get(),lt=>x(lt)),R=EF(S,g,lt=>{h.get().each(Ne=>{n.dispatch("TableSelectorChange",{start:lt,finish:Ne})})}),P=EF(A,h,lt=>{g.get().each(Ne=>{n.dispatch("TableSelectorChange",{start:Ne,finish:lt})})}),z=TF(R),Z=TF(P),K=m(z.asSpec()),ee=m(Z.asSpec()),G=(lt,Ne,Fe,Ft)=>{const Ot=Ne.dom.getBoundingClientRect();Nn(lt.element,"display");const En=ap(at.fromDom(n.getBody())).dom.innerHeight,Ut=Fe(Ot),gn=Ft(Ot,En);(Ut||gn)&&on(lt.element,"display","none")},oe=(lt,Ne,Fe,Ft)=>{const Ot=Fe(Ne);Vf.snapTo(lt,Ot),G(lt,Ne,gn=>gn[Ft]<0,(gn,Mt)=>gn[Ft]>Mt)},le=lt=>oe(K,lt,C,"top"),Se=()=>g.get().each(le),Te=lt=>oe(ee,lt,x,"bottom"),ct=()=>h.get().each(Te);if(Jr().deviceType.isTouch()){const lt=Ne=>$e(Ne,at.fromDom);n.on("TableSelectionChange",Ne=>{d.get()||(Ed(s,K),Ed(s,ee),d.set(!0));const Fe=at.fromDom(Ne.start),Ft=at.fromDom(Ne.finish);g.set(Fe),h.set(Ft),T.from(Ne.otherCells).each(Ot=>{a.set(lt(Ot.upOrLeftCells)),i.set(lt(Ot.downOrRightCells)),le(Fe),Te(Ft)})}),n.on("ResizeEditor ResizeWindow ScrollContent",()=>{Se(),ct()}),n.on("TableSelectionClear",()=>{d.get()&&(kd(K),kd(ee),d.set(!1)),g.clear(),h.clear()})}};var kF=`<svg height="16" viewBox="0 0 80 16" width="80" xmlns="http://www.w3.org/2000/svg"><g opacity=".8"><path d="m80 3.537v-2.202h-7.976v11.585h7.976v-2.25h-5.474v-2.621h4.812v-2.069h-4.812v-2.443zm-10.647 6.929c-.493.217-1.13.337-1.864.337s-1.276-.156-1.805-.47a3.732 3.732 0 0 1 -1.3-1.298c-.324-.554-.48-1.191-.48-1.877s.156-1.335.48-1.877a3.635 3.635 0 0 1 1.3-1.299 3.466 3.466 0 0 1 1.805-.481c.65 0 .914.06 1.263.18.36.12.698.277.986.47.289.192.578.384.842.6l.12.085v-2.586l-.023-.024c-.385-.35-.855-.614-1.384-.818-.53-.205-1.155-.313-1.877-.313-.721 0-1.6.144-2.333.445a5.773 5.773 0 0 0 -1.937 1.251 5.929 5.929 0 0 0 -1.324 1.9c-.324.735-.48 1.565-.48 2.455s.156 1.72.48 2.454c.325.734.758 1.383 1.324 1.913.553.53 1.215.938 1.937 1.25a6.286 6.286 0 0 0 2.333.434c.819 0 1.384-.108 1.961-.313.59-.216 1.083-.505 1.468-.866l.024-.024v-2.49l-.12.096c-.41.337-.878.626-1.396.866zm-14.869-4.15-4.8-5.04-.024-.025h-.902v11.67h2.502v-6.847l2.827 3.08.385.409.397-.41 2.791-3.067v6.845h2.502v-11.679h-.902l-4.788 5.052z"/><path clip-rule="evenodd" d="m15.543 5.137c0-3.032-2.466-5.113-4.957-5.137-.36 0-.745.024-1.094.096-.157.024-3.85.758-3.85.758-3.032.602-4.62 2.466-4.704 4.788-.024.89-.024 4.27-.024 4.27.036 3.165 2.406 5.138 5.017 5.126.337 0 1.119-.109 1.287-.145.144-.024.385-.084.746-.144.661-.12 1.684-.325 3.067-.602 2.37-.409 4.103-2.009 4.44-4.33.156-1.023.084-4.692.084-4.692zm-3.213 3.308-2.346.457v2.31l-5.859 1.143v-5.75l2.346-.458v3.441l3.513-.686v-3.44l-3.513.685v-2.297l5.859-1.143v5.75zm20.09-3.296-.083-1.023h-2.13v8.794h2.346v-4.884c0-1.107.95-1.985 2.057-1.997 1.095 0 1.901.89 1.901 1.997v4.884h2.346v-5.245c-.012-2.105-1.588-3.777-3.67-3.765a3.764 3.764 0 0 0 -2.778 1.25l.012-.011zm-6.014-4.102 2.346-.458v2.298l-2.346.457z" fill-rule="evenodd"/><path d="m28.752 4.126h-2.346v8.794h2.346z"/><path clip-rule="evenodd" d="m43.777 15.483 4.043-11.357h-2.418l-1.54 4.355-.445 1.324-.36-1.324-1.54-4.355h-2.418l3.151 8.794-1.083 3.08zm-21.028-5.51c0 .722.541 1.034.878 1.034s.638-.048.95-.144l.518 1.708c-.217.145-.879.518-2.13.518a2.565 2.565 0 0 1 -2.562-2.587c-.024-1.082-.024-2.49 0-4.21h-1.54v-2.142h1.54v-1.912l2.346-.458v2.37h2.201v2.142h-2.2v3.693-.012z" fill-rule="evenodd"/></g></svg>
`;const uX=n=>n.nodeName==="BR"||!!n.getAttribute("data-mce-bogus")||n.getAttribute("data-mce-type")==="bookmark",dX=(n,s,a)=>{const i=s.delimiter??"›",d=(S,x,A)=>wr.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":A}},components:[Yo(S)],action:R=>{n.focus(),n.selection.select(x),n.nodeChanged()},buttonBehaviours:Xe([jo.config({...a.tooltips.getConfig({tooltipText:a.translate(["Select the {0} element",x.nodeName.toLowerCase()]),onShow:(R,P)=>{zc(R.element,P.element)},onHide:R=>{ry(R.element)}})}),Vd.button(a.isDisabled),Fs(()=>a.checkUiComponentContext("any"))])}),g=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[Yo(` ${i} `)]}),h=S=>Po(S,(x,A,R)=>{const P=d(A.name,A.element,R);return R===0?x.concat([P]):x.concat([g(),P])},[]),C=S=>{const x=[];let A=S.length;for(;A-- >0;){const R=S[A];if(R.nodeType===1&&!uX(R)){const P=Ej(n,R);if(P.isDefaultPrevented()||x.push({name:P.name,element:R}),P.isPropagationStopped())break}}return x};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:Xe([Lt.config({mode:"flow",selector:"div[role=button]"}),Rt.config({disabled:a.isDisabled}),Fs(()=>a.checkUiComponentContext("any")),Vo.config({}),mn.config({}),cn("elementPathEvents",[Wo((S,x)=>{n.shortcuts.add("alt+F11","focus statusbar elementpath",()=>Lt.focusIn(S)),n.on("NodeChange",A=>{const R=C(A.parents),P=R.length>0?h(R):[];mn.set(S,P)})})])]),components:[]}};var Km;(function(n){n[n.None=0]="None",n[n.Both=1]="Both",n[n.Vertical=2]="Vertical"})(Km||(Km={}));const _F=n=>{const s=at.fromDom(n.getContainer()),a=vr(s),i=va(s);return{height:a,width:i}},mX=(n,s,a,i)=>{const d=wk(i.height+s.top,tD(n),nD(n));return a===Km.Both?{height:d,width:wk(i.width+s.left,eD(n),Q4(n))}:{height:d}},AF=(n,s,a)=>{const i=at.fromDom(n.getContainer()),d=_F(n),g=mX(n,s,a,d);return Cs(g,(h,C)=>{dn(h)&&on(i,C,Sk(h))}),BR(n),g},fX=n=>{const s=YP(n);return s===!1?Km.None:s==="both"?Km.Both:Km.Vertical},gX=(n,s)=>s===Km.Both?Ha.translate(["Editor's height: {0} pixels, Editor's width: {1} pixels",n.height,n.width]):Ha.translate(["Editor's height: {0} pixels",n.height]),xM=(n,s,a)=>{qt(n.element,"aria-valuetext",gX(s,a))},Bk=(n,s,a,i,d)=>{const h=ko(i*20,d*20),C=AF(n,h,a);return xM(s,C,a),T.some(!0)},OF=(n,s)=>{const a=fX(n);if(a===Km.None)return T.none();const i=a===Km.Both?Ha.translate("Press the arrow keys to resize the editor."):Ha.translate("Press the Up and Down arrow keys to resize the editor."),d=a===Km.Both?"tox-statusbar__resize-cursor-both":"tox-statusbar__resize-cursor-default";return T.some(ol("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle",d],attributes:{"aria-label":s.translate(i),"data-mce-name":"resize-handle",role:"separator"},behaviours:[Vf.config({mode:"mouse",repositionTarget:!1,onDrag:(g,h,C)=>{const S=AF(n,C,a);xM(g,S,a)},blockerClass:"tox-blocker"}),Lt.config({mode:"special",onLeft:g=>Bk(n,g,a,-1,0),onRight:g=>Bk(n,g,a,1,0),onUp:g=>Bk(n,g,a,0,-1),onDown:g=>Bk(n,g,a,0,1)}),Vo.config({}),ln.config({}),jo.config(s.tooltips.getConfig({tooltipText:s.translate("Resize")})),cn("set-aria-valuetext",[Wo(g=>{const h=()=>{xM(g,_F(n),a)};n._skinLoaded?h():n.once("SkinLoaded",h)})])],eventOrder:{[Al()]:["add-focusable","set-aria-valuetext"]}},s.icons))},hX=(n,s)=>{const a=(i,d,g)=>mn.set(i,[Yo(s.translate(["{0} "+g,d[g]]))]);return wr.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:Xe([Vd.button(s.isDisabled),Fs(()=>s.checkUiComponentContext("any")),Vo.config({}),mn.config({}),St.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),cn("wordcount-events",[km(i=>{const d=St.getValue(i),g=d.mode==="words"?"characters":"words";St.setValue(i,{mode:g,count:d.count}),a(i,d.count,g)}),Wo(i=>{n.on("wordCountUpdate",d=>{const{mode:g}=St.getValue(i);St.setValue(i,{mode:g,count:d.wordCount}),a(i,d.wordCount,g)})})])]),eventOrder:{[Hr()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},DF=(n,s)=>{const a=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v7",rel:"noopener",target:"_blank","aria-label":n.translate(["Build with {0}","TinyMCE"])},innerHtml:n.translate(["Build with {0}",kF.trim()])},behaviours:Xe([ln.config({})])}]}),i=()=>{const C=CR("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[Yo(Ha.translate(["Press {0} for help",C]))]}},d=()=>{const C=[];return n.hasPlugin("wordcount")&&C.push(hX(n,s)),iD(n)&&C.push(a()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:C}},g=()=>{const C=[],S=e$(n),x=KP(n),A=iD(n)||n.hasPlugin("wordcount"),R=()=>{const P="tox-statusbar__text-container--flex-start",z="tox-statusbar__text-container--flex-end",Z="tox-statusbar__text-container--space-around";if(S){const K="tox-statusbar__text-container-3-cols";return!A&&!x?[K,Z]:A&&!x?[K,z]:[K,P]}return[A&&!x?z:P]};return x&&C.push(dX(n,{},s)),S&&C.push(i()),A&&C.push(d()),C.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...R()]},components:C}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const C=g(),S=OF(n,s);return C.concat(S.toArray())})()}},RF=(n,s)=>s.get().getOrDie(`UI for ${n} has not been rendered`),pX=(n,s)=>{const a=n.inline,i=a?vY:uY,d=Ov(n)?Fq:Nq,g=xk(),h=pn(),C=pn(),S=pn(),P=Jr().deviceType.isTouch()?["tox-platform-touch"]:[],z=oT(n),Z=T1(n),K=to({dom:{tag:"div",classes:["tox-anchorbar"]}}),ee=to({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),G=()=>g.mainUi.get().map(Pt=>Pt.outerContainer).bind(No.getHeader),oe=()=>Xt.fromOption(g.dialogUi.get().map(Pt=>Pt.sink),"UI has not been rendered"),le=()=>Xt.fromOption(g.popupUi.get().map(Pt=>Pt.sink),"(popup) UI has not been rendered"),Se=g.lazyGetInOuterOrDie("anchor bar",K.getOpt),Te=g.lazyGetInOuterOrDie("bottom anchor bar",ee.getOpt),ct=g.lazyGetInOuterOrDie("toolbar",No.getToolbar),lt=g.lazyGetInOuterOrDie("throbber",No.getThrobber),Ne=Dq({popup:le,dialog:oe},n,Se,Te),Fe=()=>{const Pt={attributes:{[Sb]:z?Cd.BottomToTop:Cd.TopToBottom}},hn=No.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:Ne.popup,onEscape:()=>{n.focus()}}),yo=No.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:Ne.popup.shared.getSink,providers:Ne.popup.shared.providers,onEscape:()=>{n.focus()},onToolbarToggled:Ym=>{Tj(n,Ym)},type:Z,lazyToolbar:ct,lazyHeader:()=>G().getOrDie("Could not find header element"),...Pt}),Kn=No.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:Ne.popup.shared.providers,onEscape:()=>{n.focus()},type:Z}),oc=Rh(n),as=_v(n),Yc=kv(n),jr=QP(n),za=Ft(jr),Xc=oc||as||Yc,Yl=()=>oc?[Kn]:as?[yo]:[],Zh=[za,hn];return No.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(Xc?[]:["tox-editor-header--empty"]),...Pt},components:Ue([Yc?Zh:[],Yl(),Av(n)?[]:[K.asSpec()]]),sticky:Ov(n),editor:n,sharedBackstage:Ne.popup.shared})},Ft=Pt=>No.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]},promotionLink:Pt}),Ot=()=>{const Pt=No.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),hn=No.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[Pt,hn]}},En=()=>{const Pt=uD(n),hn=Hn(Fc(),Pt)&&es(Pt,"display")==="grid",yo={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(P),attributes:{...Ha.isRtl()?{dir:"rtl"}:{}}},behaviours:Xe([La.config({useFixed:()=>d.isDocked(G)})])},Kn={dom:{styles:{width:document.body.clientWidth+"px"}},events:ns([Me(Kg(),Yc=>{on(Yc.element,"width",document.body.clientWidth+"px")})])},oc=m($o(yo,hn?Kn:{})),as=eO(oc);return C.set(as),{sink:oc,mothership:as}},Ut=()=>{const Pt={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(P),attributes:{...Ha.isRtl()?{dir:"rtl"}:{}}},behaviours:Xe([La.config({useFixed:()=>d.isDocked(G),getBounds:()=>s.getPopupSinkBounds()})])},hn=m(Pt),yo=eO(hn);return S.set(yo),{sink:hn,mothership:yo}},gn=()=>{const Pt=Fe(),hn=Ot(),yo=No.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:Ne.popup}),Kn=No.parts.viewWrapper({backstage:Ne.popup}),oc=qP(n)&&!a?T.some(DF(n,Ne.popup.shared.providers)):T.none(),as=Ue([z?[]:[Pt],a?[]:[hn],z?[Pt]:[]]),Yc=No.parts.editorContainer({components:Ue([as,a?[]:[ee.asSpec()]])}),jr=dD(n),za={role:"application",...Ha.isRtl()?{dir:"rtl"}:{},...jr?{"aria-hidden":"true"}:{}},Xc=m(No.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(a?["tox-tinymce-inline"]:[]).concat(z?["tox-tinymce--toolbar-bottom"]:[]).concat(P),styles:{visibility:"hidden",...jr?{opacity:"0",border:"0"}:{}},attributes:za},components:[Yc,...a?[]:[Kn,...oc.toArray()],yo],behaviours:Xe([Fs(()=>Ne.popup.shared.providers.checkUiComponentContext("any")),Rt.config({disableClass:"tox-tinymce--disabled"}),Lt.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),Yl=eO(Xc);return h.set(Yl),{mothership:Yl,outerContainer:Xc}},Mt=Pt=>{const hn=Sk(gY(n)),yo=Sk(hY(n));return n.inline||(Ag("div","width",yo)&&on(Pt.element,"width",yo),Ag("div","height",hn)?on(Pt.element,"height",hn):on(Pt.element,"height","400px")),hn},Pe=Pt=>{n.addShortcut("alt+F9","focus menubar",()=>{No.focusMenubar(Pt)}),n.addShortcut("alt+F10","focus toolbar",()=>{No.focusToolbar(Pt)}),n.addCommand("ToggleToolbarDrawer",(hn,yo,Kn)=>{yo!=null&&yo.skipFocus?(Rq("skipFocus"),No.toggleToolbarDrawerWithoutFocusing(Pt)):Kn!=null&&Kn.skip_focus?No.toggleToolbarDrawerWithoutFocusing(Pt):No.toggleToolbarDrawer(Pt)}),n.addQueryStateHandler("ToggleToolbarDrawer",()=>No.isToolbarDrawerToggled(Pt)),n.on("blur",()=>{T1(n)===nl.floating&&No.isToolbarDrawerToggled(Pt)&&No.toggleToolbarDrawerWithoutFocusing(Pt)})},tt=Pt=>{const{mainUi:hn,popupUi:yo,uiMotherships:Kn}=Pt;Ds(FP(n),(sg,Tw)=>{n.ui.registry.addGroupToolbarButton(Tw,sg)});const{buttons:oc,menuItems:as,contextToolbars:Yc,sidebars:jr,views:za}=n.ui.registry.getAll(),Xc=_S(n),Yl={menuItems:as,menus:s$(n),menubar:UP(n),toolbar:Xc.getOrThunk(()=>tT(n)),allowToolbarGroups:Z===nl.floating,buttons:oc,sidebar:jr,views:za};Pe(hn.outerContainer),$5(n,hn.mothership,Kn),d.setup(n,Ne.popup.shared,G),jY(n,Ne.popup),wF(n,Ne.popup.shared.getSink,Ne.popup),Vq(n),Gq(n,lt,Ne.popup.shared),sF(n,Yc,yo.sink,{backstage:Ne.popup}),lX(n,yo.sink);const Zh=n.getElement(),Ym=Mt(hn.outerContainer),K1={targetNode:Zh,height:Ym};return i.render(n,Pt,Yl,Ne.popup,K1)},Kt=Pt=>(S.set(Pt.mothership),Pt),bn=()=>{const Pt=gn(),hn=En(),yo=Mh(n)?Ut():Kt(hn);g.dialogUi.set(hn),g.popupUi.set(yo),g.mainUi.set(Pt);const Kn={popupUi:yo,dialogUi:hn,mainUi:Pt,uiMotherships:g.getUiMotherships()};return tt(Kn)};return{popups:{backstage:Ne.popup,getMothership:()=>RF("popups",S)},dialogs:{backstage:Ne.dialog,getMothership:()=>RF("dialogs",C)},renderUI:bn}},MF=n=>{const s=[],a={};return Cs(n,(i,d)=>{i.fold(()=>{s.push(d)},g=>{a[d]=g})}),s.length>0?Xt.error(s):Xt.value(a)},G1=(n,s,a,i)=>{const d=to(_h.sketch(g=>({dom:{tag:"div",classes:["tox-form"].concat(n.classes)},components:$e(n.items,h=>p7(g,h,s,a,i))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[d.asSpec()]}],behaviours:Xe([Lt.config({mode:"acyclic",useTabstopAt:de(ew)}),Vu.memento(d),dG(d,{postprocess:g=>MF(g).fold(h=>(console.error(h),{}),Et)}),cn("dialog-body-panel",[Me(Ui(),(g,h)=>{g.getSystem().broadcastOn([zh],{newFocus:T.some(h.event.target)})})])])}},NF=(n,s,a)=>$e(n,(i,d)=>{mn.set(a,n[d].view());const g=s.dom.getBoundingClientRect();return mn.set(a,[]),g.height}),bX=n=>To(kn(n,(s,a)=>s>a?-1:s<a?1:0)),vX=(n,s,a)=>{const i=H2(n).dom,d=Li(n,".tox-dialog-wrap").getOr(n),g=es(d,"position")==="fixed";let h;g?h=Math.max(i.clientHeight,window.innerHeight):h=Math.max(i.offsetHeight,i.scrollHeight);const C=vr(s),x=s.dom.offsetLeft>=a.dom.offsetLeft+va(a)?Math.max(vr(a),C):C,A=parseInt(es(n,"margin-top"),10)||0,R=parseInt(es(n,"margin-bottom"),10)||0,z=vr(n)+A+R-x;return h-z},yX=(n,s)=>{To(n).each(a=>E1.showTab(s,a.value))},BF=(n,s)=>{on(n,"height",s+"px"),on(n,"flex-basis",s+"px")},Pk=(n,s,a)=>{Li(n,'[role="dialog"]').each(i=>{wo(i,'[role="tablist"]').each(d=>{a.get().map(g=>(on(s,"height","0"),on(s,"flex-basis","0"),Math.min(g,vX(i,s,d)))).each(g=>{BF(s,g)})})})},$k=n=>wo(n,'[role="tabpanel"]'),CX=n=>{const s=pn();return{extraEvents:[Wo(d=>{const g=d.element;$k(g).each(h=>{on(h,"visibility","hidden"),d.getSystem().getByDom(h).toOptional().each(C=>{const S=NF(n,h,C);bX(S).fold(s.clear,s.set)}),Pk(g,h,s),Nn(h,"visibility"),yX(n,d),requestAnimationFrame(()=>{Pk(g,h,s)})})}),Me(Kg(),d=>{const g=d.element;$k(g).each(h=>{Pk(g,h,s)})}),Me(s5,(d,g)=>{const h=d.element;$k(h).each(C=>{const S=Nr(nr(C));on(C,"visibility","hidden");const x=is(C,"height").map(P=>parseInt(P,10));Nn(C,"height"),Nn(C,"flex-basis");const A=C.dom.getBoundingClientRect().height;x.forall(P=>A>P)?(s.set(A),Pk(h,C,s)):x.each(P=>{BF(C,P)}),Nn(C,"visibility"),S.each(kr)})})],selectFirst:!1}},PF="send-data-to-section",$F="send-data-to-view",SX=(n,s,a,i)=>{const d=Bt({}),g=A=>{const R=St.getValue(A),P=MF(R).getOr({}),z=d.get(),Z=$o(z,P);d.set(Z)},h=A=>{const R=d.get();St.setValue(A,R)},C=Bt(null),S=$e(n.tabs,A=>({value:A.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[Yo(a.shared.providers.translate(A.title))],view:()=>[_h.sketch(R=>({dom:{tag:"div",classes:["tox-form"]},components:$e(A.items,P=>p7(R,P,s,a,i)),formBehaviours:Xe([Lt.config({mode:"acyclic",useTabstopAt:de(ew)}),cn("TabView.form.events",[Wo(h),qi(g)]),Fa.config({channels:Zg([{key:PF,value:{onReceive:g}},{key:$F,value:{onReceive:h}}])})])}))]})),x=CX(S);return E1.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(A,R,P)=>{const z=St.getValue(R);Ht(A,pI,{name:z,oldName:C.get()}),C.set(z)},tabs:S,components:[E1.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[AP.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:Xe([Vo.config({})])}),E1.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:x.selectFirst,tabSectionBehaviours:Xe([cn("tabpanel",x.extraEvents),Lt.config({mode:"acyclic"}),We.config({find:A=>To(E1.getViewItems(A))}),Z1(T.none(),A=>(A.getSystem().broadcastOn([PF],{}),d.get()),(A,R)=>{d.set(R),A.getSystem().broadcastOn([$F],{})})])})},IF=(n,s,a,i,d,g)=>{const h=x=>{const A=x.body;switch(A.type){case"tabpanel":return[SX(A,x.initialData,i,g)];default:return[G1(A,x.initialData,i,g)]}},C=(x,A)=>T.some({isTabPanel:()=>A.body.type==="tabpanel"}),S={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...a.map(x=>({id:x})).getOr({}),...d?S:{}}},components:[],behaviours:Xe([Vu.childAt(0),qc.config({channel:`${$I}-${s}`,updateState:C,renderComponents:h,initialData:n})])}},wX=(n,s,a,i,d,g)=>IF(n,s,T.some(a),i,d,g),xX=(n,s,a,i)=>{const d=IF(n,s,T.none(),a,!1,i);return xr.parts.body(d)},LF=n=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[BI(T.none(),{dom:{tag:"iframe",attributes:{src:n.url}},behaviours:Xe([Vo.config({}),ln.config({})])})]}],behaviours:Xe([Lt.config({mode:"acyclic",useTabstopAt:de(ew)})])};return xr.parts.body(s)},EX=xv.deviceType.isTouch(),FF=(n,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[n,s]}),HF=(n,s)=>xr.parts.close(wr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:n,buttonBehaviours:Xe([Vo.config({})])})),zF=()=>xr.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),VF=(n,s)=>xr.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:Nd(`<p>${NS(s.translate(n))}</p>`)}]}]}),Ik=n=>xr.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:n}),UF=(n,s)=>[Dd.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:n}),Dd.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],EM=n=>{const s="tox-dialog",a=s+"-wrap",i=a+"__backdrop",d=s+"__disable-scroll";return xr.sketch({lazySink:n.lazySink,onEscape:g=>(n.onEscape(g),T.some(!0)),useTabstopAt:g=>!ew(g),firstTabstop:n.firstTabstop,dom:{tag:"div",classes:[s].concat(n.extraClasses),styles:{position:"relative",...n.extraStyles}},components:[n.header,n.body,...n.footer.toArray()],parts:{blocker:{dom:Nd(`<div class="${a}"></div>`),components:[{dom:{tag:"div",classes:EX?[i,i+"--opaque"]:[i]}}]}},dragBlockClass:a,modalBehaviours:Xe([ln.config({}),cn("dialog-events",n.dialogEvents.concat([lh(Ui(),(g,h)=>{fe.isBlocked(g)?U():Lt.focusIn(g)}),Me(X0(),(g,h)=>{g.getSystem().broadcastOn([zh],{newFocus:h.event.newFocus})})])),cn("scroll-lock",[Wo(()=>{Ro(Fc(),d)}),qi(()=>{us(Fc(),d)})]),...n.extraBehaviours]),eventOrder:{[Hr()]:["dialog-events"],[Al()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[pi()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...n.eventOrder}})},ZF=n=>wr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":n.translate("Close"),"data-mce-name":"close"}},buttonBehaviours:Xe([Vo.config({}),jo.config(n.tooltips.getConfig({tooltipText:n.translate("Close")}))]),components:[ol("close",{tag:"span",classes:["tox-icon"]},n.icons)],action:s=>{On(s,ng)}}),WF=(n,s,a,i)=>{const d=g=>[Yo(i.translate(g.title))];return{dom:{tag:"h1",classes:["tox-dialog__title"],attributes:{...a.map(g=>({id:g})).getOr({})}},components:[],behaviours:Xe([qc.config({channel:`${i5}-${s}`,initialData:n,renderComponents:d})])}},jF=()=>({dom:Nd('<div class="tox-dialog__draghandle"></div>')}),TX=(n,s,a,i)=>Dd.sketch({dom:Nd('<div class="tox-dialog__header"></div>'),components:[WF(n,s,T.some(a),i),jF(),ZF(i)],containerBehaviours:Xe([Vf.config({mode:"mouse",blockerClass:"blocker",getTarget:d=>ya(d,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"},onDrag:(d,g)=>{d.getSystem().broadcastOn([Ks()],{target:g})}})])}),kX=(n,s,a)=>{const i=xr.parts.title(WF(n,s,T.none(),a)),d=xr.parts.draghandle(jF()),g=xr.parts.close(ZF(a)),h=[i].concat(n.draggable?[d]:[]).concat([g]);return Dd.sketch({dom:Nd('<div class="tox-dialog__header"></div>'),components:h})},GF=(n,s,a)=>kX({title:a.shared.providers.translate(n),draggable:a.dialog.isDraggableModal()},s,a.shared.providers),TM=(n,s,a,i)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":a.translate(n)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${i.getOr(0)}px`,position:"absolute"}},behaviours:s,components:[{dom:Nd('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),kM=(n,s,a)=>({onClose:()=>a.closeWindow(),onBlock:i=>{const d=wo(n().element,".tox-dialog__header").map(g=>vr(g));xr.setBusy(n(),(g,h)=>TM(i.message,h,s,d))},onUnblock:()=>{xr.setIdle(n())}}),qF="tox-dialog--fullscreen",q1="tox-dialog--width-lg",_M="tox-dialog--width-md",Lk=n=>{switch(n){case"large":return T.some(q1);case"medium":return T.some(_M);default:return T.none()}},Fk=(n,s)=>{const a=at.fromDom(s.element.dom);Ws(a,qF)||(ea(a,[q1,_M]),Lk(n).each(i=>Ro(a,i)))},KF=(n,s)=>{const a=at.fromDom(n.element.dom),i=J2(a),d=Ce(i,g=>g===q1||g===_M).or(Lk(s));cd(a,[qF,...d.toArray()])},YF=(n,s,a)=>m(EM({...n,firstTabstop:1,lazySink:a.shared.getSink,extraBehaviours:[VT({}),...n.extraBehaviours],onEscape:i=>{On(i,ng)},dialogEvents:s,eventOrder:{[hd()]:[qc.name(),Fa.name()],[Al()]:["scroll-lock",qc.name(),"messages","dialog-events","alloy.base.behaviour"],[pi()]:["alloy.base.behaviour","dialog-events","messages",qc.name(),"scroll-lock"]}})),AM=(n,s={})=>{const a=i=>{const d=$e(i.items,g=>{const h=It(s,g.name).getOr(Bt(!1));return{...g,storage:h}});return{...i,items:d}};return $e(n,i=>i.type==="menu"?a(i):i)},XF=n=>Po(n,(s,a)=>a.type==="menu"?Po(a.items,(d,g)=>(d[g.name]=g.storage,d),s):s,{}),JF=(n,s)=>[ih(Ui(),PI),n(U1,(a,i,d,g)=>{Bi(g.element)&&Nr(nr(g.element)).each(ks),s.onClose(),i.onClose()}),n(ng,(a,i,d,g)=>{i.onCancel(a),On(g,U1)}),Me(HT,(a,i)=>s.onUnblock()),Me(o5,(a,i)=>s.onBlock(i.event))],_X=(n,s)=>{const a=(d,g)=>Me(d,(h,C)=>{i(h,(S,x)=>{g(n(),S,C.event,h)})}),i=(d,g)=>{qc.getState(d).get().each(h=>{g(h,d)})};return[...JF(a,s),a(zu,(d,g,h)=>{g.onAction(d,{name:h.name})})]},QF=(n,s,a)=>{const i=(g,h)=>Me(g,(C,S)=>{d(C,(x,A)=>{h(n(),x,S.event,C)})}),d=(g,h)=>{qc.getState(g).get().each(C=>{h(C.internalDialog,g)})};return[...JF(i,s),i(QS,(g,h)=>h.onSubmit(g)),i(Oc,(g,h,C)=>{h.onChange(g,{name:C.name})}),i(zu,(g,h,C,S)=>{const x=()=>S.getSystem().isConnected()?Lt.focusIn(S):void 0,A=z=>$r(z,"disabled")||Pr(z,"aria-disabled").exists(Z=>Z==="true"),R=nr(S.element),P=Nr(R);h.onAction(g,{name:C.name,value:C.value}),Nr(R).fold(x,z=>{A(z)||P.exists(Z=>I(z,Z)&&A(Z))?x():a().toOptional().filter(Z=>!I(Z.element,z)).each(x)})}),i(pI,(g,h,C)=>{h.onTabChange(g,{newTabName:C.name,oldTabName:C.oldName})}),qi(g=>{const h=n();St.setValue(g,h.getData())})]},AX=(n,s)=>sw(n,n.type,s),OX=(n,s,a)=>Ce(s,i=>i.name===a).bind(i=>i.memento.getOpt(n)),DX=(n,s)=>{const a=s.map(C=>C.footerButtons).getOr([]),i=Qc(a,C=>C.align==="start"),d=(C,S)=>Dd.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${C}`]},components:$e(S,x=>x.memento.asSpec())}),g=d("start",i.pass),h=d("end",i.fail);return[g,h]},eH=(n,s,a)=>{const i=(d,g)=>{const h=$e(g.buttons,S=>{const x=to(AX(S,a));return{name:S.name,align:S.align,memento:x}}),C=S=>OX(d,h,S);return T.some({lookupByName:C,footerButtons:h})};return{dom:Nd('<div class="tox-dialog__footer"></div>'),components:[],behaviours:Xe([qc.config({channel:`${II}-${s}`,initialData:n,updateState:i,renderComponents:DX})])}},RX=(n,s,a)=>eH(n,s,a),tH=(n,s,a)=>xr.parts.footer(eH(n,s,a)),Hk=(n,s)=>{if(n.getRoot().getSystem().isConnected()){const i=We.getCurrent(n.getFormWrapper()).getOr(n.getFormWrapper());return _h.getField(i,s).orThunk(()=>n.getFooter().bind(h=>qc.getState(h).get()).bind(h=>h.lookupByName(s)))}else return T.none()},MX=(n,s)=>{const a=n.getRoot();return qc.getState(a).get().map(i=>hi(ls("data",i.dataValidator,s))).getOr(s)},nH=(n,s,a)=>{const i=Z=>{const K=n.getRoot();K.getSystem().isConnected()&&Z(K)},z={getData:()=>{const Z=n.getRoot(),K=Z.getSystem().isConnected()?n.getFormWrapper():Z,ee=St.getValue(K),G=Ds(a,oe=>oe.get());return{...ee,...G}},setData:Z=>{i(K=>{const ee=z.getData(),G=$o(ee,Z),oe=MX(n,G),le=n.getFormWrapper();St.setValue(le,oe),Cs(a,(Se,Te)=>{So(G,Te)&&Se.set(G[Te])})})},setEnabled:(Z,K)=>{Hk(n,Z).each(K?Rt.enable:Rt.disable)},focus:Z=>{Hk(n,Z).each(ln.focus)},block:Z=>{if(!be(Z))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");i(K=>{Ht(K,o5,{message:Z})})},unblock:()=>{i(Z=>{On(Z,HT)})},showTab:Z=>{i(K=>{const ee=n.getBody();qc.getState(ee).get().exists(oe=>oe.isTabPanel())&&We.getCurrent(ee).each(oe=>{E1.showTab(oe,Z)})})},redial:Z=>{i(K=>{const ee=n.getId(),G=s(Z),oe=AM(G.internalDialog.buttons,a);K.getSystem().broadcastOn([`${GT}-${ee}`],G),K.getSystem().broadcastOn([`${i5}-${ee}`],G.internalDialog),K.getSystem().broadcastOn([`${$I}-${ee}`],G.internalDialog),K.getSystem().broadcastOn([`${II}-${ee}`],{...G.internalDialog,buttons:oe}),z.setData(G.initialData)})},close:()=>{i(Z=>{On(Z,U1)})},toggleFullscreen:n.toggleFullscreen};return z},NX=(n,s,a)=>{const i=Ct("dialog"),d=n.internalDialog,g=GF(d.title,i,a),h=Bt(d.size),C=le=>Hk(G,le),S=Lk(h.get()).toArray(),x=(le,Se)=>(h.set(Se.internalDialog.size),Fk(Se.internalDialog.size,le),T.some(Se)),A=xX({body:d.body,initialData:d.initialData},i,a,C),R=AM(d.buttons),P=XF(R),z=dc(R.length!==0,tH({buttons:R},i,a)),Z=QF(()=>oe,kM(()=>ee,a.shared.providers,s),a.shared.getSink),K={id:i,header:g,body:A,footer:z,extraClasses:S,extraBehaviours:[qc.config({channel:`${GT}-${i}`,updateState:x,initialData:n})],extraStyles:{}},ee=YF(K,Z,a),G=(()=>{const le=()=>{const Te=xr.getBody(ee);return We.getCurrent(Te).getOr(Te)},Se=()=>{KF(ee,h.get())};return{getId:ie(i),getRoot:ie(ee),getBody:()=>xr.getBody(ee),getFooter:()=>xr.getFooter(ee),getFormWrapper:le,toggleFullscreen:Se}})(),oe=nH(G,s.redial,P);return{dialog:ee,instanceApi:oe}},Ew=(n,s,a,i=!1,d)=>{const g=Ct("dialog"),h=Ct("dialog-label"),C=Ct("dialog-content"),S=n.internalDialog,x=Fe=>Hk(lt,Fe),A=Bt(S.size),R=Lk(A.get()).toArray(),P=(Fe,Ft)=>(A.set(Ft.internalDialog.size),Fk(Ft.internalDialog.size,Fe),d(),T.some(Ft)),z=to(TX({title:S.title,draggable:!0},g,h,a.shared.providers)),Z=to(wX({body:S.body,initialData:S.initialData},g,C,a,i,x)),K=AM(S.buttons),ee=XF(K),G=dc(K.length!==0,to(RX({buttons:K},g,a))),oe=QF(()=>Ne,{onBlock:Fe=>{fe.block(Te,(Ft,Ot)=>{const En=z.getOpt(Te).map(Ut=>vr(Ut.element));return TM(Fe.message,Ot,a.shared.providers,En)})},onUnblock:()=>{fe.unblock(Te)},onClose:()=>s.closeWindow()},a.shared.getSink),le="tox-dialog-inline",Se=Jr().os,Te=m({dom:{tag:"div",classes:["tox-dialog",le,...R],attributes:{role:"dialog",...Se.isMacOS()?{"aria-label":S.title}:{"aria-labelledby":h}}},eventOrder:{[hd()]:[qc.name(),Fa.name()],[Hr()]:["execute-on-form"],[Al()]:["reflecting","execute-on-form"]},behaviours:Xe([Lt.config({mode:"cyclic",onEscape:Fe=>(On(Fe,U1),T.some(!0)),useTabstopAt:Fe=>!ew(Fe)&&(Ri(Fe)!=="button"||br(Fe,"disabled")!=="disabled"),firstTabstop:1}),qc.config({channel:`${GT}-${g}`,updateState:P,initialData:n}),ln.config({}),cn("execute-on-form",oe.concat([lh(Ui(),(Fe,Ft)=>{Lt.focusIn(Fe)}),Me(X0(),(Fe,Ft)=>{Fe.getSystem().broadcastOn([zh],{newFocus:Ft.event.newFocus})})])),fe.config({getRoot:()=>T.some(Te)}),mn.config({}),VT({})]),components:[z.asSpec(),Z.asSpec(),...G.map(Fe=>Fe.asSpec()).toArray()]}),ct=()=>{KF(Te,A.get())},lt={getId:ie(g),getRoot:ie(Te),getFooter:()=>G.map(Fe=>Fe.get(Te)),getBody:()=>Z.get(Te),getFormWrapper:()=>{const Fe=Z.get(Te);return We.getCurrent(Fe).getOr(Fe)},toggleFullscreen:ct},Ne=nH(lt,s.redial,ee);return{dialog:Te,instanceApi:Ne}};var OM=tinymce.util.Tools.resolve("tinymce.util.URI");const BX=n=>{const s=h=>{n.getSystem().isConnected()&&h(n)};return{block:h=>{if(!be(h))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(C=>{Ht(C,o5,{message:h})})},unblock:()=>{s(h=>{On(h,HT)})},close:()=>{s(h=>{On(h,U1)})},sendMessage:h=>{s(C=>{C.getSystem().broadcastOn([sn],h)})}}},PX=["insertContent","setContent","execCommand","close","block","unblock"],oH=n=>we(n)&&PX.indexOf(n.mceAction)!==-1,$X=n=>!oH(n)&&we(n)&&So(n,"mceAction"),IX=(n,s,a)=>{switch(a.mceAction){case"insertContent":n.insertContent(a.content);break;case"setContent":n.setContent(a.content);break;case"execCommand":const i=rn(a.ui)?a.ui:!1;n.execCommand(a.cmd,i,a.value);break;case"close":s.close();break;case"block":s.block(a.message);break;case"unblock":s.unblock();break}},sH=(n,s,a,i)=>{const d=Ct("dialog"),g=GF(n.title,d,i),h=LF(n),C=n.buttons.bind(le=>le.length===0?T.none():T.some(tH({buttons:le},d,i))),S=_X(()=>oe,kM(()=>G,i.shared.providers,s)),x={...n.height.fold(()=>({}),le=>({height:le+"px","max-height":le+"px"})),...n.width.fold(()=>({}),le=>({width:le+"px","max-width":le+"px"}))},A=n.width.isNone()&&n.height.isNone()?["tox-dialog--width-lg"]:[],R=new OM(n.url,{base_uri:new OM(window.location.href)}),P=`${R.protocol}://${R.host}${R.port?":"+R.port:""}`,z=Us(),Z=(le,Se)=>T.some(Se),K=[qc.config({channel:`${GT}-${d}`,updateState:Z,initialData:n}),cn("messages",[Wo(()=>{const le=go(at.fromDom(window),"message",Se=>{if(R.isSameOrigin(new OM(Se.raw.origin))){const Te=Se.raw.data;oH(Te)?IX(a,oe,Te):$X(Te)&&n.onMessage(oe,Te)}});z.set(le)}),qi(z.clear)]),Fa.config({channels:{[sn]:{onReceive:(le,Se)=>{wo(le.element,"iframe").each(Te=>{const ct=Te.dom.contentWindow;jt(ct)&&ct.postMessage(Se,P)})}}}})],G=YF({id:d,header:g,body:h,footer:C,extraClasses:A,extraBehaviours:K,extraStyles:x},S,i),oe=BX(G);return{dialog:G,instanceApi:oe}},LX=n=>{const s=n.shared;return{open:(i,d)=>{const g=()=>{xr.hide(x),d()},h=to(sw({context:"any",name:"close-alert",text:"OK",primary:!0,buttonType:T.some("primary"),align:"end",enabled:!0,icon:T.none()},"cancel",n)),C=zF(),S=HF(g,s.providers),x=m(EM({lazySink:()=>s.getSink(),header:FF(C,S),body:VF(i,s.providers),footer:T.some(Ik(UF([],[h.asSpec()]))),onEscape:g,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Me(ng,g)],eventOrder:{}}));xr.show(x);const A=h.get(x);ln.focus(A)}}},FX=n=>{const s=n.shared;return{open:(i,d)=>{const g=P=>{xr.hide(A),d(P)},h=to(sw({context:"any",name:"yes",text:"Yes",primary:!0,buttonType:T.some("primary"),align:"end",enabled:!0,icon:T.none()},"submit",n)),C=sw({context:"any",name:"no",text:"No",primary:!1,buttonType:T.some("secondary"),align:"end",enabled:!0,icon:T.none()},"cancel",n),S=zF(),x=HF(()=>g(!1),s.providers),A=m(EM({lazySink:()=>s.getSink(),header:FF(S,x),body:VF(i,s.providers),footer:T.some(Ik(UF([],[C,h.asSpec()]))),onEscape:()=>g(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Me(ng,()=>g(!1)),Me(QS,()=>g(!0))],eventOrder:{}}));xr.show(A);const R=h.get(A);ln.focus(R)}}},rH=(n,s)=>hi(ls("data",s,n)),aH=n=>gp(n,".tox-alert-dialog")||gp(n,".tox-confirm-dialog"),HX=(n,s,a,i)=>s&&a?[]:[rs.config({contextual:{lazyContext:()=>T.some(js(at.fromDom(n.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition",onHide:i},modes:["top"],lazyViewport:d=>Gf(n,d.element).map(h=>({bounds:k1(h),optScrollEnv:T.some({currentScrollTop:h.element.dom.scrollTop,scrollElmTop:pc(h.element).top})})).getOrThunk(()=>({bounds:ta(),optScrollEnv:T.none()}))})],DM=n=>{const s=n.editor,a=Ov(s),i=LX(n.backstages.dialog),d=FX(n.backstages.dialog),g=(Z,K,ee)=>{if(!zt(K)){if(K.inline==="toolbar")return x(Z,n.backstages.popup.shared.anchors.inlineDialog(),ee,K);if(K.inline==="bottom")return A(Z,n.backstages.popup.shared.anchors.inlineBottomDialog(),ee,K);if(K.inline==="cursor")return x(Z,n.backstages.popup.shared.anchors.cursor(),ee,K)}return S(Z,ee)},h=(Z,K)=>C(Z,K),C=(Z,K)=>{const ee=G=>{const oe=sH(G,{closeWindow:()=>{xr.hide(oe.dialog),K(oe.instanceApi)}},s,n.backstages.dialog);return xr.show(oe.dialog),oe.instanceApi};return I1.openUrl(ee,Z)},S=(Z,K)=>{const ee=(G,oe,le)=>{const Se=oe,ct=NX({dataValidator:le,initialData:Se,internalDialog:G},{redial:I1.redial,closeWindow:()=>{xr.hide(ct.dialog),K(ct.instanceApi)}},n.backstages.dialog);return xr.show(ct.dialog),ct.instanceApi.setData(Se),ct.instanceApi};return I1.open(ee,Z)},x=(Z,K,ee,G)=>{const oe=(le,Se,Te)=>{const ct=rH(Se,Te),lt=pn(),Ne=n.backstages.popup.shared.header.isPositionedAtTop(),Fe={dataValidator:Te,initialData:ct,internalDialog:le},Ft=()=>lt.on(Pe=>{fs.reposition(Pe),(!a||!Ne)&&rs.refresh(Pe)}),Ot=Ew(Fe,{redial:I1.redial,closeWindow:()=>{lt.on(fs.hide),s.off("ResizeEditor",Ft),s.off("ScrollWindow",En),lt.clear(),ee(Ot.instanceApi)}},n.backstages.popup,G.ariaAttrs,Ft),En=()=>Ot.dialog.getSystem().broadcastOn([Ks()],{target:Ot.dialog.element}),Ut=()=>Ot.dialog.getSystem().broadcastOn([wu()],{target:Ot.dialog.element}),gn=m(fs.sketch({lazySink:n.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:G.persistent?{event:"doNotDismissYet"}:{},...Ne?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Xe([cn("window-manager-inline-events",[Me(pd(),(Pe,tt)=>{On(Ot.dialog,ng)})]),...HX(s,a,Ne,Ut)]),isExtraPart:(Pe,tt)=>aH(tt)}));lt.set(gn);const Mt=()=>{const Pe=s.inline?Fc():at.fromDom(s.getContainer()),tt=js(Pe);return T.some(tt)};return fs.showWithinBounds(gn,p(Ot.dialog),{anchor:K},Mt),(!a||!Ne)&&(rs.refresh(gn),s.on("ResizeEditor",Ft)),s.on("ScrollWindow",En),Ot.instanceApi.setData(ct),Lt.focusIn(Ot.dialog),Ot.instanceApi};return I1.open(oe,Z)},A=(Z,K,ee,G)=>{const oe=(le,Se,Te)=>{const ct=rH(Se,Te),lt=pn(),Ne=n.backstages.popup.shared.header.isPositionedAtTop(),Fe={dataValidator:Te,initialData:ct,internalDialog:le},Ft=()=>lt.on(gn=>{fs.reposition(gn),rs.refresh(gn)}),Ot=Ew(Fe,{redial:I1.redial,closeWindow:()=>{lt.on(fs.hide),s.off("ResizeEditor ScrollWindow ElementScroll",Ft),lt.clear(),ee(Ot.instanceApi)}},n.backstages.popup,G.ariaAttrs,Ft),En=m(fs.sketch({lazySink:n.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:G.persistent?{event:"doNotDismissYet"}:{},...Ne?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Xe([cn("window-manager-inline-events",[Me(pd(),(gn,Mt)=>{On(Ot.dialog,ng)})]),rs.config({contextual:{lazyContext:()=>T.some(js(at.fromDom(s.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:gn=>Gf(s,gn.element).map(Pe=>({bounds:k1(Pe),optScrollEnv:T.some({currentScrollTop:Pe.element.dom.scrollTop,scrollElmTop:pc(Pe.element).top})})).getOrThunk(()=>({bounds:ta(),optScrollEnv:T.none()}))})]),isExtraPart:(gn,Mt)=>aH(Mt)}));lt.set(En);const Ut=()=>n.backstages.popup.shared.getSink().toOptional().bind(gn=>{const Mt=Gf(s,gn.element),Pe=15,tt=Mt.map(Pt=>k1(Pt)).getOr(ta()),Kt=js(at.fromDom(s.getContentAreaContainer())),bn=ud(Kt,tt);return T.some(rr(bn.x,bn.y,bn.width,bn.height-Pe))});return fs.showWithinBounds(En,p(Ot.dialog),{anchor:K},Ut),rs.refresh(En),s.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",Ft),Ot.instanceApi.setData(ct),Lt.focusIn(Ot.dialog),Ot.instanceApi};return I1.open(oe,Z)};return{open:g,openUrl:h,alert:(Z,K)=>{i.open(Z,K)},close:Z=>{Z.close()},confirm:(Z,K)=>{d.open(Z,K)}}},cH=n=>{NP(n),U8(n),qY(n)};var zX=()=>{MP.add("silver",n=>{cH(n);let s=()=>ta();const{dialogs:a,popups:i,renderUI:d}=pX(n,{getPopupSinkBounds:()=>s()}),g=()=>{const A=d();return Gf(n,i.getMothership().element).each(P=>{s=()=>k1(P)}),A};sG.register(n,i.backstage.shared);const h=DM({editor:n,backstages:{popup:i.backstage,dialog:a.backstage}}),C=pn(),S=()=>dZ(n,{backstage:i.backstage},i.getMothership(),C),x=()=>wo(at.fromDom(n.getContainer()),".tox-promotion").map(A=>A.dom).getOrNull();return{renderUI:g,getWindowManagerImpl:ie(h),getNotificationManagerImpl:S,getPromotionElement:x}})};zX()})();(function(){var k=tinymce.util.Tools.resolve("tinymce.ModelManager");const F=(l,m,p)=>{var y;return p(l,m.prototype)?!0:((y=l.constructor)==null?void 0:y.name)===m.name},$=l=>{const m=typeof l;return l===null?"null":m==="object"&&Array.isArray(l)?"array":m==="object"&&F(l,String,(p,y)=>y.isPrototypeOf(p))?"string":m},Q=l=>m=>$(m)===l,ue=l=>m=>typeof m===l,ye=l=>m=>l===m,re=Q("string"),be=Q("object"),we=Q("array"),nt=ye(null),xt=ue("boolean"),_t=ye(void 0),rn=l=>l==null,zt=l=>!rn(l),In=ue("function"),jt=ue("number"),et=()=>{},dn=(l,m)=>(...p)=>l(m.apply(null,p)),Yn=(l,m)=>p=>l(m(p)),U=l=>()=>l,At=l=>l,wn=(l,m)=>l===m;function Yt(l,...m){return(...p)=>{const y=m.concat(p);return l.apply(null,y)}}const ie=l=>m=>!l(m),Et=l=>()=>{throw new Error(l)},Je=l=>l(),Le=U(!1),de=U(!0),yi=class yi{constructor(m,p){Ze(this,"tag");Ze(this,"value");this.tag=m,this.value=p}static some(m){return new yi(!0,m)}static none(){return yi.singletonNone}fold(m,p){return this.tag?p(this.value):m()}isSome(){return this.tag}isNone(){return!this.tag}map(m){return this.tag?yi.some(m(this.value)):yi.none()}bind(m){return this.tag?m(this.value):yi.none()}exists(m){return this.tag&&m(this.value)}forall(m){return!this.tag||m(this.value)}filter(m){return!this.tag||m(this.value)?this:yi.none()}getOr(m){return this.tag?this.value:m}or(m){return this.tag?this:m}getOrThunk(m){return this.tag?this.value:m()}orThunk(m){return this.tag?this:m()}getOrDie(m){if(this.tag)return this.value;throw new Error(m??"Called getOrDie on None")}static from(m){return zt(m)?yi.some(m):yi.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(m){this.tag&&m(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}};Ze(yi,"singletonNone",new yi(!1));let X=yi;const Fn=Array.prototype.slice,Cn=Array.prototype.indexOf,yt=Array.prototype.push,T=(l,m)=>Cn.call(l,m),bo=(l,m)=>T(l,m)>-1,qe=(l,m)=>{for(let p=0,y=l.length;p<y;p++){const E=l[p];if(m(E,p))return!0}return!1},Fo=(l,m)=>{const p=[];for(let y=0;y<l;y++)p.push(m(y));return p},an=(l,m)=>{const p=l.length,y=new Array(p);for(let E=0;E<p;E++){const O=l[E];y[E]=m(O,E)}return y},ze=(l,m)=>{for(let p=0,y=l.length;p<y;p++){const E=l[p];m(E,p)}},vo=(l,m)=>{for(let p=l.length-1;p>=0;p--){const y=l[p];m(y,p)}},Qs=(l,m)=>{const p=[],y=[];for(let E=0,O=l.length;E<O;E++){const N=l[E];(m(N,E)?p:y).push(N)}return{pass:p,fail:y}},Xo=(l,m)=>{const p=[];for(let y=0,E=l.length;y<E;y++){const O=l[y];m(O,y)&&p.push(O)}return p},er=(l,m,p)=>(vo(l,(y,E)=>{p=m(p,y,E)}),p),$e=(l,m,p)=>(ze(l,(y,E)=>{p=m(p,y,E)}),p),gt=(l,m,p)=>{for(let y=0,E=l.length;y<E;y++){const O=l[y];if(m(O,y))return X.some(O);if(p(O,y))break}return X.none()},B=(l,m)=>gt(l,m,Le),Qc=(l,m)=>{for(let p=0,y=l.length;p<y;p++){const E=l[p];if(m(E,p))return X.some(p)}return X.none()},Co=l=>{const m=[];for(let p=0,y=l.length;p<y;++p){if(!we(l[p]))throw new Error("Arr.flatten item "+p+" was not an array, input: "+l);yt.apply(m,l[p])}return m},gs=(l,m)=>Co(an(l,m)),Po=(l,m)=>{for(let p=0,y=l.length;p<y;++p){const E=l[p];if(m(E,p)!==!0)return!1}return!0},Yr=l=>{const m=Fn.call(l,0);return m.reverse(),m},Ce=(l,m)=>{const p={};for(let y=0,E=l.length;y<E;y++){const O=l[y];p[String(O)]=m(O,y)}return p},Ge=(l,m)=>{const p=Fn.call(l,0);return p.sort(m),p},Ue=(l,m)=>m>=0&&m<l.length?X.some(l[m]):X.none(),ne=l=>Ue(l,0),Vn=l=>Ue(l,l.length-1),De=(l,m)=>{for(let p=0;p<l.length;p++){const y=m(l[p],p);if(y.isSome())return y}return X.none()},ge=Object.keys,Qt=Object.hasOwnProperty,xn=(l,m)=>{const p=ge(l);for(let y=0,E=p.length;y<E;y++){const O=p[y],N=l[O];m(N,O)}},kn=(l,m)=>pr(l,(p,y)=>({k:y,v:m(p,y)})),pr=(l,m)=>{const p={};return xn(l,(y,E)=>{const O=m(y,E);p[O.k]=O.v}),p},To=l=>(m,p)=>{l[p]=m},qu=(l,m,p,y)=>{xn(l,(E,O)=>{(m(E,O)?p:y)(E,O)})},S2=(l,m)=>{const p={};return qu(l,m,To(p),et),p},ic=(l,m)=>{const p=[];return xn(l,(y,E)=>{p.push(m(y,E))}),p},mo=l=>ic(l,At),ul=(l,m)=>Cs(l,m)?X.from(l[m]):X.none(),Cs=(l,m)=>Qt.call(l,m),Ds=(l,m)=>Cs(l,m)&&l[m]!==void 0&&l[m]!==null,tf=l=>{for(const m in l)if(Qt.call(l,m))return!1;return!0},Ea={generate:l=>{if(!we(l))throw new Error("cases must be an array");if(l.length===0)throw new Error("there must be at least one case");const m=[],p={};return ze(l,(y,E)=>{const O=ge(y);if(O.length!==1)throw new Error("one and only one name per case");const N=O[0],H=y[N];if(p[N]!==void 0)throw new Error("duplicate key detected:"+N);if(N==="cata")throw new Error("cannot have a case named cata (sorry)");if(!we(H))throw new Error("case arguments must be an array");m.push(N),p[N]=(...j)=>{const te=j.length;if(te!==H.length)throw new Error("Wrong number of arguments to case "+N+". Expected "+H.length+" ("+H+"), got "+te);return{fold:(...je)=>{if(je.length!==l.length)throw new Error("Wrong number of arguments to fold. Expected "+l.length+", got "+je.length);return je[E].apply(null,j)},match:je=>{const bt=ge(je);if(m.length!==bt.length)throw new Error("Wrong number of arguments to match. Expected: "+m.join(",")+`
Actual: `+bt.join(","));if(!Po(m,We=>bo(bt,We)))throw new Error("Not all branches were specified when using match. Specified: "+bt.join(", ")+`
Required: `+m.join(", "));return je[N].apply(null,j)},log:je=>{console.log(je,{constructors:m,constructor:N,params:j})}}}}),p}},Vs=l=>{let m=l;return{get:()=>m,set:E=>{m=E}}},Tr=l=>l.slice(0).sort(),Mr=(l,m)=>{throw new Error("All required keys ("+Tr(l).join(", ")+") were not specified. Specified keys were: "+Tr(m).join(", ")+".")},ki=l=>{throw new Error("Unsupported keys for object: "+Tr(l).join(", "))},_i=(l,m)=>{if(!we(m))throw new Error("The "+l+" fields must be an array. Was: "+m+".");ze(m,p=>{if(!re(p))throw new Error("The value "+p+" in the "+l+" fields was not a string.")})},It=(l,m)=>{throw new Error("All values need to be of type: "+m+". Keys ("+Tr(l).join(", ")+") were not.")},So=l=>{const m=Tr(l);B(m,(y,E)=>E<m.length-1&&y===m[E+1]).each(y=>{throw new Error("The field: "+y+" occurs more than once in the combined fields: ["+m.join(", ")+"].")})},Bn=(l,m)=>Yd(l,m,{validate:In,label:"function"}),Yd=(l,m,p)=>{if(m.length===0)throw new Error("You must specify at least one required field.");return _i("required",m),So(m),y=>{const E=ge(y);Po(m,H=>bo(E,H))||Mr(m,E),l(m,E);const N=Xo(m,H=>!p.validate(y[H],H));return N.length>0&&It(N,p.label),y}},lc=(l,m)=>{const p=Xo(m,y=>!bo(l,y));p.length>0&&ki(p)},Bt=l=>Bn(lc,l),Ku=l=>{const m=O=>O(l),p=U(l),y=()=>E,E={tag:!0,inner:l,fold:(O,N)=>N(l),isValue:de,isError:Le,map:O=>dl.value(O(l)),mapError:y,bind:m,exists:m,forall:m,getOr:p,or:y,getOrThunk:p,orThunk:y,getOrDie:p,each:O=>{O(l)},toOptional:()=>X.some(l)};return E},c0=l=>{const m=()=>p,p={tag:!1,inner:l,fold:(y,E)=>y(l),isValue:Le,isError:de,map:m,mapError:y=>dl.error(y(l)),bind:m,exists:Le,forall:de,getOr:At,or:At,getOrThunk:Je,orThunk:Je,getOrDie:Et(String(l)),each:et,toOptional:X.none};return p},dl={value:Ku,error:c0,fromOption:(l,m)=>l.fold(()=>c0(m),Ku)},ei=typeof window<"u"?window:Function("return this;")(),Jo=l=>{const m=l.replace(/\./g,"-");return{resolve:y=>m+"-"+y}},Sn=(l,m,p=wn)=>l.exists(y=>p(y,m)),Ss=l=>{const m=[],p=y=>{m.push(y)};for(let y=0;y<l.length;y++)l[y].each(p);return m},i0=(l,m)=>l!=null?m(l):X.none(),Jh=(l,m)=>l?X.some(m):X.none(),ml=(l,m)=>{let p=m??ei;for(let y=0;y<l.length&&p!==void 0&&p!==null;++y)p=p[l[y]];return p},Xt=(l,m)=>{const p=l.split(".");return ml(p,m)},uc=l=>{const m=Vs(X.none()),p=()=>m.get().each(l);return{clear:()=>{p(),m.set(X.none())},isSet:()=>m.get().isSome(),get:()=>m.get(),set:H=>{p(),m.set(X.some(H))}}},Xd=()=>{const l=uc(et);return{...l,on:p=>l.get().each(p)}},w2=(l,m)=>l.substring(m),ma=(l,m,p)=>m===""||l.length>=m.length&&l.substr(p,p+m.length)===m,x2=(l,m)=>Qh(l,m)?w2(l,m.length):l,fa=(l,m,p=0,y)=>{const E=l.indexOf(m,p);return E!==-1?_t(y)?!0:E+m.length<=y:!1},Qh=(l,m)=>ma(l,m,0),dg=(l,m)=>ma(l,m,l.length-m.length),Yu=(l=>m=>m.replace(l,""))(/^\s+|\s+$/g),Xr=l=>l.length>0,tp=l=>{const m=parseFloat(l);return isNaN(m)?X.none():X.some(m)},E2=(l,m)=>{let p=null;const y=()=>{nt(p)||(clearTimeout(p),p=null)};return{cancel:y,throttle:(...O)=>{y(),p=setTimeout(()=>{p=null,l.apply(null,O)},m)}}},Ct=l=>{let m=!1,p;return(...y)=>(m||(m=!0,p=l.apply(null,y)),p)},Bc=" ",mg=["tfoot","thead","tbody","colgroup"],fg=l=>bo(mg,l),$o=(l,m)=>({rows:l,columns:m}),gg=(l,m)=>({row:l,column:m}),ti=(l,m,p)=>({element:l,rowspan:m,colspan:p}),tr=(l,m,p,y)=>({element:l,rowspan:m,colspan:p,isNew:y}),Xu=(l,m,p,y,E,O)=>({element:l,rowspan:m,colspan:p,row:y,column:E,isLocked:O}),np=(l,m,p)=>({element:l,cells:m,section:p}),ni=(l,m,p,y)=>({element:l,cells:m,section:p,isNew:y}),Ta=(l,m,p)=>({element:l,isNew:m,isLocked:p}),su=(l,m,p,y)=>({element:l,cells:m,section:p,isNew:y}),dc=(l,m,p,y)=>({startRow:l,startCol:m,finishRow:p,finishCol:y}),Pw=(l,m,p)=>({element:l,colspan:m,column:p}),T2=(l,m)=>({element:l,columns:m}),oi=(l,m,p)=>{const y=l.cells,E=y.slice(0,m),O=y.slice(m),N=E.concat(p).concat(O);return u0(l,N)},l0=(l,m,p)=>oi(l,m,[p]),ru=(l,m,p)=>{const y=l.cells;y[m]=p},u0=(l,m)=>su(l.element,m,l.section,l.isNew),Us=(l,m)=>{const p=l.cells,y=an(p,m);return su(l.element,y,l.section,l.isNew)},pn=(l,m)=>l.cells[m],ga=(l,m)=>pn(l,m).element,ka=l=>l.cells.length,ws=l=>{const m=Qs(l,p=>p.section==="colgroup");return{rows:m.fail,cols:m.pass}},op=(l,m,p)=>{const y=an(l.cells,p);return su(m(l.element),y,l.section,!0)},hg=(l,m)=>{const y=(m||document).createElement("div");if(y.innerHTML=l,!y.hasChildNodes()||y.childNodes.length>1){const E="HTML does not have a single root node";throw console.error(E,l),new Error(E)}return fl(y.childNodes[0])},xs=(l,m)=>{const y=(m||document).createElement(l);return fl(y)},pg=(l,m)=>{const y=(m||document).createTextNode(l);return fl(y)},fl=l=>{if(l==null)throw new Error("Node cannot be null or undefined");return{dom:l}},pt={fromHtml:hg,fromTag:xs,fromText:pg,fromDom:fl,fromPoint:(l,m,p)=>X.from(l.dom.elementFromPoint(m,p)).map(fl)},Jd=(l,m)=>{const p=l.document.createRange();return p.selectNode(m.dom),p},mc=(l,m)=>{const p=l.document.createRange();return of(p,m),p},of=(l,m)=>l.selectNodeContents(m.dom),Zs=(l,m)=>{m.fold(p=>{l.setStartBefore(p.dom)},(p,y)=>{l.setStart(p.dom,y)},p=>{l.setStartAfter(p.dom)})},_2=(l,m)=>{m.fold(p=>{l.setEndBefore(p.dom)},(p,y)=>{l.setEnd(p.dom,y)},p=>{l.setEndAfter(p.dom)})},gl=(l,m,p)=>{const y=l.document.createRange();return Zs(y,m),_2(y,p),y},Ai=(l,m,p,y,E)=>{const O=l.document.createRange();return O.setStart(m.dom,p),O.setEnd(y.dom,E),O},d0=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom,width:l.width,height:l.height}),m0=l=>{const m=l.getClientRects(),p=m.length>0?m[0]:l.getBoundingClientRect();return p.width>0||p.height>0?X.some(p).map(d0):X.none()},Ju=Ea.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),f0=(l,m,p)=>m(pt.fromDom(p.startContainer),p.startOffset,pt.fromDom(p.endContainer),p.endOffset),bg=(l,m)=>m.match({domRange:p=>({ltr:U(p),rtl:X.none}),relative:(p,y)=>({ltr:Ct(()=>gl(l,p,y)),rtl:Ct(()=>X.some(gl(l,y,p)))}),exact:(p,y,E,O)=>({ltr:Ct(()=>Ai(l,p,y,E,O)),rtl:Ct(()=>X.some(Ai(l,E,O,p,y)))})}),Qu=(l,m)=>{const p=m.ltr();return p.collapsed?m.rtl().filter(E=>E.collapsed===!1).map(E=>Ju.rtl(pt.fromDom(E.endContainer),E.endOffset,pt.fromDom(E.startContainer),E.startOffset)).getOrThunk(()=>f0(l,Ju.ltr,p)):f0(l,Ju.ltr,p)},sf=(l,m)=>{const p=bg(l,m);return Qu(l,p)},at=(l,m)=>sf(l,m).match({ltr:(y,E,O,N)=>{const H=l.document.createRange();return H.setStart(y.dom,E),H.setEnd(O.dom,N),H},rtl:(y,E,O,N)=>{const H=l.document.createRange();return H.setStart(O.dom,N),H.setEnd(y.dom,E),H}});Ju.ltr,Ju.rtl;const vg=8,sp=9,hl=11,yg=1,Cg=3,fc=(l,m)=>{const p=l.dom;if(p.nodeType!==yg)return!1;{const y=p;if(y.matches!==void 0)return y.matches(m);if(y.msMatchesSelector!==void 0)return y.msMatchesSelector(m);if(y.webkitMatchesSelector!==void 0)return y.webkitMatchesSelector(m);if(y.mozMatchesSelector!==void 0)return y.mozMatchesSelector(m);throw new Error("Browser lacks native selectors")}},Sg=l=>l.nodeType!==yg&&l.nodeType!==sp&&l.nodeType!==hl||l.childElementCount===0,Qd=(l,m)=>{const p=m===void 0?document:m.dom;return Sg(p)?[]:an(p.querySelectorAll(l),pt.fromDom)},em=(l,m)=>{const p=m===void 0?document:m.dom;return Sg(p)?X.none():X.from(p.querySelector(l)).map(pt.fromDom)},Io=(l,m)=>l.dom===m.dom,wg=(l,m)=>{const p=l.dom,y=m.dom;return p===y?!1:p.contains(y)},xg=fc,Eg=(l,m,p,y)=>{const E=l.isiOS()&&/ipad/i.test(p)===!0,O=l.isiOS()&&!E,N=l.isiOS()||l.isAndroid(),H=N||y("(pointer:coarse)"),j=E||!O&&N&&y("(min-device-width:768px)"),te=O||N&&!j,fe=m.isSafari()&&l.isiOS()&&/safari/i.test(p)===!1,je=!te&&!j&&!fe;return{isiPad:U(E),isiPhone:U(O),isTablet:U(j),isPhone:U(te),isTouch:U(H),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:U(fe),isDesktop:U(je)}},g0=(l,m)=>{for(let p=0;p<l.length;p++){const y=l[p];if(y.test(m))return y}},ed=(l,m)=>{const p=g0(l,m);if(!p)return{major:0,minor:0};const y=E=>Number(m.replace(p,"$"+E));return au(y(1),y(2))},si=(l,m)=>{const p=String(m).toLowerCase();return l.length===0?h0():ed(l,p)},h0=()=>au(0,0),au=(l,m)=>({major:l,minor:m}),td={nu:au,detect:si,unknown:h0},p0=(l,m)=>De(m.brands,p=>{const y=p.brand.toLowerCase();return B(l,E=>{var O;return y===((O=E.brand)==null?void 0:O.toLowerCase())}).map(E=>({current:E.name,version:td.nu(parseInt(p.version,10),0)}))}),Tg=(l,m)=>{const p=String(m).toLowerCase();return B(l,y=>y.search(p))},Hn=(l,m)=>Tg(l,m).map(p=>{const y=td.detect(p.versionRegexes,m);return{current:p.name,version:y}}),I=(l,m)=>Tg(l,m).map(p=>{const y=td.detect(p.versionRegexes,m);return{current:p.name,version:y}}),J=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,se=l=>m=>fa(m,l),Re=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:l=>fa(l,"edge/")&&fa(l,"chrome")&&fa(l,"safari")&&fa(l,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,J],search:l=>fa(l,"chrome")&&!fa(l,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:l=>fa(l,"msie")||fa(l,"trident")},{name:"Opera",versionRegexes:[J,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:se("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:se("firefox")},{name:"Safari",versionRegexes:[J,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:l=>(fa(l,"safari")||fa(l,"mobile/"))&&fa(l,"applewebkit")}],Qe=[{name:"Windows",search:se("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:l=>fa(l,"iphone")||fa(l,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:se("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:se("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:se("linux"),versionRegexes:[]},{name:"Solaris",search:se("sunos"),versionRegexes:[]},{name:"FreeBSD",search:se("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:se("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Dt={browsers:U(Re),oses:U(Qe)},_n="Edge",uo="Chromium",so="IE",Rs="Opera",Es="Firefox",nd="Safari",tm=()=>Pc({current:void 0,version:td.unknown()}),Pc=l=>{const m=l.current,p=l.version,y=E=>()=>m===E;return{current:m,version:p,isEdge:y(_n),isChromium:y(uo),isIE:y(so),isOpera:y(Rs),isFirefox:y(Es),isSafari:y(nd)}},b0={unknown:tm,nu:Pc,edge:U(_n),chromium:U(uo),ie:U(so),opera:U(Rs),firefox:U(Es),safari:U(nd)},A2="Windows",v0="iOS",$w="Android",O2="Linux",D2="macOS",R2="Solaris",Oi="FreeBSD",M2="ChromeOS",a3=()=>N2({current:void 0,version:td.unknown()}),N2=l=>{const m=l.current,p=l.version,y=E=>()=>m===E;return{current:m,version:p,isWindows:y(A2),isiOS:y(v0),isAndroid:y($w),isMacOS:y(D2),isLinux:y(O2),isSolaris:y(R2),isFreeBSD:y(Oi),isChromeOS:y(M2)}},B2={unknown:a3,nu:N2,windows:U(A2),ios:U(v0),android:U($w),linux:U(O2),macos:U(D2),solaris:U(R2),freebsd:U(Oi),chromeos:U(M2)},Iw={detect:(l,m,p)=>{const y=Dt.browsers(),E=Dt.oses(),O=m.bind(j=>p0(y,j)).orThunk(()=>Hn(y,l)).fold(b0.unknown,b0.nu),N=I(E,l).fold(B2.unknown,B2.nu),H=Eg(N,O,l,p);return{browser:O,os:N,deviceType:H}}},y0=l=>window.matchMedia(l).matches;let pl=Ct(()=>Iw.detect(window.navigator.userAgent,X.from(window.navigator.userAgentData),y0));const Di=()=>pl(),nm=(l,m)=>Xt(l,m),Lw=(l,m)=>{const p=nm(l,m);if(p==null)throw new Error(l+" not available on this browser");return p},Xn=Object.getPrototypeOf,i3=l=>Lw("HTMLElement",l),P2=l=>{const m=Xt("ownerDocument.defaultView",l);return be(l)&&(i3(m).prototype.isPrototypeOf(l)||/^HTML\w*Element$/.test(Xn(l).constructor.name))},Ms=l=>l.dom.nodeName.toLowerCase(),l3=l=>l.dom.nodeType,C0=l=>m=>l3(m)===l,u3=l=>l3(l)===vg||Ms(l)==="#comment",$2=l=>Jr(l)&&P2(l.dom),Jr=C0(yg),kg=C0(Cg),d3=C0(sp),Ke=C0(hl),$c=l=>m=>Jr(m)&&Ms(m)===l,S0=l=>pt.fromDom(l.dom.ownerDocument),Ri=l=>d3(l)?l:S0(l),rp=l=>pt.fromDom(Ri(l).dom.documentElement),I2=l=>pt.fromDom(Ri(l).dom.defaultView),Y=l=>X.from(l.dom.parentNode).map(pt.fromDom),gc=l=>X.from(l.dom.parentElement).map(pt.fromDom),om=(l,m)=>{const p=In(m)?m:Le;let y=l.dom;const E=[];for(;y.parentNode!==null&&y.parentNode!==void 0;){const O=y.parentNode,N=pt.fromDom(O);if(E.push(N),p(N)===!0)break;y=O}return E},L2=l=>X.from(l.dom.previousSibling).map(pt.fromDom),_g=l=>X.from(l.dom.nextSibling).map(pt.fromDom),ha=l=>an(l.dom.childNodes,pt.fromDom),hc=(l,m)=>{const p=l.dom.childNodes;return X.from(p[m]).map(pt.fromDom)},F2=l=>hc(l,0),H2=(l,m,p,y)=>{const O=S0(l).dom.createRange();return O.setStart(l.dom,m),O.setEnd(p.dom,y),O},ap=(l,m,p,y)=>{const E=H2(l,m,p,y),O=Io(l,p)&&m===y;return E.collapsed&&!O},Za=l=>Ke(l)&&zt(l.dom.host),z2=l=>pt.fromDom(l.dom.getRootNode()),cu=l=>Za(l)?l:pt.fromDom(Ri(l).dom.body),cp=l=>{const m=z2(l);return Za(m)?X.some(m):X.none()},V2=l=>pt.fromDom(l.dom.host),Ic=l=>{if(zt(l.target)){const m=pt.fromDom(l.target);if(Jr(m)&&U2(m)&&l.composed&&l.composedPath){const p=l.composedPath();if(p)return ne(p)}}return X.from(l.target)},U2=l=>zt(l.dom.shadowRoot),bl=(l,m,p,y,E,O,N)=>({target:l,x:m,y:p,stop:y,prevent:E,kill:O,raw:N}),sm=l=>{const m=pt.fromDom(Ic(l).getOr(l.target)),p=()=>l.stopPropagation(),y=()=>l.preventDefault(),E=dn(y,p);return bl(m,l.clientX,l.clientY,p,y,E,l)},Ln=(l,m)=>p=>{l(p)&&m(sm(p))},ri=(l,m,p,y,E)=>{const O=Ln(p,y);return l.dom.addEventListener(m,O,E),{unbind:Yt(Fw,l,m,O,E)}},w0=(l,m,p,y)=>ri(l,m,p,y,!1),Fw=(l,m,p,y)=>{l.dom.removeEventListener(m,p,y)},An=de,od=(l,m,p)=>w0(l,m,An,p),nr=sm,vl=(l,m)=>{Y(l).each(y=>{y.dom.insertBefore(m.dom,l.dom)})},yl=(l,m)=>{_g(l).fold(()=>{Y(l).each(E=>{fo(E,m)})},y=>{vl(y,m)})},Ts=(l,m)=>{F2(l).fold(()=>{fo(l,m)},y=>{l.dom.insertBefore(m.dom,y.dom)})},fo=(l,m)=>{l.dom.appendChild(m.dom)},m3=(l,m,p)=>{hc(l,p).fold(()=>{fo(l,m)},y=>{vl(y,m)})},f3=(l,m)=>{vl(l,m),fo(m,l)},iu=(l,m)=>{ze(m,(p,y)=>{const E=y===0?l:m[y-1];yl(E,p)})},Mi=(l,m)=>{ze(m,p=>{fo(l,p)})},Cl=(l,m,p)=>{if(re(p)||xt(p)||jt(p))l.setAttribute(m,p+"");else throw console.error("Invalid call to Attribute.set. Key ",m,":: Value ",p,":: Element ",l),new Error("Attribute value was not simple")},ir=(l,m,p)=>{Cl(l.dom,m,p)},sd=(l,m)=>{const p=l.dom;xn(m,(y,E)=>{Cl(p,E,y)})},Lc=(l,m)=>{xn(m,(p,y)=>{p.fold(()=>{go(l,y)},E=>{Cl(l.dom,y,E)})})},Ni=(l,m)=>{const p=l.dom.getAttribute(m);return p===null?void 0:p},ai=(l,m)=>X.from(Ni(l,m)),go=(l,m)=>{l.dom.removeAttribute(m)},ci=l=>$e(l.dom.attributes,(m,p)=>(m[p.name]=p.value,m),{}),lu=l=>{l.dom.textContent="",ze(ha(l),m=>{pa(m)})},pa=l=>{const m=l.dom;m.parentNode!==null&&m.parentNode.removeChild(m)},kr=l=>{const m=ha(l);m.length>0&&iu(l,m),pa(l)},ks=(l,m)=>pt.fromDom(l.dom.cloneNode(m)),Bi=l=>ks(l,!1),Nr=l=>ks(l,!0),or=(l,m)=>{const p=pt.fromTag(m),y=ci(l);return sd(p,y),p},rf=(l,m)=>{const p=or(l,m),y=ha(Nr(l));return Mi(p,y),p},Hw=(l,m)=>{const p=or(l,m);yl(l,p);const y=ha(l);return Mi(p,y),pa(l),p},Z2=(l,m)=>{const y=document.createElement("div");return y.innerHTML=l,ha(pt.fromDom(y))},Br=l=>an(l,pt.fromDom),W2=l=>l.dom.innerHTML,zw=l=>{const m=pt.fromTag("div"),p=pt.fromDom(l.dom.cloneNode(!0));return fo(m,p),W2(m)},af=l=>l.style!==void 0&&In(l.style.getPropertyValue),qt=l=>{const m=kg(l)?l.dom.parentNode:l.dom;if(m==null||m.ownerDocument===null)return!1;const p=m.ownerDocument;return cp(pt.fromDom(m)).fold(()=>p.body.contains(m),Yn(qt,V2))},j2=l=>{const m=l.dom.body;if(m==null)throw new Error("Body is not available yet");return pt.fromDom(m)},br=(l,m,p)=>{if(!re(p))throw console.error("Invalid call to CSS.set. Property ",m,":: Value ",p,":: Element ",l),new Error("CSS value must be a string: "+p);af(l)&&l.style.setProperty(m,p)},Pr=(l,m)=>{af(l)&&l.style.removeProperty(m)},$r=(l,m,p)=>{const y=l.dom;br(y,m,p)},Qo=(l,m)=>{const p=l.dom;xn(m,(y,E)=>{br(p,E,y)})},cf=(l,m)=>{const p=l.dom,E=window.getComputedStyle(p).getPropertyValue(m);return E===""&&!qt(l)?x0(p,m):E},x0=(l,m)=>af(l)?l.style.getPropertyValue(m):"",Pi=(l,m)=>{const p=l.dom,y=x0(p,m);return X.from(y).filter(E=>E.length>0)},Sl=(l,m)=>{const p=l.dom;Pr(p,m),Sn(ai(l,"style").map(Yu),"")&&go(l,"style")},G2=(l,m)=>{const p=l.dom,y=m.dom;af(p)&&af(y)&&(y.style.cssText=p.style.cssText)},E0=(l,m)=>{const p=(H,j)=>{if(!jt(j)&&!j.match(/^[0-9]+$/))throw new Error(l+".set accepts only positive integer values. Value was "+j);const te=H.dom;af(te)&&(te.style[l]=j+"px")},y=H=>{const j=m(H);if(j<=0||j===null){const te=cf(H,l);return parseFloat(te)||0}return j},E=y,O=(H,j)=>$e(j,(te,fe)=>{const je=cf(H,fe),bt=je===void 0?0:parseInt(je,10);return isNaN(bt)?te:te+bt},0);return{set:p,get:y,getOuter:E,aggregate:O,max:(H,j,te)=>{const fe=O(H,te);return j>fe?j-fe:0}}},T0=(l,m)=>tp(l).getOr(m),rd=(l,m,p)=>T0(cf(l,m),p),wl=(l,m,p,y)=>{const E=rd(l,`padding-${p}`,0),O=rd(l,`padding-${y}`,0),N=rd(l,`border-${p}-width`,0),H=rd(l,`border-${y}-width`,0);return m-E-O-N-H},g3=(l,m)=>{const p=l.dom,y=p.getBoundingClientRect().width||p.offsetWidth;return m==="border-box"?y:wl(l,y,"left","right")},Qr=l=>rd(l,"height",l.dom.offsetHeight),xl=l=>rd(l,"width",l.dom.offsetWidth),uu=l=>g3(l,"content-box"),Qn=E0("height",l=>{const m=l.dom;return qt(l)?m.getBoundingClientRect().height:m.offsetHeight}),Fc=l=>Qn.get(l),Vw=l=>Qn.getOuter(l),k0=Qr,ii=E0("width",l=>{const m=l.dom;return qt(l)?m.getBoundingClientRect().width:m.offsetWidth}),on=l=>ii.get(l),hs=l=>ii.getOuter(l),Ir=uu,es=xl,$i=(l,m)=>({left:l,top:m,translate:(y,E)=>$i(l+y,m+E)}),is=$i,sr=l=>{const m=l.getBoundingClientRect();return is(m.left,m.top)},Ag=(l,m)=>l!==void 0?l:m!==void 0?m:0,Nn=l=>{const m=l.dom.ownerDocument,p=m.body,y=m.defaultView,E=m.documentElement;if(p===l.dom)return is(p.offsetLeft,p.offsetTop);const O=Ag(y==null?void 0:y.pageYOffset,E.scrollTop),N=Ag(y==null?void 0:y.pageXOffset,E.scrollLeft),H=Ag(E.clientTop,p.clientTop),j=Ag(E.clientLeft,p.clientLeft);return Ii(l).translate(N-j,O-H)},Ii=l=>{const m=l.dom,y=m.ownerDocument.body;return y===m?is(y.offsetLeft,y.offsetTop):qt(l)?sr(m):is(0,0)},Zo=l=>{const m=l!==void 0?l.dom:document,p=m.body.scrollLeft||m.documentElement.scrollLeft,y=m.body.scrollTop||m.documentElement.scrollTop;return is(p,y)},li=(l,m,p)=>{const E=(p!==void 0?p.dom:document).defaultView;E&&E.scrollBy(l,m)},ba=((l,m)=>{const p=O=>{if(!l(O))throw new Error("Can only get "+m+" value of a "+m+" node");return y(O).getOr("")},y=O=>l(O)?X.from(O.dom.nodeValue):X.none();return{get:p,getOption:y,set:(O,N)=>{if(!l(O))throw new Error("Can only set raw "+m+" value of a "+m+" node");O.dom.nodeValue=N}}})(kg,"text"),ip=l=>ba.get(l),Uw=l=>ba.getOption(l),lp=(l,m)=>ba.set(l,m),up=(l,m)=>p=>lf(p)==="rtl"?m:l,lf=l=>cf(l,"direction")==="rtl"?"rtl":"ltr",va=(l,m)=>{const p=Ni(l,m);return p===void 0||p===""?[]:p.split(" ")},ad=(l,m,p)=>{const E=va(l,m).concat([p]);return ir(l,m,E.join(" ")),!0},h3=(l,m,p)=>{const y=Xo(va(l,m),E=>E!==p);return y.length>0?ir(l,m,y.join(" ")):go(l,m),!1};var uf=(l,m,p,y,E)=>l(p,y)?X.some(p):In(E)&&E(p)?X.none():m(p,y,E);const ko=(l,m,p)=>{let y=l.dom;const E=In(p)?p:Le;for(;y.parentNode;){y=y.parentNode;const O=pt.fromDom(y);if(m(O))return X.some(O);if(E(O))break}return X.none()},_0=(l,m,p)=>uf((E,O)=>O(E),ko,l,m,p),A0=(l,m)=>{const p=E=>m(pt.fromDom(E));return B(l.dom.childNodes,p).map(pt.fromDom)},pc=(l,m)=>{const p=y=>{for(let E=0;E<y.childNodes.length;E++){const O=pt.fromDom(y.childNodes[E]);if(m(O))return X.some(O);const N=p(y.childNodes[E]);if(N.isSome())return N}return X.none()};return p(l.dom)},ui=(l,m,p)=>ko(l,y=>fc(y,m),p),Ns=(l,m)=>A0(l,p=>fc(p,m)),rm=(l,m)=>em(m,l),lr=(l,m,p)=>uf((E,O)=>fc(E,O),ui,l,m,p),Og=l=>l.dom.classList!==void 0,O0=l=>va(l,"class"),q2=(l,m)=>ad(l,"class",m),s6=(l,m)=>h3(l,"class",m),El=(l,m)=>{Og(l)?l.dom.classList.add(m):q2(l,m)},p3=l=>{(Og(l)?l.dom.classList:O0(l)).length===0&&go(l,"class")},Zw=(l,m)=>{Og(l)?l.dom.classList.remove(m):s6(l,m),p3(l)},Tl=(l,m)=>Og(l)&&l.dom.classList.contains(m),Ww=(l,m)=>{ze(m,p=>{Zw(l,p)})},Dg=l=>lr(l,"[contenteditable]"),dp=(l,m=!1)=>qt(l)?l.dom.isContentEditable:Dg(l).fold(U(m),p=>mp(p)==="true"),mp=l=>l.dom.contentEditable,K2=l=>m=>{El(m,l)},jw=l=>m=>{Ww(m,l)},Li=(l,m,p)=>Xo(om(l,p),m),b3=(l,m)=>Xo(ha(l),m),am=(l,m)=>{let p=[];return ze(ha(l),y=>{m(y)&&(p=p.concat([y])),p=p.concat(am(y,m))}),p},wo=(l,m,p)=>Li(l,y=>fc(y,m),p),ya=(l,m)=>b3(l,p=>fc(p,m)),du=(l,m)=>Qd(m,l),Y2=(l,m,p,y)=>({parent:l,children:m,element:p,index:y}),cm=l=>Y(l).bind(m=>{const p=ha(m);return X2(p,l).map(y=>Y2(m,p,l,y))}),X2=(l,m)=>Qc(l,Yt(Io,m)),Gw=(l,m,p)=>ko(l,m,p).isSome(),mu=l=>Ms(l)==="img"?1:Uw(l).fold(()=>ha(l).length,m=>m.length),fu=l=>Uw(l).filter(m=>m.trim().length!==0||m.indexOf(Bc)>-1).isSome(),Ro=l=>$2(l)&&Ni(l,"contenteditable")==="false",qw=["img","br"],us=l=>fu(l)||bo(qw,Ms(l))||Ro(l),fp=l=>pc(l,us),Ws=l=>gu(l,us),gu=(l,m)=>{const p=y=>{const E=ha(y);for(let O=E.length-1;O>=0;O--){const N=E[O];if(m(N))return X.some(N);const H=p(N);if(H.isSome())return H}return X.none()};return p(l)},cd={create:(l,m,p,y)=>({start:l,soffset:m,finish:p,foffset:y})},D0=Ea.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Kw=(l,m,p,y)=>l.fold(m,p,y),J2=l=>l.fold(At,At,At),v3=D0.before,Hc=D0.on,im=D0.after,yr={before:v3,on:Hc,after:im,cata:Kw,getStart:J2},Lr=Ea.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),R0=l=>Lr.exact(l.start,l.soffset,l.finish,l.foffset),gp=l=>l.match({domRange:m=>pt.fromDom(m.startContainer),relative:(m,p)=>yr.getStart(m),exact:(m,p,y,E)=>m}),Yw=Lr.domRange,Xw=Lr.relative,Fi=Lr.exact,r6=l=>{const m=gp(l);return I2(m)},df=cd.create,id={domRange:Yw,relative:Xw,exact:Fi,exactFromRange:R0,getWin:r6,range:df},y3=(l,m,p)=>{var y;return X.from((y=l.caretPositionFromPoint)==null?void 0:y.call(l,m,p)).bind(E=>{if(E.offsetNode===null)return X.none();const O=l.createRange();return O.setStart(E.offsetNode,E.offset),O.collapse(),X.some(O)})},M0=(l,m,p)=>{var y;return X.from((y=l.caretRangeFromPoint)==null?void 0:y.call(l,m,p))},C3=(l,m,p)=>l.caretPositionFromPoint?y3(l,m,p):l.caretRangeFromPoint?M0(l,m,p):X.none(),Fr=(l,m,p)=>{const y=l.document;return C3(y,m,p).map(E=>cd.create(pt.fromDom(E.startContainer),E.startOffset,pt.fromDom(E.endContainer),E.endOffset))},Rg=(l,m)=>{const p=Ms(l);return p==="input"?yr.after(l):bo(["br","img"],p)?m===0?yr.before(l):yr.after(l):yr.on(l,m)},S3=(l,m)=>{const p=l.fold(yr.before,Rg,yr.after),y=m.fold(yr.before,Rg,yr.after);return id.relative(p,y)},Mg=(l,m,p,y)=>{const E=Rg(l,m),O=Rg(p,y);return id.relative(E,O)},N0=l=>X.from(l.getSelection()),Jw=(l,m)=>{N0(l).each(p=>{p.removeAllRanges(),p.addRange(m)})},Q2=(l,m,p,y,E)=>{const O=Ai(l,m,p,y,E);Jw(l,O)},Qw=(l,m,p,y,E,O)=>{m.collapse(p.dom,y),m.extend(E.dom,O)},ex=(l,m)=>sf(l,m).match({ltr:(p,y,E,O)=>{Q2(l,p,y,E,O)},rtl:(p,y,E,O)=>{N0(l).each(N=>{if(N.setBaseAndExtent)N.setBaseAndExtent(p.dom,y,E.dom,O);else if(N.extend)try{Qw(l,N,p,y,E,O)}catch{Q2(l,E,O,p,y)}else Q2(l,E,O,p,y)})}}),B0=(l,m,p,y,E)=>{const O=Mg(m,p,y,E);ex(l,O)},tx=(l,m,p)=>{const y=S3(m,p);ex(l,y)},Ng=l=>{if(l.rangeCount>0){const m=l.getRangeAt(0),p=l.getRangeAt(l.rangeCount-1);return X.some(cd.create(pt.fromDom(m.startContainer),m.startOffset,pt.fromDom(p.endContainer),p.endOffset))}else return X.none()},w3=l=>{if(l.anchorNode===null||l.focusNode===null)return Ng(l);{const m=pt.fromDom(l.anchorNode),p=pt.fromDom(l.focusNode);return ap(m,l.anchorOffset,p,l.focusOffset)?X.some(cd.create(m,l.anchorOffset,p,l.focusOffset)):Ng(l)}},ey=(l,m,p=!0)=>{const E=(p?mc:Jd)(l,m);Jw(l,E)},x3=l=>N0(l).filter(m=>m.rangeCount>0).bind(w3),E3=l=>x3(l).map(m=>id.exact(m.start,m.soffset,m.finish,m.foffset)),ty=(l,m)=>{const p=at(l,m);return m0(p)},ny=(l,m,p)=>Fr(l,m,p),T3=l=>{N0(l).each(m=>m.removeAllRanges())},k3={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},_3=(()=>{const l="[0-9]+",p="[eE]"+("[+-]?"+l),y="\\.",E=H=>`(?:${H})?`,N=`[+-]?(?:${["Infinity",l+y+E(l)+E(p),y+l+E(p),l+E(p)].join("|")})`;return new RegExp(`^(${N})(.*)$`)})(),P0=(l,m)=>qe(m,p=>qe(k3[p],y=>l===y)),A3=(l,m)=>X.from(_3.exec(l)).bind(y=>{const E=Number(y[1]),O=y[2];return P0(O,m)?X.some({value:E,unit:O}):X.none()}),Hi=l=>an(l,U(0)),Bg=(l,m,p,y,E)=>E(l.slice(0,m)).concat(y).concat(E(l.slice(p))),$0=l=>(m,p,y,E)=>{if(l(y)){const O=Math.max(E,m[p]-Math.abs(y)),N=Math.abs(O-m[p]);return y>=0?N:-N}else return y},hp=$0(l=>l<0),O3=$0(de),D3=()=>{const l=(H,j,te,fe,je)=>{const bt=hp(H,j,fe,je);return Bg(H,j,te+1,[bt,0],Hi)},m=(H,j,te,fe)=>{const je=(100+te)/100,bt=Math.max(fe,(H[j]+te)/je);return an(H,(mt,We)=>(We===j?bt:mt/je)-mt)},p=(H,j,te,fe,je,bt)=>bt?m(H,j,fe,je):l(H,j,te,fe,je);return{resizeTable:(H,j)=>H(j),clampTableDelta:hp,calcLeftEdgeDeltas:p,calcMiddleDeltas:(H,j,te,fe,je,bt,mt)=>p(H,te,fe,je,bt,mt),calcRightEdgeDeltas:(H,j,te,fe,je,bt)=>{if(bt)return m(H,te,fe,je);{const mt=hp(H,te,fe,je);return Hi(H.slice(0,te)).concat([mt])}},calcRedestributedWidths:(H,j,te,fe)=>{if(fe){const bt=(j+te)/j,mt=an(H,We=>We/bt);return{delta:bt*100-100,newSizes:mt}}else return{delta:te,newSizes:H}}}},nx=()=>{const l=(N,H,j,te,fe)=>{const je=te>=0?j:H,bt=O3(N,je,te,fe);return Bg(N,H,j+1,[bt,-bt],Hi)};return{resizeTable:(N,H,j)=>{j&&N(H)},clampTableDelta:(N,H,j,te,fe)=>{if(fe){if(j>=0)return j;{const je=$e(N,(bt,mt)=>bt+mt-te,0);return Math.max(-je,j)}}else return hp(N,H,j,te)},calcLeftEdgeDeltas:l,calcMiddleDeltas:(N,H,j,te,fe,je)=>l(N,j,te,fe,je),calcRightEdgeDeltas:(N,H,j,te,fe,je)=>{if(je)return Hi(N);{const bt=te/N.length;return an(N,U(bt))}},calcRedestributedWidths:(N,H,j,te)=>({delta:0,newSizes:N})}},ld=(l,m,p=0)=>ai(l,m).map(y=>parseInt(y,10)).getOr(p),pp=(l,m)=>ld(l,m,1),lm=l=>$c("col")(l)?ld(l,"span",1)>1:pp(l,"colspan")>1,R3=l=>pp(l,"rowspan")>1,rr=(l,m)=>parseInt(cf(l,m),10),js=U(10),um=U(10),ud=(l,m)=>oy(l,m,de),oy=(l,m,p)=>gs(ha(l),y=>fc(y,m)?p(y)?[y]:[]:oy(y,m,p)),ta=(l,m,p=Le)=>{if(p(m))return X.none();if(bo(l,Ms(m)))return X.some(m);const y=E=>fc(E,"table")||p(E);return ui(m,l.join(","),y)},sy=(l,m)=>ta(["td","th"],l,m),dm=l=>ud(l,"th,td"),I0=l=>fc(l,"colgroup")?ya(l,"col"):gs(bc(l),m=>ya(m,"col")),zc=(l,m)=>lr(l,"table",m),ry=l=>ud(l,"tr"),bc=l=>zc(l).fold(U([]),m=>ya(m,"colgroup")),_s=$c("th"),L0=l=>Po(l,m=>_s(m.element)),Pg=(l,m)=>l&&m?"sectionCells":l?"section":"cells",ox=l=>{const m=l.section==="thead",p=Sn(ay(l.cells),"th");return l.section==="tfoot"?{type:"footer"}:m||p?{type:"header",subType:Pg(m,p)}:{type:"body"}},ay=l=>{const m=Xo(l,p=>_s(p.element));return m.length===0?X.some("td"):m.length===l.length?X.some("th"):X.none()},sx=l=>{const m=an(l,E=>ox(E).type),p=bo(m,"header"),y=bo(m,"footer");if(!p&&!y)return X.some("body");{const E=bo(m,"body");return p&&!E&&!y?X.some("header"):!p&&!E&&y?X.some("footer"):X.none()}},rx=l=>De(l.all,m=>{const p=ox(m);return p.type==="header"?X.from(p.subType):X.none()}),F0=(l,m)=>an(l,p=>{if(Ms(p)==="colgroup"){const y=an(I0(p),E=>{const O=ld(E,"span",1);return ti(E,1,O)});return np(p,y,"colgroup")}else{const y=an(dm(p),E=>{const O=ld(E,"rowspan",1),N=ld(E,"colspan",1);return ti(E,O,N)});return np(p,y,m(p))}}),$g=l=>Y(l).map(m=>{const p=Ms(m);return fg(p)?p:"tbody"}).getOr("tbody"),H0=l=>{const m=ry(l),y=[...bc(l),...m];return F0(y,$g)},it=(l,m)=>F0(l,()=>m),Wa="data-snooker-locked-cols",M3=l=>ai(l,Wa).bind(m=>X.from(m.match(/\d+/g))).map(m=>Ce(m,de)),_a=l=>{const m=$e(ws(l).rows,(y,E)=>(ze(E.cells,(O,N)=>{O.isLocked&&(y[N]=!0)}),y),{}),p=ic(m,(y,E)=>parseInt(E,10));return Ge(p)},di=(l,m)=>l+","+m,z0=(l,m,p)=>X.from(l.access[di(m,p)]),N3=(l,m,p)=>{const y=mm(l,E=>p(m,E.element));return y.length>0?X.some(y[0]):X.none()},mm=(l,m)=>{const p=gs(l.all,y=>y.cells);return Xo(p,m)},B3=l=>{const m={};let p=0;return ze(l.cells,y=>{const E=y.colspan;Fo(E,O=>{const N=p+O;m[N]=Pw(y.element,E,N)}),p+=E}),m},ja=l=>{const m={},p=[],E=ne(l).map(mt=>mt.element).bind(zc).bind(M3).getOr({});let O=0,N=0,H=0;const{pass:j,fail:te}=Qs(l,mt=>mt.section==="colgroup");ze(te,mt=>{const We=[];ze(mt.cells,ot=>{let Ve=0;for(;m[di(H,Ve)]!==void 0;)Ve++;const Gt=Ds(E,Ve.toString()),vn=Xu(ot.element,ot.rowspan,ot.colspan,H,Ve,Gt);for(let kt=0;kt<ot.colspan;kt++)for(let ao=0;ao<ot.rowspan;ao++){const fn=H+ao,po=Ve+kt,Is=di(fn,po);m[Is]=vn,N=Math.max(N,po+1)}We.push(vn)}),O++,p.push(np(mt.element,We,mt.section)),H++});const{columns:fe,colgroups:je}=Vn(j).map(mt=>{const We=B3(mt);return{colgroups:[T2(mt.element,mo(We))],columns:We}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:$o(O,N),access:m,all:p,columns:fe,colgroups:je}},Tn={fromTable:l=>{const m=H0(l);return ja(m)},generate:ja,getAt:z0,findItem:N3,filterItems:mm,justCells:l=>gs(l.all,m=>m.cells),justColumns:l=>mo(l.columns),hasColumns:l=>ge(l.columns).length>0,getColumnAt:(l,m)=>X.from(l.columns[m])},dd=(l,m,p)=>Ta(p(l.element,m),!0,l.isLocked),Ig=(l,m)=>l.section!==m?su(l.element,l.cells,m,l.isNew):l,ds=()=>({transformRow:Ig,transformCell:(l,m,p)=>{const y=p(l.element,m),E=Ms(y)!=="td"?Hw(y,"td"):y;return Ta(E,l.isNew,l.isLocked)}}),fi=()=>({transformRow:Ig,transformCell:dd}),bp=()=>({transformRow:(l,m)=>Ig(l,m==="thead"?"tbody":m),transformCell:dd}),md={getTableSectionType:(l,m)=>{const p=Tn.fromTable(l);switch(rx(p).getOr(m)){case"section":return ds();case"sectionCells":return fi();case"cells":return bp()}},section:ds,sectionCells:fi,cells:bp,fallback:()=>({transformRow:At,transformCell:dd})},Lg=(l,m=de)=>{const p=l.grid,y=Fo(p.columns,At),E=Fo(p.rows,At);return an(y,O=>iy(()=>gs(E,te=>Tn.getAt(l,te,O).filter(fe=>fe.column===O).toArray()),te=>te.colspan===1&&m(te.element),()=>Tn.getAt(l,0,O)))},iy=(l,m,p)=>{const y=l();return B(y,m).orThunk(()=>X.from(y[0]).orThunk(p)).map(N=>N.element)},ly=l=>{const m=l.grid,p=Fo(m.rows,At),y=Fo(m.columns,At);return an(p,E=>iy(()=>gs(y,j=>Tn.getAt(l,E,j).filter(te=>te.row===E).fold(U([]),te=>[te])),j=>j.rowspan===1,()=>Tn.getAt(l,E,0)))},gi=(l,m)=>{if(m<0||m>=l.length-1)return X.none();const p=l[m].fold(()=>{const E=Yr(l.slice(0,m));return De(E,(O,N)=>O.map(H=>({value:H,delta:N+1})))},E=>X.some({value:E,delta:0})),y=l[m+1].fold(()=>{const E=l.slice(m+1);return De(E,(O,N)=>O.map(H=>({value:H,delta:N+1})))},E=>X.some({value:E,delta:1}));return p.bind(E=>y.map(O=>{const N=O.delta+E.delta;return Math.abs(O.value-E.value)/N}))},vp=(l,m)=>({row:l,y:m}),yp=(l,m)=>({col:l,x:m}),P3=l=>Nn(l).left+hs(l),cx=l=>Nn(l).left,Cp=(l,m)=>yp(l,cx(m)),uy=(l,m)=>yp(l,P3(m)),V0=l=>Nn(l).top,$3=(l,m)=>vp(l,V0(m)),I3=(l,m)=>vp(l,V0(m)+Vw(m)),dy=(l,m,p)=>{if(p.length===0)return[];const y=an(p.slice(1),(O,N)=>O.map(H=>l(N,H))),E=p[p.length-1].map(O=>m(p.length-1,O));return y.concat([E])},L3=l=>-l,Sp={delta:At,positions:l=>dy($3,I3,l),edge:V0},Vt=up({delta:At,edge:cx,positions:l=>dy(Cp,uy,l)},{delta:L3,edge:P3,positions:l=>dy(uy,Cp,l)}),As={delta:(l,m)=>Vt(m).delta(l,m),positions:(l,m)=>Vt(m).positions(l,m),edge:l=>Vt(l).edge(l)},Fg=/(\d+(\.\d+)?)%/,ix=/(\d+(\.\d+)?)px|em/,mf=$c("col"),Hg=$c("tr"),my=(l,m,p)=>{const y=gc(l).getOrThunk(()=>j2(S0(l)));return m(l)/p(y)*100},ff=(l,m)=>{$r(l,"width",m+"px")},lx=(l,m)=>{$r(l,"width",m+"%")},hu=(l,m)=>{$r(l,"height",m+"px")},ux=l=>{Sl(l,"height")},fy=l=>k0(l)+"px",ls=(l,m,p,y)=>{const E=zc(l).map(O=>{const N=p(O);return Math.floor(m/100*N)}).getOr(m);return y(l,E),E},hi=(l,m,p,y)=>{const E=parseFloat(l);return dg(l,"%")&&Ms(m)!=="table"?ls(m,E,p,y):E},Aa=l=>{const m=fy(l);return m?hi(m,l,Fc,hu):Fc(l)},zg=(l,m,p)=>{const y=p(l),E=pp(l,m);return y/E},Oa=(l,m)=>Pi(l,m).orThunk(()=>ai(l,m).map(p=>p+"px")),gf=l=>Oa(l,"width"),Cr=l=>Oa(l,"height"),Da=l=>my(l,on,Ir),U0=l=>mf(l)?Math.round(on(l)):es(l),He=l=>Hg(l)?Fc(l):zg(l,"rowspan",Aa),Ga=l=>gf(l).bind(p=>A3(p,["fixed","relative","empty"])),wp=(l,m,p)=>{$r(l,"width",m+p)},ps=l=>on(l)+"px",zi=l=>Fc(l)+"px",Cc=l=>my(l,on,Ir)+"%",F3=l=>gf(l).exists(m=>Fg.test(m)),pu=l=>gf(l).exists(m=>ix.test(m)),dx=l=>gf(l).isNone(),qa=U(Fg),ho=$c("col"),kl=l=>gf(l).getOrThunk(()=>U0(l)+"px"),Vg=l=>Cr(l).getOrThunk(()=>He(l)+"px"),bs=l=>an(Tn.justColumns(l),m=>X.from(m.element)),gy=l=>{const m=Di().browser,p=m.isChromium()||m.isFirefox();return ho(l)?p:!0},hy=(l,m,p,y,E,O)=>l.filter(y).fold(()=>O(gi(p,m)),N=>E(N)),Vi=(l,m,p,y)=>{const E=Lg(l),O=Tn.hasColumns(l)?bs(l):E,N=[X.some(As.edge(m))].concat(an(As.positions(E,m),j=>j.map(te=>te.x))),H=ie(lm);return an(O,(j,te)=>hy(j,te,N,H,fe=>{if(gy(fe))return p(fe);{const je=i0(E[te],At);return hy(je,te,N,H,bt=>y(X.some(Math.round(on(bt)))),y)}},y))},Z0=l=>l.map(m=>m+"px").getOr(""),Ka=(l,m)=>Vi(l,m,kl,Z0),H3=(l,m,p)=>Vi(l,m,Da,y=>y.fold(()=>p.minCellWidth(),E=>E/p.pixelWidth()*100)),pe=(l,m,p)=>Vi(l,m,U0,y=>y.getOrThunk(p.minCellWidth)),Vc=(l,m,p,y)=>{const E=ly(l),O=an(l.all,H=>X.some(H.element)),N=[X.some(Sp.edge(m))].concat(an(Sp.positions(E,m),H=>H.map(j=>j.y)));return an(O,(H,j)=>hy(H,j,N,de,p,y))},xp=(l,m)=>Vc(l,m,He,p=>p.getOrThunk(um)),ms=(l,m)=>Vc(l,m,Vg,Z0),Ra=(l,m)=>()=>qt(l)?m(l):parseFloat(Pi(l,"width").getOr("0")),dr=l=>{const m=Ra(l,on),p=U(0);return{width:m,pixelWidth:m,getWidths:(E,O)=>pe(E,l,O),getCellDelta:p,singleColumnWidth:U([0]),minCellWidth:p,setElementWidth:et,adjustTableWidth:et,isRelative:!0,label:"none"}},Ho=l=>{const m=Ra(l,j=>parseFloat(Cc(j))),p=Ra(l,on);return{width:m,pixelWidth:p,getWidths:(j,te)=>H3(j,l,te),getCellDelta:j=>j/p()*100,singleColumnWidth:(j,te)=>[100-j],minCellWidth:()=>js()/p()*100,setElementWidth:lx,adjustTableWidth:j=>{const te=m(),fe=j/100*te,je=te+fe;lx(l,je)},isRelative:!0,label:"percent"}},mx=l=>{const m=Ra(l,on);return{width:m,pixelWidth:m,getWidths:(N,H)=>pe(N,l,H),getCellDelta:At,singleColumnWidth:(N,H)=>[Math.max(js(),N+H)-N],minCellWidth:js,setElementWidth:ff,adjustTableWidth:N=>{const H=m()+N;ff(l,H)},isRelative:!1,label:"pixel"}},fm=(l,m)=>qa().exec(m)!==null?Ho(l):mx(l),Ug={getTableSize:l=>gf(l).fold(()=>dr(l),p=>fm(l,p)),pixelSize:mx,percentageSize:Ho,noneSize:dr},Ep=(l,m,p,y)=>{p===y?go(l,m):ir(l,m,p)},py=(l,m,p)=>{Vn(ya(l,m)).fold(()=>Ts(l,p),y=>yl(y,p))},by=(l,m)=>{const p=Ns(l,m).getOrThunk(()=>{const y=pt.fromTag(m,S0(l).dom);return m==="thead"?py(l,"caption,colgroup",y):m==="colgroup"?py(l,"caption",y):fo(l,y),y});return lu(p),p},hm=(l,m)=>{const p=[],y=[],E=mt=>an(mt,We=>{We.isNew&&p.push(We.element);const ot=We.element;return lu(ot),ze(We.cells,Ve=>{Ve.isNew&&y.push(Ve.element),Ep(Ve.element,"colspan",Ve.colspan,1),Ep(Ve.element,"rowspan",Ve.rowspan,1),fo(ot,Ve.element)}),ot}),O=mt=>gs(mt,We=>an(We.cells,ot=>(Ep(ot.element,"span",ot.colspan,1),ot.element))),N=(mt,We)=>{const ot=by(l,We),Gt=(We==="colgroup"?O:E)(mt);Mi(ot,Gt)},H=mt=>{Ns(l,mt).each(pa)},j=(mt,We)=>{mt.length>0?N(mt,We):H(We)},te=[],fe=[],je=[],bt=[];return ze(m,mt=>{switch(mt.section){case"thead":te.push(mt);break;case"tbody":fe.push(mt);break;case"tfoot":je.push(mt);break;case"colgroup":bt.push(mt);break}}),j(bt,"colgroup"),j(te,"thead"),j(fe,"tbody"),j(je,"tfoot"),{newRows:p,newCells:y}},Zg=l=>an(l,m=>{const p=Bi(m.element);return ze(m.cells,y=>{const E=Nr(y.element);Ep(E,"colspan",y.colspan,1),Ep(E,"rowspan",y.rowspan,1),fo(p,E)}),p}),fx=(l,m)=>an(l,p=>pn(p,m)),vy=(l,m)=>l[m],z3=(l,m)=>{if(l.length===0)return 0;const p=l[0];return Qc(l,E=>!m(p.element,E.element)).getOr(l.length)},na=(l,m,p,y)=>{const E=vy(l,m),O=E.section==="colgroup",N=z3(E.cells.slice(p),y),H=O?1:z3(fx(l.slice(m),p),y);return{colspan:N,rowspan:H}},Sc=(l,m)=>{const p=an(l,E=>an(E.cells,Le)),y=(E,O,N,H)=>{for(let j=E;j<E+N;j++)for(let te=O;te<O+H;te++)p[j][te]=!0};return an(l,(E,O)=>{const N=gs(E.cells,(H,j)=>{if(p[O][j]===!1){const te=na(l,O,j,m);return y(O,j,te.rowspan,te.colspan),[tr(H.element,te.rowspan,te.colspan,H.isNew)]}else return[]});return ni(E.element,N,E.section,E.isNew)})},Bs=(l,m,p)=>{const y=[];ze(l.colgroups,E=>{const O=[];for(let N=0;N<l.grid.columns;N++){const H=Tn.getColumnAt(l,N).map(j=>Ta(j.element,p,!1)).getOrThunk(()=>Ta(m.colGap(),!0,!1));O.push(H)}y.push(su(E.element,O,"colgroup",p))});for(let E=0;E<l.grid.rows;E++){const O=[];for(let j=0;j<l.grid.columns;j++){const te=Tn.getAt(l,E,j).map(fe=>Ta(fe.element,p,fe.isLocked)).getOrThunk(()=>Ta(m.gap(),!0,!1));O.push(te)}const N=l.all[E],H=su(N.element,O,N.section,p);y.push(H)}return y},pm=(l,m)=>Bs(l,m,!1),Tp=l=>Sc(l,Io),Ya=(l,m)=>De(l.all,p=>B(p.cells,y=>Io(m,y.element))),Wg=(l,m,p)=>{const y=an(m.selection,O=>sy(O).bind(N=>Ya(l,N)).filter(p)),E=Ss(y);return Jh(E.length>0,E)},ar=(l,m,p,y,E,O,N,H,j)=>{const te=Tn.fromTable(O),fe=X.from(j==null?void 0:j.section).getOrThunk(md.fallback);return m(te,N).map(bt=>{const mt=pm(te,H),We=l(mt,bt,Io,E(H),fe),ot=_a(We.grid),Ve=Tp(We.grid);return{info:bt,grid:Ve,cursor:We.cursor,lockedColumns:ot}}).bind(bt=>{const mt=hm(O,bt.grid),We=X.from(j==null?void 0:j.sizing).getOrThunk(()=>Ug.getTableSize(O)),ot=X.from(j==null?void 0:j.resize).getOrThunk(nx);return p(O,bt.grid,bt.info,{sizing:We,resize:ot,section:fe}),y(O),go(O,Wa),bt.lockedColumns.length>0&&ir(O,Wa,bt.lockedColumns.join(",")),X.some({cursor:bt.cursor,newRows:mt.newRows,newCells:mt.newCells})})},W0=(l,m)=>sy(m.element).bind(p=>Ya(l,p).map(y=>({...y,generators:m.generators,clipboard:m.clipboard}))),Uc=(l,m)=>Wg(l,m,de).map(p=>({cells:p,generators:m.generators,clipboard:m.clipboard})),Ui=(l,m)=>m.mergable,yy=(l,m)=>m.unmergable,Sr=(l,m)=>Wg(l,m,de),jg=(l,m)=>Wg(l,m,p=>!p.isLocked),_l=(l,m)=>Ya(l,m).exists(p=>!p.isLocked),hf=(l,m)=>Po(m,p=>_l(l,p)),pf=(l,m)=>Ui(l,m).filter(p=>hf(l,p.cells)),V3=(l,m)=>yy(l,m).filter(p=>hf(l,p)),fd={...Ea.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},kp=(l,m)=>l.length===0?fd.none():l.length===1?fd.only(0):m===0?fd.left(0,1):m===l.length-1?fd.right(m-1,m):m>0&&m<l.length-1?fd.middle(m-1,m,m+1):fd.none(),zo=(l,m,p,y,E)=>{const O=l.slice(0),N=kp(l,m),H=U(an(O,U(0))),j=bt=>y.singleColumnWidth(O[bt],p),te=(bt,mt)=>E.calcLeftEdgeDeltas(O,bt,mt,p,y.minCellWidth(),y.isRelative),fe=(bt,mt,We)=>E.calcMiddleDeltas(O,bt,mt,We,p,y.minCellWidth(),y.isRelative),je=(bt,mt)=>E.calcRightEdgeDeltas(O,bt,mt,p,y.minCellWidth(),y.isRelative);return N.fold(H,j,te,fe,je)},gx=(l,m,p)=>{let y=0;for(let E=l;E<m;E++)y+=p[E]!==void 0?p[E]:0;return y},gd=(l,m)=>{const p=Tn.justCells(l);return an(p,y=>{const E=gx(y.column,y.column+y.colspan,m);return{element:y.element,width:E,colspan:y.colspan}})},Gg=(l,m)=>{const p=Tn.justColumns(l);return an(p,(y,E)=>({element:y.element,width:m[E],colspan:y.colspan}))},G0=(l,m)=>an(l.all,(p,y)=>({element:p.element,height:m[y]})),hd=l=>er(l,(m,p)=>m+p,0),Hr=(l,m)=>Tn.hasColumns(l)?Gg(l,m):gd(l,m),bf=(l,m,p)=>{const y=Hr(l,m);ze(y,E=>{p.setElementWidth(E.element,E.width)})},qg=(l,m,p,y,E)=>{const O=Tn.fromTable(l),N=E.getCellDelta(m),H=E.getWidths(O,E),j=p===O.grid.columns-1,te=y.clampTableDelta(H,p,N,E.minCellWidth(),j),fe=zo(H,p,te,E,y),je=an(fe,(bt,mt)=>bt+H[mt]);bf(O,je,E),y.resizeTable(E.adjustTableWidth,te,j)},q0=(l,m,p)=>{const y=Tn.fromTable(l),E=xp(y,l),O=an(E,(j,te)=>p===te?Math.max(m+j,um()):j),N=G0(y,O);ze(N,j=>{hu(j.element,j.height)}),ze(Tn.justCells(y),j=>{ux(j.element)});const H=hd(O);hu(l,H)},K0=(l,m,p,y,E)=>{const O=Tn.generate(m),N=y.getWidths(O,y),H=y.pixelWidth(),{newSizes:j,delta:te}=E.calcRedestributedWidths(N,H,p.pixelDelta,y.isRelative);bf(O,j,y),y.adjustTableWidth(te)},Y0=(l,m,p,y)=>{const E=Tn.generate(m),O=y.getWidths(E,y);bf(E,O,y)},_p=(l,m)=>{lm(l)||Ga(l).each(y=>{const E=y.value/2;wp(l,E,y.unit),wp(m,E,y.unit)})},hx=(l,m,p)=>{const y=ld(l,m,1);p===1||y<=1?go(l,m):ir(l,m,Math.min(p,y))},Cy=(l,m)=>p=>{const y=p.column+p.colspan-1,E=p.column;return y>=l&&E<m},Sy=(l,m,p)=>{if(Tn.hasColumns(l)){const y=Xo(Tn.justColumns(l),Cy(m,p)),E=an(y,N=>{const H=Nr(N.element);return hx(H,"span",p-m),H}),O=pt.fromTag("colgroup");return Mi(O,E),[O]}else return[]},Kg=(l,m,p)=>an(l.all,y=>{const E=Xo(y.cells,Cy(m,p)),O=an(E,H=>{const j=Nr(H.element);return hx(j,"colspan",p-m),j}),N=pt.fromTag("tr");return Mi(N,O),N}),Al=(l,m)=>{const p=Tn.fromTable(l);return jg(p,m).map(E=>{const O=E[E.length-1],N=E[0].column,H=O.column+O.colspan,j=Sy(p,N,H),te=Kg(p,N,H);return[...j,...te]})},pi=(l,m,p)=>{const y=Tn.fromTable(l);return Sr(y,m).bind(O=>{const N=Bs(y,p,!1),j=ws(N).rows.slice(O[0].row,O[O.length-1].row+O[O.length-1].rowspan),te=gs(j,je=>{const bt=Xo(je.cells,mt=>!mt.isLocked);return bt.length>0?[{...je,cells:bt}]:[]}),fe=Tp(te);return Jh(fe.length>0,fe)}).map(O=>Zg(O))},pd=(l,m,p,y,E,O)=>({minRow:l,minCol:m,maxRow:p,maxCol:y,allCells:E,selectedCells:O}),px=(l,m)=>{const p=l.grid.columns;let E=l.grid.rows,O=p,N=0,H=0;const j=[],te=[];return xn(l.access,fe=>{if(j.push(fe),m(fe)){te.push(fe);const je=fe.row,bt=je+fe.rowspan-1,mt=fe.column,We=mt+fe.colspan-1;je<E?E=je:bt>N&&(N=bt),mt<O?O=mt:We>H&&(H=We)}}),pd(E,O,N,H,j,te)},X0=(l,m,p)=>{const y=l[p].element,E=pt.fromTag("td");fo(E,pt.fromTag("br")),(m?fo:Ts)(y,E)},wy=(l,m,p,y)=>{const E=Xo(l,H=>H.section!=="colgroup"),O=m.grid.columns,N=m.grid.rows;for(let H=0;H<N;H++){let j=!1;for(let te=0;te<O;te++)H<p.minRow||H>p.maxRow||te<p.minCol||te>p.maxCol||(Tn.getAt(m,H,te).filter(y).isNone()?X0(E,j,H):j=!0)}},bx=(l,m,p,y)=>{xn(p.columns,N=>{(N.column<m.minCol||N.column>m.maxCol)&&pa(N.element)});const E=Xo(ud(l,"tr"),N=>N.dom.childElementCount===0);ze(E,pa),(m.minCol===m.maxCol||m.minRow===m.maxRow)&&ze(ud(l,"th,td"),N=>{go(N,"rowspan"),go(N,"colspan")}),go(l,Wa),go(l,"data-snooker-col-series"),Ug.getTableSize(l).adjustTableWidth(y)},xy=(l,m,p,y)=>{if(y.minCol===0&&m.grid.columns===y.maxCol+1)return 0;const E=pe(m,l,p),O=$e(E,(te,fe)=>te+fe,0),j=$e(E.slice(y.minCol,y.maxCol+1),(te,fe)=>te+fe,0)/O*p.pixelWidth()-p.pixelWidth();return p.getCellDelta(j)},J0=(l,m)=>{const p=bt=>fc(bt.element,m),y=Nr(l),E=H0(y),O=Ug.getTableSize(l),N=Tn.generate(E),H=px(N,p),j="th:not("+m+"),td:not("+m+")",te=oy(y,"th,td",bt=>fc(bt,j));ze(te,pa),wy(E,N,H,p);const fe=Tn.fromTable(l),je=xy(l,fe,O,H);return bx(y,H,N,je),y},Q0=$c("col"),eb=$c("colgroup"),Ol=l=>Ms(l)==="tr"||eb(l),Ap=l=>{const m=ld(l,"colspan",1),p=ld(l,"rowspan",1);return{element:l,colspan:m,rowspan:p}},Yg=(l,m=Ap)=>{const p=H=>Q0(H.element)?l.col(H):l.cell(H),y=H=>eb(H.element)?l.colgroup(H):l.row(H),E=H=>{if(Ol(H))return y({element:H});{const j=H,te=p(m(j));return O=X.some({item:j,replacement:te}),te}};let O=X.none();return{getOrInit:(H,j)=>O.fold(()=>E(H),te=>j(H,te.item)?te.replacement:E(H))}},vf=l=>m=>{const p=[],y=(N,H)=>B(p,j=>H(j.item,N)),E=N=>{const H=l==="td"?{scope:null}:{},j=m.replace(N,l,H);return p.push({item:N,sub:j}),j};return{replaceOrInit:(N,H)=>{if(Ol(N)||Q0(N))return N;{const j=N;return y(j,H).fold(()=>E(j),te=>H(N,te.item)?te.sub:E(j))}}}},vx=l=>ai(l,"scope").map(m=>m.substr(0,3)),Ma={modification:Yg,transform:vf,merging:l=>({unmerge:y=>{const E=vx(y);return E.each(O=>ir(y,"scope",O)),()=>{const O=l.cell({element:y,colspan:1,rowspan:1});return Sl(O,"width"),Sl(y,"width"),E.each(N=>ir(O,"scope",N)),O}},merge:y=>{const E=()=>{const O=Ss(an(y,vx));if(O.length===0)return X.none();{const N=O[0],H=["row","col"];return qe(O,te=>te!==N&&bo(H,te))?X.none():X.from(N)}};return Sl(y[0],"width"),E().fold(()=>go(y[0],"scope"),O=>ir(y[0],"scope",O+"group")),U(y[0])}})},U3=(l,m)=>{const p=l.slice(0,m[m.length-1].row+1),y=Tp(p);return gs(y,E=>{const O=E.cells.slice(0,m[m.length-1].column+1);return an(O,N=>N.element)})},Ey=(l,m)=>{const p=l.slice(m[0].row+m[0].rowspan-1,l.length),y=Tp(p);return gs(y,E=>{const O=E.cells.slice(m[0].column+m[0].colspan-1,E.cells.length);return an(O,N=>N.element)})},Ty=(l,m,p)=>{const y=Tn.fromTable(l);return Sr(y,m).map(O=>{const N=Bs(y,p,!1),{rows:H}=ws(N),j=U3(H,O),te=Ey(H,O);return{upOrLeftCells:j,downOrRightCells:te}})},Cx={only:(l,m)=>{const p=d3(l)?rp(l):l;return{parent:U(p),view:U(l),dragContainer:U(p),origin:U(is(0,0)),isResizable:m}},detached:(l,m,p)=>{const y=()=>Nn(m);return{parent:U(m),view:U(l),dragContainer:U(m),origin:y,isResizable:p}},body:(l,m)=>({parent:U(l),view:U(l),dragContainer:U(l),origin:()=>Nn(l),isResizable:m})},Op=Ea.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),ky=(l,m,p)=>{const y=p.substring(0,p.length-l.length),E=parseFloat(y);return y===E.toString()?m(E):Op.invalid(p)},Un={...Op,from:l=>dg(l,"%")?ky("%",Op.percent,l):dg(l,"px")?ky("px",Op.pixels,l):Op.invalid(l)},nb=(l,m)=>an(l,p=>Un.from(p).fold(()=>p,E=>E/m*100+"%",E=>E+"%")),qn=(l,m,p)=>{const y=p/m;return an(l,E=>Un.from(E).fold(()=>E,N=>N*y+"px",N=>N/100*p+"px"))},wc=(l,m)=>{const p=l.fold(()=>U(""),y=>{const E=y/m;return U(E+"px")},()=>{const y=100/m;return U(y+"%")});return Fo(m,p)},bm=(l,m,p)=>l.fold(()=>m,y=>qn(m,p,y),y=>nb(m,p)),Dp=(l,m,p)=>{const y=Un.from(p),E=Po(l,O=>O==="0px")?wc(y,l.length):bm(y,l,m);return Z3(E)},ro=(l,m)=>l.length===0?m:er(l,(p,y)=>Un.from(y).fold(U(0),At,At)+p,0),wx=(l,m)=>{const p=Math.floor(l);return{value:p+m,remainder:l-p}},xx=(l,m)=>Un.from(l).fold(U(l),p=>p+m+"px",p=>p+m+"%"),Z3=l=>{if(l.length===0)return l;const m=er(l,(y,E)=>{const O=Un.from(E).fold(()=>({value:E,remainder:0}),N=>wx(N,"px"),N=>({value:N+"%",remainder:0}));return{output:[O.value].concat(y.output),remainder:y.remainder+O.remainder}},{output:[],remainder:0}),p=m.output;return p.slice(0,p.length-1).concat([xx(p[p.length-1],Math.round(m.remainder))])},Cf=Un.from,Rp=(l,m,p)=>{ze(m,y=>{const E=l.slice(y.column,y.colspan+y.column),O=ro(E,js());$r(y.element,"width",O+p)})},Ex=(l,m,p)=>{ze(m,(y,E)=>{const O=ro([l[E]],js());$r(y.element,"width",O+p)})},W3=(l,m,p)=>{ze(p,y=>{Sl(y.element,"height")}),ze(m,(y,E)=>{$r(y.element,"height",l[E])})},j3=l=>Cf(l).fold(U("px"),U("px"),U("%")),Tx=(l,m,p)=>{const y=Tn.fromTable(l),E=y.all,O=Tn.justCells(y),N=Tn.justColumns(y);m.each(H=>{const j=j3(H),te=on(l),fe=Ka(y,l),je=Dp(fe,te,H);Tn.hasColumns(y)?Ex(je,N,j):Rp(je,O,j),$r(l,"width",H)}),p.each(H=>{const j=Fc(l),te=ms(y,l),fe=Dp(te,j,H);W3(fe,E,O),$r(l,"height",H)})},kx=F3,G3=pu,q3=dx;var Sf=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],xc=()=>{const l=te=>pt.fromDom(te.dom.cloneNode(!1)),m=te=>Ri(te).dom,p=te=>Jr(te)?Ms(te)==="body"?!0:bo(Sf,Ms(te)):!1,y=te=>Jr(te)?bo(["br","img","hr","input"],Ms(te)):!1,E=te=>Jr(te)&&Ni(te,"contenteditable")==="false",O=(te,fe)=>te.dom.compareDocumentPosition(fe.dom),N=(te,fe)=>{const je=ci(te);sd(fe,je)},H=te=>{const fe=Ms(te);return bo(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],fe)},j=te=>Jr(te)?ai(te,"lang"):X.none();return{up:U({selector:ui,closest:lr,predicate:ko,all:om}),down:U({selector:du,predicate:am}),styles:U({get:cf,getRaw:Pi,set:$r,remove:Sl}),attrs:U({get:Ni,set:ir,remove:go,copyTo:N}),insert:U({before:vl,after:yl,afterAll:iu,append:fo,appendAll:Mi,prepend:Ts,wrap:f3}),remove:U({unwrap:kr,remove:pa}),create:U({nu:pt.fromTag,clone:l,text:pt.fromText}),query:U({comparePosition:O,prevSibling:L2,nextSibling:_g}),property:U({children:ha,name:Ms,parent:Y,document:m,isText:kg,isComment:u3,isElement:Jr,isSpecial:H,getLanguage:j,getText:ip,setText:lp,isBoundary:p,isEmptyTag:y,isNonEditable:E}),eq:Io,is:xg}};const mr=(l,m)=>({item:l,mode:m}),vm=(l,m,p,y=Zi)=>l.property().parent(m).map(E=>mr(E,y)),Zi=(l,m,p,y=bu)=>p.sibling(l,m).map(E=>mr(E,y)),bu=(l,m,p,y=bu)=>{const E=l.property().children(m);return p.first(E).map(N=>mr(N,y))},Jg=[{current:vm,next:Zi,fallback:X.none()},{current:Zi,next:bu,fallback:X.some(vm)},{current:bu,next:bu,fallback:X.some(Zi)}],Qg=(l,m,p,y,E=Jg)=>B(E,N=>N.current===p).bind(N=>N.current(l,m,y,N.next).orThunk(()=>N.fallback.bind(H=>Qg(l,m,H,y)))),sb={left:()=>({sibling:(p,y)=>p.query().prevSibling(y),first:p=>p.length>0?X.some(p[p.length-1]):X.none()}),right:()=>({sibling:(p,y)=>p.query().nextSibling(y),first:p=>p.length>0?X.some(p[0]):X.none()})},_y=(l,m,p,y,E,O)=>Qg(l,m,y,E).bind(H=>O(H.item)?X.none():p(H.item)?X.some(H.item):_y(l,H.item,p,H.mode,E,O)),Ay=(l,m,p,y)=>_y(l,m,p,Zi,sb.left(),y),Mp=(l,m,p,y)=>_y(l,m,p,Zi,sb.right(),y),bd=(l,m)=>({element:l,offset:m}),rb=(l,m,p)=>l.property().isText(m)&&l.property().getText(m).trim().length===0||l.property().isComment(m)?p(m).bind(y=>rb(l,y,p).orThunk(()=>X.some(y))):X.none(),Np=(l,m)=>l.property().isText(m)?l.property().getText(m).length:l.property().children(m).length,ab=(l,m)=>{const p=rb(l,m,l.query().prevSibling).getOr(m);if(l.property().isText(p))return bd(p,Np(l,p));const y=l.property().children(p);return y.length>0?ab(l,y[y.length-1]):bd(p,Np(l,p))},_x=ab,vu=xc(),cb=l=>_x(vu,l),Ax=l=>m=>l.property().children(m).length===0,Y3=(l,m,p)=>Ox(l,m,Ax(l),p),X3=(l,m,p)=>Oy(l,m,Ax(l),p),Ox=Ay,Oy=Mp,yu=xc(),Dx=(l,m)=>Y3(yu,l,m),Wi=(l,m)=>X3(yu,l,m),Ca=(l,m,p)=>Ox(yu,l,m,p),bi=(l,m,p)=>Oy(yu,l,m,p),Na=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],ib=(l,m)=>{const p=l.property().name(m);return bo(["ol","ul"],p)},wf=(l,m)=>{const p=l.property().name(m);return bo(Na,p)},lb=(l,m)=>bo(["br","img","hr","input"],l.property().name(m)),Dy=(l,m,p,y)=>{const E=p[0],O=p.slice(1);return y(l,m,E,O)},J3=(l,m,p)=>p.length>0?Dy(l,m,p,ym):X.none(),ym=(l,m,p,y)=>{const E=m(l,p);return er(y,(O,N)=>{const H=m(l,N);return Cm(l,O,H)},E)},Cm=(l,m,p)=>m.bind(y=>p.filter(Yt(l.eq,y))),Ry=(l,m)=>Yt(l.eq,m),fr=(l,m,p,y=Le)=>{const E=[m].concat(l.up().all(m)),O=[p].concat(l.up().all(p)),N=fe=>Qc(fe,y).fold(()=>fe,bt=>fe.slice(0,bt+1)),H=N(E),j=N(O),te=B(H,fe=>qe(j,Ry(l,fe)));return{firstpath:H,secondpath:j,shared:te}},Bp=J3,Xa=fr,ub=xc(),Mo=(l,m)=>Bp(ub,(p,y)=>l(y),m),Dl=(l,m,p)=>Xa(ub,l,m,p),vd=xc(),Rl=l=>wf(vd,l),Zc=l=>ib(vd,l),db=l=>lb(vd,l),Rx=l=>{const m=$c("br"),p=j=>Po(j,te=>m(te)||kg(te)&&ip(te).trim().length===0),y=j=>Ms(j)==="li"||ko(j,Zc).isSome(),E=j=>_g(j).map(te=>Rl(te)?!0:db(te)?Ms(te)!=="img":!1).getOr(!1),O=j=>Ws(j).bind(te=>{const fe=E(te);return Y(te).map(je=>fe===!0||y(je)||m(te)||Rl(je)&&!Io(j,je)?[]:[pt.fromTag("br")])}).getOr([]),H=(()=>{const j=gs(l,te=>{const fe=ha(te);return p(fe)?[]:fe.concat(O(te))});return j.length===0?[pt.fromTag("br")]:j})();lu(l[0]),Mi(l[0],H)},yd=l=>{go(l,"width"),go(l,"height")},xf=l=>{const m=Cc(l);Tx(l,X.some(m),X.none()),yd(l)},My=l=>{const m=ps(l);Tx(l,X.some(m),X.none()),yd(l)},Ec=l=>{const m=zi(l);Tx(l,X.none(),X.some(m)),yd(l)},Sm=l=>{Sl(l,"width");const m=I0(l),p=m.length>0?m:dm(l);ze(p,y=>{Sl(y,"width"),yd(y)}),yd(l)},zr={scope:["row","col"]},ji=l=>()=>{const m=pt.fromTag("td",l.dom);return fo(m,pt.fromTag("br",l.dom)),m},mb=l=>()=>pt.fromTag("col",l.dom),Ef=l=>()=>pt.fromTag("colgroup",l.dom),wm=l=>()=>pt.fromTag("tr",l.dom),Pp=(l,m,p)=>{const y=rf(l,m);return xn(p,(E,O)=>{E===null?go(y,O):ir(y,O,E)}),y},Ny=l=>l,fb=(l,m,p)=>fp(l).map(E=>{const O=p.join(","),N=wo(E,O,H=>Io(H,l));return er(N,(H,j)=>{const te=Bi(j);return fo(H,te),te},m)}).getOr(m),Tf=(l,m)=>{xn(zr,(p,y)=>ai(l,y).filter(E=>bo(p,E)).each(E=>ir(m,y,E)))},xm=(l,m,p)=>{const y=(N,H)=>{G2(N.element,H),Sl(H,"height"),N.colspan!==1&&Sl(H,"width")},E=N=>{const H=pt.fromTag(Ms(N.element),m.dom),j=p.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),te=j.length>0?fb(N.element,H,j):H;return fo(te,pt.fromTag("br")),y(N,H),Tf(N.element,H),l(N.element,H),H};return{col:N=>{const H=pt.fromTag(Ms(N.element),m.dom);return y(N,H),l(N.element,H),H},colgroup:Ef(m),row:wm(m),cell:E,replace:Pp,colGap:mb(m),gap:ji(m)}},By=l=>({col:mb(l),colgroup:Ef(l),row:wm(l),cell:ji(l),replace:Ny,colGap:mb(l),gap:ji(l)}),$p=l=>Tn.fromTable(l).grid,Py=(l,m,p,y)=>{const E=ws(l).rows;if(E.length===0)return l;for(let O=m.startRow;O<=m.finishRow;O++)for(let N=m.startCol;N<=m.finishCol;N++){const H=E[O],j=pn(H,N).isLocked;ru(H,N,Ta(y(),!1,j))}return l},Mx=(l,m,p,y)=>{const E=ws(l).rows;let O=!0;for(let N=0;N<E.length;N++)for(let H=0;H<ka(E[0]);H++){const j=E[N],te=pn(j,H),fe=te.element,je=p(fe,m);je&&!O?ru(j,H,Ta(y(),!0,te.isLocked)):je&&(O=!1)}return l},gr=(l,m)=>$e(l,(p,y)=>qe(p,E=>m(E.element,y.element))?p:p.concat([y]),[]),Em=(l,m,p,y)=>(m>0&&m<l[0].cells.length&&ze(l,E=>{const O=E.cells[m-1];let N=0;const H=y();for(;E.cells.length>m+N&&p(O.element,E.cells[m+N].element);)ru(E,m+N,Ta(H,!0,E.cells[m+N].isLocked)),N++}),l),Tm=(l,m,p,y)=>{const E=ws(l).rows;if(m>0&&m<E.length){const O=E[m-1].cells,N=gr(O,p);ze(N,H=>{let j=X.none();for(let te=m;te<E.length;te++)for(let fe=0;fe<ka(E[0]);fe++){const je=E[te],bt=pn(je,fe);p(bt.element,H.element)&&(j.isNone()&&(j=X.some(y())),j.each(We=>{ru(je,fe,Ta(We,!0,bt.isLocked))}))}})}return l},Nx=(l,m,p)=>{if(l.row>=m.length||l.column>ka(m[0]))return dl.error("invalid start address out of table bounds, row: "+l.row+", column: "+l.column);const y=m.slice(l.row),E=y[0].cells.slice(l.column),O=ka(p[0]),N=p.length;return dl.value({rowDelta:y.length-N,colDelta:E.length-O})},gb=(l,m)=>{const p=ka(l[0]),y=ka(m[0]);return{rowDelta:0,colDelta:p-y}},$y=(l,m)=>{const p=l.length,y=m.length;return{rowDelta:p-y,colDelta:0}},Ip=(l,m,p,y)=>{const E=m.section==="colgroup"?p.col:p.cell;return Fo(l,O=>Ta(E(),!0,y(O)))},hb=(l,m,p,y)=>{const E=l[l.length-1];return l.concat(Fo(m,()=>{const O=E.section==="colgroup"?p.colgroup:p.row,N=op(E,O,At),H=Ip(N.cells.length,N,p,j=>Cs(y,j.toString()));return u0(N,H)}))},Bx=(l,m,p,y)=>an(l,E=>{const O=Ip(m,E,p,Le);return oi(E,y,O)}),Q3=(l,m,p)=>an(l,y=>$e(p,(E,O)=>{const N=Ip(1,y,m,de)[0];return l0(E,O,N)},y)),Lp=(l,m,p)=>{const y=m.colDelta<0?Bx:At,E=m.rowDelta<0?hb:At,O=_a(l),N=ka(l[0]),H=qe(O,fe=>fe===N-1),j=y(l,Math.abs(m.colDelta),p,H?N-1:N),te=_a(j);return E(j,Math.abs(m.rowDelta),p,Ce(te,de))},cr=(l,m,p,y)=>{const E=pn(l[m],p),O=Yt(y,E.element),N=l[m];return l.length>1&&ka(N)>1&&(p>0&&O(ga(N,p-1))||p<N.cells.length-1&&O(ga(N,p+1))||m>0&&O(ga(l[m-1],p))||m<l.length-1&&O(ga(l[m+1],p)))},Gs=(l,m,p,y,E,O)=>{const N=l.row,H=l.column,j=p.length,te=ka(p[0]),fe=N+j,je=H+te+O.length,bt=Ce(O,de);for(let mt=N;mt<fe;mt++){let We=0;for(let ot=H;ot<je;ot++){if(bt[ot]){We++;continue}cr(m,mt,ot,E)&&Mx(m,ga(m[mt],ot),E,y.cell);const Ve=ot-H-We,Gt=pn(p[mt-N],Ve),vn=Gt.element,kt=y.replace(vn);ru(m[mt],ot,Ta(kt,!0,Gt.isLocked))}}return m},Vr=(l,m,p)=>{const y=ka(m[0]),E=ws(m).cols.length+l.row,O=Fo(y-l.column,H=>H+l.column),N=B(O,H=>Po(p,j=>j!==H)).getOr(y-1);return{row:E,column:N}},_r=(l,m,p)=>Xo(p,y=>y>=l.column&&y<=ka(m[0])+l.column),ss=(l,m,p,y,E)=>{const O=_a(m),N=Vr(l,m,O),H=ws(p).rows,j=_r(N,H,O);return Nx(N,m,H).map(fe=>{const je={...fe,colDelta:fe.colDelta-j.length},bt=Lp(m,je,y),mt=_a(bt),We=_r(N,H,mt);return Gs(N,bt,H,y,E,We)})},qs=(l,m,p,y,E)=>{Em(m,l,E,y.cell);const O=$y(p,m),N=Lp(p,O,y),H=$y(m,N),j=Lp(m,H,y);return an(j,(te,fe)=>oi(te,l,N[fe].cells))},eh=(l,m,p,y,E)=>{Tm(m,l,E,y.cell);const O=_a(m),N=gb(m,p),H={...N,colDelta:N.colDelta-O.length},j=Lp(m,H,y),{cols:te,rows:fe}=ws(j),je=_a(j),bt=gb(p,m),mt={...bt,colDelta:bt.colDelta+je.length},We=Q3(p,y,je),ot=Lp(We,mt,y);return[...te,...fe.slice(0,l),...ot,...fe.slice(l,fe.length)]},Iy=(l,m,p,y)=>op(l,E=>y(E,p),m),Ly=(l,m,p,y,E)=>{const{rows:O,cols:N}=ws(l),H=O.slice(0,m),j=O.slice(m),te=Iy(O[p],(fe,je)=>m>0&&m<O.length&&y(ga(O[m-1],je),ga(O[m],je))?pn(O[m],je):Ta(E(fe.element,y),!0,fe.isLocked),y,E);return[...N,...H,te,...j]},Px=(l,m,p,y,E,O,N)=>{if(p==="colgroup"||!y){const H=pn(l,E);return Ta(N(H.element,O),!0,!1)}else return pn(l,m)},pb=(l,m,p,y,E)=>an(l,O=>{const N=m>0&&m<ka(O)&&y(ga(O,m-1),ga(O,m)),H=Px(O,m,O.section,N,p,y,E);return l0(O,m,H)}),Fy=(l,m)=>gs(l,p=>{const y=p.cells,E=er(m,(O,N)=>N>=0&&N<O.length?O.slice(0,N).concat(O.slice(N+1)):O,y);return E.length>0?[su(p.element,E,p.section,p.isNew)]:[]}),Hy=(l,m,p)=>{const{rows:y,cols:E}=ws(l);return[...E,...y.slice(0,m),...y.slice(p+1)]},bb=(l,m,p,y)=>ga(l[m],p)!==void 0&&m>0&&y(ga(l[m-1],p),ga(l[m],p)),zy=(l,m,p)=>m>0&&p(ga(l,m-1),ga(l,m)),th=(l,m,p,y)=>bb(l,m,p,y)||zy(l[m],p,y),$x=(l,m)=>Po(m,At)&&L0(l.cells)?de:(y,E,O)=>!(Ms(y.element)==="th"&&m[O]),Fp=(l,m)=>Po(m,At)&&L0(l)?de:(y,E,O)=>!(Ms(y.element)==="th"&&m[E]),Ml=(l,m,p,y)=>{const E=N=>N==="row"?R3(m):lm(m),O=N=>E(N)?`${N}group`:N;return l?_s(m)?O(p):null:y&&_s(m)?O(p==="row"?"col":"row"):null},vb=(l,m)=>(p,y,E)=>X.some(Ml(l,p.element,"col",m[E])),Hp=(l,m)=>(p,y)=>X.some(Ml(l,p.element,"row",m[y])),nh=(l,m,p)=>Ta(p(l.element,m),!0,l.isLocked),kf=(l,m,p,y,E,O,N)=>{const H=j=>qe(m,te=>p(j.element,te.element));return an(l,(j,te)=>Us(j,(fe,je)=>{if(H(fe)){const bt=N(fe,te,je)?E(fe,p,y):fe;return O(bt,te,je).each(mt=>{Lc(bt.element,{scope:X.from(mt)})}),bt}else return fe}))},zp=(l,m,p)=>gs(l,(y,E)=>th(l,E,m,p)?[]:[pn(y,m)]),yb=(l,m,p)=>{const y=l[m];return gs(y.cells,(E,O)=>th(l,m,O,p)?[]:[E])},Vp=(l,m,p,y,E)=>{const O=ws(l).rows,N=gs(m,fe=>zp(O,fe,y)),H=an(O,fe=>L0(fe.cells)),j=Fp(N,H),te=Hp(p,H);return kf(l,N,y,E,nh,te,j)},Cb=(l,m,p,y,E,O,N)=>{const{cols:H,rows:j}=ws(l),te=j[m[0]],fe=gs(m,Ve=>yb(j,Ve,E)),je=an(te.cells,(Ve,Gt)=>L0(zp(j,Gt,E))),bt=[...j];ze(m,Ve=>{bt[Ve]=N.transformRow(j[Ve],p)});const mt=[...H,...bt],We=$x(te,je),ot=vb(y,je);return kf(mt,fe,E,O,N.transformCell,ot,We)},_f=(l,m,p,y)=>{const E=ws(l).rows,O=an(m,N=>pn(E[N.row],N.column));return kf(l,O,p,y,nh,X.none,de)},Ba=l=>$e(l,(p,y)=>qe(p,O=>O.column===y.column)?p:p.concat([y]),[]).sort((p,y)=>p.column-y.column),oa=l=>dp(l,!0),oh=l=>{dm(l).length===0&&pa(l)},ke=(l,m)=>({grid:l,cursor:m}),Up=l=>De(l,m=>De(m.cells,p=>{const y=p.element;return Jh(oa(y),y)})),e_=(l,m,p)=>{var E,O;const y=ws(l).rows;return X.from((O=(E=y[m])==null?void 0:E.cells[p])==null?void 0:O.element).filter(oa).orThunk(()=>Up(y))},Pa=(l,m,p)=>{const y=e_(l,m,p);return ke(l,y)},sh=l=>$e(l,(p,y)=>qe(p,O=>O.row===y.row)?p:p.concat([y]),[]).sort((p,y)=>p.row-y.row),Nl=(l,m,p,y)=>{const E=m[0].row,O=sh(m),N=er(O,(H,j)=>({grid:Ly(H.grid,E,j.row+H.delta,p,y.getOrInit),delta:H.delta+1}),{grid:l,delta:0}).grid;return Pa(N,E,m[0].column)},Vy=(l,m,p,y)=>{const E=sh(m),O=E[E.length-1],N=O.row+O.rowspan,H=er(E,(j,te)=>Ly(j,N,te.row,p,y.getOrInit),l);return Pa(H,N,m[0].column)},Uy=(l,m,p,y)=>{const E=m.details,O=Ba(E),N=O[0].column,H=er(O,(j,te)=>({grid:pb(j.grid,N,te.column+j.delta,p,y.getOrInit),delta:j.delta+1}),{grid:l,delta:0}).grid;return Pa(H,E[0].row,N)},Af=(l,m,p,y)=>{const E=m.details,O=E[E.length-1],N=O.column+O.colspan,H=Ba(E),j=er(H,(te,fe)=>pb(te,N,fe.column,p,y.getOrInit),l);return Pa(j,E[0].row,N)},Zp=(l,m,p,y)=>{const E=Ba(m),O=an(E,H=>H.column),N=Vp(l,O,!0,p,y.replaceOrInit);return Pa(N,m[0].row,m[0].column)},Cd=(l,m,p,y)=>{const E=_f(l,m,p,y.replaceOrInit);return Pa(E,m[0].row,m[0].column)},Sb=(l,m,p,y)=>{const E=Ba(m),O=an(E,H=>H.column),N=Vp(l,O,!1,p,y.replaceOrInit);return Pa(N,m[0].row,m[0].column)},t_=(l,m,p,y)=>{const E=_f(l,m,p,y.replaceOrInit);return Pa(E,m[0].row,m[0].column)},sa=(l,m)=>(p,y,E,O,N)=>{const H=sh(y),j=an(H,fe=>fe.row),te=Cb(p,j,l,m,E,O.replaceOrInit,N);return Pa(te,y[0].row,y[0].column)},Bl=sa("thead",!0),Tc=sa("tbody",!1),n_=sa("tfoot",!1),rh=(l,m,p,y)=>{const E=Ba(m.details),O=Fy(l,an(E,H=>H.column)),N=O.length>0?O[0].cells.length-1:0;return Pa(O,E[0].row,Math.min(E[0].column,N))},Ix=(l,m,p,y)=>{const E=sh(m),O=Hy(l,E[0].row,E[E.length-1].row),N=Math.max(ws(O).rows.length-1,0);return Pa(O,Math.min(m[0].row,N),m[0].column)},wb=(l,m,p,y)=>{const E=m.cells;Rx(E);const O=Py(l,m.bounds,p,y.merge(E));return ke(O,X.from(E[0]))},o_=(l,m,p,y)=>{const O=er(m,(N,H)=>Mx(N,H,p,y.unmerge(H)),l);return ke(O,X.from(m[0]))},Lx=(l,m,p,y)=>{const O=((j,te)=>{const fe=Tn.fromTable(j);return Bs(fe,te,!0)})(m.clipboard,m.generators),N=gg(m.row,m.column);return ss(N,l,O,m.generators,p).fold(()=>ke(l,X.some(m.element)),j=>Pa(j,m.row,m.column))},On=(l,m,p)=>{const y=it(l,p.section),E=Tn.generate(y);return Bs(E,m,!0)},Ht=(l,m,p,y)=>{const E=ws(l).rows,O=m.cells[0].column,N=E[m.cells[0].row],H=On(m.clipboard,m.generators,N),j=qs(O,l,H,m.generators,p);return Pa(j,m.cells[0].row,m.cells[0].column)},ah=(l,m,p,y)=>{const E=ws(l).rows,O=m.cells[m.cells.length-1].column+m.cells[m.cells.length-1].colspan,N=E[m.cells[0].row],H=On(m.clipboard,m.generators,N),j=qs(O,l,H,m.generators,p);return Pa(j,m.cells[0].row,O)},xb=(l,m,p,y)=>{const E=ws(l).rows,O=m.cells[0].row,N=E[O],H=On(m.clipboard,m.generators,N),j=eh(O,l,H,m.generators,p);return Pa(j,m.cells[0].row,m.cells[0].column)},Eb=(l,m,p,y)=>{const E=ws(l).rows,O=m.cells[m.cells.length-1].row+m.cells[m.cells.length-1].rowspan,N=E[m.cells[0].row],H=On(m.clipboard,m.generators,N),j=eh(O,l,H,m.generators,p);return Pa(j,O,m.cells[0].column)},s_=(l,m)=>{const p=Tn.fromTable(l);return Sr(p,m).bind(E=>{const O=E[E.length-1],N=E[0].column,H=O.column+O.colspan,j=Co(an(p.all,te=>Xo(te.cells,fe=>fe.column>=N&&fe.column<H)));return ay(j)}).getOr("")},Zy=(l,m)=>{const p=Tn.fromTable(l);return Sr(p,m).bind(ay).getOr("")},ns=(l,m)=>{const p=Tn.fromTable(l);return Sr(p,m).bind(E=>{const O=E[E.length-1],N=E[0].row,H=O.row+O.rowspan,j=p.all.slice(N,H);return sx(j)}).getOr("")},Tb=(l,m,p,y)=>Y0(l,m,p,y.sizing),kb=(l,m,p,y)=>K0(l,m,p,y.sizing,y.resize),Wy=(l,m)=>qe(m,p=>p.column===0&&p.isLocked),Me=(l,m)=>qe(m,p=>p.column+p.colspan>=l.grid.columns&&p.isLocked),ch=(l,m)=>{const p=Lg(l),y=Ba(m);return $e(y,(E,O)=>{const H=p[O.column].map(hs).getOr(0);return E+H},0)},Of=l=>(m,p)=>Sr(m,p).filter(y=>!(l?Wy:Me)(m,y)).map(y=>({details:y,pixelDelta:ch(m,y)})),Cu=(l,m)=>jg(l,m).map(p=>({details:p,pixelDelta:-ch(l,p)})),Gi=l=>(m,p)=>Uc(m,p).filter(y=>!(l?Wy:Me)(m,y.cells)),Su=Ma.transform("th"),ih=Ma.transform("td"),Df=(l,m,p,y)=>ar(Nl,Sr,et,et,Ma.modification,l,m,p,y),r_=(l,m,p,y)=>ar(Vy,Sr,et,et,Ma.modification,l,m,p,y),lh=(l,m,p,y)=>ar(Uy,Of(!0),kb,et,Ma.modification,l,m,p,y),Wo=(l,m,p,y)=>ar(Af,Of(!1),kb,et,Ma.modification,l,m,p,y),qi=(l,m,p,y)=>ar(rh,Cu,kb,oh,Ma.modification,l,m,p,y),jy=(l,m,p,y)=>ar(Ix,Sr,et,oh,Ma.modification,l,m,p,y),km=(l,m,p,y)=>ar(Zp,jg,et,et,Su,l,m,p,y),Pl=(l,m,p,y)=>ar(Sb,jg,et,et,ih,l,m,p,y),ra=(l,m,p,y)=>ar(Bl,Sr,et,et,Su,l,m,p,y),Fx=(l,m,p,y)=>ar(Tc,Sr,et,et,ih,l,m,p,y),Gy=(l,m,p,y)=>ar(n_,Sr,et,et,ih,l,m,p,y),Hx=(l,m,p,y)=>ar(Cd,jg,et,et,Su,l,m,p,y),a_=(l,m,p,y)=>ar(t_,jg,et,et,ih,l,m,p,y),c_=(l,m,p,y)=>ar(wb,pf,Tb,et,Ma.merging,l,m,p,y),qy=(l,m,p,y)=>ar(o_,V3,Tb,et,Ma.merging,l,m,p,y),zx=(l,m,p,y)=>ar(Lx,W0,Tb,et,Ma.modification,l,m,p,y),Xe=(l,m,p,y)=>ar(Ht,Gi(!0),et,et,Ma.modification,l,m,p,y),Ky=(l,m,p,y)=>ar(ah,Gi(!1),et,et,Ma.modification,l,m,p,y),Ar=(l,m,p,y)=>ar(xb,Uc,et,et,Ma.modification,l,m,p,y),Yy=(l,m,p,y)=>ar(Eb,Uc,et,et,Ma.modification,l,m,p,y),Xy=s_,Jy=Zy,i_=ns,cn=(l,m)=>{const p=m.column,y=m.column+m.colspan-1,E=m.row,O=m.row+m.rowspan-1;return p<=l.finishCol&&y>=l.startCol&&E<=l.finishRow&&O>=l.startRow},Vx=(l,m)=>m.column>=l.startCol&&m.column+m.colspan-1<=l.finishCol&&m.row>=l.startRow&&m.row+m.rowspan-1<=l.finishRow,Ux=(l,m)=>{let p=!0;const y=Yt(Vx,m);for(let E=m.startRow;E<=m.finishRow;E++)for(let O=m.startCol;O<=m.finishCol;O++)p=p&&Tn.getAt(l,E,O).exists(y);return p?X.some(m):X.none()},l_=(l,m)=>dc(Math.min(l.row,m.row),Math.min(l.column,m.column),Math.max(l.row+l.rowspan-1,m.row+m.rowspan-1),Math.max(l.column+l.colspan-1,m.column+m.colspan-1)),u_=(l,m,p)=>{const y=Tn.findItem(l,m,Io),E=Tn.findItem(l,p,Io);return y.bind(O=>E.map(N=>l_(O,N)))},Zx=(l,m,p)=>u_(l,m,p).bind(y=>Ux(l,y)),PH=(l,m,p,y)=>Tn.findItem(l,m,Io).bind(E=>{const O=p>0?E.row+E.rowspan-1:E.row,N=y>0?E.column+E.colspan-1:E.column;return Tn.getAt(l,O+p,N+y).map(j=>j.element)}),c6=(l,m,p)=>u_(l,m,p).map(y=>{const E=Tn.filterItems(l,Yt(cn,y));return an(E,O=>O.element)}),Wx=(l,m)=>{const p=(y,E)=>wg(E,y);return Tn.findItem(l,m,p).map(y=>y.element)},d_=(l,m,p)=>zc(l).bind(y=>{const E=vi(y);return PH(E,l,m,p)}),ln=(l,m,p)=>{const y=vi(l);return c6(y,m,p)},Qy=(l,m,p,y,E)=>{const O=vi(l),N=Io(l,p)?X.some(m):Wx(O,m),H=Io(l,E)?X.some(y):Wx(O,y);return N.bind(j=>H.bind(te=>c6(O,j,te)))},Sd=(l,m,p)=>{const y=vi(l);return Zx(y,m,p)},vi=Tn.fromTable,_b={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},$a=()=>pt.fromTag("th"),uh=()=>pt.fromTag("td"),Wp=()=>pt.fromTag("col"),Ab=(l,m,p,y)=>{const E=pt.fromTag("tr");for(let O=0;O<l;O++){const N=y<m||O<p?$a():uh();O<p&&ir(N,"scope","row"),y<m&&ir(N,"scope","col"),fo(N,pt.fromTag("br")),fo(E,N)}return E},dh=l=>{const m=pt.fromTag("colgroup");return Fo(l,()=>fo(m,Wp())),m},mh=(l,m,p,y)=>Fo(l,E=>Ab(m,p,y,E)),wu=(l,m,p,y,E,O=_b)=>{const N=pt.fromTag("table"),H=E!=="cells";Qo(N,O.styles),sd(N,O.attributes),O.colGroups&&fo(N,dh(m));const j=Math.min(l,p);if(H&&p>0){const mt=pt.fromTag("thead");fo(N,mt);const ot=mh(p,m,E==="sectionCells"?j:0,y);Mi(mt,ot)}const te=pt.fromTag("tbody");fo(N,te);const fe=H?l-j:l,bt=mh(fe,m,H?0:p,y);return Mi(te,bt),N},Ks=l=>{let m=[];return{bind:O=>{if(O===void 0)throw new Error("Event bind error: undefined handler");m.push(O)},unbind:O=>{m=Xo(m,N=>N!==O)},trigger:(...O)=>{const N={};ze(l,(H,j)=>{N[H]=O[j]}),ze(m,H=>{H(N)})}}},wd=l=>{const m=kn(l,y=>({bind:y.bind,unbind:y.unbind})),p=kn(l,y=>y.trigger);return{registry:m,trigger:p}},jx=Bt(["compare","extract","mutate","sink"]),eC=Bt(["element","start","stop","destroy"]),Gx=Bt(["forceDrop","drop","move","delayDrop"]),m_=()=>{let l=X.none();const m=()=>{l=X.none()},p=(O,N)=>{const H=l.map(j=>O.compare(j,N));return l=X.some(N),H},y=(O,N)=>{N.extract(O).each(j=>{p(N,j).each(fe=>{E.trigger.move(fe)})})},E=wd({move:Ks(["info"])});return{onEvent:y,reset:m,events:E.registry}},Zn=()=>{const l=wd({move:Ks(["info"])});return{onEvent:et,reset:et,events:l.registry}},Ki=()=>{const l=Zn(),m=m_();let p=l;return{on:()=>{p.reset(),p=m},off:()=>{p.reset(),p=l},isOn:()=>p===m,onEvent:(H,j)=>{p.onEvent(H,j)},events:m.events}},_m=(l,m,p)=>{let y=!1;const E=wd({start:Ks([]),stop:Ks([])}),O=Ki(),N=()=>{We.stop(),O.isOn()&&(O.off(),E.trigger.stop())},H=E2(N,200),j=Ve=>{We.start(Ve),O.on(),E.trigger.start()},te=Ve=>{H.cancel(),O.onEvent(Ve,m)};O.events.move.bind(Ve=>{m.mutate(l,Ve.info)});const fe=()=>{y=!0},je=()=>{y=!1},bt=()=>y,mt=Ve=>(...Gt)=>{y&&Ve.apply(null,Gt)},We=m.sink(Gx({forceDrop:N,drop:mt(N),move:mt(te),delayDrop:mt(H.throttle)}),p),ot=()=>{We.destroy()};return{element:We.element,go:j,on:fe,off:je,isActive:bt,destroy:ot,events:E.registry}},fh=Jo("ephox-dragster").resolve,jn=l=>{const m={layerClass:fh("blocker"),...l},p=pt.fromTag("div");return ir(p,"role","presentation"),ir(p,"data-mce-bogus","all"),Qo(p,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),El(p,fh("blocker")),El(p,m.layerClass),{element:U(p),destroy:()=>{pa(p)}}};var jp=jx({compare:(l,m)=>is(m.left-l.left,m.top-l.top),extract:l=>X.some(is(l.x,l.y)),sink:(l,m)=>{const p=jn(m),y=od(p.element(),"mousedown",l.forceDrop),E=od(p.element(),"mouseup",l.drop),O=od(p.element(),"mousemove",l.move),N=od(p.element(),"mouseout",l.delayDrop),H=()=>{p.destroy(),E.unbind(),O.unbind(),N.unbind(),y.unbind()},j=fe=>{fo(fe,p.element())},te=()=>{pa(p.element())};return eC({element:p.element,start:j,stop:te,destroy:H})},mutate:(l,m)=>{l.mutate(m.left,m.top)}});const h_=(l,m={})=>{const p=m.mode??jp;return _m(l,p,m)},Gp=Jo("ephox-snooker").resolve,b_=()=>{const l=wd({drag:Ks(["xDelta","yDelta"])});return{mutate:(p,y)=>{l.trigger.drag(p,y)},events:l.registry}},qp=()=>{const l=wd({drag:Ks(["xDelta","yDelta","target"])});let m=X.none();const p=b_();return p.events.drag.bind(O=>{m.each(N=>{l.trigger.drag(O.xDelta,O.yDelta,N)})}),{assign:O=>{m=X.some(O)},get:()=>m,mutate:p.mutate,events:l.registry}},qx=(l,m,p,y,E)=>{const O=pt.fromTag("div");return Qo(O,{position:"absolute",left:m-y/2+"px",top:p+"px",height:E+"px",width:y+"px"}),sd(O,{"data-mce-bogus":"all","data-column":l,role:"presentation"}),O},v_=(l,m,p,y,E)=>{const O=pt.fromTag("div");return Qo(O,{position:"absolute",left:m+"px",top:p-E/2+"px",height:E+"px",width:y+"px"}),sd(O,{"data-mce-bogus":"all","data-row":l,role:"presentation"}),O},Ob=Gp("resizer-bar"),tC=Gp("resizer-rows"),nC=Gp("resizer-cols"),Kx=7,y_=(l,m)=>gs(l.all,(p,y)=>m(p.element)?[y]:[]),Yx=(l,m)=>{const p=[];return Fo(l.grid.columns,y=>{Tn.getColumnAt(l,y).map(O=>O.element).forall(m)&&p.push(y)}),Xo(p,y=>{const E=Tn.filterItems(l,O=>O.column===y);return Po(E,O=>m(O.element))})},oC=l=>{const m=du(l.parent(),"."+Ob);ze(m,pa)},Xx=(l,m,p)=>{const y=l.origin();ze(m,E=>{E.each(O=>{const N=p(y,O);El(N,Ob),fo(l.parent(),N)})})},eo=(l,m,p,y)=>{Xx(l,m,(E,O)=>{const N=qx(O.col,O.x-E.left,p.top-E.top,Kx,y);return El(N,nC),N})},Jx=(l,m,p,y)=>{Xx(l,m,(E,O)=>{const N=v_(O.row,p.left-E.left,O.y-E.top,y,Kx);return El(N,tC),N})},sC=(l,m,p,y,E)=>{const O=Nn(p),N=m.isResizable,H=y.length>0?Sp.positions(y,p):[],j=H.length>0?y_(l,N):[],te=Xo(H,(mt,We)=>qe(j,ot=>We===ot));Jx(m,te,O,hs(p));const fe=E.length>0?As.positions(E,p):[],je=fe.length>0?Yx(l,N):[],bt=Xo(fe,(mt,We)=>qe(je,ot=>We===ot));eo(m,bt,O,Vw(p))},Db=(l,m)=>{if(oC(l),l.isResizable(m)){const p=Tn.fromTable(m),y=ly(p),E=Lg(p);sC(p,l,m,y,E)}},xd=(l,m)=>{const p=du(l.parent(),"."+Ob);ze(p,m)},rC=l=>{xd(l,m=>{$r(m,"display","none")})},C_=l=>{xd(l,m=>{$r(m,"display","block")})},Qx=l=>Tl(l,tC),gh=l=>Tl(l,nC),eE=Gp("resizer-bar-dragging"),Kp=l=>{const m=qp(),p=h_(m,{});let y=X.none();const E=(ot,Ve)=>X.from(Ni(ot,Ve));m.events.drag.bind(ot=>{E(ot.target,"data-row").each(Ve=>{const Gt=rr(ot.target,"top");$r(ot.target,"top",Gt+ot.yDelta+"px")}),E(ot.target,"data-column").each(Ve=>{const Gt=rr(ot.target,"left");$r(ot.target,"left",Gt+ot.xDelta+"px")})});const O=(ot,Ve)=>{const Gt=rr(ot,Ve),vn=ld(ot,"data-initial-"+Ve,0);return Gt-vn};p.events.stop.bind(()=>{m.get().each(ot=>{y.each(Ve=>{E(ot,"data-row").each(Gt=>{const vn=O(ot,"top");go(ot,"data-initial-top"),We.trigger.adjustHeight(Ve,vn,parseInt(Gt,10))}),E(ot,"data-column").each(Gt=>{const vn=O(ot,"left");go(ot,"data-initial-left"),We.trigger.adjustWidth(Ve,vn,parseInt(Gt,10))}),Db(l,Ve)})})});const N=(ot,Ve)=>{We.trigger.startAdjust(),m.assign(ot),ir(ot,"data-initial-"+Ve,rr(ot,Ve)),El(ot,eE),$r(ot,"opacity","0.2"),p.go(l.dragContainer())},H=od(l.parent(),"mousedown",ot=>{Qx(ot.target)&&N(ot.target,"top"),gh(ot.target)&&N(ot.target,"left")}),j=ot=>Io(ot,l.view()),te=ot=>lr(ot,"table",j).filter(dp),fe=ot=>Tl(ot,"ephox-snooker-resizer-bar")||Tl(ot,"ephox-dragster-blocker"),je=od(l.view(),"mouseover",ot=>{te(ot.target).fold(()=>{qt(ot.target)&&!fe(ot.target)&&oC(l)},Ve=>{p.isActive()&&(y=X.some(Ve),Db(l,Ve))})}),bt=()=>{H.unbind(),je.unbind(),p.destroy(),oC(l)},mt=ot=>{Db(l,ot)},We=wd({adjustHeight:Ks(["table","delta","row"]),adjustWidth:Ks(["table","delta","column"]),startAdjust:Ks([])});return{destroy:bt,refresh:mt,on:p.on,off:p.off,hideBars:Yt(rC,l),showBars:Yt(C_,l),events:We.registry}},aC={create:(l,m,p)=>{const y=Sp,E=As,O=Kp(l),N=wd({beforeResize:Ks(["table","type"]),afterResize:Ks(["table","type"]),startDrag:Ks([])});return O.events.adjustHeight.bind(H=>{const j=H.table;N.trigger.beforeResize(j,"row");const te=y.delta(H.delta,j);q0(j,te,H.row),N.trigger.afterResize(j,"row")}),O.events.startAdjust.bind(H=>{N.trigger.startDrag()}),O.events.adjustWidth.bind(H=>{const j=H.table;N.trigger.beforeResize(j,"col");const te=E.delta(H.delta,j),fe=p(j);qg(j,te,H.column,m,fe),N.trigger.afterResize(j,"col")}),{on:O.on,off:O.off,refreshBars:O.refresh,hideBars:O.hideBars,showBars:O.showBars,destroy:O.destroy,events:N.registry}}},Am=l=>m=>m.options.get(l),tE="100%",nE=l=>{const m=l.dom,p=m.getParent(l.selection.getStart(),m.isBlock)??l.getBody();return Ir(pt.fromDom(p))+"px"},oE=(l,m)=>Jp(l)||!cC(l)?m:xu(l)?{...m,width:nE(l)}:{...m,width:tE},sE=(l,m)=>Jp(l)||cC(l)?m:xu(l)?{...m,width:nE(l)}:{...m,width:tE},d6=l=>{const m=l.options.register;m("table_clone_elements",{processor:"string[]"}),m("table_use_colgroups",{processor:"boolean",default:!0}),m("table_header_type",{processor:p=>{const y=bo(["section","cells","sectionCells","auto"],p);return y?{value:p,valid:y}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),m("table_sizing_mode",{processor:"string",default:"auto"}),m("table_default_attributes",{processor:"object",default:{border:"1"}}),m("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),m("table_column_resizing",{processor:p=>{const y=bo(["preservetable","resizetable"],p);return y?{value:p,valid:y}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),m("table_resize_bars",{processor:"boolean",default:!0}),m("table_style_by_css",{processor:"boolean",default:!0}),m("table_merge_content_on_paste",{processor:"boolean",default:!0})},rE=l=>X.from(l.options.get("table_clone_elements")),Rb=l=>{const m=l.options.get("object_resizing");return bo(m.split(","),"table")},Mb=Am("table_header_type"),Xp=Am("table_column_resizing"),Nb=l=>Xp(l)==="preservetable",Bb=l=>Xp(l)==="resizetable",wt=Am("table_sizing_mode"),Om=l=>wt(l)==="relative",xu=l=>wt(l)==="fixed",Jp=l=>wt(l)==="responsive",aE=Am("table_resize_bars"),cC=Am("table_style_by_css"),iC=Am("table_merge_content_on_paste"),cE=l=>{const m=l.options,p=m.get("table_default_attributes");return m.isSet("table_default_attributes")?p:sE(l,p)},iE=l=>{const m=l.options,p=m.get("table_default_styles");return m.isSet("table_default_styles")?p:oE(l,p)},lE=Am("table_use_colgroups"),Pb=l=>pt.fromDom(l.getBody()),Ys=l=>m=>Io(m,Pb(l)),Yi=l=>{go(l,"data-mce-style");const m=p=>go(p,"data-mce-style");ze(dm(l),m),ze(I0(l),m),ze(ry(l),m)},$b=l=>pt.fromDom(l.selection.getStart()),uE=l=>l.getBoundingClientRect().width,dE=l=>l.getBoundingClientRect().height,mE=l=>(m,p)=>{const y=m.dom.getStyle(p,l)||m.dom.getAttrib(p,l);return X.from(y).filter(Xr)},Ib=mE("width"),lC=mE("height"),fE=l=>/^(\d+(\.\d+)?)%$/.test(l),gE=l=>/^(\d+(\.\d+)?)px$/.test(l),Qp=l=>_0(l,$c("table")).exists(dp),uC=l=>ui(l,"table"),Lb=(l,m,p)=>{const y=E=>O=>p!==void 0&&p(O)||Io(O,E);return Io(l,m)?X.some({boxes:X.some([l]),start:l,finish:m}):uC(l).bind(E=>uC(m).bind(O=>{if(Io(E,O))return X.some({boxes:ln(E,l,m),start:l,finish:m});if(wg(E,O)){const N=wo(m,"td,th",y(E)),H=N.length>0?N[N.length-1]:m;return X.some({boxes:Qy(E,l,E,m,O),start:l,finish:H})}else if(wg(O,E)){const N=wo(l,"td,th",y(O)),H=N.length>0?N[N.length-1]:l;return X.some({boxes:Qy(O,l,E,m,O),start:l,finish:H})}else return Dl(l,m).shared.bind(N=>lr(N,"table",p).bind(H=>{const j=wo(m,"td,th",y(H)),te=j.length>0?j[j.length-1]:m,fe=wo(l,"td,th",y(H)),je=fe.length>0?fe[fe.length-1]:l;return X.some({boxes:Qy(H,l,E,m,O),start:je,finish:te})}))}))},dC=(l,m)=>{const p=du(l,m);return p.length>0?X.some(p):X.none()},S_=(l,m)=>B(l,p=>fc(p,m)),hE=(l,m,p)=>rm(l,m).bind(y=>rm(l,p).bind(E=>Mo(uC,[y,E]).map(O=>({first:y,last:E,table:O})))),pE=(l,m)=>ui(l,"table").bind(p=>rm(p,m).bind(y=>Lb(y,l).bind(E=>E.boxes.map(O=>({boxes:O,start:E.start,finish:E.finish}))))),Fb=(l,m,p,y,E)=>S_(l,E).bind(O=>d_(O,m,p).bind(N=>pE(N,y))),Rf=(l,m)=>dC(l,m),bE=(l,m,p)=>hE(l,m,p).bind(y=>{const E=j=>Io(l,j),O="thead,tfoot,tbody,table",N=ui(y.first,O,E),H=ui(y.last,O,E);return N.bind(j=>H.bind(te=>Io(j,te)?Sd(y.table,y.first,y.last):X.none()))}),vE=At,Hb=l=>{const m=(y,E)=>ai(y,E).exists(O=>parseInt(O,10)>1),p=y=>m(y,"rowspan")||m(y,"colspan");return l.length>0&&Po(l,p)?X.some(l):X.none()},w_=(l,m,p)=>m.length<=1?X.none():bE(l,p.firstSelectedSelector,p.lastSelectedSelector).map(y=>({bounds:y,cells:m})),Mf={create:(l,m)=>({selection:l,kill:m})},mC=(l,m,p,y)=>{switch(l.tag){case"none":return m();case"single":return y(l.element);case"multiple":return p(l.elements)}},E_=()=>({tag:"none"}),T_=l=>({tag:"multiple",elements:l}),yE=l=>({tag:"single",element:l}),k_=(l,m,p)=>({get:()=>Rf(l(),p).fold(()=>m().fold(E_,yE),T_)}),zb={create:(l,m,p,y)=>({start:yr.on(l,m),finish:yr.on(p,y)})},gC=(l,m)=>{const p=at(l,m);return cd.create(pt.fromDom(p.startContainer),p.startOffset,pt.fromDom(p.endContainer),p.endOffset)},Eu=zb.create,CE=(l,m,p,y,E,O,N)=>Io(p,E)&&y===O?X.none():lr(p,"td,th",m).bind(H=>lr(E,"td,th",m).bind(j=>Vb(l,m,H,j,N))),Vb=(l,m,p,y,E)=>Io(p,y)?X.none():Lb(p,y,m).bind(O=>{const N=O.boxes.getOr([]);return N.length>1?(E(l,N,O.start,O.finish),X.some(Mf.create(X.some(Eu(p,0,p,mu(p))),!0))):X.none()}),__=(l,m,p,y,E)=>{const O=N=>(E.clearBeforeUpdate(p),E.selectRange(p,N.boxes,N.start,N.finish),N.boxes);return Fb(y,l,m,E.firstSelectedSelector,E.lastSelectedSelector).map(O)},Dm=Ea.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),A_=(l,m,p)=>{const y=l.getRect(m),E=l.getRect(p);return E.right>y.left&&E.left<y.right},O_=l=>lr(l,"tr"),hh={...Dm,verify:(l,m,p,y,E,O,N)=>lr(y,"td,th",N).bind(H=>lr(m,"td,th",N).map(j=>Io(H,j)?Io(y,H)&&mu(H)===E?O(j):Dm.none("in same cell"):Mo(O_,[H,j]).fold(()=>A_(l,j,H)?Dm.success():O(j),te=>O(j)))).getOr(Dm.none("default")),cata:(l,m,p,y,E)=>l.fold(m,p,y,E)},e1=$c("br"),hC=(l,m,p)=>m(l,p).bind(y=>kg(y)&&ip(y).trim().length===0?hC(y,m,p):X.some(y)),D_=(l,m,p)=>p.traverse(m).orThunk(()=>hC(m,p.gather,l)).map(p.relative),R_=(l,m)=>hc(l,m).filter(e1).orThunk(()=>hc(l,m-1).filter(e1)),Ub=(l,m,p,y)=>R_(m,p).bind(E=>y.traverse(E).fold(()=>hC(E,y.gather,l).map(y.relative),O=>cm(O).map(N=>yr.on(N.parent,N.index)))),SE=(l,m,p,y)=>(e1(m)?D_(l,m,y):Ub(l,m,p,y)).map(O=>({start:O,finish:O})),wE=l=>hh.cata(l,m=>X.none(),()=>X.none(),m=>X.some(bd(m,0)),m=>X.some(bd(m,mu(m)))),t1=(l,m)=>({left:l.left,top:l.top+m,right:l.right,bottom:l.bottom+m}),Zb=(l,m)=>({left:l.left,top:l.top-m,right:l.right,bottom:l.bottom-m}),pC=(l,m,p)=>({left:l.left+m,top:l.top+p,right:l.right+m,bottom:l.bottom+p}),n1=l=>l.top,bC=l=>l.bottom,M_=(l,m,p)=>p>=0&&p<mu(m)?l.getRangedRect(m,p,m,p+1):p>0?l.getRangedRect(m,p-1,m,p):X.none(),o1=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom}),xE=(l,m)=>X.some(l.getRect(m)),Wb=(l,m,p)=>Jr(m)?xE(l,m).map(o1):kg(m)?M_(l,m,p).map(o1):X.none(),jb=(l,m)=>Jr(m)?xE(l,m).map(o1):kg(m)?l.getRangedRect(m,0,m,mu(m)).map(o1):X.none(),Nf=5,N_=100,Tu=Ea.generate([{none:[]},{retry:["caret"]}]),B_=(l,m)=>l.left<m.left||Math.abs(m.right-l.left)<1||l.left>m.right,EE=(l,m,p)=>_0(m,Rl).fold(Le,y=>jb(l,y).exists(E=>B_(p,E))),P_=(l,m,p,y,E)=>{const O=t1(E,Nf);return Math.abs(p.bottom-y.bottom)<1||p.top>E.bottom?Tu.retry(O):p.top===E.bottom?Tu.retry(t1(E,1)):EE(l,m,E)?Tu.retry(pC(O,Nf,0)):Tu.none()},Gb={point:n1,adjuster:(l,m,p,y,E)=>{const O=Zb(E,Nf);return Math.abs(p.top-y.top)<1||p.bottom<E.top?Tu.retry(O):p.bottom===E.top?Tu.retry(Zb(E,1)):EE(l,m,E)?Tu.retry(pC(O,Nf,0)):Tu.none()},move:Zb,gather:Dx},$_={point:bC,adjuster:P_,move:t1,gather:Wi},I_=(l,m,p)=>l.elementFromPoint(m,p).filter(y=>Ms(y)==="table").isSome(),L_=(l,m,p,y,E)=>vC(l,m,p,m.move(y,Nf),E),vC=(l,m,p,y,E)=>E===0?X.some(y):I_(l,y.left,m.point(y))?L_(l,m,p,y,E-1):l.situsFromPoint(y.left,m.point(y)).bind(O=>O.start.fold(X.none,N=>jb(l,N).bind(H=>m.adjuster(l,N,H,p,y).fold(X.none,j=>vC(l,m,p,j,E-1))).orThunk(()=>X.some(y)),X.none)),F_=(l,m,p)=>l.point(m)>p.getInnerHeight()?X.some(l.point(m)-p.getInnerHeight()):l.point(m)<0?X.some(-l.point(m)):X.none(),TE=(l,m,p)=>{const y=l.move(p,Nf),E=vC(m,l,p,y,N_).getOr(y);return F_(l,E,m).fold(()=>m.situsFromPoint(E.left,l.point(E)),O=>(m.scrollBy(0,O),m.situsFromPoint(E.left,l.point(E)-O)))},yC={tryUp:Yt(TE,Gb),tryDown:Yt(TE,$_),getJumpSize:U(Nf)},H_=20,z_=(l,m,p)=>l.getSelection().bind(y=>SE(m,y.finish,y.foffset,p).fold(()=>X.some(bd(y.finish,y.foffset)),E=>{const O=l.fromSitus(E),N=hh.verify(l,y.finish,y.foffset,O.finish,O.foffset,p.failure,m);return wE(N)})),CC=(l,m,p,y,E,O)=>O===0?X.none():s1(l,m,p,y,E).bind(N=>{const H=l.fromSitus(N),j=hh.verify(l,p,y,H.finish,H.foffset,E.failure,m);return hh.cata(j,()=>X.none(),()=>X.some(N),te=>Io(p,te)&&y===0?kE(l,p,y,Zb,E):CC(l,m,te,0,E,O-1),te=>Io(p,te)&&y===mu(te)?kE(l,p,y,t1,E):CC(l,m,te,mu(te),E,O-1))}),kE=(l,m,p,y,E)=>Wb(l,m,p).bind(O=>Lt(l,E,y(O,yC.getJumpSize()))),Lt=(l,m,p)=>{const y=Di().browser;return y.isChromium()||y.isSafari()||y.isFirefox()?m.retry(l,p):X.none()},s1=(l,m,p,y,E)=>Wb(l,p,y).bind(O=>Lt(l,E,O)),_E=(l,m,p)=>z_(l,m,p).bind(y=>CC(l,m,y.element,y.offset,p,H_).map(l.fromSitus)),V_=(l,m)=>Gw(l,p=>Y(p).exists(y=>Io(y,m))),SC=(l,m,p,y,E)=>lr(y,"td,th",m).bind(O=>lr(O,"table",m).bind(N=>V_(E,N)?_E(l,m,p).bind(H=>lr(H.finish,"td,th",m).map(j=>({start:O,finish:j,range:H}))):X.none())),r1=(l,m,p,y,E,O)=>O(y,m).orThunk(()=>SC(l,m,p,y,E).map(N=>{const H=N.range;return Mf.create(X.some(Eu(H.start,H.soffset,H.finish,H.foffset)),!0)})),qb=(l,m)=>lr(l,"tr",m).bind(p=>lr(p,"table",m).bind(y=>{const E=du(y,"tr");return Io(p,E[0])?Ca(y,O=>Ws(O).isSome(),m).map(O=>{const N=mu(O);return Mf.create(X.some(Eu(O,N,O,N)),!0)}):X.none()})),a1=(l,m)=>lr(l,"tr",m).bind(p=>lr(p,"table",m).bind(y=>{const E=du(y,"tr");return Io(p,E[E.length-1])?bi(y,O=>fp(O).isSome(),m).map(O=>Mf.create(X.some(Eu(O,0,O,0)),!0)):X.none()})),ph=(l,m,p,y,E,O,N)=>SC(l,p,y,E,O).bind(H=>Vb(m,p,H.start,H.finish,N)),wC=(l,m)=>lr(l,"td,th",m),xC=l=>gc(l).exists(dp),AE=(l,m,p,y)=>{const E=Xd(),O=E.clear,N=fe=>{E.on(je=>{y.clearBeforeUpdate(m),wC(fe.target,p).each(bt=>{Lb(je,bt,p).each(mt=>{const We=mt.boxes.getOr([]);if(We.length===1){const ot=We[0],Ve=mp(ot)==="false",Gt=Sn(Dg(fe.target),ot,Io);Ve&&Gt&&y.selectRange(m,We,ot,ot)}else We.length>1&&(y.selectRange(m,We,mt.start,mt.finish),l.selectContents(bt))})})})};return{clearstate:O,mousedown:fe=>{y.clear(m),wC(fe.target,p).filter(xC).each(E.set)},mouseover:fe=>{N(fe)},mouseup:fe=>{N(fe),O()}}},EC={traverse:_g,gather:Wi,relative:yr.before,retry:yC.tryDown,failure:hh.failedDown},OE={traverse:L2,gather:Dx,relative:yr.before,retry:yC.tryUp,failure:hh.failedUp},bh=l=>m=>m===l,Ed=bh(38),vh=bh(40),Td=l=>l>=37&&l<=40,kd={isBackward:bh(37),isForward:bh(39)},DE={isBackward:bh(39),isForward:bh(37)},c1=l=>({elementFromPoint:(Ve,Gt)=>pt.fromPoint(pt.fromDom(l.document),Ve,Gt),getRect:Ve=>Ve.dom.getBoundingClientRect(),getRangedRect:(Ve,Gt,vn,kt)=>{const ao=id.exact(Ve,Gt,vn,kt);return ty(l,ao)},getSelection:()=>E3(l).map(Ve=>gC(l,Ve)),fromSitus:Ve=>{const Gt=id.relative(Ve.start,Ve.finish);return gC(l,Gt)},situsFromPoint:(Ve,Gt)=>ny(l,Ve,Gt).map(vn=>zb.create(vn.start,vn.soffset,vn.finish,vn.foffset)),clearSelection:()=>{T3(l)},collapseSelection:(Ve=!1)=>{E3(l).each(Gt=>Gt.fold(vn=>vn.collapse(Ve),(vn,kt)=>{const ao=Ve?vn:kt;tx(l,ao,ao)},(vn,kt,ao,fn)=>{const po=Ve?vn:ao,Is=Ve?kt:fn;B0(l,po,Is,po,Is)}))},setSelection:Ve=>{B0(l,Ve.start,Ve.soffset,Ve.finish,Ve.foffset)},setRelativeSelection:(Ve,Gt)=>{tx(l,Ve,Gt)},selectNode:Ve=>{ey(l,Ve,!1)},selectContents:Ve=>{ey(l,Ve)},getInnerHeight:()=>l.innerHeight,getScrollY:()=>Zo(pt.fromDom(l.document)).top,scrollBy:(Ve,Gt)=>{li(Ve,Gt,pt.fromDom(l.document))}}),Xi=(l,m)=>({rows:l,cols:m}),RE=(l,m,p,y)=>{const E=c1(l),O=AE(E,m,p,y);return{clearstate:O.clearstate,mousedown:O.mousedown,mouseover:O.mouseover,mouseup:O.mouseup}},ME=l=>_0(l,$2).exists(dp),TC=(l,m)=>ME(l)||ME(m),kC=(l,m,p,y)=>{const E=c1(l),O=()=>(y.clear(m),X.none());return{keydown:(j,te,fe,je,bt,mt)=>{const We=j.raw,ot=We.which,Ve=We.shiftKey===!0;return dC(m,y.selectedSelector).fold(()=>(Td(ot)&&!Ve&&y.clearBeforeUpdate(m),Td(ot)&&Ve&&!TC(te,je)?X.none:vh(ot)&&Ve?Yt(ph,E,m,p,EC,je,te,y.selectRange):Ed(ot)&&Ve?Yt(ph,E,m,p,OE,je,te,y.selectRange):vh(ot)?Yt(r1,E,p,EC,je,te,a1):Ed(ot)?Yt(r1,E,p,OE,je,te,qb):X.none),vn=>{const kt=ao=>()=>De(ao,po=>__(po.rows,po.cols,m,vn,y)).fold(()=>hE(m,y.firstSelectedSelector,y.lastSelectedSelector).map(po=>{const Is=vh(ot)||mt.isForward(ot)?yr.after:yr.before;return E.setRelativeSelection(yr.on(po.first,0),Is(po.table)),y.clear(m),Mf.create(X.none(),!0)}),po=>X.some(Mf.create(X.none(),!0)));return Td(ot)&&Ve&&!TC(te,je)?X.none:vh(ot)&&Ve?kt([Xi(1,0)]):Ed(ot)&&Ve?kt([Xi(-1,0)]):mt.isBackward(ot)&&Ve?kt([Xi(0,-1),Xi(-1,0)]):mt.isForward(ot)&&Ve?kt([Xi(0,1),Xi(1,0)]):Td(ot)&&!Ve?O:X.none})()},keyup:(j,te,fe,je,bt)=>dC(m,y.selectedSelector).fold(()=>{const mt=j.raw,We=mt.which;return mt.shiftKey===!0&&Td(We)&&TC(te,je)?CE(m,p,te,fe,je,bt,y.selectRange):X.none()},X.none)}},NE=(l,m,p,y)=>{const E=c1(l);return(O,N)=>{y.clearBeforeUpdate(m),Lb(O,N,p).each(H=>{const j=H.boxes.getOr([]);y.selectRange(m,j,H.start,H.finish),E.selectContents(N),E.collapseSelection()})}},PE={byClass:l=>{const m=K2(l.selected),p=jw([l.selected,l.lastSelected,l.firstSelected]),y=O=>{const N=du(O,l.selectedSelector);ze(N,p)};return{clearBeforeUpdate:y,clear:y,selectRange:(O,N,H,j)=>{y(O),ze(N,m),El(H,l.firstSelected),El(j,l.lastSelected)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}},byAttr:(l,m,p)=>{const y=j=>{go(j,l.selected),go(j,l.firstSelected),go(j,l.lastSelected)},E=j=>{ir(j,l.selected,"1")},O=j=>{N(j),p()},N=j=>{const te=du(j,`${l.selectedSelector},${l.firstSelectedSelector},${l.lastSelectedSelector}`);ze(te,y)};return{clearBeforeUpdate:N,clear:O,selectRange:(j,te,fe,je)=>{O(j),ze(te,E),ir(fe,l.firstSelected,"1"),ir(je,l.lastSelected,"1"),m(te,fe,je)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}}},Bf="data-mce-selected",_C="td["+Bf+"],th["+Bf+"]",$E="["+Bf+"]",AC="data-mce-first-selected",OC="td["+AC+"],th["+AC+"]",DC="data-mce-last-selected",Z_="td["+DC+"],th["+DC+"]",Pf=$E,$f={selected:Bf,selectedSelector:_C,firstSelected:AC,firstSelectedSelector:OC,lastSelected:DC,lastSelectedSelector:Z_},Kb=(l,m,p)=>({element:p,mergable:w_(m,l,$f),unmergable:Hb(l),selection:vE(l)}),Yb=(l,m,p)=>({element:l,clipboard:m,generators:p}),IE=(l,m,p,y)=>({selection:vE(l),clipboard:p,generators:y}),W_=l=>zc(l).bind(m=>Rf(m,$f.firstSelectedSelector)).fold(U(l),m=>m[0]),LE=l=>(m,p)=>{const y=Ms(m),E=y==="col"||y==="colgroup"?W_(m):m;return lr(E,l,p)},mn=LE("th,td,caption"),Xb=LE("th,td"),Wc=l=>Br(l.model.table.getSelectedCells()),i1=l=>Xo(Wc(l),m=>fc(m,$f.selectedSelector)),j_=l=>zc(l[0]).map(m=>{const p=J0(m,Pf);return Yi(p),[p]}),Jb=(l,m)=>an(m,p=>l.selection.serializer.serialize(p.dom,{})).join(""),G_=(l,m)=>{const p=l.getDoc(),y=z2(pt.fromDom(l.getBody())),E=pt.fromTag("div",p);ir(E,"data-mce-bogus","all"),Qo(E,{position:"fixed",left:"-9999999px",top:"0",overflow:"hidden",opacity:"0"});const O=cu(y);Mi(E,m),fo(O,E);const N=E.dom.innerText;return pa(E),N},RC=(l,m)=>{l.on("BeforeGetContent",p=>{const y=E=>{p.preventDefault(),j_(E).each(O=>{const N=p.format==="text"?G_(l,O):Jb(l,O);p.content=N})};if(p.selection===!0){const E=i1(l);E.length>=1&&y(E)}}),l.on("BeforeSetContent",p=>{if(p.selection===!0&&p.paste===!0){const y=Wc(l);ne(y).each(E=>{zc(E).each(O=>{const N=Xo(Z2(p.content),j=>Ms(j)!=="meta"),H=$c("table");if(iC(l)&&N.length===1&&H(N[0])){p.preventDefault();const j=pt.fromDom(l.getDoc()),te=By(j),fe=Yb(E,N[0],te);m.pasteCells(O,fe).each(()=>{l.focus()})}})})}})},MC=(l,m)=>l.dispatch("NewRow",{node:m}),l1=(l,m)=>l.dispatch("NewCell",{node:m}),$l=(l,m,p)=>{l.dispatch("TableModified",{...p,table:m})},yh=(l,m,p,y,E)=>{l.dispatch("TableSelectionChange",{cells:m,start:p,finish:y,otherCells:E})},q_=l=>{l.dispatch("TableSelectionClear")},If=(l,m,p,y,E)=>{l.dispatch("ObjectResizeStart",{target:m,width:p,height:y,origin:E})},u1=(l,m,p,y,E)=>{l.dispatch("ObjectResized",{target:m,width:p,height:y,origin:E})},Qb={structure:!1,style:!0},hr={structure:!0,style:!1},K_={structure:!0,style:!0},NC=(l,m)=>Om(l)?Ug.percentageSize(m):xu(l)?Ug.pixelSize(m):Ug.getTableSize(m),Rm=(l,m,p)=>{const y=Sa=>Ms(Pb(Sa))==="table",E=Sa=>!y(l)||$p(Sa).rows>1,O=Sa=>!y(l)||$p(Sa).columns>1,N=rE(l),H=Bb(l)?et:_p,j=Sa=>{switch(Mb(l)){case"section":return md.section();case"sectionCells":return md.sectionCells();case"cells":return md.cells();default:return md.getTableSectionType(Sa,"section")}},te=(Sa,FC)=>FC.cursor.fold(()=>{const cv=dm(Sa);return ne(cv).filter(qt).map(Ad=>{p.clearSelectedCells(Sa.dom);const aa=l.dom.createRng();return aa.selectNode(Ad.dom),l.selection.setRng(aa),ir(Ad,"data-mce-selected","1"),aa})},cv=>{const Ad=cb(cv),aa=l.dom.createRng();return aa.setStart(Ad.element.dom,Ad.offset),aa.setEnd(Ad.element.dom,Ad.offset),l.selection.setRng(aa),p.clearSelectedCells(Sa.dom),X.some(aa)}),fe=(Sa,FC,cv,Ad)=>(aa,WE,Rt=!1)=>{Yi(aa);const Qa=pt.fromDom(l.getDoc()),tA=xm(cv,Qa,N),jE={sizing:NC(l,aa),resize:Bb(l)?D3():nx(),section:j(aa)};return FC(aa)?Sa(aa,WE,tA,jE).bind(iv=>{m.refresh(aa.dom),ze(iv.newRows,Hf=>{MC(l,Hf.dom)}),ze(iv.newCells,Hf=>{l1(l,Hf.dom)});const HC=te(aa,iv);return qt(aa)&&(Yi(aa),Rt||$l(l,aa.dom,Ad)),HC.map(Hf=>({rng:Hf,effect:Ad}))}):X.none()},je=fe(jy,E,et,hr),bt=fe(qi,O,et,hr),mt=fe(Df,de,et,hr),We=fe(r_,de,et,hr),ot=fe(lh,de,H,hr),Ve=fe(Wo,de,H,hr),Gt=fe(c_,de,et,hr),vn=fe(qy,de,et,hr),kt=fe(Xe,de,et,hr),ao=fe(Ky,de,et,hr),fn=fe(Ar,de,et,hr),po=fe(Yy,de,et,hr),Is=fe(zx,de,et,K_),Gc=fe(Hx,de,et,hr),Lf=fe(a_,de,et,hr),Bm=fe(km,de,et,hr),Ff=fe(Pl,de,et,hr),_o=fe(ra,de,et,hr),vs=fe(Fx,de,et,hr),Ja=fe(Gy,de,et,hr);return{deleteRow:je,deleteColumn:bt,insertRowsBefore:mt,insertRowsAfter:We,insertColumnsBefore:ot,insertColumnsAfter:Ve,mergeCells:Gt,unmergeCells:vn,pasteColsBefore:kt,pasteColsAfter:ao,pasteRowsBefore:fn,pasteRowsAfter:po,pasteCells:Is,makeCellsHeader:Gc,unmakeCellsHeader:Lf,makeColumnsHeader:Bm,unmakeColumnsHeader:Ff,makeRowsHeader:_o,makeRowsBody:vs,makeRowsFooter:Ja,getTableRowType:i_,getTableCellType:Jy,getTableColType:Xy}},ku=(l,m)=>{l.selection.select(m.dom,!0),l.selection.collapse(!0)},BC=(l,m)=>{rm(m,"td,th").each(Yt(ku,l))},FE=(l,m)=>{ze(du(m,"tr"),p=>{MC(l,p.dom),ze(du(p,"th,td"),y=>{l1(l,y.dom)})})},Y_=l=>re(l)&&l.indexOf("%")!==-1,ev=(l,m,p,y,E)=>{const O=iE(l),N={styles:O,attributes:cE(l),colGroups:lE(l)};return l.undoManager.ignore(()=>{const H=wu(p,m,E,y,Mb(l),N);ir(H,"data-mce-id","__mce");const j=zw(H);l.insertContent(j),l.addVisual()}),rm(Pb(l),'table[data-mce-id="__mce"]').map(H=>(xu(l)?My(H):Jp(l)?Sm(H):(Om(l)||Y_(O.width))&&xf(H),Yi(H),go(H,"data-mce-id"),FE(l,H),BC(l,H),H.dom)).getOrNull()},d1=(l,m,p,y={})=>{const E=O=>jt(O)&&O>0;if(E(m)&&E(p)){const O=y.headerRows||0,N=y.headerColumns||0;return ev(l,p,m,N,O)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var Mm=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const tv="x-tinymce/dom-table-",nv=tv+"rows",Nm=tv+"columns",m1=l=>{const m=Mm.FakeClipboardItem(l);Mm.write([m])},PC=l=>{const m=Mm.read()??[];return De(m,p=>X.from(p.getType(l)))},ov=l=>{PC(l).isSome()&&Mm.clear()},Il=l=>{l.fold(_u,m=>m1({[nv]:m}))},HE=()=>PC(nv),_u=()=>ov(nv),$C=l=>{l.fold(Ch,m=>m1({[Nm]:m}))},sv=()=>PC(Nm),Ch=()=>ov(Nm),f1=l=>mn($b(l),Ys(l)).filter(Qp),rv=l=>Xb($b(l),Ys(l)).filter(Qp),X_=(l,m)=>{const p=Ys(l),y=()=>f1(l).each(Ve=>{zc(Ve,p).filter(ie(p)).each(Gt=>{const vn=pt.fromText("");if(yl(Gt,vn),pa(Gt),l.dom.isEmpty(l.getBody()))l.setContent(""),l.selection.setCursorLocation();else{const kt=l.dom.createRng();kt.setStart(vn.dom,0),kt.setEnd(vn.dom,0),l.selection.setRng(kt),l.nodeChanged()}})}),E=Ve=>f1(l).each(Gt=>{Jp(l)||xu(l)||Om(l)||zc(Gt,p).each(kt=>{Ve==="relative"&&!kx(kt)?xf(kt):Ve==="fixed"&&!G3(kt)?My(kt):Ve==="responsive"&&!q3(kt)&&Sm(kt),Yi(kt),$l(l,kt.dom,hr)})}),O=Ve=>zc(Ve,p),N=Ve=>rv(l).bind(Gt=>O(Gt).map(vn=>Ve(vn,Gt))),H=(Ve,Gt)=>{N(vn=>{l.formatter.toggle("tableclass",{value:Gt},vn.dom),$l(l,vn.dom,Qb)})},j=(Ve,Gt)=>{N(vn=>{const kt=Wc(l),fn=Po(kt,po=>l.formatter.match("tablecellclass",{value:Gt},po.dom))?l.formatter.remove:l.formatter.apply;ze(kt,po=>fn("tablecellclass",{value:Gt},po.dom)),$l(l,vn.dom,Qb)})},te=()=>{f1(l).each(Ve=>{zc(Ve,p).each(Gt=>{Ns(Gt,"caption").fold(()=>{const vn=pt.fromTag("caption");fo(vn,pt.fromText("Caption")),m3(Gt,vn,0),l.selection.setCursorLocation(vn.dom,0)},vn=>{$c("caption")(Ve)&&em("td",Gt).each(kt=>l.selection.setCursorLocation(kt.dom,0)),pa(vn)}),$l(l,Gt.dom,hr)})})},fe=Ve=>{l.focus()},je=(Ve,Gt=!1)=>N((vn,kt)=>{const ao=Kb(Wc(l),vn,kt);Ve(vn,ao,Gt).each(fe)}),bt=()=>N((Ve,Gt)=>{const vn=Kb(Wc(l),Ve,Gt),kt=xm(et,pt.fromDom(l.getDoc()),X.none());return pi(Ve,vn,kt)}),mt=()=>N((Ve,Gt)=>{const vn=Kb(Wc(l),Ve,Gt);return Al(Ve,vn)}),We=(Ve,Gt)=>Gt().each(vn=>{const kt=an(vn,ao=>Nr(ao));N((ao,fn)=>{const po=By(pt.fromDom(l.getDoc())),Is=IE(Wc(l),fn,kt,po);Ve(ao,Is).each(fe)})}),ot=Ve=>(Gt,vn)=>ul(vn,"type").each(kt=>{je(Ve(kt),vn.no_events)});xn({mceTableSplitCells:()=>je(m.unmergeCells),mceTableMergeCells:()=>je(m.mergeCells),mceTableInsertRowBefore:()=>je(m.insertRowsBefore),mceTableInsertRowAfter:()=>je(m.insertRowsAfter),mceTableInsertColBefore:()=>je(m.insertColumnsBefore),mceTableInsertColAfter:()=>je(m.insertColumnsAfter),mceTableDeleteCol:()=>je(m.deleteColumn),mceTableDeleteRow:()=>je(m.deleteRow),mceTableCutCol:()=>mt().each(Ve=>{$C(Ve),je(m.deleteColumn)}),mceTableCutRow:()=>bt().each(Ve=>{Il(Ve),je(m.deleteRow)}),mceTableCopyCol:()=>mt().each(Ve=>$C(Ve)),mceTableCopyRow:()=>bt().each(Ve=>Il(Ve)),mceTablePasteColBefore:()=>We(m.pasteColsBefore,sv),mceTablePasteColAfter:()=>We(m.pasteColsAfter,sv),mceTablePasteRowBefore:()=>We(m.pasteRowsBefore,HE),mceTablePasteRowAfter:()=>We(m.pasteRowsAfter,HE),mceTableDelete:y,mceTableCellToggleClass:j,mceTableToggleClass:H,mceTableToggleCaption:te,mceTableSizingMode:(Ve,Gt)=>E(Gt),mceTableCellType:ot(Ve=>Ve==="th"?m.makeCellsHeader:m.unmakeCellsHeader),mceTableColType:ot(Ve=>Ve==="th"?m.makeColumnsHeader:m.unmakeColumnsHeader),mceTableRowType:ot(Ve=>{switch(Ve){case"header":return m.makeRowsHeader;case"footer":return m.makeRowsFooter;default:return m.makeRowsBody}})},(Ve,Gt)=>l.addCommand(Gt,Ve)),l.addCommand("mceInsertTable",(Ve,Gt)=>{d1(l,Gt.rows,Gt.columns,Gt.options)}),l.addCommand("mceTableApplyCellStyle",(Ve,Gt)=>{const vn=fn=>"tablecell"+fn.toLowerCase().replace("-","");if(!be(Gt))return;const kt=Xo(Wc(l),Qp);if(kt.length===0)return;const ao=S2(Gt,(fn,po)=>l.formatter.has(vn(po))&&re(fn));tf(ao)||(xn(ao,(fn,po)=>{const Is=vn(po);ze(kt,Gc=>{fn===""?l.formatter.remove(Is,{value:null},Gc.dom,!0):l.formatter.apply(Is,{value:fn},Gc.dom)})}),O(kt[0]).each(fn=>$l(l,fn.dom,Qb)))})},zE=(l,m)=>{const p=Ys(l),y=E=>Xb($b(l)).bind(O=>zc(O,p).map(N=>{const H=Kb(Wc(l),N,O);return E(N,H)})).getOr("");xn({mceTableRowType:()=>y(m.getTableRowType),mceTableCellType:()=>y(m.getTableCellType),mceTableColType:()=>y(m.getTableColType)},(E,O)=>l.addQueryValueHandler(O,E))},av=l=>!Tl(pt.fromDom(l.target),"ephox-snooker-resizer-bar"),J_=(l,m)=>{const p=k_(()=>pt.fromDom(l.getBody()),()=>Xb($b(l),Ys(l)),$f.selectedSelector),y=(j,te,fe)=>{zc(te).each(bt=>{const mt=an(j,vn=>vn.dom),We=rE(l),ot=xm(et,pt.fromDom(l.getDoc()),We),Ve=Wc(l),Gt=Ty(bt,{selection:Ve},ot).map(vn=>kn(vn,kt=>an(kt,ao=>ao.dom))).getOrUndefined();yh(l,mt,te.dom,fe.dom,Gt)})},E=()=>q_(l),O=PE.byAttr($f,y,E);return l.on("init",j=>{const te=l.getWin(),fe=Pb(l),je=Ys(l),bt=()=>{const _o=l.selection,vs=pt.fromDom(_o.getStart()),Ja=pt.fromDom(_o.getEnd());Mo(zc,[vs,Ja]).fold(()=>O.clear(fe),et)},mt=RE(te,fe,je,O),We=kC(te,fe,je,O),ot=NE(te,fe,je,O),Ve=_o=>_o.raw.shiftKey===!0;l.on("TableSelectorChange",_o=>ot(_o.start,_o.finish));const Gt=(_o,vs)=>{Ve(_o)&&(vs.kill&&_o.kill(),vs.selection.each(Ja=>{const Ia=id.relative(Ja.start,Ja.finish),Or=at(te,Ia);l.selection.setRng(Or)}))},vn=_o=>{const vs=nr(_o);if(vs.raw.shiftKey&&Td(vs.raw.which)){const Ja=l.selection.getRng(),Ia=pt.fromDom(Ja.startContainer),Or=pt.fromDom(Ja.endContainer);We.keyup(vs,Ia,Ja.startOffset,Or,Ja.endOffset).each(_d=>{Gt(vs,_d)})}},kt=_o=>{const vs=nr(_o);m.hide();const Ja=l.selection.getRng(),Ia=pt.fromDom(Ja.startContainer),Or=pt.fromDom(Ja.endContainer),_d=up(kd,DE)(pt.fromDom(l.selection.getStart()));We.keydown(vs,Ia,Ja.startOffset,Or,Ja.endOffset,_d).each(Sa=>{Gt(vs,Sa)}),m.show()},ao=_o=>_o.button===0,fn=_o=>_o.buttons===void 0?!0:(_o.buttons&1)!==0,po=_o=>{mt.clearstate()},Is=_o=>{ao(_o)&&av(_o)&&mt.mousedown(nr(_o))},Gc=_o=>{fn(_o)&&av(_o)&&mt.mouseover(nr(_o))},Lf=_o=>{ao(_o)&&av(_o)&&mt.mouseup(nr(_o))},Ff=(()=>{const _o=Vs(pt.fromDom(fe)),vs=Vs(0);return{touchEnd:Ia=>{const Or=pt.fromDom(Ia.target);if($c("td")(Or)||$c("th")(Or)){const _d=_o.get(),Sa=vs.get();Io(_d,Or)&&Ia.timeStamp-Sa<300&&(Ia.preventDefault(),ot(Or,Or))}_o.set(Or),vs.set(Ia.timeStamp)}}})();l.on("dragstart",po),l.on("mousedown",Is),l.on("mouseover",Gc),l.on("mouseup",Lf),l.on("touchend",Ff.touchEnd),l.on("keyup",vn),l.on("keydown",kt),l.on("NodeChange",bt)}),l.on("PreInit",()=>{l.serializer.addTempAttr($f.firstSelected),l.serializer.addTempAttr($f.lastSelected)}),{getSelectedCells:()=>mC(p.get(),U([]),j=>an(j,te=>te.dom),j=>[j.dom]),clearSelectedCells:j=>O.clear(pt.fromDom(j))}},IC=(l,m)=>{const p=pt.fromDom(l.getBody());return Cx.body(p,m)},Ll=l=>zt(l)&&l.nodeName==="TABLE",LC="bar-",Q_=l=>Ni(l,"data-mce-resize")!=="false",VE=l=>{const m=Tn.fromTable(l);Tn.hasColumns(m)||ze(dm(l),p=>{const y=cf(p,"width");$r(p,"width",y),go(p,"width")})},UE=l=>Qh(l,"corner-"),ZE=l=>x2(l,"corner-"),eA=l=>{const m=Xd(),p=Xd(),y=Xd();let E,O,N,H;const j=kt=>NC(l,kt),te=()=>Nb(l)?nx():D3(),fe=kt=>$p(kt).columns,je=kt=>$p(kt).rows,bt=(kt,ao,fn,po)=>{const Is=ZE(ao),Gc=dg(Is,"e"),Lf=Qh(Is,"n");if(O===""&&xf(kt),H===""&&Ec(kt),fn!==E&&O!==""){$r(kt,"width",O);const Bm=te(),Ff=j(kt),_o=Nb(l)||Gc?fe(kt)-1:0;qg(kt,fn-E,_o,Bm,Ff)}else if(fE(O)){const Bm=parseFloat(O.replace("%","")),Ff=fn*Bm/E;$r(kt,"width",Ff+"%")}if(gE(O)&&VE(kt),po!==N&&H!==""){$r(kt,"height",H);const Bm=Lf?0:je(kt)-1;q0(kt,po-N,Bm)}},mt=()=>{p.on(kt=>{kt.destroy()})};l.on("init",()=>{const kt=IC(l,Q_);if(y.set(kt),Rb(l)&&aE(l)){const ao=te(),fn=aC.create(kt,ao,j);l.mode.isReadOnly()||fn.on(),fn.events.startDrag.bind(po=>{m.set(l.selection.getRng())}),fn.events.beforeResize.bind(po=>{const Is=po.table.dom;If(l,Is,uE(Is),dE(Is),LC+po.type)}),fn.events.afterResize.bind(po=>{const Is=po.table,Gc=Is.dom;Yi(Is),m.on(Lf=>{l.selection.setRng(Lf),l.focus()}),u1(l,Gc,uE(Gc),dE(Gc),LC+po.type),l.undoManager.add()}),p.set(fn)}}),l.on("ObjectResizeStart",kt=>{const ao=kt.target;if(Ll(ao)&&!l.mode.isReadOnly()){const fn=pt.fromDom(ao);ze(l.dom.select(".mce-clonedresizable"),po=>{l.dom.addClass(po,"mce-"+Xp(l)+"-columns")}),!G3(fn)&&xu(l)?My(fn):!kx(fn)&&Om(l)&&xf(fn),q3(fn)&&Qh(kt.origin,LC)&&xf(fn),E=kt.width,O=Jp(l)?"":Ib(l,ao).getOr(""),N=kt.height,H=lC(l,ao).getOr("")}}),l.on("ObjectResized",kt=>{const ao=kt.target;if(Ll(ao)){const fn=pt.fromDom(ao),po=kt.origin;UE(po)&&bt(fn,po,kt.width,kt.height),Yi(fn),$l(l,fn.dom,Qb)}});const We=()=>{p.on(kt=>{kt.on(),kt.showBars()})},ot=()=>{p.on(kt=>{kt.off(),kt.hideBars()})};return l.on("DisabledStateChange",kt=>{kt.state?ot():We()}),l.on("SwitchMode",()=>{l.mode.isReadOnly()?ot():We()}),l.on("dragstart dragend",kt=>{kt.type==="dragstart"?ot():We()}),l.on("remove",()=>{mt()}),{refresh:kt=>{p.on(ao=>ao.refreshBars(pt.fromDom(kt)))},hide:()=>{p.on(kt=>kt.hideBars())},show:()=>{p.on(kt=>kt.showBars())}}},Yo=l=>{d6(l);const m=eA(l),p=J_(l,m),y=Rm(l,m,p);return X_(l,y),zE(l,y),RC(l,y),{getSelectedCells:p.getSelectedCells,clearSelectedCells:p.clearSelectedCells}},jc=l=>({table:Yo(l)});var Sh=()=>{k.add("dom",jc)};Sh()})();(function(){var k=tinymce.util.Tools.resolve("tinymce.PluginManager");const F=De=>({backspaceDelete:ge=>{De.execCommand("mceListBackspaceDelete",!1,ge)}}),$=De=>De==null,Q=De=>!$(De),ue=De=>()=>De,ye=(De,ge)=>De===ge,re=ue(!1),Vn=class Vn{constructor(ge,Qt){Ze(this,"tag");Ze(this,"value");this.tag=ge,this.value=Qt}static some(ge){return new Vn(!0,ge)}static none(){return Vn.singletonNone}fold(ge,Qt){return this.tag?Qt(this.value):ge()}isSome(){return this.tag}isNone(){return!this.tag}map(ge){return this.tag?Vn.some(ge(this.value)):Vn.none()}bind(ge){return this.tag?ge(this.value):Vn.none()}exists(ge){return this.tag&&ge(this.value)}forall(ge){return!this.tag||ge(this.value)}filter(ge){return!this.tag||ge(this.value)?this:Vn.none()}getOr(ge){return this.tag?this.value:ge}or(ge){return this.tag?this:ge}getOrThunk(ge){return this.tag?this.value:ge()}orThunk(ge){return this.tag?this:ge()}getOrDie(ge){if(this.tag)return this.value;throw new Error(ge??"Called getOrDie on None")}static from(ge){return Q(ge)?Vn.some(ge):Vn.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ge){this.tag&&ge(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}};Ze(Vn,"singletonNone",new Vn(!1));let be=Vn;const we=Array.prototype.slice,nt=(De,ge)=>{for(let Qt=0,xn=De.length;Qt<xn;Qt++){const kn=De[Qt];if(ge(kn,Qt))return!0}return!1},xt=(De,ge)=>{const Qt=De.length,xn=new Array(Qt);for(let kn=0;kn<Qt;kn++){const pr=De[kn];xn[kn]=ge(pr,kn)}return xn},_t=(De,ge)=>{for(let Qt=0,xn=De.length;Qt<xn;Qt++){const kn=De[Qt];ge(kn,Qt)}},rn=(De,ge,Qt)=>(_t(De,(xn,kn)=>{Qt=ge(Qt,xn,kn)}),Qt),zt=(De,ge,Qt)=>{for(let xn=0,kn=De.length;xn<kn;xn++){const pr=De[xn];if(ge(pr,xn))return be.some(pr);if(Qt(pr,xn))break}return be.none()},In=(De,ge)=>zt(De,ge,re),jt=De=>{const ge=we.call(De,0);return ge.reverse(),ge},et=(De,ge,Qt=ye)=>De.exists(xn=>Qt(xn,ge)),Yn=(De=>ge=>ge.replace(De,""))(/^\s+|\s+$/g),U=De=>De.length>0,At=De=>!U(De),wn=De=>{const ge=jt(Yn(De).split("")),Qt=xt(ge,(xn,kn)=>{const pr=xn.toUpperCase().charCodeAt(0)-65+1;return Math.pow(26,kn)*pr});return rn(Qt,(xn,kn)=>xn+kn,0)},Yt=De=>{if(De--,De<0)return"";{const ge=De%26,Qt=Math.floor(De/26),xn=Yt(Qt),kn=String.fromCharCode(65+ge);return xn+kn}},ie=De=>/^[A-Z]+$/.test(De),Et=De=>/^[a-z]+$/.test(De),Je=De=>/^[0-9]+$/.test(De),Le=De=>Je(De)?2:ie(De)?0:Et(De)?1:At(De)?3:4,de=De=>{switch(Le(De)){case 2:return be.some({listStyleType:be.none(),start:De});case 0:return be.some({listStyleType:be.some("upper-alpha"),start:wn(De).toString()});case 1:return be.some({listStyleType:be.some("lower-alpha"),start:wn(De).toString()});case 3:return be.some({listStyleType:be.none(),start:""});case 4:return be.none()}},X=De=>{const ge=parseInt(De.start,10);return et(De.listStyleType,"upper-alpha")?Yt(ge):et(De.listStyleType,"lower-alpha")?Yt(ge).toLowerCase():De.start},Cn=(De=>ge=>ge.options.get(De))("forced_root_block"),yt=De=>/\btox\-/.test(De.className),T=De=>ge=>Q(ge)&&De.test(ge.nodeName),bo=De=>ge=>Q(ge)&&ge.nodeName.toLowerCase()===De,qe=T(/^(OL|UL|DL)$/),Fo=T(/^(TH|TD)$/),an=T(/^(LI|DT|DD)$/),ze=(De,ge)=>zt(De,qe,Fo).exists(Qt=>Qt.nodeName===ge&&!yt(Qt)),vo=(De,ge)=>{const Qt=De.selection.getNode();return ge({parents:De.dom.getParents(Qt),element:Qt}),De.on("NodeChange",ge),()=>De.off("NodeChange",ge)},Qs=(De,ge)=>ge!==null&&!De.dom.isEditable(ge),Xo=(De,ge)=>{const Qt=De.dom.getParent(ge,"ol,ul,dl");return Qs(De,Qt)||!De.selection.isEditable()},er=bo("ol"),$e=["OL","UL","DL"],gt=$e.join(","),B=(De,ge)=>{const Qt=ge||De.selection.getStart(!0);return De.dom.getParent(Qt,gt,Qc(De,Qt))},Qc=(De,ge)=>{const Qt=De.dom.getParents(ge,De.dom.isBlock),xn=pr=>pr.nodeName.toLowerCase()!==Cn(De);return In(Qt,pr=>xn(pr)&&Co(De.schema,pr)).getOr(De.getBody())},Co=(De,ge)=>!qe(ge)&&!an(ge)&&nt($e,Qt=>De.isValidChild(ge.nodeName,Qt)),gs=De=>{const ge=B(De);!er(ge)||Xo(De,ge)||De.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:X({start:De.dom.getAttrib(ge,"start","1"),listStyleType:be.from(De.dom.getStyle(ge,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:Qt=>{const xn=Qt.getData();de(xn.start).each(kn=>{De.execCommand("mceListUpdate",!1,{attrs:{start:kn.start==="1"?"":kn.start},styles:{"list-style-type":kn.listStyleType.getOr("")}})}),Qt.close()}})},Po=De=>{De.addCommand("mceListProps",()=>{gs(De)})},Yr=(De,ge)=>Qt=>{const xn=kn=>{Qt.setActive(ze(kn.parents,ge)),Qt.setEnabled(!Xo(De,kn.element)&&De.selection.isEditable())};return Qt.setEnabled(De.selection.isEditable()),vo(De,xn)},Ce=De=>{const ge=Qt=>()=>De.execCommand(Qt);De.hasPlugin("advlist")||(De.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:ge("InsertOrderedList"),onSetup:Yr(De,"OL")}),De.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:ge("InsertUnorderedList"),onSetup:Yr(De,"UL")}))},Ge=(De,ge)=>Qt=>vo(De,kn=>Qt.setEnabled(ze(kn.parents,ge)&&!Xo(De,kn.element))),Ue=De=>{const ge={text:"List properties...",icon:"ordered-list",onAction:()=>De.execCommand("mceListProps"),onSetup:Ge(De,"OL")};De.ui.registry.addMenuItem("listprops",ge),De.ui.registry.addContextMenu("lists",{update:Qt=>{const xn=B(De,Qt);return er(xn)?["listprops"]:[]}})};var ne=()=>{k.add("lists",De=>(Po(De),Ce(De),Ue(De),F(De)))};ne()})();(function(){var k=tinymce.util.Tools.resolve("tinymce.PluginManager");const F=(I,J,se)=>{var Re;return se(I,J.prototype)?!0:((Re=I.constructor)==null?void 0:Re.name)===J.name},$=I=>{const J=typeof I;return I===null?"null":J==="object"&&Array.isArray(I)?"array":J==="object"&&F(I,String,(se,Re)=>Re.isPrototypeOf(se))?"string":J},Q=I=>J=>$(J)===I,ue=I=>J=>typeof J===I,ye=I=>J=>I===J,re=Q("string"),be=Q("object"),we=Q("array"),nt=ye(null),xt=ue("boolean"),_t=I=>I==null,rn=I=>!_t(I),zt=ue("function"),In=(I,J)=>{if(we(I)){for(let se=0,Re=I.length;se<Re;++se)if(!J(I[se]))return!1;return!0}return!1},jt=()=>{},et=I=>()=>I,dn=I=>I,Yn=(I,J)=>I===J,Hn=class Hn{constructor(J,se){Ze(this,"tag");Ze(this,"value");this.tag=J,this.value=se}static some(J){return new Hn(!0,J)}static none(){return Hn.singletonNone}fold(J,se){return this.tag?se(this.value):J()}isSome(){return this.tag}isNone(){return!this.tag}map(J){return this.tag?Hn.some(J(this.value)):Hn.none()}bind(J){return this.tag?J(this.value):Hn.none()}exists(J){return this.tag&&J(this.value)}forall(J){return!this.tag||J(this.value)}filter(J){return!this.tag||J(this.value)?this:Hn.none()}getOr(J){return this.tag?this.value:J}or(J){return this.tag?this:J}getOrThunk(J){return this.tag?this.value:J()}orThunk(J){return this.tag?this:J()}getOrDie(J){if(this.tag)return this.value;throw new Error(J??"Called getOrDie on None")}static from(J){return rn(J)?Hn.some(J):Hn.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(J){this.tag&&J(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}};Ze(Hn,"singletonNone",new Hn(!1));let U=Hn;const At=Array.prototype.indexOf,wn=Array.prototype.push,Yt=(I,J)=>At.call(I,J),ie=(I,J)=>Yt(I,J)>-1,Et=(I,J)=>{const se=I.length,Re=new Array(se);for(let Qe=0;Qe<se;Qe++){const Dt=I[Qe];Re[Qe]=J(Dt,Qe)}return Re},Je=(I,J)=>{for(let se=0,Re=I.length;se<Re;se++){const Qe=I[se];J(Qe,se)}},Le=(I,J,se)=>(Je(I,(Re,Qe)=>{se=J(se,Re,Qe)}),se),de=I=>{const J=[];for(let se=0,Re=I.length;se<Re;++se){if(!we(I[se]))throw new Error("Arr.flatten item "+se+" was not an array, input: "+I);wn.apply(J,I[se])}return J},X=(I,J)=>de(Et(I,J)),Fn=(I,J)=>J>=0&&J<I.length?U.some(I[J]):U.none(),Cn=I=>Fn(I,0),yt=(I,J)=>{for(let se=0;se<I.length;se++){const Re=J(I[se],se);if(Re.isSome())return Re}return U.none()},T=Object.keys,bo=Object.hasOwnProperty,qe=(I,J)=>{const se=T(I);for(let Re=0,Qe=se.length;Re<Qe;Re++){const Dt=se[Re],_n=I[Dt];J(_n,Dt)}},Fo=I=>(J,se)=>{I[se]=J},an=(I,J,se,Re)=>{qe(I,(Qe,Dt)=>{(J(Qe,Dt)?se:Re)(Qe,Dt)})},ze=(I,J)=>{const se={};return an(I,J,Fo(se),jt),se},vo=(I,J)=>bo.call(I,J),Qs=(I,J)=>vo(I,J)&&I[J]!==void 0&&I[J]!==null,Xo=I=>{let J=I;return{get:()=>J,set:Qe=>{J=Qe}}},er=(I,J,se=Yn)=>I.exists(Re=>se(Re,J)),$e=I=>{const J=[],se=Re=>{J.push(Re)};for(let Re=0;Re<I.length;Re++)I[Re].each(se);return J},gt=(I,J)=>I?U.some(J):U.none(),B=I=>{const J=Xo(U.none()),se=()=>J.get().each(I);return{clear:()=>{se(),J.set(U.none())},isSet:()=>J.get().isSome(),get:()=>J.get(),set:uo=>{se(),J.set(U.some(uo))}}},Qc=()=>{const I=B(jt);return{...I,on:se=>I.get().each(se)}},Co=(I,J)=>I.substring(J),gs=(I,J,se)=>J===""||I.length>=J.length&&I.substr(se,se+J.length)===J,Po=(I,J)=>Yr(I,J)?Co(I,J.length):I,Yr=(I,J)=>gs(I,J,0),Ce=I=>J=>J.options.get(I),Ge=I=>{const J=I.options.register;J("link_assume_external_targets",{processor:se=>{const Re=re(se)||xt(se);return Re?se===!0?{value:1,valid:Re}:se==="http"||se==="https"?{value:se,valid:Re}:{value:0,valid:Re}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),J("link_context_toolbar",{processor:"boolean",default:!1}),J("link_list",{processor:se=>re(se)||zt(se)||In(se,be)}),J("link_default_target",{processor:"string"}),J("link_default_protocol",{processor:"string",default:"https"}),J("link_target_list",{processor:se=>xt(se)||In(se,be),default:!0}),J("link_rel_list",{processor:"object[]",default:[]}),J("link_class_list",{processor:"object[]",default:[]}),J("link_title",{processor:"boolean",default:!0}),J("allow_unsafe_link_target",{processor:"boolean",default:!1}),J("link_quicklink",{processor:"boolean",default:!1}),J("link_attributes_postprocess",{processor:"function"}),J("files_upload_handler",{processor:"function"}),J("link_uploadtab",{processor:"boolean",default:!0})},Ue=Ce("link_assume_external_targets"),ne=Ce("link_context_toolbar"),Vn=Ce("link_list"),De=Ce("link_default_target"),ge=Ce("link_default_protocol"),Qt=Ce("link_target_list"),xn=Ce("link_rel_list"),kn=Ce("link_class_list"),pr=Ce("link_title"),To=Ce("allow_unsafe_link_target"),qu=Ce("link_quicklink"),S2=Ce("link_attributes_postprocess"),ic=Ce("files_upload_handler"),mo=Ce("link_uploadtab"),ul=Ce("documents_file_types"),Cs=I=>rn(I.options.get("files_upload_handler")),Ds=I=>rn(I.options.get("documents_file_types"));var tf=tinymce.util.Tools.resolve("tinymce.util.URI"),ou=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Ea=tinymce.util.Tools.resolve("tinymce.util.Tools");const Vs=I=>rn(I)&&I.nodeName.toLowerCase()==="a",Tr=I=>Vs(I)&&!!_i(I),Mr=(I,J)=>{if(I.collapsed)return[];{const se=I.cloneContents(),Re=se.firstChild,Qe=new ou(Re,se),Dt=[];let _n=Re;do J(_n)&&Dt.push(_n);while(_n=Qe.next());return Dt}},ki=I=>/^\w+:/i.test(I),_i=I=>I.getAttribute("data-mce-href")??I.getAttribute("href")??"",It=(I,J)=>{const se=["noopener"],Re=I?I.split(/\s+/):[],Qe=so=>Ea.trim(so.sort().join(" ")),Dt=so=>(so=_n(so),so.length>0?so.concat(se):se),_n=so=>so.filter(Rs=>Ea.inArray(se,Rs)===-1),uo=J?Dt(Re):_n(Re);return uo.length>0?Qe(uo):""},So=I=>I.replace(/\uFEFF/g,""),Bn=(I,J)=>(J=J||Bt(I.selection.getRng())[0]||I.selection.getNode(),ei(J)?U.from(I.dom.select("a[href]",J)[0]):U.from(I.dom.getParent(J,"a[href]"))),Yd=(I,J)=>Bn(I,J).isSome(),lc=(I,J)=>{const se=J.fold(()=>I.getContent({format:"text"}),Re=>Re.innerText||Re.textContent||"");return So(se)},Bt=I=>Mr(I,Tr),Ku=I=>Ea.grep(I,Tr),c0=I=>Ku(I).length>0,nf=I=>Bt(I).length>0,dl=I=>{const J=I.schema.getTextInlineElements(),se=Dt=>Dt.nodeType===1&&!Vs(Dt)&&!vo(J,Dt.nodeName.toLowerCase());if(Bn(I).exists(Dt=>Dt.hasAttribute("data-mce-block")))return!1;const Qe=I.selection.getRng();return Qe.collapsed?!0:Mr(Qe,se).length===0},ei=I=>rn(I)&&I.nodeName==="FIGURE"&&/\bimage\b/i.test(I.className),Jo=I=>new Promise((J,se)=>{const Re=new FileReader;Re.onload=()=>{J(Re.result)},Re.onerror=()=>{var Qe;se(new Error(((Qe=Re.error)==null?void 0:Qe.message)??"Failed to convert blob to a data url"))},Re.readAsDataURL(I)}),Sn=I=>Le(["title","rel","class","target"],(se,Re)=>(I[Re].each(Qe=>{se[Re]=Qe.length>0?Qe:null}),se),{href:I.href}),Ss=(I,J)=>(J==="http"||J==="https")&&!ki(I)?J+"://"+I:I,i0=(I,J)=>{const se={...J};if(xn(I).length===0&&!To(I)){const Re=It(se.rel,se.target==="_blank");se.rel=Re||null}return U.from(se.target).isNone()&&Qt(I)===!1&&(se.target=De(I)),se.href=Ss(se.href,Ue(I)),se},Jh=(I,J,se,Re)=>{se.each(Dt=>{vo(J,"innerText")?J.innerText=Dt:J.textContent=Dt}),I.dom.setAttribs(J,Re);const Qe=I.dom.createRng();Qe.setStartAfter(J),Qe.setEndAfter(J),I.selection.setRng(Qe)},ml=(I,J,se,Re)=>{const Qe=I.dom;ei(J)?dg(Qe,J,Re):se.fold(()=>{I.execCommand("mceInsertLink",!1,Re);const Dt=I.selection.getEnd(),_n=Qe.createRng();_n.setStartAfter(Dt),_n.setEndAfter(Dt),I.selection.setRng(_n)},Dt=>{I.insertContent(Qe.createHTML("a",Re,Qe.encode(Dt)))})},Xt=(I,J,se)=>{const Re=I.selection.getNode(),Qe=Bn(I,Re),Dt=i0(I,Sn(se)),_n=S2(I);rn(_n)&&_n(Dt),I.undoManager.transact(()=>{se.href===J.href&&J.attach(),Qe.fold(()=>{ml(I,Re,se.text,Dt)},uo=>{I.focus(),Jh(I,uo,se.text,Dt)})})},uc=I=>{const J=I.dom,se=I.selection,Re=se.getBookmark(),Qe=se.getRng().cloneRange(),Dt=J.getParent(Qe.startContainer,"a[href]",I.getBody()),_n=J.getParent(Qe.endContainer,"a[href]",I.getBody());Dt&&Qe.setStartBefore(Dt),_n&&Qe.setEndAfter(_n),se.setRng(Qe),I.execCommand("unlink"),se.moveToBookmark(Re)},Xd=I=>{I.undoManager.transact(()=>{const J=I.selection.getNode();ei(J)?Qh(I,J):uc(I),I.focus()})},w2=I=>{const{class:J,href:se,rel:Re,target:Qe,text:Dt,title:_n}=I;return ze({class:J.getOrNull(),href:se,rel:Re.getOrNull(),target:Qe.getOrNull(),text:Dt.getOrNull(),title:_n.getOrNull()},(uo,so)=>nt(uo)===!1)},ma=(I,J)=>{const se=I.options.get,Re={allow_html_data_urls:se("allow_html_data_urls"),allow_script_urls:se("allow_script_urls"),allow_svg_data_urls:se("allow_svg_data_urls")},Qe=J.href;return{...J,href:tf.isDomSafe(Qe,"a",Re)?Qe:""}},x2=(I,J,se)=>{const Re=ma(I,se);I.hasPlugin("rtc",!0)?I.execCommand("createlink",!1,w2(Re)):Xt(I,J,Re)},fa=I=>{I.hasPlugin("rtc",!0)?I.execCommand("unlink"):Xd(I)},Qh=(I,J)=>{var Re;const se=I.dom.select("img",J)[0];if(se){const Qe=I.dom.getParents(se,"a[href]",J)[0];Qe&&((Re=Qe.parentNode)==null||Re.insertBefore(se,Qe),I.dom.remove(Qe))}},dg=(I,J,se)=>{var Qe;const Re=I.select("img",J)[0];if(Re){const Dt=I.create("a",se);(Qe=Re.parentNode)==null||Qe.insertBefore(Dt,Re),Dt.appendChild(Re)}},ep=I=>re(I.value)?I.value:"",Yu=I=>re(I.text)?I.text:re(I.title)?I.title:"",Xr=(I,J)=>{const se=[];return Ea.each(I,Re=>{const Qe=Yu(Re);if(Re.menu!==void 0){const Dt=Xr(Re.menu,J);se.push({text:Qe,items:Dt})}else{const Dt=J(Re);se.push({text:Qe,value:Dt})}}),se},tp=(I=ep)=>J=>U.from(J).map(se=>Xr(se,I)),Bc={sanitize:I=>tp(ep)(I),sanitizeWith:tp,createUi:(I,J)=>se=>({name:I,type:"listbox",label:J,items:se}),getValue:ep},mg=I=>Qs(I,"items"),fg=(I,J)=>yt(J,se=>mg(se)?fg(I,se.items):gt(se.value===I,se)),$o=(I,J,se,Re)=>{const Qe=Re[J],Dt=I.length>0;return Qe!==void 0?fg(Qe,se).map(_n=>({url:{value:_n.value,meta:{text:Dt?I:_n.text,attach:jt}},text:Dt?I:_n.text})):U.none()},gg=(I,J)=>J==="link"?I.link:J==="anchor"?I.anchor:U.none(),tr={init:(I,J)=>{const se={text:I.text,title:I.title},Re=so=>{var Rs;return gt(se.title.length<=0,U.from((Rs=so.meta)==null?void 0:Rs.title).getOr(""))},Qe=so=>{var Rs;return gt(se.text.length<=0,U.from((Rs=so.meta)==null?void 0:Rs.text).getOr(so.value))},Dt=so=>{const Rs=Qe(so.url),Es=Re(so.url);return Rs.isSome()||Es.isSome()?U.some({...Rs.map(nd=>({text:nd})).getOr({}),...Es.map(nd=>({title:nd})).getOr({})}):U.none()},_n=(so,Rs)=>{const Es=gg(J,Rs).getOr([]);return $o(se.text,Rs,Es,so)};return{onChange:(so,Rs)=>{const Es=Rs.name;return Es==="url"?Dt(so()):ie(["anchor","link"],Es)?_n(so(),Es):((Es==="text"||Es==="title")&&(se[Es]=so()[Es]),U.none())}}},getDelta:$o};var Xu=tinymce.util.Tools.resolve("tinymce.util.Delay");const np=(I,J,se)=>{const Re=I.selection.getRng();Xu.setEditorTimeout(I,()=>{I.windowManager.confirm(J,Qe=>{I.selection.setRng(Re),se(Qe)})})},ni=I=>{const J=I.href;return J.indexOf("@")>0&&J.indexOf("/")===-1&&J.indexOf("mailto:")===-1?U.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:Re=>({...Re,href:"mailto:"+J})}):U.none()},Ta=(I,J)=>se=>{const Re=se.href;return I===1&&!ki(Re)||I===0&&/^\s*www(\.|\d\.)/i.test(Re)?U.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${J}:// prefix?`,preprocess:Dt=>({...Dt,href:J+"://"+Re})}):U.none()},dc={preprocess:(I,J)=>yt([ni,Ta(Ue(I),ge(I))],se=>se(J)).fold(()=>Promise.resolve(J),se=>new Promise(Re=>{np(I,se.message,Qe=>{Re(Qe?se.preprocess(J):J)})}))},T2={getAnchors:I=>{const J=I.dom.select("a:not([href])"),se=X(J,Re=>{const Qe=Re.name||Re.id;return Qe?[{text:Qe,value:"#"+Qe}]:[]});return se.length>0?U.some([{text:"None",value:""}].concat(se)):U.none()}},l0={getClasses:I=>{const J=kn(I);return J.length>0?Bc.sanitize(J):U.none()}},ru=I=>{try{return U.some(JSON.parse(I))}catch{return U.none()}},Us={getLinks:I=>{const J=Re=>I.convertURL(Re.value||Re.url||"","href"),se=Vn(I);return new Promise(Re=>{re(se)?fetch(se).then(Qe=>Qe.ok?Qe.text().then(ru):Promise.reject()).then(Re,()=>Re(U.none())):zt(se)?se(Qe=>Re(U.some(Qe))):Re(U.from(se))}).then(Re=>Re.bind(Bc.sanitizeWith(J)).map(Qe=>Qe.length>0?[{text:"None",value:""}].concat(Qe):Qe))}},ga={getRels:(I,J)=>{const se=xn(I);if(se.length>0){const Re=er(J,"_blank"),Qe=To(I)===!1,Dt=uo=>It(Bc.getValue(uo),Re);return(Qe?Bc.sanitizeWith(Dt):Bc.sanitize)(se)}return U.none()}},ka=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],op={getTargets:I=>{const J=Qt(I);return we(J)?Bc.sanitize(J).orThunk(()=>U.some(ka)):J===!1?U.none():U.some(ka)}},hg=(I,J,se)=>{const Re=I.getAttrib(J,se);return Re!==null&&Re.length>0?U.some(Re):U.none()},xs=(I,J)=>{const se=I.dom,Qe=dl(I)?U.some(lc(I.selection,J)):U.none(),Dt=J.bind(Es=>U.from(se.getAttrib(Es,"href"))),_n=J.bind(Es=>U.from(se.getAttrib(Es,"target"))),uo=J.bind(Es=>hg(se,Es,"rel")),so=J.bind(Es=>hg(se,Es,"class")),Rs=J.bind(Es=>hg(se,Es,"title"));return{url:Dt,text:Qe,title:Rs,target:_n,rel:uo,linkClass:so}},fl={collect:(I,J)=>Us.getLinks(I).then(se=>{const Re=Cs(I)&&Ds(I)&&mo(I),Qe=xs(I,J);return{anchor:Qe,catalogs:{targets:op.getTargets(I),rels:ga.getRels(I,Qe.target),classes:l0.getClasses(I),anchor:T2.getAnchors(I),link:se},hasUploadPanel:Re,optNode:J,flags:{titleEnabled:pr(I)}}})},pt={makeTab:I=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput",buttonLabel:"Browse for a file",dropAreaLabel:"Drop a file here",allowedFileTypes:I.map(se=>se.mimeType).join(","),allowedFileExtensions:de(I.map(se=>se.extensions))}]})},Jd=(I,J)=>se=>{const Re=se.getData();if(!Re.url.value){fa(I),se.close();return}const Qe=uo=>U.from(Re[uo]).filter(so=>!er(J.anchor[uo],so)),Dt={href:Re.url.value,text:Qe("text"),target:Qe("target"),rel:Qe("rel"),class:Qe("linkClass"),title:Qe("title")},_n={href:Re.url.value,attach:Re.url.meta!==void 0&&Re.url.meta.attach?Re.url.meta.attach:jt};dc.preprocess(I,Dt).then(uo=>{x2(I,_n,uo)}),se.close()},mc=I=>(J,se)=>ic(I)(J,se),of=I=>U.from(I.split(",")[1]).getOr(""),Zs=(I,J)=>{const se=J.getData();J.block("Uploading file"),Cn(se.fileinput).fold(()=>{J.unblock()},Re=>{const Qe=URL.createObjectURL(Re),Dt=({url:uo,fileName:so})=>{J.setData({text:so,title:so,url:{value:uo,meta:{}}}),J.showTab("general"),J.focus("url")},_n=()=>{J.unblock(),URL.revokeObjectURL(Qe)};Jo(Re).then(uo=>{const so=I.getExistingBlobInfo(of(uo),Re.type),Rs=so&&so.filename()===Re.name?so:I.createBlobCache(Re,Qe,uo);return I.addToBlobCache(Rs),I.uploadFile(Rs,dn)}).then(uo=>{Dt(uo),_n()}).catch(uo=>{_n(),I.alertErr(uo,()=>{J.focus("fileinput")})})})},_2=I=>(J,se,Re)=>{var Qe;return I.editorUpload.blobCache.create({blob:J,blobUri:se,name:(Qe=J.name)==null?void 0:Qe.replace(/\.[^\.]+$/,""),filename:J.name,base64:Re.split(",")[1]})},gl=I=>J=>{I.editorUpload.blobCache.add(J)},Ai=I=>(J,se)=>I.editorUpload.blobCache.getByData(J,se),d0=I=>(J,se)=>{I.windowManager.alert(J,se)},m0=I=>{const J=Bn(I);return fl.collect(I,J)},Ju=(I,J)=>{const se=I.anchor,Re=se.url.getOr("");return{url:{value:Re,meta:{original:{value:Re}}},text:se.text.getOr(""),title:se.title.getOr(""),anchor:Re,link:Re,rel:se.rel.getOr(""),target:se.target.or(J).getOr(""),linkClass:se.linkClass.getOr(""),fileinput:[]}},f0=(I,J,se,Re,Qe,Dt)=>{const _n=de([I,J,se,$e([Re.anchor.map(Bc.createUi("anchor","Anchors")),Re.rels.map(Bc.createUi("rel","Rel")),Re.targets.map(Bc.createUi("target","Open link in...")),Re.link.map(Bc.createUi("link","Link list")),Re.classes.map(Bc.createUi("linkClass","Class"))])]);return Qe?{type:"tabpanel",tabs:de([[{title:"General",name:"general",items:_n}],[pt.makeTab(Dt)]])}:{type:"panel",items:_n}},bg=(I,J,se)=>{const Re=[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],Qe=I.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),Dt=I.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],_n=U.from(De(se)),uo=Ju(I,_n),so=I.catalogs,Rs=tr.init(uo,so),Es=f0(Re,Qe,Dt,so,I.hasUploadPanel,ul(se)),nd={addToBlobCache:gl(se),createBlobCache:_2(se),alertErr:d0(se),uploadFile:mc(se),getExistingBlobInfo:Ai(se)};return{title:"Insert/Edit Link",size:"normal",body:Es,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:uo,onChange:(tm,{name:Pc})=>{Pc==="fileinput"?Zs(nd,tm):Rs.onChange(tm.getData,{name:Pc}).each(b0=>{tm.setData(b0)})},onSubmit:J}},Qu=I=>{m0(I).then(se=>{const Re=Jd(I,se);return bg(se,Re,I)}).then(se=>{I.windowManager.open(se)})},sf=I=>{I.addCommand("mceLink",(J,se)=>{(se==null?void 0:se.dialog)===!0||!qu(I)?Qu(I):I.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})},at=I=>{I.addShortcut("Meta+K","",()=>{I.execCommand("mceLink")})};var vg=tinymce.util.Tools.resolve("tinymce.util.VK");const sp=(I,J)=>{document.body.appendChild(I),I.dispatchEvent(J),document.body.removeChild(I)},hl=I=>{const J=document.createElement("a");J.target="_blank",J.href=I,J.rel="noreferrer noopener";const se=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});document.dispatchEvent(se),sp(J,se)},yg=I=>I.altKey===!0&&I.shiftKey===!1&&I.ctrlKey===!1&&I.metaKey===!1,Cg=(I,J)=>{if(J){const se=_i(J);if(/^#/.test(se)){const Re=I.dom.select(`${se},[name="${Po(se,"#")}"]`);Re.length&&I.selection.scrollIntoView(Re[0],!0)}else hl(J.href)}},fc=I=>{const J=I.selection.getRng(),se=J.startContainer;return Tr(se)&&J.startContainer===J.endContainer&&I.dom.select("img",se).length===1},Sg=(I,J)=>{const se=Ku(I.dom.getParents(J));return gt(se.length===1,se[0])},Qd=I=>{const J=Bt(I.selection.getRng());return gt(J.length>0,J[0]).or(Sg(I,I.selection.getNode()))},em=I=>I.selection.isCollapsed()||fc(I)?Sg(I,I.selection.getStart()):Qd(I),Io=I=>{const J=Qc(),se=()=>J.get().or(em(I)),Re=()=>se().each(Qe=>Cg(I,Qe));return I.on("contextmenu",Qe=>{Sg(I,Qe.target).each(J.set)}),I.on("SelectionChange",()=>{J.isSet()||em(I).each(J.set)}),I.on("click",Qe=>{J.clear();const Dt=Ku(I.dom.getParents(Qe.target));Dt.length===1&&vg.metaKeyPressed(Qe)&&(Qe.preventDefault(),Cg(I,Dt[0]))}),I.on("keydown",Qe=>{J.clear(),!Qe.isDefaultPrevented()&&Qe.keyCode===13&&yg(Qe)&&se().each(Dt=>{Qe.preventDefault(),Cg(I,Dt)})}),{gotoSelectedLink:Re}},wg=I=>()=>{I.execCommand("mceLink",!1,{dialog:!0})},xg=(I,J)=>(I.on("NodeChange",J),()=>I.off("NodeChange",J)),Eg=I=>J=>{const se=()=>{J.setActive(!I.mode.isReadOnly()&&Yd(I,I.selection.getNode())),J.setEnabled(I.selection.isEditable())};return se(),xg(I,se)},g0=I=>J=>{const se=()=>{J.setEnabled(I.selection.isEditable())};return se(),xg(I,se)},ed=I=>J=>{const se=Dt=>c0(Dt)||nf(I.selection.getRng()),Re=I.dom.getParents(I.selection.getStart()),Qe=Dt=>{J.setEnabled(se(Dt)&&I.selection.isEditable())};return Qe(Re),xg(I,Dt=>Qe(Dt.parents))},si=(I,J)=>{I.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onAction:wg(I),onSetup:Eg(I)}),I.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:J.gotoSelectedLink,onSetup:ed(I)}),I.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>fa(I),onSetup:ed(I)})},h0=(I,J)=>{I.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:J.gotoSelectedLink,onSetup:ed(I)}),I.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:wg(I),onSetup:g0(I)}),I.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>fa(I),onSetup:ed(I)})},au=I=>{const J="link unlink openlink",se="link";I.ui.registry.addContextMenu("link",{update:Re=>I.dom.isEditable(Re)?c0(I.dom.getParents(Re,"a"))?J:se:""})},td=(I,J)=>{const se=Dt=>{Dt.selection.collapse(!1)},Re=Dt=>{const _n=I.selection.getNode();return Dt.setEnabled(Yd(I,_n)&&I.selection.isEditable()),jt},Qe=Dt=>{const _n=Bn(I),uo=dl(I);if(_n.isNone()&&uo){const so=lc(I.selection,_n);return gt(so.length===0,Dt)}else return U.none()};I.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:Eg(I)},label:"Link",predicate:Dt=>ne(I)&&Yd(I,Dt),initValue:()=>Bn(I).fold(et(""),_i),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:Dt=>{const _n=I.selection.getNode();return Dt.setActive(Yd(I,_n)),Eg(I)(Dt)},onAction:Dt=>{const _n=Dt.getValue(),uo=Qe(_n);x2(I,{href:_n,attach:jt},{href:_n,text:uo,title:U.none(),rel:U.none(),target:U.from(De(I)),class:U.none()}),se(I),Dt.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:Re,onAction:Dt=>{fa(I),Dt.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:Re,onAction:Dt=>{J.gotoSelectedLink(),Dt.hide()}}]})},p0=I=>{const J=Io(I);si(I,J),h0(I,J),au(I),td(I,J)};var Tg=()=>{k.add("link",I=>{Ge(I),sf(I),p0(I),at(I)})};Tg()})();(function(){var k=tinymce.util.Tools.resolve("tinymce.PluginManager");const F=(be,we)=>{be.focus(),be.undoManager.transact(()=>{be.setContent(we)}),be.selection.setCursorLocation(),be.nodeChanged()},$=be=>be.getContent({source_view:!0}),Q=be=>{const we=$(be);be.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code",spellcheck:!1}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:we},onSubmit:nt=>{F(be,nt.getData().code),nt.close()}})},ue=be=>{be.addCommand("mceCodeEditor",()=>{Q(be)})},ye=be=>{const we=()=>be.execCommand("mceCodeEditor");be.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:we}),be.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:we})};var re=()=>{k.add("code",be=>(ue(be),ye(be),{}))};re()})();(function(){var k=tinymce.util.Tools.resolve("tinymce.PluginManager");const F=(Ce,Ge,Ue)=>{var ne;return Ue(Ce,Ge.prototype)?!0:((ne=Ce.constructor)==null?void 0:ne.name)===Ge.name},$=Ce=>{const Ge=typeof Ce;return Ce===null?"null":Ge==="object"&&Array.isArray(Ce)?"array":Ge==="object"&&F(Ce,String,(Ue,ne)=>ne.isPrototypeOf(Ue))?"string":Ge},Q=Ce=>Ge=>$(Ge)===Ce,ue=Ce=>Ge=>typeof Ge===Ce,ye=Q("string"),re=ue("boolean"),be=Ce=>Ce==null,we=Ce=>!be(Ce),nt=ue("function"),_t=(Ce=>()=>Ce)(!1),Yr=class Yr{constructor(Ge,Ue){Ze(this,"tag");Ze(this,"value");this.tag=Ge,this.value=Ue}static some(Ge){return new Yr(!0,Ge)}static none(){return Yr.singletonNone}fold(Ge,Ue){return this.tag?Ue(this.value):Ge()}isSome(){return this.tag}isNone(){return!this.tag}map(Ge){return this.tag?Yr.some(Ge(this.value)):Yr.none()}bind(Ge){return this.tag?Ge(this.value):Yr.none()}exists(Ge){return this.tag&&Ge(this.value)}forall(Ge){return!this.tag||Ge(this.value)}filter(Ge){return!this.tag||Ge(this.value)?this:Yr.none()}getOr(Ge){return this.tag?this.value:Ge}or(Ge){return this.tag?this:Ge}getOrThunk(Ge){return this.tag?this.value:Ge()}orThunk(Ge){return this.tag?this:Ge()}getOrDie(Ge){if(this.tag)return this.value;throw new Error(Ge??"Called getOrDie on None")}static from(Ge){return we(Ge)?Yr.some(Ge):Yr.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Ge){this.tag&&Ge(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}};Ze(Yr,"singletonNone",new Yr(!1));let rn=Yr;const zt=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let In=0;const jt=Ce=>{const Ue=new Date().getTime(),ne=Math.floor(zt()*1e9);return In++,Ce+"_"+ne+In+String(Ue)},et=(Ce,Ge,Ue)=>{Ce.execCommand("mceInsertTable",!1,{rows:Ue,columns:Ge})},dn=(Ce,Ge,Ue)=>{const ne=Ce.editorUpload.blobCache,Vn=ne.create(jt("mceu"),Ue,Ge);ne.add(Vn),Ce.insertContent(Ce.dom.createHTML("img",{src:Vn.blobUri()}))},Yn=Ce=>new Promise(Ge=>{const Ue=new FileReader;Ue.onloadend=()=>{Ge(Ue.result.split(",")[1])},Ue.readAsDataURL(Ce)});var U=tinymce.util.Tools.resolve("tinymce.util.Delay");const At=Ce=>new Promise(Ge=>{let Ue=!1;const ne=document.createElement("input");ne.type="file",ne.accept="image/*",ne.style.position="fixed",ne.style.left="0",ne.style.top="0",ne.style.opacity="0.001",document.body.appendChild(ne);const Vn=Qt=>{var xn;Ue||((xn=ne.parentNode)==null||xn.removeChild(ne),Ue=!0,Ge(Qt))},De=Qt=>{Vn(Array.prototype.slice.call(Qt.target.files))};ne.addEventListener("input",De),ne.addEventListener("change",De);const ge=Qt=>{const xn=()=>{Vn([])};Ue||(Qt.type==="focusin"?U.setEditorTimeout(Ce,xn,1e3):xn()),Ce.off("focusin remove",ge)};Ce.on("focusin remove",ge),ne.click()}),wn=Ce=>{Ce.on("PreInit",()=>{Ce.queryCommandSupported("QuickbarInsertImage")||Ce.addCommand("QuickbarInsertImage",()=>{At(Ce).then(Ge=>{if(Ge.length>0){const Ue=Ge[0];Yn(Ue).then(ne=>{dn(Ce,ne,Ue)})}})})})},Yt=Ce=>Ge=>Ge.options.get(Ce),ie=Ce=>{const Ge=Ce.options.register,Ue=ge=>Qt=>{const xn=re(Qt)||ye(Qt);return xn?re(Qt)?{value:Qt?ge:"",valid:xn}:{value:Qt.trim(),valid:xn}:{valid:!1,message:"Must be a boolean or string."}},ne="bold italic | quicklink h2 h3 blockquote";Ge("quickbars_selection_toolbar",{processor:Ue(ne),default:ne});const Vn="quickimage quicktable";Ge("quickbars_insert_toolbar",{processor:Ue(Vn),default:Vn});const De="alignleft aligncenter alignright";Ge("quickbars_image_toolbar",{processor:Ue(De),default:De})},Et=Yt("quickbars_selection_toolbar"),Je=Yt("quickbars_insert_toolbar"),Le=Yt("quickbars_image_toolbar"),de=Ce=>{Ce.ui.registry.addButton("quickimage",{icon:"image",tooltip:"Insert image",onAction:()=>Ce.execCommand("QuickbarInsertImage")}),Ce.ui.registry.addButton("quicktable",{icon:"table",tooltip:"Insert table",onAction:()=>{et(Ce,2,2)}})},X=(Ce,Ge)=>{const ne=(Ge||document).createElement("div");if(ne.innerHTML=Ce,!ne.hasChildNodes()||ne.childNodes.length>1){const Vn="HTML does not have a single root node";throw console.error(Vn,Ce),new Error(Vn)}return yt(ne.childNodes[0])},Fn=(Ce,Ge)=>{const ne=(Ge||document).createElement(Ce);return yt(ne)},Cn=(Ce,Ge)=>{const ne=(Ge||document).createTextNode(Ce);return yt(ne)},yt=Ce=>{if(Ce==null)throw new Error("Node cannot be null or undefined");return{dom:Ce}},bo={fromHtml:X,fromTag:Fn,fromText:Cn,fromDom:yt,fromPoint:(Ce,Ge,Ue)=>rn.from(Ce.dom.elementFromPoint(Ge,Ue)).map(yt)},qe=1,Fo=(Ce,Ge)=>{const Ue=Ce.dom;if(Ue.nodeType!==qe)return!1;{const ne=Ue;if(ne.matches!==void 0)return ne.matches(Ge);if(ne.msMatchesSelector!==void 0)return ne.msMatchesSelector(Ge);if(ne.webkitMatchesSelector!==void 0)return ne.webkitMatchesSelector(Ge);if(ne.mozMatchesSelector!==void 0)return ne.mozMatchesSelector(Ge);throw new Error("Browser lacks native selectors")}},an=Ce=>Ce.dom.nodeName.toLowerCase(),ze=(Ce,Ge)=>{const Ue=Ce.dom;return Ue&&Ue.hasAttribute?Ue.hasAttribute(Ge):!1};var vo=(Ce,Ge,Ue,ne,Vn)=>Ce(Ue,ne)?rn.some(Ue):nt(Vn)&&Vn(Ue)?rn.none():Ge(Ue,ne,Vn);const Qs=(Ce,Ge,Ue)=>{let ne=Ce.dom;const Vn=nt(Ue)?Ue:_t;for(;ne.parentNode;){ne=ne.parentNode;const De=bo.fromDom(ne);if(Ge(De))return rn.some(De);if(Vn(De))break}return rn.none()},Xo=(Ce,Ge,Ue)=>vo((Vn,De)=>De(Vn),Qs,Ce,Ge,Ue),er=(Ce,Ge,Ue)=>Qs(Ce,ne=>Fo(ne,Ge),Ue),$e=(Ce,Ge,Ue)=>vo((Vn,De)=>Fo(Vn,De),er,Ce,Ge,Ue),gt=Ce=>Ce.dom.classList!==void 0,B=(Ce,Ge)=>gt(Ce)&&Ce.dom.classList.contains(Ge),Qc=(Ce,Ge,Ue)=>Xo(Ce,Ge,Ue).isSome(),Co=Ce=>{const Ge=Je(Ce);Ge.length>0&&Ce.ui.registry.addContextToolbar("quickblock",{predicate:Ue=>{const ne=bo.fromDom(Ue),Vn=Ce.schema.getTextBlockElements(),De=ge=>ge.dom===Ce.getBody();return!ze(ne,"data-mce-bogus")&&$e(ne,'table,[data-mce-bogus="all"]',De).fold(()=>Qc(ne,ge=>an(ge)in Vn&&Ce.dom.isEmpty(ge.dom),De),_t)},items:Ge,position:"line",scope:"editor"})},gs=Ce=>{const Ge=ge=>Ce.dom.isEditable(ge),Ue=ge=>Ge(ge.parentElement),ne=ge=>{const Qt=ge.nodeName==="FIGURE"&&/image/i.test(ge.className),xn=ge.nodeName==="IMG"||Qt,kn=B(bo.fromDom(ge),"mce-pagebreak");return xn&&Ue(ge)&&!kn},Vn=Le(Ce);Vn.length>0&&Ce.ui.registry.addContextToolbar("imageselection",{predicate:ne,items:Vn,position:"node"});const De=Et(Ce);De.length>0&&Ce.ui.registry.addContextToolbar("textselection",{predicate:ge=>!ne(ge)&&!Ce.selection.isCollapsed()&&Ge(ge),items:De,position:"selection",scope:"editor"})};var Po=()=>{k.add("quickbars",Ce=>{ie(Ce),wn(Ce),de(Ce),Co(Ce),gs(Ce)})};Po()})();var Bne=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCommentChange","onCompositionEnd","onCompositionStart","onCompositionUpdate","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onInput","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],Pne=function(k){return Bne.map(function(F){return F.toLowerCase()}).indexOf(k.toLowerCase())!==-1},$ne=function(k,F,$){Object.keys(F).filter(Pne).forEach(function(Q){var ue=F[Q];typeof ue=="function"&&(Q==="onInit"?ue(k,$):$.on(Q.substring(2),function(ye){return ue(ye,$)}))})},Ine=function(k,F,$,Q){var ue=k.modelEvents?k.modelEvents:null,ye=Array.isArray(ue)?ue.join(" "):ue;y2(Q,function(re,be){$&&typeof re=="string"&&re!==be&&re!==$.getContent({format:k.outputFormat})&&$.setContent(re)}),$.on(ye||"change input undo redo",function(){F.emit("update:modelValue",$.getContent({format:k.outputFormat}))})},Lne=function(k,F,$,Q,ue,ye){Q.setContent(ye()),$.attrs["onUpdate:modelValue"]&&Ine(F,$,Q,ue),$ne(k,$.attrs,Q)},GQ=0,Cee=function(k){var F=Date.now(),$=Math.floor(Math.random()*1e9);return GQ++,k+"_"+$+GQ+String(F)},Fne=function(k){return k!==null&&k.tagName.toLowerCase()==="textarea"},qQ=function(k){return typeof k>"u"||k===""?[]:Array.isArray(k)?k:k.split(" ")},Hne=function(k,F){return qQ(k).concat(qQ(F))},zne=function(k){return k==null},KQ=function(k){var F;return typeof((F=k.options)===null||F===void 0?void 0:F.set)=="function"&&k.options.isRegistered("disabled")},YQ=function(){return{listeners:[],scriptId:Cee("tiny-script"),scriptLoaded:!1}},Vne=function(){var k=YQ(),F=function(ue,ye,re,be){var we=ye.createElement("script");we.referrerPolicy="origin",we.type="application/javascript",we.id=ue,we.src=re;var nt=function(){we.removeEventListener("load",nt),be()};we.addEventListener("load",nt),ye.head&&ye.head.appendChild(we)},$=function(ue,ye,re){k.scriptLoaded?re():(k.listeners.push(re),ue.getElementById(k.scriptId)||F(k.scriptId,ue,ye,function(){k.listeners.forEach(function(be){return be()}),k.scriptLoaded=!0}))},Q=function(){k=YQ()};return{load:$,reinitialize:Q}},Une=Vne(),Zne=function(){return typeof window<"u"?window:global},Mw=function(){var k=Zne();return k&&k.tinymce?k.tinymce:null},Wne={apiKey:String,licenseKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,readonly:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(k){return k==="html"||k==="text"}}},Kh=function(){return Kh=Object.assign||function(k){for(var F,$=1,Q=arguments.length;$<Q;$++){F=arguments[$];for(var ue in F)Object.prototype.hasOwnProperty.call(F,ue)&&(k[ue]=F[ue])}return k},Kh.apply(this,arguments)},jne=function(k,F,$,Q){return k(Q||"div",{id:F,ref:$})},Gne=function(k,F,$){return k("textarea",{id:F,visibility:"hidden",ref:$})},iJ={selector:void 0,target:void 0},lJ=function(k,F){var $;typeof(($=k.mode)===null||$===void 0?void 0:$.set)=="function"?k.mode.set(F):k.setMode(F)},qne=e6({props:Wne,setup:function(k,F){var $=k.init?Kh(Kh({},k.init),iJ):Kh({},iJ),Q=XQ(k),ue=Q.disabled,ye=Q.readonly,re=Q.modelValue,be=Q.tagName,we=zs(null),nt=null,xt=k.id||Cee("tiny-vue"),_t=k.init&&k.init.inline||k.inline,rn=!!F.attrs["onUpdate:modelValue"],zt=!0,In=k.initialValue?k.initialValue:"",jt="",et=function(U){return rn?function(){return re!=null&&re.value?re.value:""}:function(){return U?In:jt}},dn=function(){var U=et(zt),At=Kh(Kh({},$),{disabled:k.disabled,readonly:k.readonly,target:we.value,plugins:Hne($.plugins,k.plugins),toolbar:k.toolbar||$.toolbar,inline:_t,license_key:k.licenseKey,setup:function(wn){nt=wn,!KQ(nt)&&k.disabled===!0&&lJ(nt,"readonly"),wn.on("init",function(Yt){return Lne(Yt,k,F,wn,re,U)}),typeof $.setup=="function"&&$.setup(wn)}});Fne(we.value)&&(we.value.style.visibility=""),Mw().init(At),zt=!1};y2(ye,function(U){nt!==null&&lJ(nt,U?"readonly":"design")}),y2(ue,function(U){nt!==null&&(KQ(nt)?nt.options.set("disabled",U):lJ(nt,U?"readonly":"design"))}),y2(be,function(U){var At;nt&&(rn||(jt=nt.getContent()),(At=Mw())===null||At===void 0||At.remove(nt),kH(function(){return dn()}))}),t6(function(){if(Mw()!==null)dn();else if(we.value&&we.value.ownerDocument){var U=k.cloudChannel?k.cloudChannel:"8",At=k.apiKey?k.apiKey:"no-api-key",wn=zne(k.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/".concat(At,"/tinymce/").concat(U,"/tinymce.min.js"):k.tinymceScriptSrc;Une.load(we.value.ownerDocument,wn,dn)}}),Aee(function(){Mw()!==null&&Mw().remove(nt)}),_t||(Oee(function(){zt||dn()}),Dee(function(){var U;nt&&(rn||(jt=nt.getContent()),(U=Mw())===null||U===void 0||U.remove(nt))}));var Yn=function(U){var At;nt&&(jt=nt.getContent(),(At=Mw())===null||At===void 0||At.remove(nt),$=Kh(Kh(Kh({},$),U),iJ),kH(function(){return dn()}))};return F.expose({rerender:Yn,getEditor:function(){return nt}}),function(){return _t?jne(uJ,xt,we,k.tagName):Gne(uJ,xt,we)}}});const cc=k=>(bJ("data-v-d6ce2c86"),k=k(),vJ(),k),Kne={class:"event-form-view"},Yne={class:"form-header"},Xne={key:0,class:"event-tabs"},Jne={class:"tab-content"},Qne={class:"form-container"},eoe={class:"form-section"},toe={class:"form-row"},noe={class:"form-group"},ooe=cc(()=>Nt("label",{for:"id"},"Event ID *",-1)),soe=["disabled"],roe=cc(()=>Nt("div",{class:"field-hint"},"Unique identifier (cannot be changed after creation)",-1)),aoe=cc(()=>Nt("div",{class:"field-hint"},"Erlaubte Zeichen: A-Z, a-z, 0-9 und - (keine underscores _)",-1)),coe={class:"form-group"},ioe=cc(()=>Nt("label",{for:"date"},"Date & Time *",-1)),loe={class:"form-group"},uoe=cc(()=>Nt("label",{for:"title"},"Title *",-1)),doe={class:"form-group"},moe=cc(()=>Nt("label",{for:"descriptionShort"},"Short Description *",-1)),foe=cc(()=>Nt("div",{class:"field-hint"},"Rich text editor for event description",-1)),goe={class:"form-row"},hoe={class:"form-group"},poe=cc(()=>Nt("label",{for:"fee"},"VVK Preis",-1)),boe=cc(()=>Nt("div",{class:"field-hint"},"Fee muss eine Zahl sein (z.B. 10 für 10€)",-1)),voe={class:"form-group"},yoe=cc(()=>Nt("label",{for:"feeAk"},"AK Preis",-1)),Coe=cc(()=>Nt("div",{class:"field-hint"},"Fee muss eine Zahl sein (z.B. 8 für 8€)",-1)),Soe={class:"form-group"},woe=cc(()=>Nt("label",{for:"shopLink"},"Ticket Shop Link",-1)),xoe={class:"shop-link-actions"},Eoe=["disabled"],Toe=cc(()=>Nt("div",{class:"field-hint"},"Benötigt: Event ID, Title, Date und Fee (muss eine Zahl sein). Erstellt keinen Event in der Datenbank.",-1)),koe={key:0,class:"success-message"},_oe={class:"form-group"},Aoe=cc(()=>Nt("label",{for:"helferpadLink"},"Helferpad Link",-1)),Ooe={class:"shop-link-actions"},Doe=["disabled"],Roe=cc(()=>Nt("div",{class:"field-hint"},"Benötigt: Event ID",-1)),Moe={key:0,class:"field-hint"},Noe={key:0,class:"success-message"},Boe={class:"form-group"},Poe=cc(()=>Nt("label",null,"Artist Selection",-1)),$oe={class:"form-group"},Ioe=cc(()=>Nt("label",{for:"image"},"Event Image",-1)),Loe={key:0,class:"image-preview"},Foe=["src"],Hoe={class:"preview-label"},zoe=cc(()=>Nt("div",{class:"field-hint"},"Bild: wird resized auf 1000x1000px",-1)),Voe={key:0,class:"error"},Uoe={class:"form-actions"},Zoe=["disabled"],Woe={class:"preview-section"},joe={class:"preview-header"},Goe=cc(()=>Nt("h3",null,"Live Preview",-1)),qoe={key:0,class:"loading-indicator"},Koe={class:"preview-content"},Yoe={key:1,class:"preview-empty"},Xoe=cc(()=>Nt("p",null,"Fill in the form to see preview",-1)),Joe=[Xoe],Qoe={key:1,class:"tab-content"},ese=e6({__name:"EventFormView",props:{id:{}},setup(k){const F=k,$=Ree(),Q=Mee(),ue=zs(!!F.id),ye=zs("details"),re=zs({id:"",date:"",title:"",descriptionShort:"",fee:"",feeAk:"",shopLink:"",helferpadLink:"",artistOrder:"",artist_ids:[]}),be=zs(!1),we=zs(""),nt=zs(null),xt=zs(null),_t=zs(!1),rn=zs(""),zt=zs(!1),In=zs(""),jt=zs([]),et=zs(!1),dn={license_key:"gpl",height:300,menubar:!1,plugins:"lists link code quickbars",toolbar:!1,quickbars_selection_toolbar:"bold italic underline strikethrough | forecolor backcolor | link | blocks | bullist numlist | hr | removeformat | code",content_style:"body { font-family: inherit; font-size: 14px; }",branding:!1,promotion:!1,skin:!1,content_css:!1};function Yn(Je){const Le=Je.target,de=Le.value.replace(/[^A-Za-z0-9-]/g,"");re.value.id=de,Le.value=de}async function U(){if(F.id)try{const Je=await Gh.getById(F.id);re.value={...Je,date:Je.date.substring(0,16),artist_ids:Je.artists.map(Le=>Le.id)},Je.image_url&&(xt.value=Je.image_url)}catch{we.value="Failed to load event"}}function At(Je){const Le=Je.target;if(Le.files&&Le.files[0]){nt.value=Le.files[0];const de=new FileReader;de.onload=X=>{var Fn;xt.value=(Fn=X.target)==null?void 0:Fn.result},de.readAsDataURL(nt.value)}}async function wn(){if(!re.value.id){we.value="Event ID is required to create shop link";return}if(!re.value.title){we.value="Event Title is required to create shop link";return}if(!re.value.date){we.value="Event Date is required to create shop link";return}if(!re.value.fee){we.value="Entry Fee is required to create shop link";return}_t.value=!0,we.value="",rn.value="";try{if(ue.value){const Je=await Gh.cloneToPretix(re.value.id);re.value.shopLink=Je.shopLink}else{const Je=await Gh.createPretixShop({id:re.value.id,title:re.value.title,date:new Date(re.value.date).toISOString(),fee:re.value.fee});re.value.shopLink=Je.shopLink}rn.value="Shop link created successfully!",setTimeout(()=>{rn.value=""},3e3)}catch(Je){we.value=Je.message||"Failed to create shop link"}finally{_t.value=!1}}async function Yt(){if(!re.value.id){we.value="Event ID is required to create Helferpad";return}zt.value=!0,we.value="",In.value="";const Je=!ue.value;try{if(!ue.value){if(!re.value.title){we.value="Event Title is required before creating Helferpad";return}if(!re.value.date){we.value="Event Date is required before creating Helferpad";return}if(!re.value.descriptionShort){we.value="Short Description is required before creating Helferpad";return}const{image:X,image_url:Fn,artists:Cn,...yt}=re.value;yt.date=new Date(re.value.date).toISOString(),await Gh.create(yt),nt.value&&await Gh.uploadImage(yt.id,nt.value),ue.value=!0}const Le={title:re.value.title||"",date:re.value.date?new Date(re.value.date).toISOString():new Date().toISOString(),fee:re.value.fee,shopLink:re.value.shopLink},de=await Gh.createHelferpad(re.value.id,Le);re.value.helferpadLink=de.helferpadLink,In.value=Je?"Event and Helferpad created successfully!":"Helferpad created successfully!",setTimeout(()=>{In.value=""},3e3)}catch(Le){we.value=Le.message||"Failed to create Helferpad"}finally{zt.value=!1}}async function ie(){if(!re.value.id||!re.value.title||!re.value.date||!re.value.descriptionShort){we.value="Please fill in all required fields";return}be.value=!0,we.value="";try{const{image:Je,image_url:Le,artists:de,...X}=re.value;X.date=new Date(re.value.date).toISOString(),ue.value?(await Gh.update(re.value.id,X),nt.value&&await Gh.uploadImage(re.value.id,nt.value)):(await Gh.create(X),nt.value&&await Gh.uploadImage(X.id,nt.value)),$.push("/admin/events")}catch(Je){we.value=Je.message||"Failed to save event"}finally{be.value=!1}}y2(()=>re.value.artist_ids,async Je=>{if(!Je||Je.length===0){jt.value=[];return}et.value=!0;try{const Le=Je.map(de=>VM.getById(de));jt.value=await Promise.all(Le)}catch(Le){console.error("Failed to load artists for preview:",Le),jt.value=[]}finally{et.value=!1}},{deep:!0});const Et=v2(()=>({...re.value,image_url:xt.value||void 0,img:xt.value||void 0,artists:jt.value,descriptionShort:re.value.descriptionShort||"",title:re.value.title||"Untitled Event"}));return t6(async()=>{await U();const Je=Q.query.tab;Je&&["details","checklist"].includes(Je)&&(ye.value=Je)}),(Je,Le)=>{const de=QQ("router-link");return Do(),Lo("div",Kne,[Nt("div",Yne,[Nt("h2",null,$s(ue.value?"Edit Event":"Create Event"),1),Bw(de,{class:"btn-cancel",to:"/admin/events"},{default:qM(()=>[_H("Cancel")]),_:1})]),ue.value?(Do(),Lo("div",Xne,[Nt("button",{class:t3(["tab",{active:ye.value==="details"}]),onClick:Le[0]||(Le[0]=X=>ye.value="details"),type:"button"},"Event Details",2),Nt("button",{class:t3(["tab",{active:ye.value==="checklist"}]),onClick:Le[1]||(Le[1]=X=>ye.value="checklist"),type:"button"},"Checklist",2)])):Nc("",!0),qh(Nt("div",Jne,[Nt("div",Qne,[Nt("div",eoe,[Nt("form",{class:"event-form",onSubmit:CH(ie,["prevent"])},[Nt("div",toe,[Nt("div",noe,[ooe,qh(Nt("input",{id:"id","onUpdate:modelValue":Le[2]||(Le[2]=X=>re.value.id=X),required:"",disabled:ue.value,placeholder:"e.g., event-2025-12-31",onInput:Yn},null,40,soe),[[g2,re.value.id]]),roe,aoe]),Nt("div",coe,[ioe,qh(Nt("input",{id:"date","onUpdate:modelValue":Le[3]||(Le[3]=X=>re.value.date=X),type:"datetime-local",required:""},null,512),[[g2,re.value.date]])])]),Nt("div",loe,[uoe,qh(Nt("input",{id:"title","onUpdate:modelValue":Le[4]||(Le[4]=X=>re.value.title=X),required:"",placeholder:"Event name"},null,512),[[g2,re.value.title]])]),Nt("div",doe,[moe,Bw(nu(qne),{modelValue:re.value.descriptionShort,"onUpdate:modelValue":Le[5]||(Le[5]=X=>re.value.descriptionShort=X),init:dn,licenseKey:"gpl"},null,8,["modelValue"]),foe]),Nt("div",goe,[Nt("div",hoe,[poe,qh(Nt("input",{id:"fee","onUpdate:modelValue":Le[6]||(Le[6]=X=>re.value.fee=X),placeholder:"e.g., 10"},null,512),[[g2,re.value.fee]]),boe]),Nt("div",voe,[yoe,qh(Nt("input",{id:"feeAk","onUpdate:modelValue":Le[7]||(Le[7]=X=>re.value.feeAk=X),placeholder:"e.g., 8"},null,512),[[g2,re.value.feeAk]]),Coe])]),Nt("div",Soe,[woe,qh(Nt("input",{id:"shopLink","onUpdate:modelValue":Le[8]||(Le[8]=X=>re.value.shopLink=X),type:"url",placeholder:"https://..."},null,512),[[g2,re.value.shopLink]]),Nt("div",xoe,[Nt("button",{class:"btn-shop-link",type:"button",onClick:wn,disabled:_t.value},$s(_t.value?"Creating...":"Create Pretix Shop Link"),9,Eoe),Toe]),rn.value?(Do(),Lo("div",koe,$s(rn.value),1)):Nc("",!0)]),Nt("div",_oe,[Aoe,qh(Nt("input",{id:"helferpadLink","onUpdate:modelValue":Le[9]||(Le[9]=X=>re.value.helferpadLink=X),type:"url",placeholder:"https://..."},null,512),[[g2,re.value.helferpadLink]]),Nt("div",Ooe,[Nt("button",{class:"btn-shop-link",type:"button",onClick:Yt,disabled:zt.value},$s(zt.value?"Creating...":"Create Helferpad"),9,Doe),Roe,ue.value?Nc("",!0):(Do(),Lo("div",Moe,"Erstellt auch den Event in der Datenbank."))]),In.value?(Do(),Lo("div",Noe,$s(In.value),1)):Nc("",!0)]),Nt("div",Boe,[Poe,Bw(nne,{modelValue:re.value.artist_ids,"onUpdate:modelValue":Le[10]||(Le[10]=X=>re.value.artist_ids=X),artistOrder:re.value.artistOrder,"onUpdate:artistOrder":Le[11]||(Le[11]=X=>re.value.artistOrder=X)},null,8,["modelValue","artistOrder"])]),Nt("div",$oe,[Ioe,xt.value?(Do(),Lo("div",Loe,[Nt("img",{src:xt.value,alt:"Event image preview"},null,8,Foe),Nt("div",Hoe,$s(nt.value?"Neues Bild (wird hochgeladen)":"Aktuelles Bild"),1)])):Nc("",!0),Nt("input",{id:"image",type:"file",accept:"image/*",onChange:At},null,32),zoe]),we.value?(Do(),Lo("div",Voe,$s(we.value),1)):Nc("",!0),Nt("div",Uoe,[Nt("button",{class:"btn-primary",type:"submit",disabled:be.value},$s(be.value?"Saving...":ue.value?"Update Event":"Create Event"),9,Zoe),Bw(de,{class:"btn-secondary",to:"/admin/events"},{default:qM(()=>[_H("Cancel")]),_:1})])],32)]),Nt("div",Woe,[Nt("div",joe,[Goe,et.value?(Do(),Lo("div",qoe,"Loading artists...")):Nc("",!0)]),Nt("div",Koe,[re.value.title?(Do(),JQ(Bee,{key:0,event:Et.value},null,8,["event"])):(Do(),Lo("div",Yoe,Joe))])])])],512),[[AQ,ye.value==="details"]]),ue.value?qh((Do(),Lo("div",Qoe,[Bw(Mne,{eventId:F.id},null,8,["eventId"])],512)),[[AQ,ye.value==="checklist"]]):Nc("",!0)])}}}),ise=yJ(ese,[["__scopeId","data-v-d6ce2c86"]]);export{ise as default};
