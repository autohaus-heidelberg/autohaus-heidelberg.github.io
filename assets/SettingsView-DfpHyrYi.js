import{W as u,d as E,n as o,C as w,o as f,a as p,k as e,H as k,q as y,S as C,z as x,t as z,y as h,f as b,x as B,p as D,j as I,_ as V}from"./index-C3usxq6_.js";const m={async getByName(t){return u.get(`/api/settings/by-name/${t}/`)},async update(t,n){return u.patch(`/api/settings/${t}/`,{setting:n})},async create(t,n){return u.post("/api/settings/",{name:t,setting:n})}},_=t=>(D("data-v-83fe5236"),t=t(),I(),t),G={class:"settings-view"},H=_(()=>e("div",{class:"settings-header"},[e("h2",null,"Settings")],-1)),N={class:"tabs-nav"},T={class:"tab-content"},A=B('<div class="section-description" data-v-83fe5236><p data-v-83fe5236>Default content that appears in new Helferpad documents</p><p class="replacements-title" data-v-83fe5236>Available placeholders:</p><ul class="replacements-list" data-v-83fe5236><li data-v-83fe5236><code data-v-83fe5236>{{Eventname}}</code> - Event title</li><li data-v-83fe5236><code data-v-83fe5236>{{EventDate}}</code> - Event start date/time (German timezone)</li><li data-v-83fe5236><code data-v-83fe5236>{{EventGetIn}}</code> - Event start minus 3 hours (German timezone)</li><li data-v-83fe5236><code data-v-83fe5236>{{EventSoundCheck}}</code> - Event start minus 2 hours (German timezone)</li><li data-v-83fe5236><code data-v-83fe5236>{{EventDinner}}</code> - Event start minus 1 hour (German timezone)</li><li data-v-83fe5236><code data-v-83fe5236>{{EntranceFee}}</code> - AK price (or [TBA] if not set)</li><li data-v-83fe5236><code data-v-83fe5236>{{EventLink}}</code> - Link to event website </li></ul></div>',1),F={class:"form-group"},L=_(()=>e("label",{for:"helferpad-content"},"Default Content",-1)),M=["disabled"],$=_(()=>e("div",{class:"field-hint"},"Plain text only",-1)),P={key:0,class:"error"},j={key:1,class:"success"},q={class:"form-actions"},K=["disabled"],U=E({__name:"SettingsView",setup(t){const n=o("helferpad"),i=o(""),r=o(),v=o(!1),d=o(!1),l=o(""),c=o("");w(async()=>{var s;v.value=!0,l.value="";try{const a=await m.getByName("helferpad");i.value=a.setting.content||"",r.value=a.id}catch(a){((s=a.response)==null?void 0:s.status)===404?i.value="HelferPad":(l.value="Failed to load settings",console.error("Error loading settings:",a))}finally{v.value=!1}});async function S(){d.value=!0,l.value="",c.value="";try{if(r.value)await m.update(r.value,{content:i.value});else{const s=await m.create("helferpad",{content:i.value});r.value=s.id}c.value="Settings saved successfully!",setTimeout(()=>{c.value=""},3e3)}catch(s){l.value=s.message||"Failed to save settings",console.error("Error saving settings:",s)}finally{d.value=!1}}return(s,a)=>(f(),p("div",G,[H,e("div",N,[e("button",{class:k(["tab-button",{active:n.value==="helferpad"}]),onClick:a[0]||(a[0]=g=>n.value="helferpad")},"Helferpad",2)]),y(e("div",T,[A,e("form",{class:"setting-form",onSubmit:x(S,["prevent"])},[e("div",F,[L,y(e("textarea",{id:"helferpad-content","onUpdate:modelValue":a[1]||(a[1]=g=>i.value=g),disabled:v.value||d.value,rows:"15",placeholder:"Enter default Helferpad content..."},null,8,M),[[z,i.value]]),$]),l.value?(f(),p("div",P,h(l.value),1)):b("",!0),c.value?(f(),p("div",j,h(c.value),1)):b("",!0),e("div",q,[e("button",{class:"btn-primary",type:"submit",disabled:d.value||v.value},h(d.value?"Saving...":"Save Changes"),9,K)])],32)],512),[[C,n.value==="helferpad"]])]))}}),J=V(U,[["__scopeId","data-v-83fe5236"]]);export{J as default};
