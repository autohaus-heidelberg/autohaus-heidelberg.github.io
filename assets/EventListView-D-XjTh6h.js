import{d as S,n as _,c as y,C as V,o as s,a,k as o,q as N,t as F,e as k,w as g,y as l,F as w,l as C,A as I,r as B,h as L,f as p,p as T,j as $,_ as q}from"./index-C3usxq6_.js";import{e as E}from"./events-DVSK9dFx.js";const A=d=>(T("data-v-de49db63"),d=d(),$(),d),M={class:"event-list-view"},j={class:"header"},Q=A(()=>o("h2",null,"Events",-1)),R={class:"header-actions"},U={key:0,class:"loading"},z={key:1,class:"error"},G={key:2,class:"events-container"},H={class:"event-header"},J={class:"event-id"},K={class:"event-date"},O={class:"event-title"},P={key:0,class:"event-artists"},W={class:"event-footer"},X={class:"event-meta"},Y={key:0,class:"fee"},Z=["href"],ee={class:"event-actions"},te=["onClick"],se={key:3,class:"empty"},ae=S({__name:"EventListView",setup(d){I();const i=_(null),h=_(!1),c=_(""),r=_(""),f=y(()=>{var e;return((e=i.value)==null?void 0:e.results)||[]}),m=y(()=>{if(!r.value)return f.value;const e=r.value.toLowerCase();return f.value.filter(n=>n.title.toLowerCase().includes(e)||n.id.toLowerCase().includes(e)||n.artists.some(u=>u.name.toLowerCase().includes(e)))});async function D(){h.value=!0,c.value="";try{i.value=await E.getAll()}catch(e){c.value=e.message||"Failed to load events"}finally{h.value=!1}}async function b(e){if(confirm(`Delete event "${e.title}"?`))try{await E.delete(e.id),i.value&&(i.value.results=i.value.results.filter(n=>n.id!==e.id),i.value.count--)}catch(n){alert("Failed to delete event: "+n.message)}}function x(e){return new Date(e).toLocaleString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}return V(()=>{D()}),(e,n)=>{const u=B("router-link");return s(),a("div",M,[o("div",j,[Q,o("div",R,[N(o("input",{class:"search-input","onUpdate:modelValue":n[0]||(n[0]=t=>r.value=t),type:"text",placeholder:"Search events..."},null,512),[[F,r.value]]),k(u,{class:"btn-primary",to:"/admin/events/create"},{default:g(()=>[L("Create Event")]),_:1})])]),h.value?(s(),a("div",U,"Loading events...")):c.value?(s(),a("div",z,l(c.value),1)):m.value.length>0?(s(),a("div",G,[(s(!0),a(w,null,C(m.value,t=>(s(),a("div",{class:"event-card",key:t.id},[o("div",H,[o("div",J,l(t.id),1),o("div",K,l(x(t.date)),1)]),o("h3",O,l(t.title),1),t.artists.length?(s(),a("div",P,[(s(!0),a(w,null,C(t.artists,v=>(s(),a("span",{class:"artist",key:v.id||v.name},l(v.name),1))),128))])):p("",!0),o("div",W,[o("div",X,[t.fee?(s(),a("span",Y,l(t.fee)+" â‚¬",1)):p("",!0),t.shopLink?(s(),a("a",{key:1,class:"shop-link",href:t.shopLink,target:"_blank"},"Tickets",8,Z)):p("",!0)]),o("div",ee,[k(u,{class:"btn-edit",to:`/admin/events/${t.id}`},{default:g(()=>[L("Edit")]),_:2},1032,["to"]),o("button",{class:"btn-delete",onClick:v=>b(t)},"Delete",8,te)])])]))),128))])):(s(),a("div",se,"No events found"))])}}}),ie=q(ae,[["__scopeId","data-v-de49db63"]]);export{ie as default};
