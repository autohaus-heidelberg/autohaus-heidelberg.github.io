import{d as S,n as m,C as V,o as p,a as h,k as e,y as c,e as b,w as g,z as E,q as v,t as k,v as N,F,l as A,f as I,A as x,r as q,h as w,p as U,j as M,_ as R}from"./index-C3usxq6_.js";import{a as f}from"./checklist-be4Ln-Mi.js";const o=i=>(U("data-v-9a030698"),i=i(),M(),i),z={class:"checklist-template-form-view"},D={class:"form-container"},L={class:"form-header"},O={class:"form-group"},P=o(()=>e("label",{for:"name"},"Template Name *",-1)),W=o(()=>e("div",{class:"field-hint"},"Beschreibung der Aufgabe/Tätigkeit",-1)),j={class:"form-group"},G=o(()=>e("label",{for:"stage"},"Stage/Bereich *",-1)),K=o(()=>e("div",{class:"field-hint"},"In welchem Bereich die Aufgabe stattfindet",-1)),H={class:"form-group"},J=o(()=>e("label",{for:"phase"},"Phase *",-1)),Q=["value"],X=o(()=>e("div",{class:"field-hint"},"Wann die Aufgabe durchgeführt werden soll",-1)),Y={key:0,class:"error"},Z={class:"form-actions"},$=["disabled"],ee=S({__name:"ChecklistTemplateFormView",props:{id:{}},setup(i){const r=i,y=x(),u=!!r.id,a=m({name:"",stage:"",phase:"before"}),d=m(!1),s=m(""),C=[{value:"before",label:"BEFORE - Vor dem Event"},{value:"during",label:"DURING - Während dem Event"},{value:"after",label:"AFTER - Nach dem Event"}];async function T(){if(r.id)try{const n=await f.getById(Number(r.id));a.value={...n}}catch{s.value="Failed to load template"}}async function B(){if(!a.value.name||!a.value.stage||!a.value.phase){s.value="Please fill in all required fields";return}d.value=!0,s.value="";try{u?await f.update(Number(r.id),a.value):await f.create(a.value),y.push("/admin/checklist-templates")}catch(n){s.value=n.message||"Failed to save template"}finally{d.value=!1}}return V(async()=>{await T()}),(n,l)=>{const _=q("router-link");return p(),h("div",z,[e("div",D,[e("div",L,[e("h2",null,c(u?"Edit Checklist Template":"Create Checklist Template"),1),b(_,{class:"btn-cancel",to:"/admin/checklist-templates"},{default:g(()=>[w("Cancel")]),_:1})]),e("form",{class:"template-form",onSubmit:E(B,["prevent"])},[e("div",O,[P,v(e("input",{id:"name","onUpdate:modelValue":l[0]||(l[0]=t=>a.value.name=t),required:"",placeholder:"z.B. Sound Check, Aufbau Bar, Abrechnung"},null,512),[[k,a.value.name]]),W]),e("div",j,[G,v(e("input",{id:"stage","onUpdate:modelValue":l[1]||(l[1]=t=>a.value.stage=t),required:"",placeholder:"z.B. Technik, Bar, Backstage, Kasse"},null,512),[[k,a.value.stage]]),K]),e("div",H,[J,v(e("select",{id:"phase","onUpdate:modelValue":l[2]||(l[2]=t=>a.value.phase=t),required:""},[(p(),h(F,null,A(C,t=>e("option",{key:t.value,value:t.value},c(t.label),9,Q)),64))],512),[[N,a.value.phase]]),X]),s.value?(p(),h("div",Y,c(s.value),1)):I("",!0),e("div",Z,[e("button",{class:"btn-primary",type:"submit",disabled:d.value},c(d.value?"Saving...":u?"Update Template":"Create Template"),9,$),b(_,{class:"btn-secondary",to:"/admin/checklist-templates"},{default:g(()=>[w("Cancel")]),_:1})])],32)])])}}}),se=R(ee,[["__scopeId","data-v-9a030698"]]);export{se as default};
